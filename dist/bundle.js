/*! For license information please see bundle.js.LICENSE.txt */
(()=>{var e={187:e=>{"use strict";function t(e,t,i){i=i||2;var n,s,o,l,d,c,f,p=t&&t.length,g=p?t[0]*i:e.length,y=r(e,0,g,i,!0),v=[];if(!y||y.next===y.prev)return v;if(p&&(y=function(e,t,i,a){var n,s,o,l=[];for(n=0,s=t.length;n<s;n++)(o=r(e,t[n]*a,n<s-1?t[n+1]*a:e.length,a,!1))===o.next&&(o.steiner=!0),l.push(m(o));for(l.sort(h),n=0;n<l.length;n++)i=u(l[n],i);return i}(e,t,y,i)),e.length>80*i){n=o=e[0],s=l=e[1];for(var x=i;x<g;x+=i)(d=e[x])<n&&(n=d),(c=e[x+1])<s&&(s=c),d>o&&(o=d),c>l&&(l=c);f=0!==(f=Math.max(o-n,l-s))?32767/f:0}return a(y,v,i,n,s,f,0),v}function r(e,t,r,i,a){var n,s;if(a===w(e,t,r,i)>0)for(n=t;n<r;n+=i)s=A(n,e[n],e[n+1],s);else for(n=r-i;n>=t;n-=i)s=A(n,e[n],e[n+1],s);return s&&y(s,s.next)&&(E(s),s=s.next),s}function i(e,t){if(!e)return e;t||(t=e);var r,i=e;do{if(r=!1,i.steiner||!y(i,i.next)&&0!==g(i.prev,i,i.next))i=i.next;else{if(E(i),(i=t=i.prev)===i.next)break;r=!0}}while(r||i!==t);return t}function a(e,t,r,h,u,d,m){if(e){!m&&d&&function(e,t,r,i){var a=e;do{0===a.z&&(a.z=c(a.x,a.y,t,r,i)),a.prevZ=a.prev,a.nextZ=a.next,a=a.next}while(a!==e);a.prevZ.nextZ=null,a.prevZ=null,function(e){var t,r,i,a,n,s,o,l,h=1;do{for(r=e,e=null,n=null,s=0;r;){for(s++,i=r,o=0,t=0;t<h&&(o++,i=i.nextZ);t++);for(l=h;o>0||l>0&&i;)0!==o&&(0===l||!i||r.z<=i.z)?(a=r,r=r.nextZ,o--):(a=i,i=i.nextZ,l--),n?n.nextZ=a:e=a,a.prevZ=n,n=a;r=i}n.nextZ=null,h*=2}while(s>1)}(a)}(e,h,u,d);for(var f,p,g=e;e.prev!==e.next;)if(f=e.prev,p=e.next,d?s(e,h,u,d):n(e))t.push(f.i/r|0),t.push(e.i/r|0),t.push(p.i/r|0),E(e),e=p.next,g=p.next;else if((e=p)===g){m?1===m?a(e=o(i(e),t,r),t,r,h,u,d,2):2===m&&l(e,t,r,h,u,d):a(i(e),t,r,h,u,d,1);break}}}function n(e){var t=e.prev,r=e,i=e.next;if(g(t,r,i)>=0)return!1;for(var a=t.x,n=r.x,s=i.x,o=t.y,l=r.y,h=i.y,u=a<n?a<s?a:s:n<s?n:s,d=o<l?o<h?o:h:l<h?l:h,c=a>n?a>s?a:s:n>s?n:s,m=o>l?o>h?o:h:l>h?l:h,p=i.next;p!==t;){if(p.x>=u&&p.x<=c&&p.y>=d&&p.y<=m&&f(a,o,n,l,s,h,p.x,p.y)&&g(p.prev,p,p.next)>=0)return!1;p=p.next}return!0}function s(e,t,r,i){var a=e.prev,n=e,s=e.next;if(g(a,n,s)>=0)return!1;for(var o=a.x,l=n.x,h=s.x,u=a.y,d=n.y,m=s.y,p=o<l?o<h?o:h:l<h?l:h,y=u<d?u<m?u:m:d<m?d:m,v=o>l?o>h?o:h:l>h?l:h,x=u>d?u>m?u:m:d>m?d:m,_=c(p,y,t,r,i),b=c(v,x,t,r,i),T=e.prevZ,A=e.nextZ;T&&T.z>=_&&A&&A.z<=b;){if(T.x>=p&&T.x<=v&&T.y>=y&&T.y<=x&&T!==a&&T!==s&&f(o,u,l,d,h,m,T.x,T.y)&&g(T.prev,T,T.next)>=0)return!1;if(T=T.prevZ,A.x>=p&&A.x<=v&&A.y>=y&&A.y<=x&&A!==a&&A!==s&&f(o,u,l,d,h,m,A.x,A.y)&&g(A.prev,A,A.next)>=0)return!1;A=A.nextZ}for(;T&&T.z>=_;){if(T.x>=p&&T.x<=v&&T.y>=y&&T.y<=x&&T!==a&&T!==s&&f(o,u,l,d,h,m,T.x,T.y)&&g(T.prev,T,T.next)>=0)return!1;T=T.prevZ}for(;A&&A.z<=b;){if(A.x>=p&&A.x<=v&&A.y>=y&&A.y<=x&&A!==a&&A!==s&&f(o,u,l,d,h,m,A.x,A.y)&&g(A.prev,A,A.next)>=0)return!1;A=A.nextZ}return!0}function o(e,t,r){var a=e;do{var n=a.prev,s=a.next.next;!y(n,s)&&v(n,a,a.next,s)&&b(n,s)&&b(s,n)&&(t.push(n.i/r|0),t.push(a.i/r|0),t.push(s.i/r|0),E(a),E(a.next),a=e=s),a=a.next}while(a!==e);return i(a)}function l(e,t,r,n,s,o){var l=e;do{for(var h=l.next.next;h!==l.prev;){if(l.i!==h.i&&p(l,h)){var u=T(l,h);return l=i(l,l.next),u=i(u,u.next),a(l,t,r,n,s,o,0),void a(u,t,r,n,s,o,0)}h=h.next}l=l.next}while(l!==e)}function h(e,t){return e.x-t.x}function u(e,t){var r=function(e,t){var r,i=t,a=e.x,n=e.y,s=-1/0;do{if(n<=i.y&&n>=i.next.y&&i.next.y!==i.y){var o=i.x+(n-i.y)*(i.next.x-i.x)/(i.next.y-i.y);if(o<=a&&o>s&&(s=o,r=i.x<i.next.x?i:i.next,o===a))return r}i=i.next}while(i!==t);if(!r)return null;var l,h=r,u=r.x,c=r.y,m=1/0;i=r;do{a>=i.x&&i.x>=u&&a!==i.x&&f(n<c?a:s,n,u,c,n<c?s:a,n,i.x,i.y)&&(l=Math.abs(n-i.y)/(a-i.x),b(i,e)&&(l<m||l===m&&(i.x>r.x||i.x===r.x&&d(r,i)))&&(r=i,m=l)),i=i.next}while(i!==h);return r}(e,t);if(!r)return t;var a=T(r,e);return i(a,a.next),i(r,r.next)}function d(e,t){return g(e.prev,e,t.prev)<0&&g(t.next,e,e.next)<0}function c(e,t,r,i,a){return(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e=(e-r)*a|0)|e<<8))|e<<4))|e<<2))|e<<1))|(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t=(t-i)*a|0)|t<<8))|t<<4))|t<<2))|t<<1))<<1}function m(e){var t=e,r=e;do{(t.x<r.x||t.x===r.x&&t.y<r.y)&&(r=t),t=t.next}while(t!==e);return r}function f(e,t,r,i,a,n,s,o){return(a-s)*(t-o)>=(e-s)*(n-o)&&(e-s)*(i-o)>=(r-s)*(t-o)&&(r-s)*(n-o)>=(a-s)*(i-o)}function p(e,t){return e.next.i!==t.i&&e.prev.i!==t.i&&!function(e,t){var r=e;do{if(r.i!==e.i&&r.next.i!==e.i&&r.i!==t.i&&r.next.i!==t.i&&v(r,r.next,e,t))return!0;r=r.next}while(r!==e);return!1}(e,t)&&(b(e,t)&&b(t,e)&&function(e,t){var r=e,i=!1,a=(e.x+t.x)/2,n=(e.y+t.y)/2;do{r.y>n!=r.next.y>n&&r.next.y!==r.y&&a<(r.next.x-r.x)*(n-r.y)/(r.next.y-r.y)+r.x&&(i=!i),r=r.next}while(r!==e);return i}(e,t)&&(g(e.prev,e,t.prev)||g(e,t.prev,t))||y(e,t)&&g(e.prev,e,e.next)>0&&g(t.prev,t,t.next)>0)}function g(e,t,r){return(t.y-e.y)*(r.x-t.x)-(t.x-e.x)*(r.y-t.y)}function y(e,t){return e.x===t.x&&e.y===t.y}function v(e,t,r,i){var a=_(g(e,t,r)),n=_(g(e,t,i)),s=_(g(r,i,e)),o=_(g(r,i,t));return a!==n&&s!==o||!(0!==a||!x(e,r,t))||!(0!==n||!x(e,i,t))||!(0!==s||!x(r,e,i))||!(0!==o||!x(r,t,i))}function x(e,t,r){return t.x<=Math.max(e.x,r.x)&&t.x>=Math.min(e.x,r.x)&&t.y<=Math.max(e.y,r.y)&&t.y>=Math.min(e.y,r.y)}function _(e){return e>0?1:e<0?-1:0}function b(e,t){return g(e.prev,e,e.next)<0?g(e,t,e.next)>=0&&g(e,e.prev,t)>=0:g(e,t,e.prev)<0||g(e,e.next,t)<0}function T(e,t){var r=new S(e.i,e.x,e.y),i=new S(t.i,t.x,t.y),a=e.next,n=t.prev;return e.next=t,t.prev=e,r.next=a,a.prev=r,i.next=r,r.prev=i,n.next=i,i.prev=n,i}function A(e,t,r,i){var a=new S(e,t,r);return i?(a.next=i.next,a.prev=i,i.next.prev=a,i.next=a):(a.prev=a,a.next=a),a}function E(e){e.next.prev=e.prev,e.prev.next=e.next,e.prevZ&&(e.prevZ.nextZ=e.nextZ),e.nextZ&&(e.nextZ.prevZ=e.prevZ)}function S(e,t,r){this.i=e,this.x=t,this.y=r,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}function w(e,t,r,i){for(var a=0,n=t,s=r-i;n<r;n+=i)a+=(e[s]-e[n])*(e[n+1]+e[s+1]),s=n;return a}e.exports=t,e.exports.default=t,t.deviation=function(e,t,r,i){var a=t&&t.length,n=a?t[0]*r:e.length,s=Math.abs(w(e,0,n,r));if(a)for(var o=0,l=t.length;o<l;o++){var h=t[o]*r,u=o<l-1?t[o+1]*r:e.length;s-=Math.abs(w(e,h,u,r))}var d=0;for(o=0;o<i.length;o+=3){var c=i[o]*r,m=i[o+1]*r,f=i[o+2]*r;d+=Math.abs((e[c]-e[f])*(e[m+1]-e[c+1])-(e[c]-e[m])*(e[f+1]-e[c+1]))}return 0===s&&0===d?0:Math.abs((d-s)/s)},t.flatten=function(e){for(var t=e[0][0].length,r={vertices:[],holes:[],dimensions:t},i=0,a=0;a<e.length;a++){for(var n=0;n<e[a].length;n++)for(var s=0;s<t;s++)r.vertices.push(e[a][n][s]);a>0&&(i+=e[a-1].length,r.holes.push(i))}return r}},729:e=>{"use strict";var t=Object.prototype.hasOwnProperty,r="~";function i(){}function a(e,t,r){this.fn=e,this.context=t,this.once=r||!1}function n(e,t,i,n,s){if("function"!=typeof i)throw new TypeError("The listener must be a function");var o=new a(i,n||e,s),l=r?r+t:t;return e._events[l]?e._events[l].fn?e._events[l]=[e._events[l],o]:e._events[l].push(o):(e._events[l]=o,e._eventsCount++),e}function s(e,t){0==--e._eventsCount?e._events=new i:delete e._events[t]}function o(){this._events=new i,this._eventsCount=0}Object.create&&(i.prototype=Object.create(null),(new i).__proto__||(r=!1)),o.prototype.eventNames=function(){var e,i,a=[];if(0===this._eventsCount)return a;for(i in e=this._events)t.call(e,i)&&a.push(r?i.slice(1):i);return Object.getOwnPropertySymbols?a.concat(Object.getOwnPropertySymbols(e)):a},o.prototype.listeners=function(e){var t=r?r+e:e,i=this._events[t];if(!i)return[];if(i.fn)return[i.fn];for(var a=0,n=i.length,s=new Array(n);a<n;a++)s[a]=i[a].fn;return s},o.prototype.listenerCount=function(e){var t=r?r+e:e,i=this._events[t];return i?i.fn?1:i.length:0},o.prototype.emit=function(e,t,i,a,n,s){var o=r?r+e:e;if(!this._events[o])return!1;var l,h,u=this._events[o],d=arguments.length;if(u.fn){switch(u.once&&this.removeListener(e,u.fn,void 0,!0),d){case 1:return u.fn.call(u.context),!0;case 2:return u.fn.call(u.context,t),!0;case 3:return u.fn.call(u.context,t,i),!0;case 4:return u.fn.call(u.context,t,i,a),!0;case 5:return u.fn.call(u.context,t,i,a,n),!0;case 6:return u.fn.call(u.context,t,i,a,n,s),!0}for(h=1,l=new Array(d-1);h<d;h++)l[h-1]=arguments[h];u.fn.apply(u.context,l)}else{var c,m=u.length;for(h=0;h<m;h++)switch(u[h].once&&this.removeListener(e,u[h].fn,void 0,!0),d){case 1:u[h].fn.call(u[h].context);break;case 2:u[h].fn.call(u[h].context,t);break;case 3:u[h].fn.call(u[h].context,t,i);break;case 4:u[h].fn.call(u[h].context,t,i,a);break;default:if(!l)for(c=1,l=new Array(d-1);c<d;c++)l[c-1]=arguments[c];u[h].fn.apply(u[h].context,l)}}return!0},o.prototype.on=function(e,t,r){return n(this,e,t,r,!1)},o.prototype.once=function(e,t,r){return n(this,e,t,r,!0)},o.prototype.removeListener=function(e,t,i,a){var n=r?r+e:e;if(!this._events[n])return this;if(!t)return s(this,n),this;var o=this._events[n];if(o.fn)o.fn!==t||a&&!o.once||i&&o.context!==i||s(this,n);else{for(var l=0,h=[],u=o.length;l<u;l++)(o[l].fn!==t||a&&!o[l].once||i&&o[l].context!==i)&&h.push(o[l]);h.length?this._events[n]=1===h.length?h[0]:h:s(this,n)}return this},o.prototype.removeAllListeners=function(e){var t;return e?(t=r?r+e:e,this._events[t]&&s(this,t)):(this._events=new i,this._eventsCount=0),this},o.prototype.off=o.prototype.removeListener,o.prototype.addListener=o.prototype.on,o.prefixed=r,o.EventEmitter=o,e.exports=o},659:(e,t,r)=>{"use strict";var i=r(767);i.allRaces,t.a2=i.generateName},767:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=r(723),a=["cavePerson","dwarf","halfling","gnome","elf","highelf","fairy","highfairy","darkelf","drow","halfdemon","dragon","angel"],n=["demon","human","goblin","ogre","orc"];t.allRaces={otherRaces:n,racesWithGender:a,sorted:function(){return a.concat(n).sort()}},t.generateName=function(e,t){void 0===t&&(t={});var r=t.gender,n=t.allowMultipleNames;if(a.includes(e)&&void 0!==r)switch(e){case"angel":return i.angel(r);case"cavePerson":return i.cavePerson(r);case"darkelf":return i.darkelf(r);case"dragon":return i.dragon(r);case"drow":return i.drow(r);case"dwarf":return i.dwarf(r);case"elf":return i.elf(r);case"fairy":return i.fairy(r);case"gnome":return i.gnome(r);case"halfdemon":return i.halfdemon(r);case"halfling":return i.halfling(r);case"highelf":return i.highelf(r);case"highfairy":return i.highfairy(r)}switch(e){case"demon":return i.demon();case"goblin":return i.goblin();case"human":return i.human(n);case"ogre":return i.ogre();case"orc":return i.orc()}return new Error("Must provide a gender!")}},31:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.names={vileAndCrude:{small:["ach","adz","ak","ark","az","balg","bilg","blid","blig","blok","blot","bolg","bot","bug","burk","dokh","drik","driz","duf","flug","ga","gad","gag","gah","gak","gar","gat","gaz","ghag","ghak","git","glag","glak","glat","glig","gliz","glok","gnat","gog","grak","grat","guk","hig","irk","kak","khad","krig","lag","lak","lig","likk","loz","luk","mak","maz","miz","mub","nad","nag","naz","nig","nikk","nogg","nok","nukk","rag","rak","rat","rok","shrig","shuk","skrag","skug","slai","slig","slog","sna","snag","snark","snat","snig","snik","snit","sog","spik","stogg","tog","urf","vark","yad","yagg","yak","yark","yarp","yig","yip","zat","zib","zit","ziz"],medium:["ag","aug","bad","bag","bakh","bash","baz","blag","brag","brog","bruz","dag","dakk","darg","dob","dog","drab","dug","dur","gash","ghaz","glakh","glaz","glob","glol","gluf","glur","gnarl","gnash","gnub","gob","gokh","gol","golk","gor","grakh","grash","grath","graz","grot","grub","grud","gud","gut","hag","hakk","hrat","hrog","hrug","khag","khar","krag","krud","lakh","lash","lob","lub","lud","luf","luk","molk","muk","muz","nar","ogg","olg","rag","rash","rogg","rorg","rot","rud","ruft","rug","rut","shad","shag","shak","shaz","shog","skar","skulg","slur","snar","snorl","snub","snurr","sod","stulg","thak","trog","ug","umsh","ung","uth","yakh","yash","yob","zahk","zog"],large:["argh","barsh","bog","burz","dof","drok","drub","drug","dub","dug","dul","dursh","dush","duz","faug","fug","ghakh","ghar","ghash","ghol","ghor","ghukk","ghul","glub","glud","glug","gluz","gom","grad","grash","grob","grogg","grok","grol","gru","gruf","gruk","grul","grum","grumf","grut","gruz","guhl","gulv","hai","hrung","hur","hurg","kai","klob","krod","kug","kulk","kur","lorg","lug","lukh","lum","lurz","lush","luz","makh","maug","molg","mud","mug","mul","murk","muzd","nakh","narg","obb","rolb","rukh","ruz","sharg","shruf","shud","shug","shur","shuz","slub","slud","slug","snad","snog","thrag","thulk","thurk","trug","ulg","ur","urd","urgh","urkh","uz","yug","yur","zud","zug"]},primitive:{names:["ahg","baod","beegh","bohr","bul","buli","burh","buri","chah","dhak","digri","dum","eghi","ehm","faogh","feehm","ghad","ghah","gham","ghan","ghat","ghaw","ghee","ghish","ghug","giree","gonkh","goun","goush","guh","gunri","hah","hani","haogh","hatoo","heghi","heh","hoo","houm","hree","ig","kham","khan","khaz","khee","khem","khuri","logh","lugh","maoh","meh","mogh","mouh","mugh","naoh","naroo","nham","nuh","ob","oli","orf","ough","ouh","peh","pogh","pugh","puh","quagi","rahoo","rhoo","rifoo","ronkh","rouk","saom","saori","shehi","shlo","shom","shour","shul","snaoh","suhi","suth","teb","thom","toudh","tregh","tuhli","ub","urush","ush","vuh","wah","wuh","yaum","yauth","yeeh","yih","yuh","zham"],suffixes:["doh","rei","mih","fah","soh","lah","tih","daoh"]},doughty:{syllables:["bal","durn","na","bord","from","nor","born","fror","nord","brim","fuld","orm","brod","fund","skand","brokk","gim","skond","brom","glo","storn","bru","gond","strom","bur","gord","stur","burl","gorm","sturl","da","grad","sund","dal","grim","thor","dolg","grod","thorn","dor","grom","thra","dorm","guld","thro","dral","gund","throl","drim","gur","thror","drom","hord","thru","dur","horn","thrur","durm","hra","thund"],maleSuffixes:["bor","din","in","in","in","ir","li","li","lin","nir","or","ri","ri","rin","rok","ror","rur","vi","vir","vor"],femaleSuffixes:["bis","da","dis","dis","dis","dis","ga","hild","is","is","lif","lind","lis","na","nis","ris","rith","run","run","vis"]},homely:{syllables:["ad","blanc","falc","mil","adel","boff","ferd","mung","adr","bomb","frob","od","ail","bram","fulb","oth","alb","bung","gam","sab","alm","droc","hald","sam","amb","drog","ham","seg","band","durl","hasc","serl","bard","emm","hod","tob","ben","erd","hug","wan","biff","ern","iv","wig","bild","ever","mark","wyd"],maleSuffixes:["ald","ard","ert","fast","o","o","o","o","o","old","win","wise"],femaleSuffixes:["a","a","a","a","a","ia","ia","ice","ily","ina","wina","wisa"]},familyName:{english:["Adshead","Akers","Antell","Applegarth","Babb","Babbs","Baffin","Bagg","Baggett","Bagnall","Baldey","Bamber","Bark","Barling","Barnstable","Barraclough","Bastable","Bastin","Bather","Batkin","Batt","Bazley","Bebb","Beddall","Beeby","Beecroft","Beedell","Bellis","Belsey","Berridge","Besley","Bibby","Bickle","Biddle","Biddulph","Bigg","Binks","Binns","Bisp","Biss","Blenk","Blenkin","Boam","Bobo","Boddington","Boffey","Bonger","Bonney","Bonser","Borrett","Bossey","Botterill","Botting","Bottom","Bottomley","Botwright","Bowser","Bracher","Brasnett","Brayley","Breary","Brickwood","Brindley","Broadfoot","Broadribb","Brocksopp","Broster","Buckmaster","Budge","Buffard","Bugg","Buggy","Bulger","Bulman","Bunce","Bunt","Burrow","Bushby","Buss","Cade","Cadwaller","Cantrill","Cardno","Catlow","Cattermole","Chaffe","Chaffer","Chard","Chettle","Chilcott","Chitty","Chivers","Chubb","Chugg","Clewes","Coaker","Cobden","Cobley","Coggan","Coggins","Collop","Coney","Coote","Copp","Coppard","Cornock","Cossey","Cottle","Coultip","Crang","Crimp","Croom","Crowles","Cubitt","Cullimore","Cuss","Custance","Cuthbert","Dabbin","Dabbing","Dabbs","Dagg","Dainty","Deeley","Derrick","Dibb","Dibble","Diccox","Diggins","Diggle","Diggles","Digweed","Dimmock","Dinsdale","Dipple","Dobbie","Dobby","Doggett","Dorey","Drabble","Draycott","Dring","Drudge","Duffield","Dufty","Duggan","Duggleby","Dumbrell","Dunkley","Eatwell","Eggins","Entwistle","Erlam","Etchells","Fairclough","Felgate","Fensome","Fenton","Fidge","Fidoe","Figg","Filer","Fincham","Firkins","Flann","Flanner","Flippance","Flook","Flunder","Followes","Fooks","Fremlin","Frisby","Frogley","Frohock","Froome","Frow","Fuggle","Furse","Furze","Gabb","Gaffey","Gagg","Gander","Garbutt","Garlick","Garn","Gazard","Gedge","Giblett","Giddy","Gigg","Gilliat","Gimble","Gimson","Ginger","Gipps","Girdler","Gissing","Gleave","Goggin","Gollogly","Gomm","Goodier","Gook","Gorringe","Gorwyn","Gosden","Gribble","Grigg","Griggs","Grill","Grimble","Grimes","Grimshaw","Grist","Grubb","Guckeen","Guckian","Guild","Gull","Gully","Gumbold","Gummer","Gummidge","Gurden","Haffenden","Hales","Halse","Harpham","Hartle","Hatch","Hayhurst","Hearle","Henley","Henwood","Heppell","Herrick","Herring","Hesketh","Hext","Hicken","Hickmott","Higman","Hinchcliffe","Hindmarsh","Hobley","Hoddy","Hogben","Holdom","Hollick","Holtom","Honeysett","Hook","Hopley","Hopps","Horrocks","Horsfall","Horwood","Hotten","Housely","Howie","Huff","Huffam","Hutton","Huxtable","Icke","Idden","Inskip","Iveson","Izzard","Jaggs","Jellis","Jepson","Jesty","Keel","Keetley","Kerkin","Kerslake","Kettley","Killick","Kinch","Knaggs","Kneebone","Knopp","Knott","Lagden","Laslett","Laverick","Leaper","Leggett","Liddane","Liddy","Liggan","Lithgoe","Lobb","Lodder","Looby","Loody","Lubbock","Luff","Lugard","Lugg","Lumsden","Lyle","Mabb","Mabbitt","Mabbot","Mabbs","Mabbutt","Maffey","Mallam","Mangold","Mapp","Mappin","Marfell","Matthams","Maunder","Maxted","Mayo","Meech","Meeson","Meggison","Meggitt","Meggs","Mellings","Merrikin","Metherell","Mew","Miggles","Miggs","Milsom","Milson","Minchin","Minns","Mobbs","Moberly","Mockler","Mogford","Mogg","Moggs","Morkam","Morphett","Mossman","Mossop","Mottershead","Moulds","Muddle","Muddock","Mudge","Mullock","Murch","Murfin","Murfitt","Musson","Mustill","Mutter","Mutton","Nance","Napper","Neep","Negus","Netherway","Newitt","Niblett","Nickless","Noad","Nobbs","Noblet","Nosworthy","Nottage","Nutt","Offen","Oram","Orcutt","Ord","Orpe","Paddock","Paddon","Pannell","Parham","Pavey","Peay","Peever","Pegg","Pegge","Pegler","Pegrum","Pelly","Pelter","Pendle","Petch","Petcher","Petchey","Pettipher","Philp","Phippen","Phippin","Pickersgill","Pickley","Pickwell","Pidduck","Pigg","Pilkington","Pimblett","Pingree","Pinch","Pinn","Pither","Pochin","Poggs","Polkinghorne","Pomeroy","Pomfret","Postlethwaite","Potticary","Poxon","Pring","Pringle","Prisk","Proudfoot","Puddicombe","Pudding","Puddy","Pugsley","Purslove","Pym","Quaife","Quain","Quenby","Quibell","Quigg","Raddle","Ranby","Rapkins","Ratter","Reakes","Reeson","Riddle","Rix","Roddis","Rosser","Ruddle","Ruffle","Rugg","Rumming","Rump","Sadd","Samways","Sankey","Scantlebury","Scoones","Scouse","Scragg","Scrimgeour","Scroggs","Scruby","Scutt","Sefton","Selth","Semmens","Seward","Shalloo","Sharples","Siggers","Sirett","Skeels","Skerrett","Slee","Sluggett","Smedley","Snoddy","Snuggs","Sparrow","Sparrowhawke","Spink","Spinks","Spriggs","Springett","Sproat","Sprunt","Spurle","Spurrett","Spurrier","Squance","Squarey","Squibb","Squirrel","Staines","Steggal","Stelfox","Stirk","Stith","Strag","Straw","Strutt","Stubbins","Stuppies","Suggett","Swaffer","Swaffield","Swarbrick","Symes","Tabor","Tagg","Tapping","Tarr","Tassell","Teale","Thew","Thick","Thornber","Thwaites","Tibbins","Tibbits","Tibbles","Tibbotts","Tink","Tippell","Tipping","Tippins","Tippling","Tipton","Tisser","Tittmuss","Tobitt","Tonks","Topping","Towse","Toye","Tozer","Trafford","Treasure","Tremlett","Trett","Trible","Tricker","Tripe","Trippe","Tripper","Trist","Troake","Trotter","Trouncer","Trumble","Tudge","Tuffin","Tufley","Tulk","Tully","Tumman","Tunks","Tunnah","Tunnicliffe","Turnock","Tween","Tyrer","Unsworth","Uttley","Varney","Vooght","Wackrill","Waddilove","Waddilow","Walthew","Waltho","Walwin","Wanless","Wann","Waple","Waring","Warrilow","Welburn","Wenden","Werrett","Wescott","Whinnett","Whiskard","Whisker","Whitefoot","Whitlow","Wibberley","Widdicombe","Widdows","Widdup","Wigg","Wigley","Wilberforce","Wilmer","Wintle","Witherden","Witney","Witter","Wolnoth","Woodhead","Wookey","Woolland","Woombill","Worrel","Worsley","Wortley","Wragg","Wrixon","Yeandle","Yeend","Yemm","Yould"],scottish:["Aiken","Aitken","Baikie","Baillie","Bainbridge","Baird","Bairnsfeather","Balios","Balnaves","Barbour","Barclay","Barrie","Beattie","Beilby","Bell","Bellenden","Berwick","Blackie","Blackwood","Blaikie","Blair","Bogue","Boyce","Braid","Brechin","Brisbane","Brough","Brougham","Brown","Brownlee","Brymner","Cairns","Calderwood","Candlish","Cardus","Cargill","Caven","Christison","Clyde","Cochran","Cochrane","Cockburn","Colomb","Crockett","Cronin","Cruden","Cunningham","Cushny","Dalziel","Deems","Dempster","Dinwiddie","Doohan","Doone","Dunbar","Dundas","Dundee","Dunn","Dunning","Eccles","Eckford","Edmonstone","Elder","Fairbairn","Falconer","Fenwick","Ferrier","Gairdner","Galloway","Galt","Geddes","Geikie","Glass","Glendon","Graham","Gregory","Guthrie","Haig","Halkett","Herdman","Hogg","Imey","Inchbald","Inglis","Irvine","Ivory","Jebb","Kerr","Kircaldy","Kirk","Kirkbride","Laird","Laughlin","Lawson","Legge","Lillie","Lipton","Lockhart","Lorimer","Lyall","Lyte","Masson","Melrose","Mill","Miller","Milligan","Milner","Moffat","Mollison","Moncrief","Montrose","Motherwell","Muir","Muirhead","Murray","Nairn","Naysmith","Nesbit","Nisbet","Noël","Orchardson","Pasley","Paterson","Pender","Preston","Primrose","Pringle","Quiller","Raeburn","Ransay","Redpath","Renfrew","Rennie","Renwick","Sanderson","Semphill","Smiles","Smollett","Smybert","Spenlove","Sterling","Stirling","Strang","Strange","Strangeways","Tait","Tannahill","Tassie","Thom","Tolmie","Urquhart","Wardlaw","Wedderburn","Whearty","Wilkie","Wiseheart","Wishart","Yarrow"]},fairAndNoble:{elfPrefixes:["an","im","ar","in","cal","ir","car","ist","cel","lar","cir","lir","clar","lor","el","mar","elb","mel","er","mer","erl","mir","est","nim","far","nin","fin","nir","gal","ral","gan","ran","gar","rel","gel","ril","gil","rin","ilm","rim"],alternativeElfPrefixes:["aeg","lith","ael","maeg","aer","mind","aes","mith","aeth","nith","bel","rael","ber","rind","cael","saer","caer","sar","cris","seld","ear","ser","elth","sil","eol","silm","faer","sind","fean","thael","find","thaer","ith","thal","laeg","thel","lend","ther","lind","thir"],middle:["ad","al","am","an","ar","as","eb","ed","el","em","en","er","es","ev","il","in","ir","ol","thal","thon"],maleSuffixes:["ad","dan","del","dil","dir","fal","ion","ion","lad","las","lin","nar","or","orn","ras","rior","rod","rond","ros","thir"],femaleSuffixes:["edel","el","eth","ian","iel","iel","ien","loth","mir","rial","rian","riel","riel","rien","ril","roël","sil","wë","wen","wen"]},fairy:{prefixes:["dex","gliss","tink","flax","goss","tiss","flim","hex","trill","fliss","liss","trist","flix","min","twill","foss","misk","twiss","frisk","raff","twisp","friss","ress","twix","gess","riff","weft","glan","rill","wesk","glax","saff","winn","glim","shim","wisp"],maleSuffixes:["aldo","allo","amo","ando","aroll","aron","asto","endo","eroll","eron","esto","ondo"],femaleSuffixes:["afer","amer","anel","arel","asti","efer","enti","erel","ifer","imer","inel","irel"]},alternateFairy:{prefixes:["bris","iphil","opal","cryl","ispel","oris","elsi","istle","orif","ember","jat","peri","esk","jost","sarm","feris","jus","sprin","frimi","lirra","stith","gan","mali","tansi","glink","mink","tirra","hal","mirra","trump","hel","mistle","whis","hist","ninka","zando"],maleSuffixes:["bik","brix","frell","fret","kin","mist","mit","rix","tross","twik","win","zisk"],femaleSuffixes:["dee","kiss","la","liss","mee","niss","nyx","ree","riss","sa","tiss","ynx"]},elegantEvil:{prefixesDarkElves:["bal","myr","ber","ne","char","nel","de","nil","div","no","dri","nyl","dul","rel","eil","rha","ek","ru","im","sab","ins","sin","ist","sul","jeg","sus","jer","tel","jys","tul","lil","ver","mar","vil","mer","vir","mez","vril","mor","yas"],prefixesAlternateDarkElves:["bur","olg","chor","on","col","or","dol","org","dor","oth","drom","pan","dur","pel","en","por","er","sek","gon","sol","gul","sun","jend","ten","kil","thal","lul","tor","mab","torm","maz","vek","mol","vol","nor","vor","noth","yel","ol","yol"],middle:["dyl","el","en","er","id","il","is","lav","len","lev","lin","liv","pel","pir","ra","ral","ril","rin","sin","syl"],maleSuffixes:["ald","eld","id","ild","ird","lim","naz","nid","nil","nim","red","rid","rim","riv","ul","uld","vid","vim","vir","viz"],femaleSuffixes:["bra","dra","dril","ene","hel","ia","il","iln","ira","istra","ith","iza","lin","na","ra","rin","sil","tra","vra","vril"]},malevolent:{prefixes:["aag","karg","ulthu","alur","khark","urz","arak","krau","uti","az","kriv","uznid","azik","kuaz","virn","bral","kudu","vlaaj","braz","luri","vlag","bruh","mulk","vlash","draan","nau","vluk","drulg","nid","vluzak","guz","ninj","vraz","haug","nul","vulk","idru","nym","xau","jhaal","ranag","xid","jid","rilthu","xul","jiu","ruk","xuraj","jur","rulk","zauv","jurg","ruz","zug","jurz","saag","zuldu","kaaz","skaur","zuv"],maleSuffixes:["arag","bru","drul","inu","lank","lun","lurr","lurug","nal","rul","ruzuk","salk","sul","suruk","ull","undak","uvik","xulg","zu","zuk"],femaleSuffixes:["anil","bau","diu","dusla","giu","ija","izil","jiul","lihyl","lin","lyrr","nalu","rhyl","rula","skiu","sula","ulla","xhiu","zihyl","ziu"]},draconic:{prefixes:["abra","har","phrixu","adastra","helio","porphyro","adra","huro","pyra","anca","iul","rhada","andra","jalan","rhe","arag","jarzem","rhodo","archo","jazra","rau","atra","jurga","sar","bar","keruxa","sarcu","bara","kralka","sarda","beru","lazulo","scarva","bhakri","majuri","sidereo","bia","malacho","skhia","bra","mar","sulchru","brado","marmora","tchalcedo","brima","melkar","tchazar","cadra","orgra","trocho","chro","ouro","vra","chryso","perido","zalar","glau","phoro","zerul"],suffixes:["bazius","boros","bradax","calchax","cordax","lagon","malax","mandros","manthys","mordax","nadral","nalux","neriax","phylax","vorax","vorung","xenor","zuthrax","zzebrax","zzemal"]},infernal:{softs:["alu","alz","avu","azaz","baph","baz","cha","fraz","garl","garu","gla","hra","mal","nahu","nal","nasu","paz","raz","tha","thalu","bre","dre","gel","gle","gre","hez","rez","rezu","tze","gzi","hriz","hzi","idrau","itha","ixu","lilu","riz","yil","dromu","gro","lol","moz","olth","oxu","sco","tho","bu","bul","buz","chru","dru","ghu","gura","guz","hruz","huz","kul","lurhz","muz","ru","shu","ssu","szul","thu","ulchru","utu","vul","zu","zul","baal","ghaa","kraa","phaal","raal","saa","bial","oazo","soaz","ruaz","gya","yaa","bael","nee","ziel","yee","aiaz","shai","reoz","duoi","drau","ghau","glau","mau","sau","tzau","iuz","juu","rhuu","vuul","zuu"],dulls:["agh","alg","barg","chag","ghad","glab","grag","hrag","kag","kwarg","mag","nalb","sag","tharg","brelg","dergh","dregh","drelb","felg","heg","kleg","igg","rigg","blog","drog","grolb","kolg","krolg","lolg","mog","morg","nog","obb","ogg","olb","rogg","strog","thog","trob","tzolg","vogt","bub","bulg","druj","durg","frub","fulg","gub","hrud","hurg","jub","julb","nud","nug","nulb","rung","shub","stug","sug","szug","trulg","ulb","urb","vub","vulb","xub","zub","zug","zugt","aab","aag","glaag","haag","naag","raag","boaj","moab","uag","leegh","yeb","yeeg","aig","yibb","iog","droog","nyog","aug","baug","daurg","draug","gaub","laug","maug","naug","raug","saug","thaug","iub","iug","ruug"],sharps:["ach","akk","ash","azt","bahor","bar","bas","brax","charn","dak","hrax","lach","lazt","mat","nam","nazt","ralk","rhast","sark","slarv","tash","thak","thalur","thalk","vach","vap","dek","ech","fesh","gek","hrek","lech","met","ner","ter","blik","gith","igm","inax","irsch","kir","lis","lisk","lith","nilv","nirr","tlizit","bor","chon","goch","gor","goth","hoth","khor","kos","loch","lok","loth","moch","moth","noc","och","oth","rolk","roth","sot","soth","vrok","dun","gur","hun","luth","muth","nur","rutt","sut","sutt","szut","tur","urt","utuk","uzt","krych","nyth","slyth","gaan","xaas","boak","ruaak","yalm","haerx","iex","draum","gaur","glaur","rauk","saur","duum","nuur","ruun"]},empyreal:{prefixes:["adan","asan","jasan","palant","sarnat","valmar","adrast","asarn","jasarm","palor","solar","valnar","alant","astar","javral","raman","talan","valnor","amad","atar","kalad","ranal","talar","valon","aman","atlan","kalar","ranar","talas","valor","amar","avar","kalas","rasan","talon","vanar","amars","avlant","kalast","ravan","taran","varal","amart","avral","kasal","samar","taval","varam","ansam","jalan","katarn","saran","valant","varan","arad","jalkar","kaval","sarat","valar","varat","aram","jaran","klaron","sardan","valdor","vardar","aran","jasal","palad","sardar","valkar","voltar"],maleSuffixes:["al","an","ar","as","at","ath","ath","ath","anth","athal","athar","athas"],femaleSuffixes:["el","en","er","es","et","eth","eth","eth","enth","eleth","ereth","eseth"],titles:["ar-","sar-","tar-","var-","jal-","kal-","pal-","ral-","tal-"]},human:{one:["Aind","Ainn","Airk","Aitze","Ald","Ance","Anxe","Ard","Ashf","Aulg","Aun","Aure","Authe","Baelt","Bakh","Bal","Balt","Balthe","Barg","Barll","Bauce","Baysc","Beek","Beele","Berl","Bersch","Beyn","Bhozt","Birme","Birr","Bjanc","Blaen","Blize","Blouch","Blurk","Blynze","Bokk","Borl","Borse","Brahl","Brakk","Bralk","Brang","Brann","Branth","Brem","Bress","Breun","Briint","Brill","Brize","Brod","Broik","Brolt","Bront","Broozh","Brosck","Broud","Brud","Brule","Brun","Bulse","Bunth","Byar","Byst","Caer","Cail","Canth","Carn","Cayrl","Ceyt","Chaeng","Chail","Chaith","Chal","Chalm","Charg","Charn","Chave","Chayle","Chaze","Cheal","Cheev","Chel","Chern","Cherze","Chezl","Chilk","Chlenk","Choalg","Choje","Chor","Chorl","Chorsk","Chounce","Chraq","Chrarr","Chrem","Chrent","Chriyb","Chroad","Chud","Chuz","Claed","Clart","Clesh","Cloup","Clour","Clowr","Coll","Corb","Corje","Corm","Corme","Crade","Creeg","Croold","Croyn","Cthon","Cush","Daalx","Dahr","Daig","Dal","Darm","Darsh","Darze","Dashf","Dask","Datz","Daug","Dawl","Deelth","Deerch","Derd","Derle","Dest","Deuth","Dex","Dhaant","Dherl","Dhoul","Dhuul","Dhuur","Dinz","Dlak","Dlask","Dlir","Doag","Dolc","Dorse","Dralg","Dram","Dran","Drance","Drath","Drax","Draygg","Dreact","Dreed","Dreeg","Dreen","Dreev","Drelm","Drelth","Drerle","Drewm","Drilm","Drinn","Drism","Drissth","Drix","Droale","Drojj","Drom","Droxe","Droy","Drun","Drust","Druuth","Dryle","Drynn","Drythe","Dvarch","Dwesk","Dzairn","Dzij","Dzym","Eeb","Eenthe","Elb","Emp","Ence","Ench","Eng","Enz","Ept","Erd","Esk","Faig","Falthe","Fanch","Faoth","Fard","Faum","Faz","Feant","Feej","Felg","Fernsh","Fesk","Fess","Feth","Fimth","Fize","Flast","Flatch","Flayre","Flerd","Flersh","Flisp","Florn","Fompt","Fousk","Fraine","Frakk","Fralg","Frast","Fregg","Frem","Fresk","Fretch","Frex","Frike","Frile","Frism","Frold","Frone","Fronx","Frook","Frool","Froy","Frush","Fryx","Fulm","Fyahn","Fyast","Fyorb","Fzek","Fzron","Gair","Galthz","Gand","Gane","Gann","Gart","Gath","Gault","Gawle","Gax","Genze","Gerd","Gez","Gharl","Ghea","Ghenz","Ghorl","Ghorx","Gilft","Gilm","Gire","Glaar","Glain","Glarch","Glaux","Gleeth","Gleev","Gleft","Glekke","Glem","Glice","Glip","Glish","Glith","Gloard","Gloob","Gloorsh","Glosk","Glund","Glyre","Glyth","Gnarre","Golm","Gond","Gorm","Gosp","Goste","Graal","Grall","Greel","Greeld","Greelp","Grend","Grilf","Grimp","Groad","Grond","Groolsh","Gruon","Grux","Gthuu","Gurze","Gwisp","Gwith","Gwosk","Gyorr","Gyz","Haag","Haar","Haask","Hade","Hadj","Halk","Halm","Hane","Harb","Harch","Harg","Harx","Hauke","Haux","Hawlx","Hax","Heerf","Hersh","Hetz","Hezz","Hisk","Hize","Hjorr","Hlare","Hlor","Hoag","Hob","Horl","Horm","Hosh","Hraak","Hrailk","Hreen","Hrine","Hroon","Hrume","Hruse","Huxx","Hythe","Ingg","Jaarge","Jad","Jaerth","Jaig","Jairn","Jal","Jalth","Jance","Jand","Jant","Janx","Jard","Jark","Jarn","Jask","Jath","Jauce","Jaus","Jauth","Jaze","Jeel","Jekk","Jend","Jenx","Jerd","Jern","Jexx","Jhang","Jhaulk","Jhor","Jhure","Jinch","Jind","Jinz","Jirle","Joorm","Jorm","Jorn","Jrond","Jurze","Jusk","Juzz","Jyfe","Jyin","Kaerr","Kaid","Kal","Kamn","Kand","Kang","Kank","Karn","Karth","Karze","Kaune","Kedj","Keek","Keig","Kell","Kelph","Kerce","Kerm","Kerst","Kesp","Keth","Kez","Khaiz","Khal","Khand","Kharb","Kharsp","Khern","Khif","Khond","Khôr","Khorst","Khrev","Kinch","Kish","Kiv","Kjeld","Klaff","Klaz","Kleed","Kloob","Kloohn","Klyne","Kmool","Knaar","Knut","Kolff","Kolg","Konv","Koss","Koul","Krake","Krall","Kranj","Krax","Kreel","Krej","Kremp","Krey","Krile","Krinch","Kroff","Kroll","Krompf","Kuest","Kull","Kulm","Kuon","Kuum","Kvon","Kwask","Kwaz","Kyre","Lach","Laev","Lan","Lantz","Larnste","Lartz","Laur","Lawrg","Layje","Leet","Lenx","Leth","Liln","Liss","Lod","Loec","Lonn","Loord","Loosk","Lound","Luhr","Lumbb","Lurs","Lyrr","Lysk","Maarth","Maec","Maelv","Magh","Mald","Mant","Manth","Mantz","Marb","Mard","Mayxe","Meand","Meeth","Melg","Meln","Merrt","Merzh","Mesp","Mirsp","Mirx","Miskt","Mlö","Mointh","Mool","Moork","Moorthe","Mord","Morl","Moskt","Mox","Mulse","Murlk","Murste","Myrrhne","Naall","Naar","Naaz","Naer","Naik","Naine","Nairx","Nalm","Nanx","Naois","Naphk","Nar","Narct","Narrm","Naulk","Naxx","Naze","Nelq","Nem","Nemn","Nerrz","Ngal","Nime","Nirft","Nisp","Nithe","Noerth","Nolgh","Nool","Noom","Norb","Norle","Noth","Nraeve","Nulth","Nurb","Nuss","Nyalg","Nyalk","Nym","Nynx","Olth","Omm","Omn","Ooon","Ord","Orld","Ornce","Oth","Ounde","Ourne","Paaz","Palch","Parn","Parth","Parzt","Path","Pelk","Pell","Pesm","Phad","Phairn","Phant","Phlarn","Phong","Photz","Phral","Phul","Pirz","Pjanth","Plange","Plaz","Plegg","Plind","Plomb","Plorze","Plumf","Pluun","Pnidd","Poile","Pome","Pould","Praige","Presk","Prike","Prokk","Prook","Prya","Pryle","Prynne","Psarn","Ptenx","Pulge","Pume","Quaan","Quaar","Quagh","Quaild","Quaisth","Qual","Qualt","Quanst","Quanz","Quaoph","Quarl","Quast","Quech","Qued","Quelg","Quelm","Querk","Quigg","Quilg","Quol","Quonj","Quool","Quorze","Quune","Quynd","Raask","Rahm","Raine","Raisth","Ralce","Rald","Rast","Raunt","Raupt","Rax","Raxt","Rayche","Raz","Reelce","Reendt","Relth","Relz","Rez","Rhath","Rhaze","Rhiss","Rhom","Rhorn","Rhyll","Rifk","Rilm","Rilx","Rimsk","Rimth","Riss","Rith","Rix","Rodr","Rodst","Roen","Rogg","Rolm","Rolx","Roult","Rull","Rulm","Rult","Rumche","Runce","Ruor","Ruusque","Ruz","Ryke","Rynx","Ryond","Rythe","Saar","Saech","Saedd","Sairgh","San","Sange","Sarg","Sark","Sarl","Sarn","Sarpt","Skroine","Scroot","Scrylte","Scryme","Sculp","Scuss","Scyrth","Sdor","Seelt","Seif","Sen","Senthe","Sfite","Shad","Shar","Sharg","Sharm","Sharn","Sheb","Sheel","Shenn","Shenx","Sherth","Shilm","Shind","Shont","Shren","Shune","Shurm","Shuuth","Shyang","Skarn","Skart","Skeen","Skerr","Skorle","Skraf","Skrafe","Skrib","Skrift","Skroi","Skyre","Slaar","Slanc","Slark","Slarm","Slask","Slaunce","Slaur","Sleer","Slemt","Slike","Slith","Sloif","Slorg","Slorn","Sluff","Slynd","Smeke","Smete","Smink","Smold","Snabe","Snard","Snarr","Sneath","Snurch","Soick","Solm","Sool","Soorve","Sorl","Sorm","Sorn","Sosz","Sounx","Sparll","Splynd","Sprake","Squalj","Sran","Srend","Sroon","Stalb","Starl","Stelk","Strangg","Strix","Strom","Strowl","Stuhr","Styche","Styre","Suntz","Suule","Suusht","Svinse","Swaerk","Swyst","Syle","Syoll","Taede","Tael","Tak","Tal","Tanj","Targ","Targh","Tark","Tarl","Tath","Taus","Tavv","Taze","Tchel","Tcherm","Tchoum","Tebs","Teelk","Teern","Teirn","Telg","Telk","Terb","Terre","Tez","Thaad","Thaarn","Thad","Thaed","Tham","Thand","Thang","Thapp","Thard","Thark","Thask","Thaugh","Thaum","Thaurn","Thawn","Thax","Theed","Thesk","Thevv","Theyz","Thirrf","Tholk","Thorm","Thosk","Thoure","Thrak","Thralf","Thrand","Thrasp","Thrawl","Thrawn","Thrax","Thrilce","Thrizz","Throck","Thromb","Throsp","Thull","Thuu","Tlön","Toal","Tog","Tol","Tolg","Tolm","Tooz","Torb","Torje","Torm","Torr","Torsk","Torth","Trahl","Treel","Treesk","Trell","Trem","Treys","Trild","Trilse","Trinx","Trojj","Tronf","Trost","Troyne","Trulm","Tsai","Tsang","Tselm","Tsleg","Tspoy","Tsrome","Tthann","Tull","Tvash","Twez","Twillx","Tyae","Tyfe","Tyog","Tzank","Tzoy","Ulm","Urst","Vaar","Vaersl","Vaist","Valg","Valtch","Vand","Vansh","Var","Vard","Varl","Vask","Vass","Vath","Vaulx","Vaus","Vaxx","Vayze","Veb","Veed","Veeth","Vegg","Vek","Velb","Venk","Venth","Verle","Vesp","Veth","Vilt","Vipt","Virl","Virx","Visk","Viss","Vist","Vith","Vlack","Vlax","Vleft","Vloongh","Vohm","Volg","Vool","Voon","Voor","Vor","Vorg","Vorl","Vorque","Vorse","Vort","Vrahk","Vrain","Vramp","Vreng","Vrilx","Vrosk","Vroyce","Vuul","Wertz","Wheld","Whimk","Whirx","Whoord","Wix","Woise","Wome","Woorn","Worrb","Wrahz","Wraime","Wrax","Wrhye","Wrold","Wrost","Wurlp","Wyast","Wye","Wynv","Wyrn","Xaayr","Xaen","Xaif","Xain","Xalm","Xan","Xarle","Xas","Xau","Xean","Xelb","Xenve","Xerth","Xill","Xin","Xinsce","Xis","Xive","Xix","Xord","Xoth","Xush","Xyle","Xysc","Yad","Yagre","Yaim","Yand","Yarl","Yauce","Yeb","Yeerk","Yend","Yenj","Yest","Yhalm","Yhe","Yhem","Yifth","Yilb","Yivv","Yoort","Yoth","Yrr","Yund","Yush","Yuun","Zaar","Zahn","Zaidh","Zaift","Zaile","Zaive","Zand","Zanq","Zao","Zaon","Zaoth","Zar","Zash","Zeft","Zeige","Zek","Zell","Zelm","Zelth","Zend","Zha","Zhash","Zhayce","Zherl","Zhirth","Zhool","Zhorm","Zhuul","Zil","Zilge","Zinn","Zixt","Zlante","Zlaque","Zlar","Zold","Zook","Zool","Zoor","Zor","Zorl","Zorn","Zoth","Zoul","Zreethe","Zull","Zusque","Zwerl","Zynx","Zyx"],two:["Aahdret","Aarlen","Aasren","Aastrasl","Aban","Abbith","Ablif","Aboas","Abrance","Abrax","Abryn","Abyok","Acear","Acfyst","Achekk","Achelse","Achlarg","Achren","Achriss","Ackvold","Acram","Acu","Adaon","Addanc","Adeil","Adire","Adlay","Adlen","Adlon","Admel","Adoin","Adon","Adrek","Adreln","Adrich","Adrilc","Adurthe","Aduush","Aealim","Aeddan","Aedha","Aedir","Aedlynx","Aeiran","Aelis","Aelma","Aemon","Aenet","Aenthu","Aeprox","Aeren","Aerind","Aerkoon","Aerkour","Aerlithe","Aeron","Aeryle","Aethlyr","Aethon","Afenk","Affraig","Afraaj","Agburz","Ageen","Aghil","Aghill","Aglin","Agroth","Agwyn","Agyorl","Ahmré","Aia","Aiaia","Aibmab","Aidajn","Aiden","Aidon","Aigol","Ailcaer","Ainké","Ainzu","Airmid","Aislinn","Aislithe","Aiza","Aizan","Ajaak","Ajnaic","Akaal","Akar","Akem","Akhtar","Akif","Akii","Akir","Aklo","Akon","Akoorb","Akrain","Akshooth","Akthrain","Akvar","Alao","Alarre","Albaize","Albin","Albrif","Aldende","Aldlor","Aldlum","Aldon","Aldor","Aldreb","Aldred","Aldren","Aldryn","Aldtas","Alenthe","Alfan","Algus","Alif","Aling","Aljic","Aljric","Allaire","Allar","Almaer","Almeir","Almen","Alodd","Alsob","Altin","Altur","Alver","Alya","Amact","Amair","Ambard","Ambeln","Ambril","Ameste","Amfik","Amkir","Ammdar","Ammek","Amoyl","Amphoth","Amrath","Amren","Amyrg","Amzar","Anach","Anar","Anaz","Ancharl","Anclaar","Anctash","Andell","Andjez","Andon","Andore","Andorh","Andrad","Andreth","Androlg","Andrys","Andval","Anghra","Anglame","Angleem","Anglock","Anglor","Angmor","Angtai","Anhlaw","Anigg","Anin","Anjak","Anjos","Anken","Ansher","Ansoj","Anson","Antar","Antarn","Anthor","Antrim","Antriq","Antrisp","Anvar","Anvyen","Anxrin","Anzire","Aopharz","Aophim","Aquill","Ara","Araar","Aradh","Arak","Aran","Araste","Araz","Arbal","Archam","Archech","Archite","Arcus","Ardann","Ardesh","Ardlen","Ardoth","Ardune","Ardwar","Ardwil","Ardwile","Areest","Arell","Argin","Argorm","Argrath","Arhnaal","Aribe","Arick","Arjhag","Arkal","Arkharn","Arklow","Arkrog","Arlan","Arlbeth","Arldon","Arlya","Armast","Armorn","Armyze","Arna","Arnhor","Arnid","Arnlor","Arnrost","Aroinz","Arrah","Arrhod","Arshel","Artheen","Arthex","Artor","Artus","Arun","Arvel","Arvilk","Arvol","Arvox","Arweld","Aryem","Aryft","Aryon","Aryph","Aryus","Arzang","Arzi","Asberl","Ascelle","Aschar","Aschka","Asco","Äsë","Asgar","Asgorn","Ashan","Ashane","Ashbarl","Ashed","Ashild","Ashlann","Ashnyn","Ashord","Ashtah","Ashur","Askar","Aspand","Asrai","Astei","Astem","Astha","Astran","Astrin","Atang","Atar","Atdeel","Ateng","Athald","Athar","Athcroj","Athlas","Athlos","Athmar","Athquom","Atlampt","Atlank","Atmaas","Atmeh","Atmog","Atox","Atraaf","Atrend","Atsal","Attor","Atyar","Atyre","Auchstyr","Auchur","Aucir","Audric","Aundan","Aunxar","Aurawn","Aureth","Auxid","Avane","Avarr","Averq","Avoon","Avorn","Awndale","Axaane","Axos","Aya","Aydras","Ayen","Ayin","Ayir","Ayla","Aylmer","Ayrish","Ayshun","Ayshung","Azal","Azash","Azeal","Azen","Azgoth","Azhrarn","Azlon","Azlyn","Azmael","Azorn","Azoth","Azra","Azraq","Azrean","Azreck","Azter","Azzay","Babdar","Baccruz","Baelil","Bahar","Baiar","Baiern","Baikaen","Baiposk","Bakan","Bakra","Balain","Balaz","Baldhur","Baldrim","Balgurr","Balkar","Balok","Balour","Banek","Banffoge","Bannheld","Bannor","Baraell","Bardel","Barduy","Baren","Barim","Barind","Barldsy","Barlom","Barlon","Barltan","Barnar","Barood","Baros","Barrenc","Barrin","Bartain","Basfric","Basim","Basmol","Bassinth","Bassto","Bastarre","Batrosque","Bayven","Bayzell","Bazan","Bazit","Beclaan","Bedane","Bedese","Beejlam","Begnus","Belan","Belaz","Belcoir","Beleth","Belgaun","Belic","Beljan","Bellin","Bellom","Belmul","Belnarth","Belor","Belorn","Belot","Belrain","Belstos","Belthan","Belthis","Belwilg","Bengol","Bëol","Beolj","Beras","Berclad","Bercol","Berik","Berild","Berim","Berith","Berlyne","Berrec","Bersem","Bershar","Bertrenk","Berzik","Bethmel","Beyash","Beyus","Bezgrael","Bezpar","Bhoorva","Biferb","Biilar","Bildesh","Billosh","Bilmar","Bindle","Biraad","Birain","Bireln","Birta","Bisel","Bjanni","Blauthike","Bleran","Bleskran","Blonjerg","Blorvind","Blunyc","Bodvar","Boëd","Boggrah","Bolaoz","Bolthorn","Borale","Boren","Borgald","Borin","Borlaith","Borlas","Borlid","Borlo","Borngah","Borzer","Boshan","Bothar","Botro","Bouphar","Bowjen","Boyarl","Braagen","Bracca","Braeklarn","Bragen","Brahan","Brakkon","Brala","Brali","Brallu","Bralma","Brandar","Brandec","Brangwej","Branthu","Brantys","Branvaol","Branzan","Brascand","Brasslin","Braxen","Braxtor","Brealij","Bredhal","Breedast","Bregem","Brehen","Breitsoj","Brelkrov","Brenen","Brenlan","Brestej","Brethil","Bretta","Brevlyn","Brevta","Brielle","Brindax","Brindence","Brintu","Brinys","Brislyn","Brithael","Brithric","Brobal","Brohnin","Brona","Broosin","Broxus","Brufod","Brundelx","Bryapka","Brynit","Buckrald","Bulvet","Burcan","Burrgaut","Bwermolc","Byeloor","Bylys","Byrkast","Byzar","Cadairn","Caddax","Cadel","Cadfrel","Cadrach","Cadreth","Caecyn","Caedfer","Caelis","Caerron","Caillean","Caiphul","Cairon","Caldel","Calensch","Calkdaev","Calmic","Calnor","Calunn","Calyz","Calzan","Camain","Cambree","Camdlon","Camsar","Candla","Candrak","Canelb","Cangmor","Canthar","Cantrasc","Caopha","Caostri","Caranth","Carbrod","Cardelv","Carfheen","Carlasc","Carlinx","Carnax","Carnly","Carnool","Caroin","Carquel","Carthis","Caskeil","Castlon","Cathlaid","Caveesm","Cavorn","Cavosse","Cavris","Caynarv","Cayrin","Cazberr","Cazyach","Cedrim","Cedrisk","Ceilerse","Celbarb","Cemtruo","Cenyth","Ceraik","Cercyon","Cerdun","Cerlint","Cermor","Cernon","Cerra","Cessair","Cevir","Ceylinn","Chadan","Chadlor","Chadzik","Chaemor","Chagor","Chalar","Challem","Challeth","Chalvir","Chambarr","Changtsai","Chanoth","Chanti","Chaöl","Charatze","Charnyx","Charresh","Charyd","Chaska","Chaulet","Chavir","Chayim","Chazane","Chazgel","Cheldor","Chelim","Chelprey","Chelshrike","Chendil","Chenean","Chenoa","Cherla","Chessene","Chevonde","Chezil","Chial","Chian","Chigran","Chimu","Chimzil","Chirril","Chirthiz","Chitrind","Chlangi","Chlodig","Chlorild","Chordash","Chorrin","Chrezel","Chungaez","Chunjan","Chyvil","Cidran","Cilmar","Cinctraic","Ciraf","Cirkin","Cirnak","Cista","Civar","Ciwan","Clafaug","Clarinn","Cleedis","Clendlim","Clenvred","Cligra","Cloosag","Cloralt","Coäx","Cobord","Cobrynth","Coddry","Cogarn","Coimarn","Colgrim","Colyss","Comnlan","Conjerb","Conjin","Coram","Corbrod","Cordin","Corem","Coreme","Corill","Corince","Cormast","Corrysm","Corsolle","Couran","Coyzan","Cramog","Craxan","Craydarth","Craye","Creidah","Crennex","Crestarl","Crestry","Creydai","Crezel","Crilayth","Crixbine","Crochell","Crolas","Cromough","Croquarne","Cuddry","Cuhaid","Cullyn","Curik","Curin","Curlask","Cusheal","Cusheth","Cuttray","Cyanril","Cydace","Cylenn","Cynquil","Cyrand","Cyrib","Cyrvemth","Czarai","Dabthan","Dacil","Daeglev","Daelden","Dafor","Daghand","Dagharz","Dagir","Dahiil","Daikoon","Dailenn","Dakul","Dakvon","Dalain","Dalanc","Dalcraw","Dalga","Dalgirth","Dalith","Dalman","Dalraev","Dalsar","Dalvai","Dalvoc","Dalwyn","Damaal","Damar","Damesk","Damrir","Danchel","Dandar","Dandroan","Danfis","Dangrim","Dankin","Dantlee","Daotar","Daphrin","Daplurn","Dara","Darach","Darake","Daran","Darax","Darbeel","Darcer","Darga","Darglin","Darinth","Darjek","Darjii","Darlist","Darlith","Darmont","Darmore","Darnath","Darnein","Darnime","Daron","Darool","Darsid","Darsiiv","Darsin","Darvane","Darven","Darzed","Darzha","Dashgu","Dasig","Dastor","Dastryn","Daugas","Daulaz","Davar","Daveld","Davix","Davlit","Davras","Davrou","Davrune","Dawfoke","Daxon","Dayko","Daysase","Daytar","Deaclynd","Debfin","Dechru","Deenos","Delaur","Delcold","Deldrak","Deleea","Delente","Delgath","Delgaun","Delmar","Delna","Delrean","Delser","Demgris","Deneth","Dengar","Denlorn","Derdain","Derfel","Dergast","Derild","Derlin","Derlor","Deroh","Deron","Derroll","Dersarre","Derthark","Devolt","Devreed","Dhakos","Dhornen","Dhoumene","Dhranak","Dhyana","Dialn","Dibdrek","Dilfar","Dilgid","Dilquay","Dilvak","Dinoor","Diorne","Diran","Dirim","Dirkalt","Dirmalk","Dirrach","Dirrahk","Dirvus","Distar","Disten","Distran","Ditrenth","Divos","Djarmon","Djehla","Djelha","Djira","Djola","Dolljan","Dolthar","Dolvith","Domede","Domen","Domin","Domnux","Domon","Domvit","Domwren","Donet","Donlaze","Doran","Dorath","Dorgand","Dorgath","Dorhar","Dorin","Dornath","Dornbain","Dorok","Dorsan","Dorspaich","Dortoom","Dorvai","Dostaan","Doussa","Dowflox","Dozrig","Dozthuk","Drabsnar","Dradoi","Dradus","Draegra","Drakhor","Drakhri","Drakirn","Drakkan","Dralar","Dramah","Dramfer","Draogat","Drassonne","Drauphor","Draven","Draxok","Drayley","Drayven","Drazvec","Drebyss","Dreezhan","Drefest","Dreggol","Dreintor","Drellefe","Drenfust","Drengar","Drethlec","Drevark","Dreynel","Drezael","Drezaem","Drilant","Drimmis","Drinda","Dringle","Drion","Drissa","Dristirk","Drocolg","Drogan","Drohulse","Droilfin","Drokoag","Dronasp","Druchor","Drunal","Drusilf","Dryduos","Duarn","Duergan","Dulith","Dulkarn","Dulkast","Dunry","Durnik","Durzin","Duskim","Duubown","Dvorast","Dwendlim","Dwyvach","Dygard","Dylenx","Dymnash","Dynqua","Dynroth","Dyoni","Dyshim","Dyskrahn","Dytheus","Dyvim","Dyzant","Dzoraug","Easval","Ebane","Ebur","Echael","Echross","Eclane","Edcyl","Eddar","Eddax","Eddor","Edeth","Edhil","Edrun","Eduu","Eehatt","Eelek","Eelgren","Eerban","Eglarth","Egron","Ehilm","Ehlmat","Ehlreth","Eidon","Eidrinn","Eilif","Einar","Eirecht","Eithné","Ejence","Ekvarl","Elaen","Eland","Elath","Eldin","Eldix","Eldrab","Eldron","Eldru","Elek","Elem","Elfreth","Elgroth","Elkin","Elkleth","Ellern","Ellrass","Elmral","Elnume","Elod","Elran","Elriph","Elu","Elvrit","Elyx","Elzast","Emal","Emberle","Emdel","Emerl","Emgar","Emton","Enban","Encarth","Endrade","Endril","Enferth","Englin","Enkim","Ennek","Enris","Enrost","Enskel","Ensorn","Envess","Enzhai","Ephelt","Ephraj","Ephti","Ephyre","Eppent","Eppin","Erbmaj","Erdlan","Ergar","Ergoth","Ergron","Erhil","Erijn","Ermon","Ermor","Eron","Errain","Errone","Erson","Erwat","Erxab","Escande","Esceft","Esdrix","Esghar","Eshrik","Eshuur","Eskarn","Eslyn","Esris","Essa","Estrag","Estorl","Estrif","Esyfe","Ethrene","Euross","Evelj","Evinth","Evith","Evorn","Evska","Ewlon","Eyphra","Eythor","Ezail","Ezmi","Ezri","Fabolde","Fadar","Faendyre","Faesten","Faffle","Fafnalg","Faiorg","Falbin","Falcarn","Falgar","Falhehn","Fali","Falldrijn","Falsfeen","Falslen","Falume","Fanchel","Faran","Fardoth","Fardron","Farglid","Farhaude","Farleit","Farli","Farmolj","Farnek","Farngold","Farngor","Faroon","Farosh","Farrain","Farscall","Farsun","Farunst","Farzdoy","Fasthes","Fautell","Favuld","Favvaz","Fayel","Faygrenn","Faylaol","Faylynn","Fayol","Fazhal","Fazzur","Feeming","Feikry","Feirrex","Felinx","Felnar","Felor","Felstar","Felthund","Felvrand","Femigg","Fendahl","Fendrabe","Fenew","Fenic","Fenist","Fenleith","Fennus","Fenrald","Fenzil","Feorth","Ferman","Fermern","Fernath","Ferndel","Fernhol","Fernool","Fernosk","Ferram","Ferthel","Fervigg","Ferwend","Fesru","Fethlan","Feyan","Feyern","Fhorat","Fiantz","Fictyr","Figgin","Fiiya","Filtarg","Fingril","Finstar","Firca","Firga","Firin","Firon","Fiskroll","Fissworx","Flauleck","Flayna","Flestrin","Fletchen","Flikir","Flingrel","Flitan","Flixis","Foarad","Fodusk","Fogrin","Fohdon","Folstin","Fomkrin","Fontand","Foozan","Foragh","Forang","Foraujh","Forbulse","Foren","Forjisk","Formki","Fornoar","Foros","Forroosk","Forstine","Fortrelce","Forvael","Fozgiel","Frama","Franaard","Frannon","Frashtol","Frayja","Freasand","Fremmoun","Frillox","Friston","Frixeen","Frolin","Frondir","Fronost","Fronubb","Froscele","Frowal","Fruwasp","Ftoomi","Fulshin","Fulume","Fumpsil","Furtloft","Fusraul","Fylin","Fylssa","Fyojhkor","Fyönn","Fyza","Gaatel","Gadan","Gadoc","Gadra","Gadri","Gaenlea","Gaerlind","Gaerris","Gafael","Gaisherl","Gajiste","Gakaal","Galaart","Galach","Galaij","Galan","Galbaaz","Galchan","Galdoir","Galenx","Galind","Gallarg","Gallasp","Galmad","Galron","Galsdor","Galvrix","Gambrax","Gamitz","Gamkya","Ganaek","Gandril","Ganerth","Ganerve","Ganix","Gankor","Ganock","Gareck","Gareld","Garhaft","Garlan","Garol","Garon","Garos","Garpast","Garras","Garron","Garstrang","Garstrith","Garthag","Garthaun","Garven","Gathen","Gaunmar","Gaurbal","Gavrok","Gawend","Gaxtor","Gazwylg","Gearna","Geaxa","Gebrence","Gebrow","Gechart","Gechrak","Gedreth","Geerharg","Gehed","Gelan","Gelann","Geldol","Gelwik","Gemal","Gemelf","Genglar","Gerant","Gerin","Gerlant","Geroind","Gerreint","Gerren","Gesin","Gethen","Gezdrey","Ghaachev","Gharlane","Ghatar","Ghatha","Ghellence","Gherent","Gherlan","Ghirra","Ghomnir","Ghralence","Giaj","Gilboch","Gildor","Gildren","Gildrift","Gilflin","Gilir","Gilith","Gillyn","Gilmir","Gilmirst","Gilnar","Gilorn","Gilos","Gilva","Gilvar","Gimeld","Gimlej","Gimnel","Ginnen","Ginorsh","Girbeaux","Girin","Girzan","Gisgin","Githeld","Githew","Gitlan","Gitril","Gittos","Gizralle","Glaeloth","Glaernex","Glaraum","Glasdray","Glasquel","Glaury","Glayant","Gleada","Glebur","Glethlot","Gleyden","Glianth","Glidnimm","Glimanthe","Glirice","Glirrish","Gloisur","Glowan","Glufjyn","Glyngal","Glynzel","Glystraine","Gnasthor","Gnasthra","Gnivlah","Gnohesk","Gnorri","Gnospret","Gobar","Goklod","Golluer","Gomar","Gondrift","Gonjal","Gorad","Gorgost","Gorin","Gorinssk","Gorklu","Gorlis","Gormane","Gornik","Gorshay","Goryon","Gossparl","Gothel","Grachar","Graequil","Graghan","Grahault","Grainim","Granik","Granlon","Gravec","Greavdal","Greelar","Greethrin","Greforn","Grehuse","Grekith","Gremdahl","Grendax","Grennath","Grenslae","Grenvin","Greorle","Grevam","Greyfell","Griam","Grian","Griea","Griffix","Grifnid","Grindan","Grishulf","Gristis","Griswald","Grittu","Grivalx","Groäxx","Grombul","Grondar","Grortam","Grulbest","Grussex","Grydon","Gryemox","Grykar","Grypha","Guhan","Guhlnor","Gulla","Gulzund","Gunshird","Gunthal","Gunthar","Gunzhur","Gurdam","Gurjan","Gustay","Guthril","Gwacyn","Gwaihir","Gweddyn","Gweien","Gwenca","Gwendald","Gwepfrath","Gwesder","Gwildor","Gwithra","Gwomyr","Gwyran","Gwythinst","Gyán","Gylrath","Gyórb","Gyriss","Gyrlaen","Gyrlath","Gysankh","Gyseyt","Gystral","Haakrim","Haarstrin","Habmarl","Hadan","Hadar","Hadarg","Hado","Hadrim","Hadron","Haestan","Haefgan","Hafthir","Hagith","Hagra","Haidelth","Haijiss","Hainen","Hakhoim","Haklar","Haklor","Hakpard","Hala","Halbex","Halborn","Haldor","Haloth","Halperle","Halsan","Halût","Halvner","Hamba","Hamisk","Hanastre","Handra","Hanil","Hanierth","Hanith","Hantar","Hanthryn","Hapvar","Haral","Harave","Harchyl","Harfare","Hargan","Harnir","Harntil","Harnyrse","Harpann","Harran","Harrelm","Harstar","Hartaz","Harthan","Harthex","Harthran","Hartrond","Harvas","Harvel","Harzelle","Haspid","Hasrick","Hatchiss","Hatrasd","Havin","Havrel","Hawklin","Hawkram","Hawkran","Hawkreld","Hawleet","Hawljin","Hawtran","Haxas","Hazgarl","Hazkar","Hazrond","Hazvelc","Hazyrg","Hazzal","Hearroj","Hedin","Heenarg","Heengul","Hefpyre","Heinvroh","Helaz","Heldix","Helflitz","Helir","Helsdal","Helsur","Helvem","Hembra","Heram","Herisk","Herndre","Herrul","Herthose","Herym","Herzick","Hespek","Hesrel","Hessun","Hetcroft","Hethar","Hethra","Heurhyl","Hexil","Hezron","Heztor","Hibriss","Hienn","Hiffelk","Hifforn","Hifryn","Hildred","Hilix","Hiljin","Hilxin","Himlon","Himon","Himvli","Hinthan","Hinzay","Hireal","Hirrean","Hisrilf","Hisvran","Hizar","Hizron","Hjalmar","Hjeldin","Hjordrik","Hlyrmis","Hobtalg","Hoesgald","Holay","Holgar","Hollox","Holthan","Homli","Honturg","Hophand","Hoprig","Horan","Horglin","Horjak","Horlask","Hormatz","Horond","Horros","Horthoon","Horzak","Hotath","Hothcog","Hothcol","Hrasha","Hrasquer","Hrelar","Hresheuth","Hrinspire","Hroleur","Hrönir","Hrossa","Hrostar","Hsaptren","Humbuss","Humquor","Hunard","Hundar","Hurcad","Hurgal","Hurnod","Hurrisk","Hursin","Hurvin","Hurym","Hussuln","Huusim","Hyarante","Hyfryn","Hylar","Hyssome","Hyxley","Hyzail","Hyzen","Ibchol","Ibizt","Ibrolg","Ica","Ictar","Iduun","Ighai","Ignale","Ignire","Igraa","Igresk","Iijind","Iithkin","Ijeng","Ikalss","Ikeen","Ikkrish","Ikléy","Ildel","Ildelft","Ildin","Ildis","Ildnarr","Illa","Illyis","Ilnim","Ilruhn","Ilsuor","Ilthoss","Iltrilt","Iltrogh","Ilva","Ilvar","Ilxar","Ilyag","Imcanx","Imcolg","Imdiv","Imhas","Immak","Immoyr","Imnarl","Impag","Imrib","Imrift","Imtsith","Indlech","Indloth","Indlut","Indred","Ingarh","Ingelk","Ingen","Inghar","Ingolm","Ingrald","Inilv","Inis","Innluu","Inoke","Inslar","Iom","Ipshoom","Iraiz","Iras","Irauld","Iraunt","Irbry","Irchel","Irex","Irglas","Irlen","Irough","Irrash","Irrax","Irsai","Iruste","Irwick","Irxeath","Isbard","Ishan","Ishenx","Ishgan","Ishkar","Ishlak","Ishshan","Ishya","Islarch","Ismlok","Isorn","Isphek","Issa","Isstan","Itaaq","Ithend","Ithkaar","Ithome","Ivaade","Ivaire","Ivind","Ivool","Ivorn","Ivral","Ivran","Ivrax","Ivyd","Ivyod","Ixan","Ixaq","Ixor","Iygin","Izinth","Izleng","Izmisk","Iztra","Izvire","Jaadis","Jaagix","Jaalmez","Jaalon","Jaaluth","Jablant","Jacor","Jadir","Jado","Jadoorm","Jaedan","Jaelyss","Jagan","Jaggol","Jagrid","Jahir","Jahrgrim","Jaidu","Jaldeer","Jalmid","Jalom","Jama","Janam","Janan","Jandix","Janlay","Jano","Janrass","Jantust","Janu","Japloon","Jarad","Jarilz","Jariz","Jarlew","Jarlith","Jarngor","Jarra","Jartak","Jartusk","Jarveen","Jarvil","Jarvix","Jarzad","Jasir","Jasphar","Jaswen","Jaussig","Jautan","Javen","Javert","Javrik","Javtir","Jaxal","Jaxel","Jaylence","Jazanne","Jazraal","Jazrel","Jazrode","Jebhart","Jedra","Jeeldor","Jeelteg","Jehzehr","Jelthar","Jekkar","Jelantru","Jelday","Jeldor","Jelym","Jenbow","Jendarr","Jenkisk","Jerdys","Jerec","Jerel","Jerim","Jessel","Jetashe","Jethrik","Jeven","Jevist","Jezreel","Jezzar","Jezzra","Jhebdaeg","Jheexadh","Jheluth","Jherrox","Jhinarr","Jhinith","Jhorin","Jhourlann","Jhumpoust","Jhuvar","Jiaf","Jianc","Jiglak","Jihalg","Jilsa","Jiltarn","Jinnow","Jintlorn","Jinvik","Jiral","Jirnon","Jirnost","Jisa","Jithrast","Jixile","Joamorsk","Jobel","Jolrant","Jolsir","Jomec","Jomsut","Jondar","Jooskan","Jorad","Jorael","Joram","Joran","Jorel","Jornic","Joron","Jorvim","Joskyl","Jossak","Jostib","Jothal","Jovaine","Joysair","Jugeen","Juldrake","Julix","Julphra","Jultus","Jungro","Junnar","Jurin","Jurinn","Jurret","Jushdak","Justix","Juthcot","Juxpire","Jynyx","Jyvlex","Kaanpell","Kadjix","Kaerjeld","Kaggoth","Kagolm","Kahlan","Kahmahr","Kaiya","Kaklo","Kaldrak","Kalduk","Kalen","Kaliss","Kallak","Kalshai","Kalthen","Kalvek","Kalvran","Kalxin","Kaman","Kamlant","Kamon","Kander","Kangmir","Kangmor","Kanliin","Kanpo","Kantar","Kanthrix","Kantran","Kanven","Kaplull","Karchad","Karchen","Karchoy","Karcist","Karect","Kareeb","Kargon","Karjin","Karjus","Karkrust","Karnek","Karrax","Karrim","Karsa","Karstall","Kartol","Kasel","Kashir","Kashtuul","Kaspim","Kaspin","Kassar","Katan","Kathak","Kathar","Kathasp","Kathor","Kattelg","Kattra","Kaukris","Kavar","Kavarl","Kavath","Kavis","Kavor","Kayesp","Kayris","Kazarn","Keanca","Kedern","Keerlin","Keermeth","Kegryn","Keigtril","Kekkan","Kelar","Keldar","Kelgus","Kelkor","Kelmar","Kelner","Kelrac","Kelshiir","Kelver","Kelvon","Kelvyath","Kember","Kembriss","Kemoy","Kenshlin","Keraan","Kerdal","Kered","Kerrol","Kersenct","Keru","Kerzard","Kesdric","Kesnahr","Kespeth","Kesrack","Kesrick","Kethdjal","Kethrak","Kevlad","Kexy","Kezven","Khadar","Khadys","Khalart","Khaldan","Khalir","Kheverl","Khondru","Khordov","Khrissa","Khrithra","Khrosa","Khudrax","Khugweb","Kian","Kibbath","Kibha","Kidash","Kiirmu","Kijmin","Kikrasht","Kilas","Kilat","Kilgand","Kilisp","Kilmin","Kimda","Kinduhr","Kinorm","Kinzroft","Kipplob","Kirdon","Kirklen","Kiroum","Kirrax","Kirun","Kirskar","Kirzav","Kisarld","Kishin","Kismer","Kismerle","Kisprimn","Kiston","Kisvord","Kithert","Kithorsk","Kithund","Kithvor","Kivan","Kivooz","Kivoum","Kixime","Kizmay","Kjeldor","Kjindar","Koabon","Kofoum","Koino","Kolbect","Kolchash","Kolduk","Kolthya","Kolvram","Konvain","Korak","Korban","Kordale","Koren","Koreth","Korghil","Korix","Korlisk","Kornor","Kornud","Korok","Korrik","Korsal","Korseng","Kortael","Kortenj","Korthoon","Koruk","Korusk","Korvar","Kosjourn","Kothar","Koxir","Kozzir","Kraatin","Krallorn","Krana","Krangar","Kranorn","Krantheer","Krantor","Kredhal","Kregnux","Krelgar","Krentomzh","Kressen","Krexnahr","Krillon","Krissenq","Kroëld","Krotald","Krotar","Krotem","Kruchaen","Krynerl","Kugar","Kuldrah","Kulik","Kulleest","Kulxel","Kunatht","Kurdghar","Kurgnar","Kuruz","Kurvos","Kushish","Kydra","Kyladz","Kylcrum","Kylix","Kyllam","Kymen","Kyrake","Kyrmo","Kyrsha","Kyshi","Kysho","Laabrun","Laarskim","Laconde","Laël","Lagu","Lailaske","Laithare","Lakis","Lalan","Lalit","Lalun","Lampor","Lanaar","Landish","Landreth","Langbar","Lanreex","Lanscitt","Lanteld","Lantis","Lantos","Lanvilt","Lanycth","Lanzee","Lanzept","Larbrun","Laresm","Larid","Larind","Larkrosp","Lasquor","Lathir","Lathmarc","Latra","Laudrin","Laxar","Laydor","Layek","Lazelle","Ledmai","Leela","Leena","Leerank","Leesclar","Leggwyt","Leghast","Lehun","Leistorn","Lembarl","Lemgaar","Lemtarn","Lendra","Lensith","Lenzeel","Lephais","Lephern","Leqquan","Lerdeln","Lerlya","Lermest","Lerquint","Lestin","Letek","Lexan","Lextraa","Leystorne","Lherache","Lhusark","Liance","Libourne","Lidrill","Lilir","Lilnid","Liltar","Limdal","Limhoth","Limka","Limson","Lindarl","Lindlorn","Linlaith","Linmer","Linor","Linspar","Lintan","Lintra","Liosse","Liphrodd","Lirram","Lishran","Liskeel","Lissar","Lisstar","Lisstra","Liston","Lisvorn","Litheem","Lithrad","Littwyst","Lixelle","Lixeth","Lixter","Lizki","Lobror","Logas","Lohmi","Loiarl","Loomar","Loorin","Loorzig","Loraem","Loral","Lorbis","Lorrhin","Lorrin","Lorvra","Lothilv","Louwend","Lovoz","Loxzor","Luast","Lubist","Lucenne","Lufraut","Lumas","Lumfa","Lunzar","Lurand","Lurash","Lurin","Luscan","Lutril","Luzfel","Lyanec","Lyeüm","Lylix","Lyra","Lyrin","Lyron","Maaga","Macra","Macrad","Maefon","Maegwin","Maerraent","Magalph","Maghan","Maglone","Magmarl","Magnyck","Mahhri","Mahrik","Maidah","Maidak","Mairish","Maisa","Maisan","Majan","Makamb","Makisp","Malak","Malasc","Malber","Malboe","Malda","Maldock","Malfar","Malgrah","Malheme","Malinsp","Malkorf","Malnurb","Malthen","Maltheus","Malthgri","Malthor","Malvisp","Malwer","Malzhé","Mandrask","Manggrim","Mankril","Manthi","Manton","Maöl","Mapyn","Marack","Maraide","Marasp","Marath","Marax","Marclaw","Marcoorg","Mardhrene","Mardix","Mardur","Mareft","Marhalk","Marhart","Marjaan","Markryn","Marlath","Marlock","Marnec","Maroosh","Marost","Marrek","Marrhal","Marrhan","Marril","Marslin","Marslai","Martheel","Marul","Marvold","Marwhool","Mascrox","Maskrulp","Masplern","Masply","Masquoor","Masryn","Massac","Mastram","Mastrith","Mastruse","Mathgi","Mathlin","Mattraw","Matzin","Maularn","Maundrib","Maurdax","Maustere","Mavasce","Mavic","Mavkert","Mavour","Maxil","Mayern","Maylern","Maylin","Mayrime","Mazzyott","Medarm","Meder","Medist","Meeratz","Meffroa","Mefron","Meglos","Megwen","Mejea","Mekosp","Melaunce","Meldresc","Meleas","Melib","Melisk","Meljarn","Melkur","Melleg","Mellore","Melnayl","Melnyth","Melshiv","Melslem","Melviig","Mendra","Mengisp","Menksoor","Menna","Mephyr","Merdim","Merewn","Merkal","Merkan","Merley","Mermold","Mermoth","Merngar","Merophe","Merresh","Merrest","Merrost","Merryn","Mershun","Mersic","Mersna","Merssan","Merthyr","Merweld","Mesrah","Mesrawn","Mestorl","Mestrin","Methnos","Metrosq","Mevid","Mezard","Mhoran","Mhordaal","Mhovair","Mhurdaal","Mhyrrail","Mianth","Mibris","Micrum","Mida","Midor","Mifrax","Migglin","Mijar","Mijhyk","Mikird","Mileern","Milzrik","Mimur","Minom","Minvra","Minyal","Miraad","Mirach","Mircheld","Mirdain","Mirdij","Mirdole","Mireth","Mirglish","Mirhaz","Mirikke","Mirja","Mirjanth","Mirjenx","Mirkaise","Mirkin","Mirla","Mirrash","Mirrin","Mirrym","Mirtrax","Miryash","Mishaar","Mishim","Miskin","Miskul","Misrach","Miszlar","Mithbrin","Mithlerb","Mitrel","Mivarch","Mivrid","Miwarl","Mixtry","Mizarl","Mizma","Mizrab","Mlenjas","Mlocber","Mlodach","Moda","Mogorn","Moirulse","Molez","Mollith","Molnyx","Molrin","Molvigg","Molvind","Mommur","Monmar","Moondar","Mooneld","Moorith","Moorlow","Moormish","Moran","Morax","Morcal","Morchiss","Mordak","Mordlaw","Mordoc","Mordyle","Moreth","Morgath","Morgleeg","Morglin","Morgmar","Morgrim","Morhain","Morix","Morktar","Morla","Morlig","Morlosc","Mornith","Morrhan","Morsklon","Morssen","Mortan","Morthyld","Morvaen","Moryak","Moshaol","Mosyerl","Moyank","Mozoorb","Mrossard","Mubfusc","Mubur","Mudanc","Mudaz","Muhlenk","Muilt","Mungin","Munin","Murgaist","Murhsan","Mustile","Muuthas","Mygon","Myndax","Myrii","Myrnar","Myronce","Myrrim","Myrvarth","Myrya","Mysind","Mysmak","Naadem","Naadra","Naafa","Naalvad","Naasjerth","Nabdoor","Nabol","Nadar","Nadhil","Nadin","Nagai","Naghir","Nagist","Nagvar","Nahar","Nahoul","Naia","Naidel","Naidis","Naidule","Naidusk","Naion","Naisnim","Naithool","Nakrea","Nalbis","Naldecc","Nalkleth","Nalray","Namail","Namat","Namoin","Namvert","Nandrulg","Namphruk","Nantarth","Naök","Napolx","Naras","Nardalg","Naren","Narev","Nargath","Narjath","Narkrisst","Naron","Narqui","Narsok","Narthold","Nartolth","Narvi","Narvik","Nasank","Nasir","Natchai","Natchren","Natein","Nathlim","Nathor","Nathraq","Nautcheb","Navai","Navairnz","Navar","Navesm","Nazaarl","Ndola","Nebcherl","Nebron","Nectesce","Neelrix","Neepmire","Nefhorn","Negert","Negort","Nelat","Nelbron","Nelesck","Nelynn","Nemstere","Nemweal","Nenaire","Nengret","Nephard","Nephog","Neri","Nerish","Neruus","Nerveer","Nesbin","Neshkem","Nesser","Nestra","Nesvan","Nethelb","Netskra","Nevlyn","Newhar","Nexoz","Nextar","Nexxar","Neywode","Nezuel","Nezzdak","Niand","Nibine","Nibor","Niconde","Nictroi","Nida","Nifeld","Nigil","Nigräl","Nijim","Nijis","Nikusp","Nilgorm","Nilnoi","Nimbol","Nimir","Nimon","Nimrede","Nindiss","Nireal","Nirel","Nirhain","Nirhath","Nirloge","Nirnir","Nisherj","Nishla","Nishmir","Nishran","Nissac","Nissal","Nithilt","Nithlom","Nitra","Nivenk","Nivgrom","Nixin","Nizoon","Nizten","Nogaarn","Nokelm","Nolfig","Noloq","Nolthar","Noorlim","Norahl","Nordell","Nordran","Norfroib","Norin","Noroj","Norstoj","Novvulse","Noxit","Nrial","Nuad","Nubweft","Nuendo","Nuhar","Nulka","Nulvilch","Nummag","Nurgan","Nurrzek","Nuscolg","Nushla","Nuuzsal","Nuxile","Nuzain","Nyankra","Nyassaed","Nybron","Nyconth","Nydaur","Nyeon","Nylray","Nynaeve","Nyra","Nyren","Nysra","Oaffleg","Oakine","Oalilse","Oalyn","Oarine","Obron","Obtin","Ocarg","Oedjert","Oeglath","Oejos","Oenu","Oerusk","Oggran","Ogmarx","Ogstlang","Ohmir","Ohmoul","Ohrool","Ohwhon","Ohya","Olanc","Olbrod","Olcind","Oldaar","Oldac","Oleird","Olesk","Olgeerd","Olisch","Olix","Olney","Olthang","Oluode","Olvoor","Omag","Omazd","Ombaast","Omdret","Omfelx","Omkraum","Omoq","Omron","Onchorl","Ondar","Onilsh","Oninsp","Onolk","Onvrix","Oonglax","Ooxaith","Opaor","Opchel","Opild","Opmar","Opult","Oqueln","Orasch","Orayl","Orbern","Orbohst","Orbweft","Ordol","Orgoch","Orgrool","Orhomb","Orinde","Orisse","Orix","Orjasp","Orkuuz","Orli","Orlim","Ormdrad","Ormerd","Ormuuz","Ornault","Ornith","Oroon","Orpax","Orrisk","Orsind","Orskog","Ortain","Orthmar","Ortholt","Orthroy","Ortkuz","Orvulse","Orwelt","Orxlorn","Osgleft","Oshraal","Osphel","Ospin","Osresp","Ossiz","Ossvule","Osthandl","Othast","Ottlan","Ovaile","Ovar","Owal","Owelft","Owlin","Ouxroul","Oxdren","Oxiv","Oxoor","Ozur","Padath","Palaor","Palew","Palifte","Palvem","Palzac","Pamar","Paminsk","Panarre","Pancraf","Pandak","Pandire","Paneesh","Pangaz","Paono","Paraerg","Parbha","Pargask","Pargus","Parmist","Parnon","Paroul","Parrsath","Paslaive","Paxilp","Pazot","Peaflod","Pelas","Pelase","Pelcourj","Pellin","Pelnos","Pelvest","Pemnarsc","Pendoir","Pendra","Pengarth","Pengron","Peraule","Percaal","Perdin","Perdis","Perisk","Perlask","Perral","Perreld","Perrinx","Perthald","Perzec","Pevel","Pexul","Pezloch","Phaithor","Phaleg","Phanstern","Phaovonce","Pharan","Phargon","Pharvis","Phatuum","Phayra","Phenquor","Phesjan","Phinerc","Phinna","Phinra","Phislid","Phlomel","Pholgon","Phondath","Phynynx","Phyzent","Pidnubb","Pilark","Pilkarn","Pirkrod","Pittheus","Planget","Plitkin","Pluroign","Pnakord","Poddle","Pohlon","Pohnoor","Poroon","Porsthil","Portlusce","Praamon","Praarin","Prabaar","Pravdile","Pressar","Presta","Pretil","Prilsorn","Pritantte","Pritjan","Prollel","Proter","Prothoon","Psattor","Psirrim","Pteron","Pulaaz","Pulisk","Pumish","Purrdiste","Puuhilsk","Puvas","Pyalvar","Pyra","Pyrafe","Pyreyn","Pyrjus","Pyular","Pyzzim","Qraatin","Quaestrin","Quagel","Quagrith","Quaïve","Quaman","Quamrith","Quanar","Quanthon","Quantra","Quanvire","Quardan","Quargom","Quarnos","Quarouth","Quasha","Queageth","Quedrech","Queeden","Queeyat","Quekal","Quelade","Queldrim","Quelges","Quelneth","Quelthar","Quembras","Quenna","Querkez","Querlo","Queryl","Quesan","Quesparl","Quesrol","Quevros","Queygo","Quiddel","Quidre","Quigmoss","Quilmose","Quinaut","Quindle","Quinga","Quinid","Quintarl","Quirrak","Quirvell","Quisrym","Quizlo","Quolbin","Quondoon","Quuddreus","Quyssa","Raaxis","Raband","Raberm","Rablaen","Rabuur","Raccyx","Racere","Radalt","Raddel","Radeld","Raën","Raëss","Raethel","Raevact","Rafain","Rafam","Rafarn","Rafmarth","Raftwen","Rafur","Ragdra","Ragen","Rago","Rahaz","Raina","Raïre","Raishauer","Raistlig","Raistoc","Rajan","Rajin","Raju","Rakeeg","Rakhan","Rakhaz","Rakheer","Rakkim","Rakspire","Rakthvi","Ralik","Ralir","Ralise","Ralith","Ralkeev","Ralvord","Ramat","Ramath","Ranax","Randar","Randor","Ranghen","Rangvair","Rani","Ranid","Ranousse","Ranthur","Ranûk","Ranyem","Rascha","Rascrag","Raslak","Rasmoth","Rastagg","Rastak","Ratai","Rater","Rathdome","Rathgor","Rathlede","Rathor","Raudal","Raudell","Ravann","Ravoe","Ravthek","Raxar","Raxen","Razdan","Razdel","Razul","Rebesc","Reddom","Redlac","Redleth","Reeval","Reevast","Regwelf","Relem","Rellskar","Rellzer","Relmnar","Relmund","Relthar","Remerst","Remist","Renair","Rendkett","Rendlorn","Renjik","Renlaw","Renna","Renquil","Resfrith","Reskem","Resna","Ressif","Restid","Retheer","Retor","Retraaj","Reuzor","Revas","Reyga","Reyna","Rezbain","Rezhar","Rhamaine","Rhandain","Rhavee","Rhaxdan","Rhenea","Rheya","Rhila","Rhiorn","Rhobban","Rhodelx","Rhojann","Rhylash","Riaal","Riak","Ribos","Ridun","Ridya","Rience","Rifdos","Rifgild","Rigar","Riklak","Riksul","Rila","Rillif","Rillu","Rilmorn","Rimchoze","Rimnaaj","Rimsall","Ringool","Rinquel","Rinthmaw","Ripurth","Risnys","Ristang","Riswod","Rivalke","Rivarsh","Rivcol","Riveld","Riverle","Rivlin","Rivoold","Rivrook","Rivvid","Rixel","Rixju","Rizhad","Rizzek","Roäk","Roakey","Roandat","Robforz","Rocaltz","Rodan","Rodhar","Roële","Roëll","Roethord","Rofloef","Rokeel","Rolthar","Rölyat","Rontayn","Roolenth","Roqual","Rorkar","Rothar","Roujat","Roweal","Roxhaast","Royanse","Royskyar","Rubarj","Rubiss","Rudrisk","Ruidh","Rukhjan","Rukuz","Rulbowe","Rulmool","Rumael","Rupaic","Rupsey","Rurik","Rusgar","Rusis","Ruther","Ruusul","Ruvad","Ruwen","Ryalas","Rygarn","Rynell","Rynrys","Rysta","Sabak","Sabal","Sabfane","Sabhel","Sabon","Sabrok","Sador","Sadrouth","Saerdon","Saerulse","Safrence","Safrine","Sagard","Saglamne","Saia","Saihail","Saijax","Salir","Sallese","Samand","Samar","Sambrea","Samler","Sanald","Sanan","Sanar","Sandice","Sangol","Sankor","Sanpalk","Sanrind","Sanrow","Sansal","Santlor","Santrul","Saphyx","Sarbrid","Sarcyn","Sardrum","Sarel","Sarex","Sarfinn","Sargash","Sarik","Sarla","Sarlyn","Sarmuld","Sarnax","Sarode","Saroon","Sarthath","Sarthay","Saruul","Sarvan","Sateer","Sathla","Saudraal","Saugrib","Savak","Savar","Savaunce","Savay","Savot","Savryn","Saxar","Scamire","Scarloth","Scaroth","Scarvlin","Schabith","Scharay","Sclava","Scolath","Scradast","Scrilisp","Searan","Seckba","Sedrim","Seethenn","Segrold","Seheitt","Sejar","Selar","Seldar","Selgren","Selith","Selkind","Selnor","Selris","Selthen","Sember","Sembrith","Semer","Semisk","Sena","Sendrej","Sendure","Sengeld","Senrin","Senther","Sentix","Seonce","Sephrone","Seplacc","Seprism","Seraan","Seranth","Seray","Serdu","Sereste","Serlarc","Sermer","Seroz","Serrof","Serryx","Sersoom","Sertase","Seskel","Sethar","Sethchell","Sethjen","Sethran","Sfaël","Sfennec","Sferaj","Sforakh","Shabrum","Shadar","Shagold","Shahile","Shaifarl","Shalun","Shalvir","Shamad","Shanfa","Sharaq","Sharaz","Sharrak","Sharrel","Sharva","Sharzik","Shastor","Shathak","Shaxa","Shaydayl","Sheerah","Shembis","Shenesk","Shetrax","Shezael","Shiaf","Shialk","Shila","Shilex","Shimar","Shimglor","Shimren","Shintar","Shirak","Shivan","Shiza","Sholmeg","Shruuminth","Shryffin","Shudleet","Shurik","Shurrug","Shyden","Shylath","Siade","Sibvir","Sidron","Sierl","Sila","Silcharn","Sildeed","Silgast","Silgool","Siljenk","Silmat","Silon","Silphane","Silruum","Silure","Silvasp","Silvryn","Simbrul","Sindhi","Siol","Siralk","Sithirg","Sium","Skaaro","Skagra","Skarazk","Skarloch","Skayla","Skedrea","Skeltrin","Skilon","Skorafe","Skurin","Slanslar","Slanthar","Slarood","Slaskren","Slavgar","Slazor","Sleekla","Sleshkeg","Sleynux","Slijash","Slorac","Slurvaum","Smarag","Smerdis","Smialv","Snargai","Snayrod","Sneitad","Snurlix","Sobeck","Sodarg","Solael","Solbar","Soldine","Solis","Solohe","Solok","Solos","Soltar","Sombrid","Sophald","Sorak","Sorgas","Sormtor","Sorquoon","Sorren","Sorven","Sorza","Sotar","Soveh","Soydil","Spalant","Spandrell","Sparveld","Sperax","Spereld","Spirach","Splinvek","Sprimaine","Squamgreve","Srajsken","Sraknis","Sramine","Srebold","Sreeva","Srendix","Srennant","Sriddoth","Sroika","Sroweb","Sryxla","Stajesce","Stalfess","Starklyn","Staygus","Steeglorn","Stengos","Stereth","Steylin","Sthygron","Stielle","Stirgan","Stornrafe","Strakhan","Strakkar","Streggen","Struquil","Stryast","Strylax","Subreen","Suggner","Sujaim","Sulgra","Sulji","Sulmsy","Sulnseir","Sundoth","Sunjeade","Surast","Surigg","Surjan","Surpy","Susstark","Susteelk","Susur","Sutekh","Suukeeg","Suulkas","Suunall","Suvael","Suvrin","Svringal","Swarflig","Swarro","Swendril","Swiez","Syanor","Sybra","Sylfrix","Sylvine","Sylvyn","Symnar","Syphtar","Syrag","Syran","Syssahz","Syzaash","Taarna","Tabrind","Tachel","Tacrine","Tadra","Taedel","Taennyn","Taeral","Taeya","Tagor","Taher","Tahrjun","Taiwine","Talanth","Talar","Taldar","Taleeg","Taled","Talesm","Talgan","Talgraine","Talgyr","Talisk","Talith","Talor","Talthran","Talune","Talven","Talver","Tamar","Tamnuz","Tamone","Tamoorn","Tamriss","Tanchilt","Tandro","Tanha","Tanisk","Tanlin","Tanndo","Tanoor","Tanry","Tanûr","Tanzel","Tanzlor","Taosar","Taoyot","Taran","Tarath","Tarax","Tarcen","Tareth","Tarik","Tarin","Tarisk","Tarith","Tarkand","Tarkrog","Tarlmar","Tarnor","Taron","Taroyn","Tarqu","Tarxas","Tasharg","Tashforn","Tashlex","Tashu","Tashuul","Tasrak","Tasselt","Tasvoor","Taulin","Taval","Tavan","Tavon","Taxlon","Tayerl","Taylin","Tayrsil","Tazen","Tazine","Tchasko","Tealryn","Teawar","Tebish","Tedra","Teekah","Teekug","Teerlin","Tefaz","Tefleer","Tegan","Tegglyn","Tegoth","Teiresh","Teirna","Telaer","Telast","Telcarn","Telett","Telglas","Telgrest","Telkarr","Tellan","Telnar","Telnoom","Telsar","Telva","Telzley","Temorg","Tempros","Tened","Tenelle","Tenjal","Tenlor","Tenna","Tensfar","Tentil","Teode","Terare","Terglaw","Tergon","Terlkin","Terlyn","Ternasse","Terragg","Terris","Tershar","Terslond","Tesin","Teslan","Tevrin","Teyvrilt","Thabou","Thadrum","Thaiduk","Thaki","Thalarn","Thalax","Thaldok","Thamin","Thandart","Thandrov","Thandusc","Thangor","Tharbad","Tharbolt","Tharij","Tharis","Tharjun","Tharkesh","Tharquist","Tharsna","Tharxac","Thaskam","Thaval","Thavarl","Thawlton","Thaxid","Thaxis","Thaxmool","Thaxnar","Thayvudd","Theandra","Thebek","Thelbor","Theleb","Thelin","Thelred","Themnon","Theras","Therbur","Therrak","Therras","Therrat","Thervoh","Thesi","Thesstor","Thibkern","Thimmoz","Thinhla","Thiob","Thios","Thirlain","Thirrild","Thomilt","Thondrac","Thorgeir","Thornix","Thorskal","Thorztar","Thorzyl","Thoskold","Thoye","Thranor","Thraxil","Thremek","Thremix","Thrindish","Thrinyr","Thrykar","Thryxeer","Thugar","Thuldudge","Thulsa","Thurdis","Thuvgalt","Thyra","Thyzlont","Tiaft","Tiak","Tian","Ticham","Tiffrod","Tihan","Tika","Tilal","Tilir","Timaas","Timak","Timdos","Tira","Tiralle","Tirhthri","Tirkan","Tirnor","Tirouv","Tirvil","Tislim","Tisreth","Tisseth","Tithesb","Tivaln","Tlembic","Tlichgo","Tlishat","Tobar","Todyc","Toglank","Tokath","Tokkreft","Tokraz","Tolgarm","Toma","Tonom","Torak","Torang","Torbelt","Torbold","Torden","Toreth","Torghai","Tormir","Torsund","Torthar","Torvin","Torxar","Toscrah","Tourrhok","Tovak","Tovis","Toxathe","Tozjroch","Traalyr","Traken","Tramorn","Trantain","Trantle","Trasven","Travech","Trazom","Tredek","Treeplin","Treffaun","Trefoin","Treizeng","Tremas","Treof","Treslont","Tressak","Trevarq","Trevul","Tricoj","Tridusk","Trilinn","Trisgil","Tristak","Trithax","Triveark","Trizdoth","Troiom","Tromest","Tronvel","Troulden","Trujko","Tsarlit","Tsavan","Tsodjan","Tsojwar","Tsorak","Tuane","Tuchror","Tudlech","Tuezinth","Tugan","Tulkas","Tulsoorm","Tuntix","Turan","Turmasc","Turmis","Turvoost","Turweld","Turzeal","Tuuraj","Tvejasp","Twenja","Twinaile","Twixtib","Tyasaj","Tydwyk","Tylark","Tylith","Tylnen","Tymarl","Tymdrak","Tyrbast","Tyrdon","Tyreen","Tyrgyre","Tyrinx","Tyrlon","Tyrum","Tzichrism","Tzilen","Tziphrin","Udraam","Ufang","Ufoin","Ulak","Ulfade","Ullfrax","Ulli","Ulmyst","Ulos","Ulphar","Ulsplasm","Umbrask","Umbresk","Umchor","Umleer","Ummice","Undreet","Unfegg","Ungax","Unstric","Unstrix","Untveld","Unza","Uqbar","Urdaa","Urdain","Urdal","Urdryce","Urlyn","Urrind","Urthryn","Urtond","Urwoon","Urzvir","Ushnee","Usquik","Ussart","Ussfaal","Ussit","Usstrilt","Ustar","Ustiln","Ustlin","Ustor","Ustorne","Ustrelm","Usxald","Uthmal","Uthnor","Uvorne","Uzfron","Uztum","Vacla","Vadein","Vadrelj","Vadri","Vadru","Vaeddyn","Vaelythe","Vaërn","Vagar","Vaigthlu","Vaitarr","Valan","Valaz","Valbard","Valek","Valen","Valeth","Valgaard","Valgar","Valgarv","Valka","Valkarth","Valken","Valkesh","Valkis","Valkyr","Valmisce","Valreque","Valtarb","Valthoth","Valyn","Vamert","Vamfade","Vanache","Vanek","Vanger","Vannak","Vannyn","Vanra","Vantsled","Vanyar","Vaona","Varat","Varda","Vareth","Varga","Varka","Varlik","Varmon","Varmyr","Varna","Varnac","Varnar","Varnax","Varnaz","Varos","Varrow","Varsta","Vartoor","Vasaav","Vascais","Vasrind","Vathan","Vathar","Vathek","Vaudric","Vayas","Vaydir","Vayi","Vazar","Vazdo","Veäxe","Veena","Vegreth","Vekil","Velaunce","Veldan","Veldin","Velex","Velkind","Velnard","Velsant","Velsard","Velsin","Vembrex","Venast","Vendik","Vengkuld","Venklar","Vennec","Vennsor","Venscoth","Ventorl","Venzra","Veor","Verek","Verisse","Verla","Verlis","Vernar","Vernat","Vernil","Veror","Verren","Vertence","Vervitz","Verwantz","Verxain","Verzod","Veskin","Veswinch","Veyen","Vherla","Viaxx","Vibsoom","Vibur","Vilgrax","Vilraj","Vilsa","Vilthod","Viltor","Viltorc","Vingverd","Virainth","Viran","Virdla","Viscanth","Visharn","Viskrek","Vissir","Vistar","Vistarl","Vithmard","Viux","Vixa","Vixai","Vixlim","Vlastov","Vlitchek","Vluisc","Vlustra","Volcilde","Voldor","Volnir","Vomquind","Vonir","Voozale","Vordnaz","Vorgan","Vorplen","Vorrmor","Vorshak","Vortice","Vosklune","Votorn","Votrax","Voxarl","Vozkoog","Vratund","Vreeleth","Vregom","Vrithon","Vrumtuun","Vryxnir","Vuespra","Vuestri","Vulpix","Vuranc","Vurick","Vurog","Vuron","Vuubul","Vynda","Vyrnael","Vywyn","Vzoris","Wadziq","Waeytef","Wairbren","Walgwim","Wallibt","Walscrin","Wanelj","Wanjok","Wannach","Wanruum","Wanthim","Warbosk","Warell","Warisk","Warthan","Waryn","Wastur","Waylra","Waznak","Weardlon","Wedjeeg","Wedra","Weftig","Weftorb","Weitvan","Welfrede","Welmek","Welndar","Wemsin","Wendath","Weppel","Werclam","Werin","Weshap","Weskin","Westra","Wevkinz","Wextri","Whilfig","Whilmor","Wicrore","Wileert","Wilnim","Wilven","Wilzech","Wirreth","Wirzanth","Wistril","Witrix","Witrost","Wizlow","Wolcharn","Wolkoon","Wolnihr","Worlit","Wraxil","Wrybeck","Wryplax","Wryxerg","Wubneft","Wulfrit","Wurflense","Wusheig","Wuunal","Wuxorn","Wychnor","Wylvin","Wyndbrel","Wyndra","Wyrgon","Wyrsis","Wysholt","Wyvrax","Wyxef","Xadair","Xaedra","Xaelinth","Xaharl","Xaidis","Xaitchek","Xaldreth","Xalkhas","Xalla","Xallath","Xameld","Xanax","Xanbarg","Xandar","Xandrix","Xanille","Xanna","Xanos","Xanrei","Xanthon","Xarafe","Xarakh","Xarek","Xasim","Xaudrin","Xavest","Xavin","Xawnis","Xaxul","Xayide","Xeebract","Xeerha","Xejem","Xela","Xeldon","Xellosp","Xenerge","Xenir","Xephar","Xerra","Xerxisp","Xerys","Xexal","Xhagrim","Xhaibar","Xhomdroll","Xhorald","Xigil","Xion","Xiplin","Xiri","Xirrip","Xloris","Xoncarg","Xopon","Xoris","Xormeer","Xothun","Xovro","Xudeet","Xulan","Xundrahl","Xustral","Xyás","Xyást","Xybeuth","Xycort","Xydorn","Xydra","Xygbenth","Xyhaek","Xykrog","Xylance","Xylarz","Xylvorm","Xymoyl","Xytrin","Yaalder","Yaathab","Yadarl","Yaddith","Yadel","Yadreth","Yadurk","Yaglaid","Yagmoon","Yaklar","Yaklin","Yako","Yakthoob","Yammoth","Yamphut","Yandorn","Yaöth","Yarat","Yarel","Yari","Yarin","Yarnis","Yarram","Yastoz","Yaten","Yatheg","Yavarre","Yavood","Yavroun","Yazlar","Ycore","Yeafosk","Yeifolk","Yeldoj","Yeldrai","Yeoft","Yeoun","Yerdeen","Yergal","Yerkel","Yernoold","Yethler","Yewrapt","Yexil","Yezrik","Yhemnis","Yhemog","Yhoudeh","Yiash","Yildiz","Yilkeyr","Yimzuuem","Yinaun","Yiod","Yirod","Yivthi","Ymar","Ymarl","Yodkin","Yojra","Yombris","Yoorzamph","Yoppulse","Yorim","Yorlask","Yorrak","Yoskan","Yosneth","Yothir","Yottoa","Yrdirr","Yrgash","Yrgil","Yrinth","Yrlmar","Yrvoor","Yuklat","Yuleng","Yurisp","Yuvib","Yuzan","Yween","Zaalit","Zabal","Zabil","Zadko","Zadom","Zadool","Zaelken","Zaery","Zaffar","Zagrosk","Zahur","Zaihra","Zalethe","Zalmic","Zalthen","Zamar","Zamewl","Zamind","Zamog","Zamray","Zanak","Zaneer","Zangor","Zanqua","Zantain","Zanthu","Zantir","Zantyen","Zanurb","Zarak","Zaranthe","Zardal","Zardence","Zardirm","Zardox","Zargoi","Zaric","Zarlon","Zarmarl","Zarouk","Zarphaut","Zarquar","Zarquemf","Zarros","Zarthule","Zastor","Zatarl","Zatheen","Zathras","Zathu","Zatoum","Zausric","Zavach","Zavak","Zavel","Zaviv","Zaxweer","Zayarn","Zaydrim","Zebor","Zebulse","Zedresk","Zefteel","Zehain","Zehirn","Zekal","Zeldaph","Zelgad","Zelgen","Zelisp","Zelked","Zelmarth","Zelminx","Zelvant","Zembis","Zendarg","Zentos","Zeraa","Zerai","Zerakl","Zermish","Zerric","Zervid","Zesdick","Zessain","Zethrel","Zhaizald","Zhakoor","Zhalore","Zhantaine","Zhapris","Zharmele","Zharvek","Zhassa","Zhawend","Zhaya","Zheral","Zhirek","Zhirem","Zhiroq","Zhirquis","Zhogri","Zhomrach","Zhoreb","Zhrana","Zigmoth","Zikuyth","Zilar","Zilmork","Zincir","Zindor","Ziorn","Zirin","Zishuun","Zislun","Zisurgh","Zlanté","Zlatos","Zofram","Zoides","Zojan","Zohldrom","Zolfran","Zoltaft","Zomra","Zondar","Zoorkon","Zopine","Zorac","Zorith","Zorlan","Zorthal","Zosarde","Zrufend","Zugdin","Zugoth","Zuril","Zusdhrun","Zuukan","Zvegnaz","Zyjin","Zyla","Zylaax","Zylyn","Zyrel","Zyrelx","Zytan","Zyxim"],three:["Aathoklaa","Abalore","Abeli","Abreyxorn","Abrisen","Acaena","Acamar","Acarnod","Ackia","Acozer","Acravel","Actinor","Adalon","Adalrik","Adanac","Adasho","Adelin","Adelir","Adembal","Aderak","Aderel","Aderyn","Adhara","Adhirman","Adia","Adian","Adiol","Aditu","Adlaron","Admarlen","Adnirrin","Adnoren","Adracea","Adraeran","Adraewyth","Adrasta","Adrena","Adriphaas","Aelarim","Aerissa","Aeruin","Aetharyn","Aexien","Afaellan","Agador","Agaki","Agari","Agella","Agerquon","Agetan","Agexa","Aginor","Agior","Agnaska","Agraia","Agrasline","Agrasol","Agrias","Agristair","Ahina","Ahorra","Aidaron","Aililry","Ainnatic","Aioula","Aircristir","Aistomar","Ajasonde","Akajur","Akashic","Akasta","Akenchi","Akhrida","Akiina","Akirga","Akirku","Akritas","Akura","Akvaron","Alamak","Alanik","Alanyx","Alardan","Alaris","Alarynd","Alathen","Alatvair","Alaxa","Alaztyr","Albara","Albaral","Alberist","Alberon","Alceon","Alceor","Alchica","Aldachur","Aldaka","Aldamir","Aldirim","Aldrella","Aleasna","Aleaxa","Aleena","Aleidar","Alembis","Alera","Aleva","Alfanar","Alhana","Alidar","Aliet","Alifyan","Alinaeus","Alindra","Alixa","Aljarik","Alkaios","Allindren","Allomir","Alloran","Almarisc","Almeron","Almiel","Alnavor","Alshagrel","Altavan","Altorlan","Altria","Alucard","Alzamar","Alzarin","Amadis","Amadix","Amafer","Amaja","Amakelb","Amanster","Amaremne","Amarette","Amatin","Amazya","Ambrezul","Amelis","Amerill","Amether","Amethi","Amharad","Amilin","Aminak","Amintor","Amlieth","Amolithe","Amorin","Ampenden","Amramyr","Anandra","Anara","Anartig","Anashea","Anatsath","Ancelyn","Ancifer","Andaraan","Andistair","Andolan","Andrasha","Andula","Aneelen","Anfara","Anferas","Anfesef","Angalli","Angemon","Anghyrud","Anhalus","Anici","Anina","Ankrista","Annoxin","Anraculd","Anroana","Ansivlan","Ansuki","Antalyaar","Antarlest","Anterra","Antesri","Anthlamar","Antraneyk","Anzera","Apelnin","Aphithea","Apporrosh","Aquiel","Aquorren","Aradek","Aragaj","Araglas","Arajist","Arakbaal","Arakhreen","Arakin","Araldar","Aralik","Aramil","Aranat","Aranis","Arathorb","Araxis","Arbadrul","Arbalac","Arbalon","Arbitan","Arboran","Arcastor","Archolach","Ardalanx","Ardanos","Ardatha","Ardaxil","Ardelin","Ardilex","Ardiseng","Ardissa","Aregel","Arenith","Arestel","Arfandas","Argethlam","Arghesos","Argion","Argoël","Argolin","Arhanen","Ariann","Arianth","Aribeth","Arien","Arion","Arioth","Ariseph","Arismacht","Aristea","Arivid","Arkadit","Arkaris","Arkavyn","Arkissar","Arkurel","Arlana","Arleano","Arleost","Arlomma","Arokair","Arolant","Arozan","Arpiax","Arrashad","Arrelask","Arrenol","Arriam","Arridor","Arrivid","Arrosas","Arrossai","Arshashi","Arshavir","Artithea","Artlexu","Arura","Arvanor","Arvirask","Aryion","Arzeela","Ascarleth","Ascaveen","Ascomeld","Asgarath","Asherild","Ashikri","Ashilja","Ashnisci","Ashrodu","Asilun","Asius","Aslior","Asmacul","Asmictir","Aspaleed","Asparind","Asphodal","Aspolyme","Asquilla","Astaedi","Astalon","Asteä","Astinus","Astraëa","Asurzel","Atalis","Atazra","Athana","Atheran","Athermoj","Athina","Athnolan","Athrasomb","Athrilas","Atlavan","Atorin","Atralan","Atraxon","Atrujal","Attanir","Atticog","Aturin","Atyoto","Aurever","Aurian","Auridra","Aurina","Aurion","Auxebaz","Avalzaunt","Avandir","Avarath","Avasceen","Avenaar","Aveole","Averdal","Avereem","Avernide","Avèssèd","Avesur","Avori","Avriax","Avronil","Awennes","Axanar","Axarun","Aximil","Ayaren","Ayesra","Azaka","Azakour","Azanakh","Azanor","Azarmax","Azatta","Azella","Azergal","Azfotha","Azilos","Azmarbi","Azmeren","Azolem","Azraxel","Azriaz","Azrienne","Aztira","Azuva","Azuzu","Baeglyndven","Bahnshiath","Bakailis","Bakiar","Balandix","Balanjik","Balathol","Balazar","Balderon","Baledor","Baloward","Baltarreg","Bandibras","Banira","Banjasah","Banjicoy","Banrodi","Bantirgen","Baraca","Barahir","Baramei","Barbardon","Barixid","Barjazan","Barolio","Barsimmern","Bartosca","Barzolo","Basfui","Basidrix","Baslayan","Basliard","Batiax","Baudefloy","Bayazin","Bayidon","Bazakel","Baziran","Beäbrae","Becheton","Bedivere","Behamkai","Belaraz","Belarba","Belathgert","Beldara","Beldaran","Belegern","Belensarl","Belgarath","Belida","Belimu","Belinzith","Belistra","Belithin","Bellarix","Bellinus","Belloram","Belmalar","Belmatar","Benalath","Beorilf","Beoshar","Berazan","Berefex","Berethan","Beriam","Berlemdo","Bermulan","Berterin","Besagren","Bestagar","Bethalus","Beztevil","Bilamarj","Birictzin","Birimi","Birrtezir","Bisuneh","Bithritrilb","Blascarro","Boälod","Boäzye","Bolangi","Bolgodar","Boradrend","Borvazan","Bordvedo","Boridorn","Borivig","Boroqual","Borosov","Boruja","Breldiar","Breyugar","Brindelvix","Brinzindis","Brirelin","Brofothin","Bruyefol","Bundetlan","Burangald","Byjagan","Caadausid","Cadrillan","Cadxiel","Caglaree","Caladon","Caladra","Calandol","Calandra","Calara","Caldiza","Calial","Calian","Calibarz","Caliburr","Calimen","Calinor","Calinthor","Caliroon","Calrohir","Calvari","Calyreg","Camorba","Camrenard","Candelisce","Candralta","Canteril","Capsia","Caradin","Caraman","Carano","Carastac","Cardannor","Cardriman","Carejjar","Carenac","Caribros","Carvirras","Casliet","Cassira","Castivin","Cathloda","Cauluden","Cavrello","Cazago","Cazrogatz","Cedethea","Cedruin","Celasli","Celedrax","Celeldrir","Celenorb","Celephais","Celimbsel","Celissar","Celmiac","Celria","Cemendur","Ceomyr","Cerastes","Cerdotur","Cereden","Ceremeb","Cerindar","Cernaia","Cerrivald","Cerrlemere","Cervetar","Chakjalom","Chalberyn","Chandalla","Charizar","Charovis","Chasergha","Chatony","Chavrenard","Chayuleth","Chedynas","Chemedis","Cherinra","Cheshinif","Chesifith","Chexotah","Chiranin","Chirophanx","Chirystrad","Chissaera","Choriaal","Chrystara","Cialrak","Ciarna","Ciliath","Cillegra","Cimpelis","Cirial","Cirilar","Cisidor","Claraven","Clarian","Clymerice","Colperat","Colverslyne","Conridas","Coramur","Corcoran","Cordago","Corisur","Cormannon","Coromis","Corraemer","Corstanis","Coyasal","Cramorul","Crayeera","Credori","Cresbaral","Crodelan","Cromora","Crondowys","Cruirmox","Crysindlyn","Cthasia","Cubrucol","Curtifer","Cveralisk","Cyarium","Cynalis","Cynara","Cyrilla","Cyrissil","Daakrasef","Dabnavar","Dacarin","Dagaldsain","Dagorla","Daiavend","Dakkiah","Dakokan","Dalarthra","Dalimir","Dallandra","Dallibren","Dalmaxen","Damarel","Damia","Damisen","Dammarlet","Damria","Danatren","Danbrelaj","Daqualor","Daragard","Darandril","Darani","Darimpelg","Darioj","Darisimp","Darnien","Daruda","Darusor","Darvenel","Darvien","Dasanay","Dasyani","Dathanja","Dauroät","Daximyr","Dazaroth","Deglavar","Dekreon","Delalea","Delandim","Delaquoth","Delcardes","Delgadjas","Delgari","Deliard","Delitra","Delmonda","Delonos","Delsinar","Demelsàvre","Deminar","Demithea","Dendera","Denivra","Deowrix","Deralten","Derian","Derisurm","Derokain","Descelet","Desnema","Desthia","Destrino","Devabril","Devaia","Devaren","Deviscind","Devyna","Dezelglim","Dharijor","Diagur","Diamel","Diastul","Diazrax","Diniwirn","Dional","Diony","Dismarntir","Distana","Distiva","Diurmad","Divior","Doälva","Dokessin","Dolitan","Dolskior","Domagren","Domovoy","Doniale","Donivesh","Dorana","Doravin","Doraxa","Dorether","Dorgrian","Dorianth","Dorosard","Drafarna","Draglios","Dralgamor","Drelbaran","Dreleon","Dreower","Drusmirak","Druycalid","Durathor","Duruis","Dusoto","Duvalin","Dvereya","Dygardo","Eberyn","Ecarnis","Echengar","Echredrisk","Edalcor","Edamar","Edaris","Edeera","Edeiric","Edelan","Edromon","Eemonil","Eermiaw","Efelin","Efiath","Egarun","Egeanin","Eglashor","Eglathorm","Ehlmargis","Eilinud","Einnara","Ekisha","Elaara","Eladain","Elanja","Elanlir","Elantir","Elardoand","Elayess","Elbasant","Elbrian","Elcaros","Eldikohl","Eldimyr","Eldivren","Eleaseth","Eleniin","Elerasc","Eleril","Elesfar","Elexna","Elhanter","Elharta","Elhiri","Eliaazh","Elindel","Elion","Elispesh","Elissim","Elistan","Eljendril","Ellamoin","Ellanath","Ellendar","Ellidyr","Elmeric","Elmradra","Elnavor","Elnoë","Elorix","Elriseth","Elrodin","Elrowan","Elsandar","Elverus","Elzirtha","Emeresc","Emistar","Emparyn","Emraël","Enchasol","Endelaer","Endeltrad","Endoyarl","Endremen","Engkalat","Enifrax","Enliack","Ennorath","Enoëre","Ensocand","Enzoray","Eolair","Eolglyu","Eomer","Eosin","Eowine","Eralith","Erbarax","Erdegron","Ereäd","Ereboen","Eregin","Ereia","Ereidan","Ereinid","Eresbor","Ergamarl","Erian","Erihim","Erijin","Erilind","Erilyth","Erimewn","Eriptil","Erizael","Erjesko","Erkollo","Erlata","Erliskan","Ermentej","Ermiod","Ermizard","Erobor","Erraxam","Errixi","Ersazern","Erudin","Eruna","Escaloth","Eshorden","Eskedar","Eslenix","Esmeril","Essamor","Esselin","Estelorn","Estulman","Esyorna","Ethayan","Ethilrist","Ettellarn","Euralen","Eurayo","Evarul","Evedben","Eveltur","Evenor","Everan","Everard","Evidor","Evrilet","Ewugan","Exior","Exorric","Ezirith","Ezpirasp","Ezrabar","Fabliain","Faerlasdar","Fafmalan","Fahorjom","Falamund","Falazarm","Faldian","Faledra","Falias","Faliorn","Fallonar","Falmalin","Famaril","Famiryah","Farammil","Faranar","Farathar","Farazwen","Farendal","Farezar","Farias","Farinda","Farovlem","Farreflan","Farrian","Fassander","Fassiral","Fathanor","Fathimlas","Favular","Fayenned","Felacroy","Felectos","Felendos","Felentir","Felinstrod","Felladin","Fellathor","Fellazoor","Felmarus","Felvia","Fenhalut","Fenkkara","Feollan","Feraanty","Ferazhin","Ferdithir","Ferena","Ferescha","Feridmir","Feridoth","Ferilken","Ferkiel","Fermandra","Fermazeth","Ferozak","Ferrandry","Ferrinox","Fertimqui","Fesanor","Fesmaran","Fethijorn","Fethorval","Fezmirath","Fiaminch","Fiantzin","Fiathna","Fiensar","Fierex","Filigal","Filrena","Finaefin","Findegil","Finmanal","Finrhabar","Fiollix","Fionlex","Fiorag","Fiori","Fiosthan","Firandaal","Firimar","Firmrius","Fivrenesse","Flacoë","Fluimorl","Foäshroud","Fomorisk","Fonesco","Fontaera","Forambad","Forizuld","Foronté","Forrandir","Foxilkin","Fozdollo","Fraajior","Fragadin","Freälaf","Frinilex","Frosserthil","Frugansey","Fuareece","Fulinas","Fulmerack","Fumorak","Furalor","Fusial","Gadino","Gaffindur","Gaherist","Gaianac","Galassad","Galedrej","Galeeya","Galeia","Galendil","Galhambraj","Galhandvis","Galiel","Galjiu","Gallaia","Galorin","Galrion","Galthien","Galtyran","Galvaris","Gambrefax","Gamorrand","Ganatus","Ganelon","Ganoraz","Ganscion","Ganzadahl","Garagrim","Garalden","Garathgen","Garduil","Gardulkar","Garemo","Garflion","Garlenon","Garriech","Garziot","Gastenmil","Gatlatas","Gatzeiros","Gavendra","Gavilen","Gefandrall","Gelsgiath","Genteras","Gerergol","Gerexi","Geskrivus","Gevanarth","Ghiella","Gidyrrha","Gildanar","Gilennan","Gilfangron","Giljrian","Giltsanos","Gimika","Gipideur","Girazi","Giridal","Giridyne","Giriel","Girkirath","Gisorath","Gisriral","Gisselek","Givirtrik","Gizarak","Gizbion","Gizherae","Gledrion","Gleocyn","Gleyander","Gliranna","Glirfingril","Goibhniu","Golexar","Goloë","Gonscevin","Gontomir","Goranna","Gorazky","Gordalis","Gorias","Gorion","Goronwy","Goronyr","Gorova","Gorthokon","Graginar","Graliath","Gredanost","Griarnix","Griotam","Grissejan","Grolliax","Gualat","Guilmarn","Gulifrith","Gurnarok","Gwyrion","Gydrian","Gymnivus","Gyrelyest","Hacoulede","Hadowrak","Hafranel","Haielva","Haijannod","Hajandin","Hakatri","Halibarn","Halios","Haliwyn","Halveron","Halvia","Hamadar","Hamancen","Hamavand","Hanamere","Haneran","Hanorayn","Hanrassu","Hantaira","Haplana","Haprissa","Harana","Harandash","Harezek","Hargranar","Harigran","Harnahad","Harobel","Harondar","Harromarl","Harsinna","Hartien","Hartazan","Hasalgar","Hasprion","Hathlizu","Hathvoril","Hautilim","Hautulin","Hauxpomel","Haxmaraun","Haxmaspar","Haxmered","Hazalet","Hazazel","Hazharat","Haziran","Hedrapake","Heereos","Hekeren","Helbathil","Helobaine","Helphegad","Helziatz","Hemgarel","Henalur","Herecharn","Heriganj","Heriol","Hessevet","Hethica","Heuleanar","Hexavren","Hexelin","Hiabaid","Hiassveil","Hifridil","Higlaia","Hilio","Himurlem","Hintyrit","Hirodrix","Hizirin","Hokryähn","Holmarun","Horbajir","Horlabo","Hralfecca","Hrioncet","Hulterna","Hurjaël","Huvatal","Hyaliptar","Hyarantar","Hydrestin","Hylamet","Hylarel","Hylissa","Hyphorond","Hyraskel","Hyrkhalla","Hyzaspes","Iahaun","Iarlen","Iasho","Ibekon","Ibgali","Ibrana","Ibriax","Ibriole","Icanaar","Icavra","Icera","Ichandrik","Ichindar","Idarlan","Iffalon","Igjaru","Ijevthla","Ikarin","Ikirkar","Ilabrem","Ilairam","Ilarnin","Ildezir","Ilenfal","Ilfangir","Ilfinir","Ilgaeldar","Ilikir","Ilimvair","Ilkerné","Ilkyarzim","Illana","Illara","Illiarn","Illsuin","Illuanc","Illurdan","Ilkaroque","Ilnitelg","Ilrehjan","Ilumaar","Ilvelisk","Imaia","Imajin","Imashla","Imaydra","Imedet","Imikeer","Imilxime","Imisard","Immelanx","Immoreth","Immornam","Imnatris","Imrahran","Imravog","Imrazixt","Imzia","Inayiss","Indreju","Ingrenux","Inhectin","Inidar","Inifael","Inifox","Ininay","Inisdex","Inisfail","Inkiljist","Inkotai","Innoäk","Inora","Insallasc","Intaphka","Inzellene","Ioga","Iolan","Iombar","Iosaz","Iosdil","Iperi","Iphara","Ipholar","Ipolok","Iptasor","Irankar","Irathar","Ireneemp","Irial","Irian","Iriboth","Iriga","Irmaskor","Irmistib","Irphilin","Irriosce","Irshirkur","Isaelsu","Isamar","Isarma","Isbexa","Isencal","Isgremnir","Ishmira","Ishnitra","Isiki","Iskarrine","Iskimi","Iskiret","Isodrost","Isotu","Isromant","Isrotha","Issakra","Issanthal","Issevex","Issimrak","Istengrem","Istensanth","Isthentild","Istheol","Isthgiol","Istidom","Istijed","Istroval","Isuxnen","Itharna","Ithelus","Ithimryr","Ithineg","Ithober","Iventhax","Ivrishel","Iwranda","Ixambel","Ixanthis","Ixarine","Ixcavar","Ixium","Iyenna","Iyiskek","Izpiizzi","Jabarla","Jablomeed","Jaelmura","Jafila","Jagadis","Jagaroch","Jahaurin","Jakalar","Jakarhul","Jakendar","Jakharral","Jakronib","Jalaran","Jalatha","Jaleana","Jaligar","Jalisharn","Jalnio","Jalvochin","Janceä","Jandagar","Jandenor","Janien","Janniel","Jaralor","Jarantin","Jaratryne","Jardilan","Jarien","Jarioth","Jaronris","Jascelat","Jascenant","Jaslani","Jassolind","Jatherfar","Jathlabra","Jathzoril","Jaukulmar","Jaurelin","Javennae","Javrezac","Jazaeron","Jejaneel","Jeleeya","Jelerish","Jelgrion","Jemadar","Jemkoleng","Jeoric","Jeoster","Jeprana","Jertezan","Jervida","Jessabra","Jevalor","Jevedic","Jevorin","Jevrian","Jhessala","Jhinilak","Jianthi","Jidesa","Jifrusni","Jijinjic","Jilarna","Jilitha","Jillaro","Jingaran","Jiriselk","Jiruik","Jivessla","Jivizet","Jixannil","Jizuret","Joäsra","Joplezno","Jorian","Joriel","Jorodrin","Josafyre","Jothaugan","Jothera","Jozranal","Jranahaz","Juarin","Jumeon","Juramanx","Jussondrel","Juxeccan","Juzawik","Kacinzen","Kadishir","Kahora","Kairaku","Kajabor","Kajua","Kalandrin","Kaledath","Kalvaro","Kamisu","Kamundam","Kandonak","Kandorin","Kapasin","Karaël","Karamis","Karanchir","Kardarkar","Kardotha","Karela","Karezthame","Karimeg","Karogan","Kasiran","Kasluna","Kastana","Kastauët","Kasthukras","Kathanal","Katryzaj","Katumar","Kazellor","Kazuön","Kedrinal","Kelemon","Kelmerveld","Kelraiog","Kelvixa","Kemmergen","Kerannix","Kerason","Kerasun","Kerendul","Kerfina","Kernamald","Keroona","Kerrekril","Kerrihaude","Kestramel","Kexranea","Khadera","Khalidûr","Kharisden","Khelaret","Khorenym","Khosilin","Khuraram","Khurkula","Kiarak","Kiaskek","Kifadli","Kinbulser","Kinjeon","Kintarna","Kioxug","Kireoj","Kirias","Kiriok","Kirithul","Kirrevi","Kiuspou","Kizarlon","Klandisar","Klirundon","Kodoki","Korachon","Korasal","Kortien","Korvaron","Kotajad","Kothenai","Kovaia","Kozanga","Krasgalad","Krienna","Krisilal","Krytelgaz","Kuiju","Kydomor","Kylara","Kylinsra","Kymelin","Kymorel","Kyrembra","Kyvaran","Kyveler","Laaraban","Lacoumox","Lacrion","Ladamur","Ladestro","Laesina","Lafera","Lagaram","Lagova","Lahanolt","Laklanot","Lalaia","Lalthilan","Lamidris","Lamifer","Lamizjax","Lampralur","Lamrella","Lanisor","Lanival","Lanstreä","Lantakrel","Lantamar","Lanumel","Lappeleme","Laprimal","Larana","Laranel","Larilect","Larion","Larquinip","Lascynthis","Lasirusk","Lataffin","Lattremond","Lazadon","Ledmial","Legaaruksh","Lelatha","Leledish","Lendela","Lendoweer","Leodaan","Leojith","Leoptrin","Leptenar","Leptredin","Leranorb","Lessefren","Lethrian","Levasim","Lhyrrhana","Liamar","Liambra","Liammeck","Lianairn","Liansra","Lianvrin","Liarxa","Liavec","Liembra","Lilasta","Lilkauki","Lilthia","Limbria","Linargan","Linnaker","Lionus","Liossoor","Liquemar","Liroitzin","Lisimbra","Lissara","Lissflorel","Lithuir","Lithyulin","Litoefer","Liydala","Lizenna","Lizinra","Llanaanu","Loëra","Logano","Lorana","Lorenvra","Loriant","Lozeneth","Luciet","Lucimer","Lunzia","Lurepusc","Luspilkir","Luthirring","Luuranoth","Lydalay","Lymandal","Lynaya","Lyndré","Lynxias","Lypilla","Lyraloss","Lyrian","Lyrossa","Lyrozi","Lythian","Lythratole","Lyzeary","Maalkeyan","Maceon","Madaluur","Madiglim","Madora","Maerleetlas","Maeronyx","Mafranic","Magezatt","Magithel","Maglethom","Magylin","Mahelas","Majaelith","Makana","Malaësse","Malaioc","Malambard","Malandor","Malasire","Malasquor","Malavok","Malbrosac","Maldagon","Malechan","Malestrin","Malgadarn","Malhantis","Malhemar","Malidryth","Malifrin","Malisken","Mallaran","Maloroc","Malsanon","Mamvier","Mandrezool","Manjalem","Mannanon","Mantragan","Maöndat","Mapiran","Mardieth","Maridan","Maridisp","Marindro","Marinus","Marivik","Marliok","Marmaranx","Marmeron","Marniel","Marreldix","Marsarok","Marsineh","Martanzix","Maruis","Mashalla","Masira","Massoran","Mathannil","Matzirik","Maunestin","Mavira","Maxander","Maxtibel","Mazegus","Mazesra","Mazian","Mazivel","Medarinn","Medrahar","Medvergaal","Mehalet","Mejarlan","Mekeesha","Melamnir","Melapis","Melasdar","Melikkhaz","Meliune","Melliorn","Melorond","Memisaire","Menalor","Mendobarl","Menelvaour","Meodas","Meraleph","Merama","Meramel","Meranshu","Meraudax","Meriag","Meridyn","Meriel","Merilec","Merinar","Merinard","Merivran","Merkalo","Merlience","Merresil","Merscianthe","Mertamet","Mesegrim","Metrofa","Mevedet","Mewreddan","Mezedan","Mezerel","Mezlehet","Mezlethil","Mezrian","Mezrenain","Mezvorax","Mialdere","Mialorn","Midela","Mierah","Mikramil","Milicseth","Minaxa","Minrioth","Miranei","Mirantilb","Mirelith","Mirenta","Miriel","Mirieth","Mirintha","Mirion","Mirreschade","Mirrsomi","Misella","Misiplum","Misirim","Mithelos","Moälroc","Mobrias","Moieddin","Moisiane","Molhanni","Mondestin","Moramin","Morannel","Morilimth","Morleved","Mormindar","Morofar","Morozam","Morrixan","Mosbelo","Movellan","Moxfiel","Mrankali","Mredisu","Mujeket","Mulciner","Mumivor","Murbahir","Murias","Murinja","Mustesra","Mylbdenir","Mylenost","Myllara","Myloryx","Myractus","Myrmelesc","Myrrhismir","Myrstica","Myruken","Myvior","Naadien","Nabronyb","Naëska","Nagarax","Naiagard","Najikim","Nambolar","Namezlith","Namien","Nappolanc","Naramant","Naranlob","Naraven","Narecan","Naretha","Narfalax","Narimas","Narisdaat","Narissa","Narotham","Narothun","Narrabhar","Narseldax","Nasmerul","Nateera","Nathogan","Natrifer","Nauthzegam","Naveiruz","Navislorn","Navithesk","Nefaroyn","Negula","Nelibar","Nelphina","Nelthenti","Nelveren","Nemarhaz","Nemisen","Nereitra","Nerevaunt","Nerian","Nerida","Neryonid","Netharna","Nethoël","Neveena","Nexian","Nexlio","Niascynth","Nidoran","Nienra","Niggollo","Nilchauntif","Nilmio","Nimandest","Nimfiralth","Nimiax","Ninozain","Niomakh","Nisamon","Nisaqua","Nissafen","Nitharna","Nithikin","Nitoda","Nivilan","Nizamar","Nizared","Noldiruth","Nolteera","Nooranda","Norian","Norvandrel","Noumander","Novrima","Noxalwan","Nuanvi","Nuarban","Nujriha","Nulagdi","Nuskuron","Nyrana","Nysorat","Obatzi","Obelnid","Ocmias","Odimos","Offenalke","Ogola","Ohranjat","Ojavi","Ojilinx","Okalder","Okpala","Oktavisp","Olamar","Olbenos","Oldarane","Oldrinben","Olican","Ollascet","Olnefkin","Olondin","Olonthos","Oloru","Oloxem","Olybris","Omaldras","Omaphel","Omarna","Omarthis","Omberdal","Ombriand","Ommarisk","Omosdur","Omziec","Onaldrus","Oneira","Onfivlen","Oniack","Onjedrit","Onoxim","Oolevran","Oomia","Oorandehle","Oquilda","Oradrad","Orbasdron","Orbeleez","Orbitan","Orchellor","Orebus","Oremex","Orenai","Orennem","Oridyr","Oriob","Oristkel","Orithreyn","Orivaen","Orlantsu","Orliend","Orlopem","Orluan","Ormadzel","Ormarit","Ormion","Ornulaa","Orodel","Oromrath","Orovar","Orovune","Orpirrhis","Orreminsk","Ortazan","Osgoran","Oskana","Osmoril","Osoyrir","Ossfenness","Otargol","Othaldon","Otralinx","Oujanglor","Ouraia","Ovarasc","Ovelleau","Oveselm","Ovranoj","Ovrenor","Oxavar","Oxavart","Oxruël","Ozatris","Ozgethern","Ozmirall","Ozringol","Palabell","Palarna","Palegain","Palidral","Palimbrust","Palinor","Panafig","Pandaxes","Pandelee","Pandeleur","Paomelna","Pardyereyk","Pargascir","Parlion","Paskorran","Pastengral","Pavadahl","Pavandor","Paxijanc","Paxilla","Pazaleeb","Peladon","Peledor","Pelendur","Peleod","Pelezef","Peliast","Pelizon","Pellingale","Pelmercest","Pelmergol","Pelsiffra","Penengvik","Peradal","Peraga","Perendan","Perendor","Peridor","Peripril","Perisgrim","Peristaad","Perligon","Pernian","Perridex","Persimmid","Perushka","Peslivar","Petreban","Phaidonaz","Phaneon","Pharethyn","Phariol","Pharnioth","Phascalon","Phesian","Phiarusk","Philizim","Phiniak","Phiressa","Phoosrotex","Phoseter","Phramberzond","Phranzulet","Piapiar","Pievalp","Pillia","Pioma","Pirigal","Pirilaud","Pirinweal","Piritosk","Pisçion","Pishior","Pithibryl","Piynameer","Plamias","Plenchiel","Poinellay","Poinembet","Polassar","Polorrum","Porodo","Porsenna","Potadu","Priligrel","Progneti","Ptamriad","Ptelian","Pteraphon","Pulsavra","Pyrenda","Pyrtolosc","Pytholtus","Pytrigon","Quaeleon","Quagrana","Qualbian","Qualhassan","Quanaöck","Quandiel","Queegani","Quenteri","Quentezard","Queoddry","Queridra","Queroë","Quersemel","Quilium","Quilverex","Quinibus","Quisifrix","Quolatha","Quolessip","Quoranûl","Quyzacorm","Raascia","Racassar","Rackafel","Radasman","Radelon","Radula","Raiveral","Rajiten","Rajurno","Rakmyrral","Rakshilan","Ralanzur","Ralisimp","Ralmanor","Ralystra","Ramura","Ranessin","Ranicroy","Ranifice","Ranomar","Rasaleth","Rashemba","Rassdolim","Rasseglin","Rassfydel","Rastilon","Ravathene","Ravenor","Raverail","Ravimo","Raxia","Razamor","Raziel","Reänkal","Reepifer","Regalorj","Regimir","Reldorin","Releza","Relikin","Relion","Rellevirk","Relliapt","Relundar","Rendeptir","Renzelath","Reonin","Requiek","Rescorance","Resmenalse","Retalkin","Rethia","Revenal","Rezmyra","Rhakotis","Rhendalin","Rhiacind","Rhimaya","Rhimeren","Rhisala","Rhomiscele","Rhydolin","Rhyölar","Riasine","Riatar","Riatha","Rickata","Rigisil","Rigonav","Riimara","Rilatha","Rilidtai","Rilmara","Rilmorban","Rinxfantir","Riodan","Riolarn","Riolba","Riscintell","Risgana","Risia","Risrinam","Rithotarl","Rixian","Rizifire","Rocapeste","Rodifel","Rodion","Roënen","Rokefyre","Romela","Romenom","Rondolla","Rophelon","Rophendir","Rosmarlind","Rouädth","Rovlerac","Rozeeldin","Rugiel","Ruhria","Rumilan","Runian","Rusaadi","Rusalmna","Rusitholk","Ruvasarn","Ruvatro","Ryözile","Rynian","Rynristas","Rynyris","Ryxarro","Sabrazsa","Sabriel","Sabtimon","Sadabel","Sadeera","Sadonel","Safarrinx","Saffinka","Sagamir","Saguil","Saïnda","Sajaerix","Salaarus","Salathir","Salclias","Salina","Salinen","Salioct","Salitlan","Salmorin","Salrissa","Samalend","Samerlan","Sancial","Sannsara","Sanorye","Sanpellin","Sanseran","Sanzhara","Saqavar","Sarandere","Saraxa","Sardanak","Sarendril","Sargadal","Sariya","Sarkinos","Sarkozan","Sarlian","Sarmasar","Saroë","Sarozak","Sarrier","Sarrofo","Sarsicaul","Sartenna","Sarupha","Saschalon","Sathlatta","Satrothan","Savêma","Savretos","Savria","Scathanar","Scesefna","Sebandune","Selamvra","Selestor","Selial","Selidro","Selior","Selmiar","Selnara","Selnia","Selsabar","Selverel","Semarsen","Semdalice","Semmagel","Semurquan","Sendara","Senoster","Seorra","Sepiroth","Seprenal","Sepria","Serakel","Serambast","Seramir","Serefic","Serrios","Sertumen","Servelen","Serydran","Seskandal","Sevandir","Sevandor","Severique","Severlesk","Sevlasné","Seytarin","Sfaeriqua","Sferalan","Sferio","Shaikala","Shalimed","Shameera","Shanatherl","Shanderzoth","Sharajsha","Sharbremil","Shardovan","Sharretal","Shaxeän","Shehallem","Shekkazad","Sherethis","Sherina","Sherotha","Shevrian","Shibema","Shiennith","Shildakor","Shimjian","Sholgonda","Shragonach","Shrymaroyne","Shurakai","Shushila","Sialtaan","Sianar","Siandar","Siandor","Siannem","Sidanzar","Siendred","Sientij","Sientrib","Siflana","Sigilla","Sildengold","Silifer","Silistel","Silivis","Silmriel","Silvarak","Silvronom","Simara","Simblio","Simirling","Simisthir","Simrana","Simusha","Sindaract","Sindiris","Sindiroq","Sinhadak","Sinira","Sinoprin","Siortlen","Sioshorl","Sirelu","Sirenel","Sirgamesc","Sirifrix","Sirinar","Sisimar","Sisimbra","Siugorn","Sjalara","Skalidra","Skelalack","Skelogha","Skelother","Skesira","Slanarra","Slanria","Slenlior","Slevindralsk","Slyrmegnel","Sofrego","Sofurin","Soleddin","Solfellan","Soliroq","Solliot","Solmerip","Soltharan","Somagar","Sondaardrel","Sondrelen","Soomerak","Soquallin","Sorasta","Sormian","Sozmerold","Srandelix","Sravoorin","Steraval","Sthinalel","Stiaver","Stivernach","Sudevim","Sufranar","Suilim","Sujorgni","Sukratak","Sulathaag","Sulethri","Suliane","Sulien","Sulimo","Sulkanar","Sulkari","Sulroné","Surmaris","Suruay","Suzamil","Svialdan","Swangoren","Sweiborla","Sylvetane","Symaril","Syriolg","Syzirept","Szivistri","Taalivex","Tabusaad","Tadasli","Tafashic","Tainbara","Taladere","Talareme","Talarin","Talertus","Talien","Taliess","Talieux","Talion","Talislance","Talmora","Taloxar","Taloxi","Talunon","Tamavold","Tamias","Tamioj","Tamlivran","Tamnithir","Tanafin","Tanakord","Tanier","Tanjalas","Tanjara","Tanseral","Tanviu","Tarakus","Taramag","Taramos","Tardelin","Tariaj","Tarkenthos","Tarmesorn","Tarmioc","Taroya","Tasardy","Taslhiot","Tassafert","Tassiran","Taumonar","Taveli","Tavista","Tayaren","Teänyn","Tegana","Tegleron","Teirajan","Teirishir","Telarna","Telcyra","Teldrua","Telegris","Telendys","Teleura","Telnarzim","Temeris","Temeslin","Temmosus","Temontel","Tenadas","Tenidrist","Teotsir","Terasiln","Terejoen","Terena","Terquaelen","Terrenus","Terthelej","Terthyrkrim","Tervaën","Tesmarrak","Tevala","Tezarim","Thadarin","Thalafer","Thalaras","Thalira","Thalladyle","Thameera","Thamiel","Thanalar","Tharamoon","Tharnia","Tharomyl","Tharoval","Thellikkin","Thelodin","Thereski","Thieras","Thieryn","Thirindon","Thithrama","Thitrivar","Thixagen","Thlenedern","Thlunarna","Thoorana","Thrabanquo","Thumithar","Thurmatoth","Thuuvanar","Tiabrell","Tiachul","Tianan","Tiaosut","Tiaxa","Tiazan","Tiefkol","Tifulgar","Tigrana","Tirages","Tiregam","Tirelev","Tirion","Tirlimist","Tirrasthu","Tissawane","Titia","Tivadul","Tiveran","Tivriex","Tiyagar","Tizvian","Tolarim","Tolarmej","Tolenka","Tolibell","Toramus","Torbera","Torgassin","Torlion","Tormitran","Toroäsh","Toroman","Torquenyx","Torresind","Torsamant","Torzundus","Tothirnal","Tralien","Tralquien","Traviod","Tredestin","Trellium","Trenaevis","Trilajo","Trinezhan","Triolus","Trisdestrin","Troviawn","Trydaron","Trysadon","Tsacramal","Tsalkoril","Tuilleth","Tulio","Tuniger","Turmalin","Turobel","Turvesin","Twanalor","Twillessin","Tylastreen","Tyldora","Tylenea","Tyradin","Tyrathis","Tyrtyra","Tzaroli","Ualosk","Ubdakon","Udanax","Udanib","Udefoin","Udrahart","Udria","Ufanort","Ufial","Ugivor","Uilda","Uilric","Uixet","Ukinorn","Ulanthas","Ulember","Ulendal","Ullifan","Ulnavell","Ulnaxdra","Ulrepin","Ulroënce","Umaspin","Umbraheed","Umbrina","Umerac","Umeri","Umikrel","Umistal","Undalryn","Unedrinj","Unkalisk","Unstoffel","Uraör","Urghazkoy","Urhankren","Urimnor","Urjalum","Urjaya","Urmalgis","Urrelor","Urzunift","Uscrumine","Usegar","Ushamtar","Usigul","Uskanast","Ussala","Ussolec","Ustaleaugh","Uthudain","Utorel","Uveena","Uxavis","Uxinor","Uxuvi","Uzileth","Uziprost","Uzirin","Uzisloj","Vacruëx","Vakrissa","Valabar","Valadan","Valagarth","Valandrib","Valarend","Valarom","Valaxis","Valdera","Valfoxel","Valina","Valion","Valistes","Vallia","Valmerac","Valphanar","Valserna","Valterla","Valthomé","Vanamon","Vanara","Vanathil","Vandelex","Vanegrin","Vangrahzmid","Vantarad","Varamanx","Varamid","Varamis","Varcantis","Varchimas","Varkellit","Varlandel","Varraël","Varrakel","Vashlion","Vasmarro","Vaudirek","Vayemis","Vedaraf","Veezproä","Velaila","Velanac","Velija","Velina","Velior","Velissa","Velozma","Velvermeld","Vendramyr","Veneska","Venithros","Venmarenc","Vercazlyde","Vereedra","Verenice","Vereska","Verethest","Verissrad","Verolant","Verowa","Vervadesce","Ververine","Veslomere","Vetrengarr","Vettemis","Vhiallon","Viastin","Viastra","Videla","Videssos","Viero","Vilirast","Vilrokin","Vilscelyn","Viomer","Virandisp","Virenar","Virensa","Virjauruk","Virosanne","Virthuren","Vismarun","Visperime","Vixuad","Vixuël","Vizina","Vladilesk","Vlarobaal","Voiopë","Vojeera","Voldisterre","Volkazen","Volmaran","Voluru","Vonidar","Voozcoreme","Voranor","Vorchazel","Vorelgin","Vorien","Vornica","Vornovas","Vorquemand","Vorunir","Vorvadoss","Vosmerrel","Vossari","Vozmarald","Vrepimus","Vrilestamn","Vristamor","Vuëthar","Walspinore","Wandalar","Wanestka","Wantorak","Wardlanof","Warlwier","Warrigel","Wascramin","Wasmoët","Watreyan","Wazerac","Wedonal","Welmerel","Wendower","Werrelet","Werscunok","Weverin","Wexavin","Whallifrond","Whearius","Whibmistle","Wianna","Wicardod","Widzoonaev","Wignaja","Wiinecot","Winian","Wodhrian","Woringel","Woxethoon","Wrodlian","Wurzemand","Wyliath","Xadamos","Xadogar","Xaisuruk","Xalorof","Xanafel","Xanalver","Xanbiah","Xania","Xantenmec","Xanxia","Xaraata","Xargusull","Xarthia","Xeelafarl","Xeelona","Xegessem","Xelica","Xemeret","Xemindar","Xenia","Xeralisk","Xerdelisse","Xerechron","Xhalsadan","Xhanazlet","Xhodrovan","Xibalba","Xiifrani","Ximahlto","Ximakran","Ximodi","Xirian","Xirijasp","Xoänon","Xomdiral","Xorandor","Xoryalan","Xyaria","Yaimondar","Yakovar","Yakthodah","Yalduvar","Yaliath","Yallarna","Yallorind","Yalveron","Yamala","Yamindra","Yandelar","Yandrahla","Yaralet","Yarial","Yarillo","Yarzolept","Yashengzeb","Yathagault","Yathoric","Yathorlak","Ybalil","Ybranar","Yeltranal","Yeluöz","Yemanthal","Yemboloth","Yerdien","Yesgolod","Yevjarel","Yfremoon","Ygristan","Yhantuör","Yldejaste","Ymarisce","Ymbria","Yncaarim","Yohonough","Yonraloth","Yoplossa","Yoredan","Yormexoon","Yranthis","Yratos","Yrcanos","Yronthol","Yrwelos","Yryloth","Ythlyra","Ythribond","Yurnada","Yusperal","Yuzigral","Zaamontel","Zadamun","Zadipan","Zadrowane","Zagrenxa","Zaharbif","Zajrenja","Zakiwya","Zalagi","Zalanath","Zalazar","Zalberek","Zalremy","Zamberel","Zamblezur","Zamora","Zamordax","Zamorla","Zanatir","Zanestra","Zangabal","Zanindil","Zanreynad","Zantifer","Zanzinel","Zaraana","Zaranave","Zaranax","Zarfhaano","Zarimarth","Zathmandar","Zayzazi","Zazamanc","Zazumel","Zazwinoon","Zebalan","Zefaeran","Zefrondus","Zelemorn","Zelgadis","Zellinet","Zelmarine","Zelprothon","Zemanthel","Zemirtol","Zenaxa","Zenilyeth","Zenithral","Zenorsha","Zentrigar","Zeosard","Zephiron","Zequiel","Zeranoj","Zhelavon","Zhemaeta","Ziacalt","Zifidin","Zilkorlaz","Ziraldra","Zirdarbis","Zirzihin","Zoälmar","Zoändrik","Zoävar","Zochiad","Zodolin","Zoltaren","Zominor","Zoramus","Zoranji","Zorashad","Zorayas","Zorestrel","Zorewyr","Zoroma","Zoromesh","Zosmindo","Zotaquaan","Zotheera","Zozminod","Zubvuysa","Zulaeram","Zulpirek","Zurenkin","Zurliban","Zydaraf","Zylarthen","Zyramythe","Zytavirk"],more:["Abadapnyr","Abrethendar","Acrasian","Adario","Adieseth","Adilikor","Adinalar","Adriaxa","Afelanidd","Aforvalon","Agiora","Agreliwin","Aguidran","Aguilla","Aikikia","Akitarka","Alanahetra","Alarion","Alartia","Alarurigu","Alcidio","Aldarian","Alelakon","Aleshmara","Aletorim","Aleuworust","Alianala","Alicindra","Allessanya","Alorassanz","Amafeyan","Amathenar","Amdaramast","Amiria","Amriffien","Anaumiantis","Anelofar","Angetenar","Angurvidel","Animeldio","Anixido","Ankitarla","Ansamanthion","Ansimantar","Anspiladri","Antillia","Aphiana","Aptolcater","Aptrinuptium","Aquilia","Aradlumé","Araledek","Aramanzom","Aramestor","Arania","Arazederu","Arazynxa","Ardzefurith","Arezia","Arhilian","Arianroth","Ariaria","Ariaxoc","Arismaspia","Ariyava","Armalisrah","Aroxian","Arrolian","Arsevalin","Artalien","Aruzustin","Arzangiran","Asalirin","Asarlia","Asicia","Aslambarash","Aslerion","Asthania","Asuricorm","Atarana","Athiana","Athlebasia","Athoriel","Atiaran","Aulurien","Avalenar","Avanimmerl","Avelembai","Aviathar","Axajaxas","Azeledim","Azgelazgus","Aziria","Barosathlom","Barylophar","Bazkalia","Beledira","Belintraia","Belrablion","Borosiyan","Bradullio","Brodalcaflar","Cajarrida","Calaneüs","Calasapia","Caldiloran","Caleria","Calgalcandar","Calidundarios","Calliwelleran","Calmamelis","Caratrothis","Carthazian","Casrinian","Cassrimello","Cauditriceä","Cerelama","Chaestebalon","Chalirio","Chaölthanesh","Chisirion","Cinariyan","Cinnarath","Cirthavion","Coäberul","Coëxitaq","Corancoän","Coreliad","Corrilisan","Cossario","Crotimian","Cuidurjau","Cymoria","Dajuvius","Dakrolidur","Dameraxia","Daraviel","Daraztheon","Darsimala","Darsurion","Dassalpian","Daxxihidil","Delrinian","Demasaran","Demeriolet","Devaloka","Diamerune","Dicadoran","Didoria","Dinrudromon","Dirinnia","Dolohies","Dophinrian","Dornatentorl","Drevixibrind","Drexorvion","Duralica","Dyskilian","Eälisen","Eätinor","Ebriany","Eclaramon","Efarion","Efiranlas","Egajia","Eglaharant","Eglantarask","Elantargin","Elarial","Eleglorross","Elianna","Elisdriel","Elivinté","Ellyria","Elortaöl","Eltaria","Elverion","Elysia","Emelesis","Emelsyna","Enstarlamyn","Entalaroth","Epimissia","Erejitha","Eremiess","Erengazor","Erigia","Erivalda","Escalinian","Escamorid","Eschurioz","Esmerashard","Esnaramik","Etheriasa","Etianor","Etybrinel","Ezaltarem","Ezellohar","Faedulias","Falastien","Falerio","Falyrias","Farsemnithal","Favaijeness","Felarica","Felmarien","Feresilmar","Fiarazio","Fiespegar","Fimalemuen","Finactias","Fiormezath","Firvintilis","Flamorriwisp","Flaxifyglar","Foäzekov","Folsalino","Frixalissa","Fusafandra","Fuvusarooz","Gaflorinos","Galathanax","Galdviara","Galirrhyalen","Gambrimanthus","Ganthelios","Ganvarathimyr","Garlinian","Gauribanon","Gazaforen","Geluruëm","Gemaleon","Ghondaliom","Giavicel","Gikishika","Gorvonia","Halremsolath","Hanciara","Harfelengol","Hatuina","Hazrathsimoon","Hazrinivra","Herazibrax","Hiabezur","Hidolebni","Hipalonin","Hizzlechaltezeme","Hlantremiër","Hovancomi","Hurania","Hyfeäntio","Ibaletri","Idriella","Ierendi","Igadiax","Iglithebem","Ilanayom","Ilerida","Ilirsiya","Ilizio","Illemestri","Ilminaris","Impelia","Inikia","Intheänereon","Ionellza","Iongua","Iophroster","Iptameela","Irgasia","Iskarnia","Iuzator","Ixiosyne","Izmirodon","Jachoriax","Jakanuin","Jalanochlan","Jaleduin","Jandrebliash","Jaralectan","Jarchesmadis","Javethiel","Jelanjaztor","Jemalkhiri","Jemarixtesen","Jirchesmiod","Juaxmanar","Jurelisma","Kadarion","Kagilia","Kalenizin","Kalienlod","Kalpalanin","Kandathama","Kanthamio","Karania","Kardamordax","Karethezam","Karisempatur","Karriasal","Karthassily","Kastrevelda","Katanmaral","Kemeroxel","Keolotrest","Keremelar","Kerisiar","Khalatulajax","Khrysarlion","Kikianik","Kiralizur","Kishidega","Koquilgion","Kryslaria","Lalarian","Lamamelis","Lamdiraka","Lamirila","Lamotridac","Lantessorax","Larasajan","Laschiantria","Lauaxeta","Laziarlan","Lemesprie","Leoniax","Lepeduin","Lialasia","Liquilioss","Lirrissia","Locramaël","Ludurafet","Luithiole","Lyzalian","Lyzeoldir","Maheriel","Majezreäl","Malabderas","Malantiggar","Malasteon","Malevila","Malyremeth","Manariasc","Maranduax","Marassumar","Maresedin","Marillia","Marzaranax","Mathranislom","Maudrosnia","Mayulisas","Medricaeldo","Meliabrak","Meliadoul","Melidium","Meliofard","Melismondé","Melkandoro","Melozathel","Melusinnia","Mereniax","Meresinapt","Mermiculex","Metebelvis","Mianjira","Milinderra","Mirelassar","Mirianis","Mirtagarkarit","Moäthyalond","Momelsia","Morasina","Morciana","Moriliem","Morilioth","Muathazaglimid","Mylakhrion","Myrraxion","Myrristica","Naburios","Nanieroj","Narasia","Narjiona","Narragazkara","Narzelduin","Nemmaridus","Nempifermal","Nerovius","Nevalrimyr","Nevinlemnus","Nichoriam","Nimrathelet","Nissebaral","Niziliom","Nohbirrian","Octramadus","Ohirial","Okarbia","Okpralio","Olemerrin","Oloscendivarn","Onnurian","Opacalia","Orathiris","Orbicritis","Orialex","Oriastus","Orissanat","Ormallivir","Ormeria","Orrizia","Orroptio","Orthaxifer","Orviliach","Otolvian","Pactinasa","Palzyriax","Panaxcrador","Panthioleed","Paolalian","Pelemurto","Pelluxia","Pemelojurg","Pemulinaan","Perjauruan","Phayzelobion","Phomechelian","Phorissital","Piartamisk","Pirouëtta","Pluzemelar","Pomivarnoën","Pyrvinrian","Quanamelis","Quarlusian","Quelidia","Quelizantor","Querrulian","Quetradendith","Rajanthesina","Rakanamet","Ramantasset","Ranasceleb","Rasanathan","Rathelemen","Ravannifer","Reondoresin","Rhazazarak","Rhiadirask","Roxifalcor","Rozalroäth","Ruälia","Rudliptalin","Rufomella","Rulinian","Runevara","Ruzultrejest","Rylissilin","Saboorakel","Sadonakai","Saegdondakhar","Salletifian","Sandurion","Sanoreya","Sapelintir","Sarantimar","Sarathia","Sarpemetheän","Sarrabhluil","Sartenia","Saterbia","Scarliherin","Scoramanté","Semnegarius","Serejarand","Seremnaria","Seriastis","Serilia","Seriona","Shadarabar","Sharadjelamir","Sharajamar","Shelarinisse","Shelmorian","Sireelia","Sirezvia","Siriena","Sirulia","Sorolonex","Soromyrium","Sorosilmar","Sphallurian","Sreltaneema","Sulparia","Suularaba","Sylixia","Tallosia","Tamarien","Tapromethyna","Tarachien","Taralian","Tarsmiria","Tasambekeer","Tayenias","Telaswiral","Telaznemor","Temilion","Teniliak","Tercyrian","Thetalia","Thorosiaz","Tiaskelu","Tifalius","Tinzlactiash","Tiriala","Tirunriyek","Tivamtemar","Toraxoran","Torellian","Tormosian","Trystaria","Tsaliveren","Tsardatsira","Tuivoreth","Ugalius","Uguesilar","Uirugan","Ulakrugir","Ulkarien","Ullibunda","Ultharnarath","Umasdalen","Umicia","Unaramand","Unlasnulkai","Unorrehod","Unuvia","Upalumo","Uraösin","Uttosembuluz","Uxulinak","Valarindio","Valarion","Valaronai","Valeauviej","Varcassian","Veladamar","Velorian","Venzafurome","Vercerenos","Veridia","Vialora","Vilcarien","Vimbrodelthion","Vincarian","Virunia","Vistramisorn","Vreniriab","Vruthalidrom","Vyjeremanx","Vyrania","Werzamerand","Wiernamal","Wrosceltiar","Wyjezinelb","Xacuahatl","Xaeximinar","Xalaibisad","Xalisuri","Xaralien","Xaralyna","Xarilia","Xasseldasene","Xavanimar","Xemelenos","Xilvemzarad","Xiomriest","Xorlanterond","Xorosia","Yamidala","Yamovelhas","Yannavalka","Yarbithresin","Yarmidrian","Yavilana","Yazarrahaj","Yetlioro","Yormanien","Yssarion","Yzaniva","Zabarianx","Zaharsian","Zalrevliaf","Zanzarathool","Zatakruan","Zaulizanir","Zavalliar","Zavalniax","Zekundaloth","Zekundemar","Zelissinfra","Zelobindio","Ziandela","Zicarecem","Zimenaechu","Zofelliara","Zoramatoth","Zulaaria","Zuralion","Zuruxeno","Zuzusilmar","Zwimolio","Zwyäclemon","Zyrissalantisar"]}}},723:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=r(31),a=r(633),n=r(306),s=r(505),o=function(e){return void 0===e&&(e=10),Math.floor(Math.random()*e)+1},l=function(e){return["a","e","i","o","u"].includes(e)},h=function(e){var t=i.names.vileAndCrude[e];return a(n(t))+n(t)},u=function(e){return e+"Suffixes"};t.goblin=function(){return h("small")},t.orc=function(){return h("medium")},t.ogre=function(){return h("large")},t.cavePerson=function(e){var t=i.names.primitive,r=a(n(t.names)),s=o(10);return"male"===e?(s>3&&(r=r+"-"+a(n(t.names))),s>8&&(r=r+"-"+a(n(t.names)))):"female"===e&&(s>5&&(r=r+"-"+a(n(t.names))),r=r+"-"+a(n(t.suffixes))),r},t.dwarf=function(e){var t=i.names.doughty,r=a(n(t.syllables)),s=o(10);return"male"===e?s>7?r+=l(r.slice(-1))?"r":"i":r=""+r+n(t.maleSuffixes):"female"===e&&(s>7?r+=l(r.slice(-1))?"ra":"a":r=""+r+n(t.femaleSuffixes)),r},t.halfling=function(e){var t=i.names.homely,r=a(n(t.syllables)),s=o(10);return t[u(e)]&&(r=""+r+n(t[u(e)])),s>6&&(r=r+" "+n(i.names.familyName.english)),r},t.gnome=function(e){var t=a(n(i.names.doughty.syllables)),r=o(10);return i.names.homely[u(e)]&&(t=""+t+n(i.names.homely[u(e)])),r>6&&(t=t+" "+n(i.names.familyName.scottish)),t},t.elf=function(e){var t=i.names.fairAndNoble,r=""+a(n(t.elfPrefixes))+n(t.middle);return t[u(e)]&&(r=""+r+n(t[u(e)])),r},t.highelf=function(e){var t=i.names.fairAndNoble,r=""+a(n(t.alternativeElfPrefixes))+n(t.middle);return t[u(e)]&&(r=""+r+n(t[u(e)])),r},t.fairy=function(e){var t=i.names.fairy,r=a(n(t.prefixes));return t[u(e)]&&(r=""+r+n(t[u(e)])),r},t.highfairy=function(e){var t=i.names.alternateFairy,r=a(n(t.prefixes));return t[u(e)]&&(r=""+r+n(t[u(e)])),r},t.darkelf=function(e){var t=i.names.elegantEvil,r=a(n(t.prefixesDarkElves));return o(10)>2&&(r=""+r+n(t.middle)),t[u(e)]&&(r=""+r+n(t[u(e)])),r},t.drow=function(e){var t=i.names.elegantEvil,r=a(n(t.prefixesAlternateDarkElves));return o(10)>2&&(r=""+r+n(t.middle)),t[u(e)]&&(r=""+r+n(t[u(e)])),r},t.halfdemon=function(e){var t=i.names.malevolent,r=a(n(t.prefixes));return t[u(e)]&&(r=""+r+n(t[u(e)])),r},t.demon=function(){var e=Object.keys(i.names.infernal),t=o(3)-1,r=o(2)-1,s=e[t],l=e.filter((function(e){return e!==s}))[r];return""+a(n(i.names.infernal[s]))+n(i.names.infernal[l])},t.dragon=function(e){var t=i.names.draconic,r=a(n(t.prefixes)),o=n(t.suffixes);return"female"===e&&("bazius"===o?o="bazia":s(o,"os")?o+="sa":o="is"),r+o},t.angel=function(e){var t=i.names.empyreal,r=o(12),s=a(n(t.prefixes));if(1===r){if("female"===e){var l=s.lastIndexOf("a");s=s.substr(0,l)+"e"+s.substr(l+1)}s=""+a(n(t.titles))+s}else t[u(e)]&&(s=""+s+n(t[u(e)]));return s},t.human=function(e){var t=o(20);if(t<3)return n(i.names.human.one);if(t<12)return n(i.names.human.two);if(t<17)return n(i.names.human.three);if(17===t)return n(i.names.human.more);if(18===t&&e)return n(i.names.human.one)+" "+n(i.names.human.two);if(19===t&&e)return n(i.names.human.two)+" "+n(i.names.human.one);if(20===t&&e){var r=Object.keys(i.names.human);return n(i.names.human[n(r)])+" "+n(i.names.human[n(r)])}return n(i.names.human[n(Object.keys(i.names.human))])}},633:(e,t,r)=>{var i=1/0,a="[object Symbol]",n="\\ud800-\\udfff",s="\\u0300-\\u036f\\ufe20-\\ufe23",o="\\u20d0-\\u20f0",l="\\ufe0e\\ufe0f",h="["+n+"]",u="["+s+o+"]",d="\\ud83c[\\udffb-\\udfff]",c="[^"+n+"]",m="(?:\\ud83c[\\udde6-\\uddff]){2}",f="[\\ud800-\\udbff][\\udc00-\\udfff]",p="\\u200d",g="(?:"+u+"|"+d+")?",y="["+l+"]?",v=y+g+"(?:"+p+"(?:"+[c,m,f].join("|")+")"+y+g+")*",x="(?:"+[c+u+"?",u,m,f,h].join("|")+")",_=RegExp(d+"(?="+d+")|"+x+v,"g"),b=RegExp("["+p+n+s+o+l+"]"),T="object"==typeof r.g&&r.g&&r.g.Object===Object&&r.g,A="object"==typeof self&&self&&self.Object===Object&&self,E=T||A||Function("return this")();function S(e){return b.test(e)}var w=Object.prototype.toString,k=E.Symbol,C=k?k.prototype:void 0,M=C?C.toString:void 0;function R(e){return null==e?"":function(e){if("string"==typeof e)return e;if(function(e){return"symbol"==typeof e||function(e){return!!e&&"object"==typeof e}(e)&&w.call(e)==a}(e))return M?M.call(e):"";var t=e+"";return"0"==t&&1/e==-i?"-0":t}(e)}var I=("toUpperCase",function(e){var t,r,i,a,n=S(e=R(e))?function(e){return S(e)?function(e){return e.match(_)||[]}(e):function(e){return e.split("")}(e)}(e):void 0,s=n?n[0]:e.charAt(0),o=n?(t=n,r=1,a=t.length,i=void 0===i?a:i,!r&&i>=a?t:function(e,t,r){var i=-1,a=e.length;t<0&&(t=-t>a?0:a+t),(r=r>a?a:r)<0&&(r+=a),a=t>r?0:r-t>>>0,t>>>=0;for(var n=Array(a);++i<a;)n[i]=e[i+t];return n}(t,r,i)).join(""):e.slice(1);return s.toUpperCase()+o});e.exports=function(e){return I(R(e).toLowerCase())}},505:(e,t,r)=>{var i=1/0,a="[object Symbol]",n=/^\s+|\s+$/g,s=/^[-+]0x[0-9a-f]+$/i,o=/^0b[01]+$/i,l=/^0o[0-7]+$/i,h=parseInt,u="object"==typeof r.g&&r.g&&r.g.Object===Object&&r.g,d="object"==typeof self&&self&&self.Object===Object&&self,c=u||d||Function("return this")(),m=Object.prototype.toString,f=c.Symbol,p=f?f.prototype:void 0,g=p?p.toString:void 0;function y(e){if("string"==typeof e)return e;if(x(e))return g?g.call(e):"";var t=e+"";return"0"==t&&1/e==-1/0?"-0":t}function v(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}function x(e){return"symbol"==typeof e||function(e){return!!e&&"object"==typeof e}(e)&&m.call(e)==a}e.exports=function(e,t,r){var a;e=null==(a=e)?"":y(a),t=y(t);var u,d,c=e.length,m=r=void 0===r?c:(u=function(e){var t=function(e){return e?(e=function(e){if("number"==typeof e)return e;if(x(e))return NaN;if(v(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=v(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=e.replace(n,"");var r=o.test(e);return r||l.test(e)?h(e.slice(2),r?2:8):s.test(e)?NaN:+e}(e))===i||e===-1/0?17976931348623157e292*(e<0?-1:1):e==e?e:0:0===e?e:0}(e),r=t%1;return t==t?r?t-r:t:0}(r),0,d=c,u==u&&(void 0!==d&&(u=u<=d?u:d),u=u>=0?u:0),u);return(r-=t.length)>=0&&e.slice(r,m)==t}},306:e=>{var t=9007199254740991,r="[object Function]",i="[object GeneratorFunction]",a=/^(?:0|[1-9]\d*)$/;var n,s,o=Object.prototype,l=o.hasOwnProperty,h=o.toString,u=o.propertyIsEnumerable,d=Math.floor,c=(n=Object.keys,s=Object,function(e){return n(s(e))}),m=Math.random;function f(e,r){return!!(r=null==r?t:r)&&("number"==typeof e||a.test(e))&&e>-1&&e%1==0&&e<r}var p=Array.isArray;function g(e){return null!=e&&function(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=t}(e.length)&&!function(e){var t=function(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}(e)?h.call(e):"";return t==r||t==i}(e)}e.exports=function(e){var t,r,i=g(e)?e:(t=e)?function(e,t){return function(t,r){for(var i=-1,a=t?t.length:0,n=Array(a);++i<a;)n[i]=(s=t[i],e[s]);var s;return n}(t)}(t,function(e){return g(e)?function(e,t){var r=p(e)||function(e){return function(e){return function(e){return!!e&&"object"==typeof e}(e)&&g(e)}(e)&&l.call(e,"callee")&&(!u.call(e,"callee")||"[object Arguments]"==h.call(e))}(e)?function(e,t){for(var r=-1,i=Array(e);++r<e;)i[r]=t(r);return i}(e.length,String):[],i=r.length,a=!!i;for(var n in e)!t&&!l.call(e,n)||a&&("length"==n||f(n,i))||r.push(n);return r}(e):function(e){if(r=(t=e)&&t.constructor,t!==("function"==typeof r&&r.prototype||o))return c(e);var t,r,i=[];for(var a in Object(e))l.call(e,a)&&"constructor"!=a&&i.push(a);return i}(e)}(t)):[],a=i.length;return a>0?i[(0,r=a-1,0+d(m()*(r-0+1)))]:void 0}},587:e=>{"use strict";function t(e,t){return Object.prototype.hasOwnProperty.call(e,t)}e.exports=function(e,r,i,a){r=r||"&",i=i||"=";var n={};if("string"!=typeof e||0===e.length)return n;var s=/\+/g;e=e.split(r);var o=1e3;a&&"number"==typeof a.maxKeys&&(o=a.maxKeys);var l=e.length;o>0&&l>o&&(l=o);for(var h=0;h<l;++h){var u,d,c,m,f=e[h].replace(s,"%20"),p=f.indexOf(i);p>=0?(u=f.substr(0,p),d=f.substr(p+1)):(u=f,d=""),c=decodeURIComponent(u),m=decodeURIComponent(d),t(n,c)?Array.isArray(n[c])?n[c].push(m):n[c]=[n[c],m]:n[c]=m}return n}},361:e=>{"use strict";var t=function(e){switch(typeof e){case"string":return e;case"boolean":return e?"true":"false";case"number":return isFinite(e)?e:"";default:return""}};e.exports=function(e,r,i,a){return r=r||"&",i=i||"=",null===e&&(e=void 0),"object"==typeof e?Object.keys(e).map((function(a){var n=encodeURIComponent(t(a))+i;return Array.isArray(e[a])?e[a].map((function(e){return n+encodeURIComponent(t(e))})).join(r):n+encodeURIComponent(t(e[a]))})).join(r):a?encodeURIComponent(t(a))+i+encodeURIComponent(t(e)):""}},673:(e,t,r)=>{"use strict";t.decode=t.parse=r(587),t.encode=t.stringify=r(361)},511:function(e,t,r){var i;e=r.nmd(e),function(a){t&&t.nodeType,e&&e.nodeType;var n="object"==typeof r.g&&r.g;n.global!==n&&n.window!==n&&n.self;var s,o=2147483647,l=36,h=26,u=38,d=700,c=/^xn--/,m=/[^\x20-\x7E]/,f=/[\x2E\u3002\uFF0E\uFF61]/g,p={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},g=l-1,y=Math.floor,v=String.fromCharCode;function x(e){throw RangeError(p[e])}function _(e,t){for(var r=e.length,i=[];r--;)i[r]=t(e[r]);return i}function b(e,t){var r=e.split("@"),i="";return r.length>1&&(i=r[0]+"@",e=r[1]),i+_((e=e.replace(f,".")).split("."),t).join(".")}function T(e){for(var t,r,i=[],a=0,n=e.length;a<n;)(t=e.charCodeAt(a++))>=55296&&t<=56319&&a<n?56320==(64512&(r=e.charCodeAt(a++)))?i.push(((1023&t)<<10)+(1023&r)+65536):(i.push(t),a--):i.push(t);return i}function A(e){return _(e,(function(e){var t="";return e>65535&&(t+=v((e-=65536)>>>10&1023|55296),e=56320|1023&e),t+v(e)})).join("")}function E(e,t){return e+22+75*(e<26)-((0!=t)<<5)}function S(e,t,r){var i=0;for(e=r?y(e/d):e>>1,e+=y(e/t);e>g*h>>1;i+=l)e=y(e/g);return y(i+(g+1)*e/(e+u))}function w(e){var t,r,i,a,n,s,u,d,c,m,f,p=[],g=e.length,v=0,_=128,b=72;for((r=e.lastIndexOf("-"))<0&&(r=0),i=0;i<r;++i)e.charCodeAt(i)>=128&&x("not-basic"),p.push(e.charCodeAt(i));for(a=r>0?r+1:0;a<g;){for(n=v,s=1,u=l;a>=g&&x("invalid-input"),((d=(f=e.charCodeAt(a++))-48<10?f-22:f-65<26?f-65:f-97<26?f-97:l)>=l||d>y((o-v)/s))&&x("overflow"),v+=d*s,!(d<(c=u<=b?1:u>=b+h?h:u-b));u+=l)s>y(o/(m=l-c))&&x("overflow"),s*=m;b=S(v-n,t=p.length+1,0==n),y(v/t)>o-_&&x("overflow"),_+=y(v/t),v%=t,p.splice(v++,0,_)}return A(p)}function k(e){var t,r,i,a,n,s,u,d,c,m,f,p,g,_,b,A=[];for(p=(e=T(e)).length,t=128,r=0,n=72,s=0;s<p;++s)(f=e[s])<128&&A.push(v(f));for(i=a=A.length,a&&A.push("-");i<p;){for(u=o,s=0;s<p;++s)(f=e[s])>=t&&f<u&&(u=f);for(u-t>y((o-r)/(g=i+1))&&x("overflow"),r+=(u-t)*g,t=u,s=0;s<p;++s)if((f=e[s])<t&&++r>o&&x("overflow"),f==t){for(d=r,c=l;!(d<(m=c<=n?1:c>=n+h?h:c-n));c+=l)b=d-m,_=l-m,A.push(v(E(m+b%_,0))),d=y(b/_);A.push(v(E(d,0))),n=S(r,g,i==a),r=0,++i}++r,++t}return A.join("")}s={version:"1.3.2",ucs2:{decode:T,encode:A},decode:w,encode:k,toASCII:function(e){return b(e,(function(e){return m.test(e)?"xn--"+k(e):e}))},toUnicode:function(e){return b(e,(function(e){return c.test(e)?w(e.slice(4).toLowerCase()):e}))}},void 0===(i=function(){return s}.call(t,r,t,e))||(e.exports=i)}()},575:(e,t,r)=>{"use strict";var i=r(511),a=r(502);function n(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}t.Qc=x,t.DB=function(e,t){return x(e,!1,!0).resolve(t)},t.WU=function(e){return a.isString(e)&&(e=x(e)),e instanceof n?e.format():n.prototype.format.call(e)};var s=/^([a-z0-9.+-]+:)/i,o=/:[0-9]*$/,l=/^(\/\/?(?!\/)[^\?\s]*)(\?[^\s]*)?$/,h=["{","}","|","\\","^","`"].concat(["<",">",'"',"`"," ","\r","\n","\t"]),u=["'"].concat(h),d=["%","/","?",";","#"].concat(u),c=["/","?","#"],m=/^[+a-z0-9A-Z_-]{0,63}$/,f=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,p={javascript:!0,"javascript:":!0},g={javascript:!0,"javascript:":!0},y={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0},v=r(673);function x(e,t,r){if(e&&a.isObject(e)&&e instanceof n)return e;var i=new n;return i.parse(e,t,r),i}n.prototype.parse=function(e,t,r){if(!a.isString(e))throw new TypeError("Parameter 'url' must be a string, not "+typeof e);var n=e.indexOf("?"),o=-1!==n&&n<e.indexOf("#")?"?":"#",h=e.split(o);h[0]=h[0].replace(/\\/g,"/");var x=e=h.join(o);if(x=x.trim(),!r&&1===e.split("#").length){var _=l.exec(x);if(_)return this.path=x,this.href=x,this.pathname=_[1],_[2]?(this.search=_[2],this.query=t?v.parse(this.search.substr(1)):this.search.substr(1)):t&&(this.search="",this.query={}),this}var b=s.exec(x);if(b){var T=(b=b[0]).toLowerCase();this.protocol=T,x=x.substr(b.length)}if(r||b||x.match(/^\/\/[^@\/]+@[^@\/]+/)){var A="//"===x.substr(0,2);!A||b&&g[b]||(x=x.substr(2),this.slashes=!0)}if(!g[b]&&(A||b&&!y[b])){for(var E,S,w=-1,k=0;k<c.length;k++)-1!==(C=x.indexOf(c[k]))&&(-1===w||C<w)&&(w=C);for(-1!==(S=-1===w?x.lastIndexOf("@"):x.lastIndexOf("@",w))&&(E=x.slice(0,S),x=x.slice(S+1),this.auth=decodeURIComponent(E)),w=-1,k=0;k<d.length;k++){var C;-1!==(C=x.indexOf(d[k]))&&(-1===w||C<w)&&(w=C)}-1===w&&(w=x.length),this.host=x.slice(0,w),x=x.slice(w),this.parseHost(),this.hostname=this.hostname||"";var M="["===this.hostname[0]&&"]"===this.hostname[this.hostname.length-1];if(!M)for(var R=this.hostname.split(/\./),I=(k=0,R.length);k<I;k++){var P=R[k];if(P&&!P.match(m)){for(var D="",B=0,N=P.length;B<N;B++)P.charCodeAt(B)>127?D+="x":D+=P[B];if(!D.match(m)){var F=R.slice(0,k),L=R.slice(k+1),O=P.match(f);O&&(F.push(O[1]),L.unshift(O[2])),L.length&&(x="/"+L.join(".")+x),this.hostname=F.join(".");break}}}this.hostname.length>255?this.hostname="":this.hostname=this.hostname.toLowerCase(),M||(this.hostname=i.toASCII(this.hostname));var z=this.port?":"+this.port:"",G=this.hostname||"";this.host=G+z,this.href+=this.host,M&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),"/"!==x[0]&&(x="/"+x))}if(!p[T])for(k=0,I=u.length;k<I;k++){var U=u[k];if(-1!==x.indexOf(U)){var H=encodeURIComponent(U);H===U&&(H=escape(U)),x=x.split(U).join(H)}}var V=x.indexOf("#");-1!==V&&(this.hash=x.substr(V),x=x.slice(0,V));var j=x.indexOf("?");if(-1!==j?(this.search=x.substr(j),this.query=x.substr(j+1),t&&(this.query=v.parse(this.query)),x=x.slice(0,j)):t&&(this.search="",this.query={}),x&&(this.pathname=x),y[T]&&this.hostname&&!this.pathname&&(this.pathname="/"),this.pathname||this.search){z=this.pathname||"";var X=this.search||"";this.path=z+X}return this.href=this.format(),this},n.prototype.format=function(){var e=this.auth||"";e&&(e=(e=encodeURIComponent(e)).replace(/%3A/i,":"),e+="@");var t=this.protocol||"",r=this.pathname||"",i=this.hash||"",n=!1,s="";this.host?n=e+this.host:this.hostname&&(n=e+(-1===this.hostname.indexOf(":")?this.hostname:"["+this.hostname+"]"),this.port&&(n+=":"+this.port)),this.query&&a.isObject(this.query)&&Object.keys(this.query).length&&(s=v.stringify(this.query));var o=this.search||s&&"?"+s||"";return t&&":"!==t.substr(-1)&&(t+=":"),this.slashes||(!t||y[t])&&!1!==n?(n="//"+(n||""),r&&"/"!==r.charAt(0)&&(r="/"+r)):n||(n=""),i&&"#"!==i.charAt(0)&&(i="#"+i),o&&"?"!==o.charAt(0)&&(o="?"+o),t+n+(r=r.replace(/[?#]/g,(function(e){return encodeURIComponent(e)})))+(o=o.replace("#","%23"))+i},n.prototype.resolve=function(e){return this.resolveObject(x(e,!1,!0)).format()},n.prototype.resolveObject=function(e){if(a.isString(e)){var t=new n;t.parse(e,!1,!0),e=t}for(var r=new n,i=Object.keys(this),s=0;s<i.length;s++){var o=i[s];r[o]=this[o]}if(r.hash=e.hash,""===e.href)return r.href=r.format(),r;if(e.slashes&&!e.protocol){for(var l=Object.keys(e),h=0;h<l.length;h++){var u=l[h];"protocol"!==u&&(r[u]=e[u])}return y[r.protocol]&&r.hostname&&!r.pathname&&(r.path=r.pathname="/"),r.href=r.format(),r}if(e.protocol&&e.protocol!==r.protocol){if(!y[e.protocol]){for(var d=Object.keys(e),c=0;c<d.length;c++){var m=d[c];r[m]=e[m]}return r.href=r.format(),r}if(r.protocol=e.protocol,e.host||g[e.protocol])r.pathname=e.pathname;else{for(var f=(e.pathname||"").split("/");f.length&&!(e.host=f.shift()););e.host||(e.host=""),e.hostname||(e.hostname=""),""!==f[0]&&f.unshift(""),f.length<2&&f.unshift(""),r.pathname=f.join("/")}if(r.search=e.search,r.query=e.query,r.host=e.host||"",r.auth=e.auth,r.hostname=e.hostname||e.host,r.port=e.port,r.pathname||r.search){var p=r.pathname||"",v=r.search||"";r.path=p+v}return r.slashes=r.slashes||e.slashes,r.href=r.format(),r}var x=r.pathname&&"/"===r.pathname.charAt(0),_=e.host||e.pathname&&"/"===e.pathname.charAt(0),b=_||x||r.host&&e.pathname,T=b,A=r.pathname&&r.pathname.split("/")||[],E=(f=e.pathname&&e.pathname.split("/")||[],r.protocol&&!y[r.protocol]);if(E&&(r.hostname="",r.port=null,r.host&&(""===A[0]?A[0]=r.host:A.unshift(r.host)),r.host="",e.protocol&&(e.hostname=null,e.port=null,e.host&&(""===f[0]?f[0]=e.host:f.unshift(e.host)),e.host=null),b=b&&(""===f[0]||""===A[0])),_)r.host=e.host||""===e.host?e.host:r.host,r.hostname=e.hostname||""===e.hostname?e.hostname:r.hostname,r.search=e.search,r.query=e.query,A=f;else if(f.length)A||(A=[]),A.pop(),A=A.concat(f),r.search=e.search,r.query=e.query;else if(!a.isNullOrUndefined(e.search))return E&&(r.hostname=r.host=A.shift(),(M=!!(r.host&&r.host.indexOf("@")>0)&&r.host.split("@"))&&(r.auth=M.shift(),r.host=r.hostname=M.shift())),r.search=e.search,r.query=e.query,a.isNull(r.pathname)&&a.isNull(r.search)||(r.path=(r.pathname?r.pathname:"")+(r.search?r.search:"")),r.href=r.format(),r;if(!A.length)return r.pathname=null,r.search?r.path="/"+r.search:r.path=null,r.href=r.format(),r;for(var S=A.slice(-1)[0],w=(r.host||e.host||A.length>1)&&("."===S||".."===S)||""===S,k=0,C=A.length;C>=0;C--)"."===(S=A[C])?A.splice(C,1):".."===S?(A.splice(C,1),k++):k&&(A.splice(C,1),k--);if(!b&&!T)for(;k--;k)A.unshift("..");!b||""===A[0]||A[0]&&"/"===A[0].charAt(0)||A.unshift(""),w&&"/"!==A.join("/").substr(-1)&&A.push("");var M,R=""===A[0]||A[0]&&"/"===A[0].charAt(0);return E&&(r.hostname=r.host=R?"":A.length?A.shift():"",(M=!!(r.host&&r.host.indexOf("@")>0)&&r.host.split("@"))&&(r.auth=M.shift(),r.host=r.hostname=M.shift())),(b=b||r.host&&A.length)&&!R&&A.unshift(""),A.length?r.pathname=A.join("/"):(r.pathname=null,r.path=null),a.isNull(r.pathname)&&a.isNull(r.search)||(r.path=(r.pathname?r.pathname:"")+(r.search?r.search:"")),r.auth=e.auth||r.auth,r.slashes=r.slashes||e.slashes,r.href=r.format(),r},n.prototype.parseHost=function(){var e=this.host,t=o.exec(e);t&&(":"!==(t=t[0])&&(this.port=t.substr(1)),e=e.substr(0,e.length-t.length)),e&&(this.hostname=e)}},502:e=>{"use strict";e.exports={isString:function(e){return"string"==typeof e},isObject:function(e){return"object"==typeof e&&null!==e},isNull:function(e){return null===e},isNullOrUndefined:function(e){return null==e}}}},t={};function r(i){var a=t[i];if(void 0!==a)return a.exports;var n=t[i]={id:i,loaded:!1,exports:{}};return e[i].call(n.exports,n,n.exports,r),n.loaded=!0,n.exports}r.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),r.nmd=e=>(e.paths=[],e.children||(e.children=[]),e),(()=>{"use strict";var e=(e=>(e[e.WEBGL_LEGACY=0]="WEBGL_LEGACY",e[e.WEBGL=1]="WEBGL",e[e.WEBGL2=2]="WEBGL2",e))(e||{}),t=(e=>(e[e.UNKNOWN=0]="UNKNOWN",e[e.WEBGL=1]="WEBGL",e[e.CANVAS=2]="CANVAS",e))(t||{}),i=(e=>(e[e.COLOR=16384]="COLOR",e[e.DEPTH=256]="DEPTH",e[e.STENCIL=1024]="STENCIL",e))(i||{}),a=(e=>(e[e.NORMAL=0]="NORMAL",e[e.ADD=1]="ADD",e[e.MULTIPLY=2]="MULTIPLY",e[e.SCREEN=3]="SCREEN",e[e.OVERLAY=4]="OVERLAY",e[e.DARKEN=5]="DARKEN",e[e.LIGHTEN=6]="LIGHTEN",e[e.COLOR_DODGE=7]="COLOR_DODGE",e[e.COLOR_BURN=8]="COLOR_BURN",e[e.HARD_LIGHT=9]="HARD_LIGHT",e[e.SOFT_LIGHT=10]="SOFT_LIGHT",e[e.DIFFERENCE=11]="DIFFERENCE",e[e.EXCLUSION=12]="EXCLUSION",e[e.HUE=13]="HUE",e[e.SATURATION=14]="SATURATION",e[e.COLOR=15]="COLOR",e[e.LUMINOSITY=16]="LUMINOSITY",e[e.NORMAL_NPM=17]="NORMAL_NPM",e[e.ADD_NPM=18]="ADD_NPM",e[e.SCREEN_NPM=19]="SCREEN_NPM",e[e.NONE=20]="NONE",e[e.SRC_OVER=0]="SRC_OVER",e[e.SRC_IN=21]="SRC_IN",e[e.SRC_OUT=22]="SRC_OUT",e[e.SRC_ATOP=23]="SRC_ATOP",e[e.DST_OVER=24]="DST_OVER",e[e.DST_IN=25]="DST_IN",e[e.DST_OUT=26]="DST_OUT",e[e.DST_ATOP=27]="DST_ATOP",e[e.ERASE=26]="ERASE",e[e.SUBTRACT=28]="SUBTRACT",e[e.XOR=29]="XOR",e))(a||{}),n=(e=>(e[e.POINTS=0]="POINTS",e[e.LINES=1]="LINES",e[e.LINE_LOOP=2]="LINE_LOOP",e[e.LINE_STRIP=3]="LINE_STRIP",e[e.TRIANGLES=4]="TRIANGLES",e[e.TRIANGLE_STRIP=5]="TRIANGLE_STRIP",e[e.TRIANGLE_FAN=6]="TRIANGLE_FAN",e))(n||{}),s=(e=>(e[e.RGBA=6408]="RGBA",e[e.RGB=6407]="RGB",e[e.RG=33319]="RG",e[e.RED=6403]="RED",e[e.RGBA_INTEGER=36249]="RGBA_INTEGER",e[e.RGB_INTEGER=36248]="RGB_INTEGER",e[e.RG_INTEGER=33320]="RG_INTEGER",e[e.RED_INTEGER=36244]="RED_INTEGER",e[e.ALPHA=6406]="ALPHA",e[e.LUMINANCE=6409]="LUMINANCE",e[e.LUMINANCE_ALPHA=6410]="LUMINANCE_ALPHA",e[e.DEPTH_COMPONENT=6402]="DEPTH_COMPONENT",e[e.DEPTH_STENCIL=34041]="DEPTH_STENCIL",e))(s||{}),o=(e=>(e[e.TEXTURE_2D=3553]="TEXTURE_2D",e[e.TEXTURE_CUBE_MAP=34067]="TEXTURE_CUBE_MAP",e[e.TEXTURE_2D_ARRAY=35866]="TEXTURE_2D_ARRAY",e[e.TEXTURE_CUBE_MAP_POSITIVE_X=34069]="TEXTURE_CUBE_MAP_POSITIVE_X",e[e.TEXTURE_CUBE_MAP_NEGATIVE_X=34070]="TEXTURE_CUBE_MAP_NEGATIVE_X",e[e.TEXTURE_CUBE_MAP_POSITIVE_Y=34071]="TEXTURE_CUBE_MAP_POSITIVE_Y",e[e.TEXTURE_CUBE_MAP_NEGATIVE_Y=34072]="TEXTURE_CUBE_MAP_NEGATIVE_Y",e[e.TEXTURE_CUBE_MAP_POSITIVE_Z=34073]="TEXTURE_CUBE_MAP_POSITIVE_Z",e[e.TEXTURE_CUBE_MAP_NEGATIVE_Z=34074]="TEXTURE_CUBE_MAP_NEGATIVE_Z",e))(o||{}),l=(e=>(e[e.UNSIGNED_BYTE=5121]="UNSIGNED_BYTE",e[e.UNSIGNED_SHORT=5123]="UNSIGNED_SHORT",e[e.UNSIGNED_SHORT_5_6_5=33635]="UNSIGNED_SHORT_5_6_5",e[e.UNSIGNED_SHORT_4_4_4_4=32819]="UNSIGNED_SHORT_4_4_4_4",e[e.UNSIGNED_SHORT_5_5_5_1=32820]="UNSIGNED_SHORT_5_5_5_1",e[e.UNSIGNED_INT=5125]="UNSIGNED_INT",e[e.UNSIGNED_INT_10F_11F_11F_REV=35899]="UNSIGNED_INT_10F_11F_11F_REV",e[e.UNSIGNED_INT_2_10_10_10_REV=33640]="UNSIGNED_INT_2_10_10_10_REV",e[e.UNSIGNED_INT_24_8=34042]="UNSIGNED_INT_24_8",e[e.UNSIGNED_INT_5_9_9_9_REV=35902]="UNSIGNED_INT_5_9_9_9_REV",e[e.BYTE=5120]="BYTE",e[e.SHORT=5122]="SHORT",e[e.INT=5124]="INT",e[e.FLOAT=5126]="FLOAT",e[e.FLOAT_32_UNSIGNED_INT_24_8_REV=36269]="FLOAT_32_UNSIGNED_INT_24_8_REV",e[e.HALF_FLOAT=36193]="HALF_FLOAT",e))(l||{}),h=(e=>(e[e.FLOAT=0]="FLOAT",e[e.INT=1]="INT",e[e.UINT=2]="UINT",e))(h||{}),u=(e=>(e[e.NEAREST=0]="NEAREST",e[e.LINEAR=1]="LINEAR",e))(u||{}),d=(e=>(e[e.CLAMP=33071]="CLAMP",e[e.REPEAT=10497]="REPEAT",e[e.MIRRORED_REPEAT=33648]="MIRRORED_REPEAT",e))(d||{}),c=(e=>(e[e.OFF=0]="OFF",e[e.POW2=1]="POW2",e[e.ON=2]="ON",e[e.ON_MANUAL=3]="ON_MANUAL",e))(c||{}),m=(e=>(e[e.NPM=0]="NPM",e[e.UNPACK=1]="UNPACK",e[e.PMA=2]="PMA",e[e.NO_PREMULTIPLIED_ALPHA=0]="NO_PREMULTIPLIED_ALPHA",e[e.PREMULTIPLY_ON_UPLOAD=1]="PREMULTIPLY_ON_UPLOAD",e[e.PREMULTIPLIED_ALPHA=2]="PREMULTIPLIED_ALPHA",e))(m||{}),f=(e=>(e[e.NO=0]="NO",e[e.YES=1]="YES",e[e.AUTO=2]="AUTO",e[e.BLEND=0]="BLEND",e[e.CLEAR=1]="CLEAR",e[e.BLIT=2]="BLIT",e))(f||{}),p=(e=>(e[e.AUTO=0]="AUTO",e[e.MANUAL=1]="MANUAL",e))(p||{}),g=(e=>(e.LOW="lowp",e.MEDIUM="mediump",e.HIGH="highp",e))(g||{}),y=(e=>(e[e.NONE=0]="NONE",e[e.SCISSOR=1]="SCISSOR",e[e.STENCIL=2]="STENCIL",e[e.SPRITE=3]="SPRITE",e[e.COLOR=4]="COLOR",e))(y||{}),v=(e=>(e[e.NONE=0]="NONE",e[e.LOW=2]="LOW",e[e.MEDIUM=4]="MEDIUM",e[e.HIGH=8]="HIGH",e))(v||{}),x=(e=>(e[e.ELEMENT_ARRAY_BUFFER=34963]="ELEMENT_ARRAY_BUFFER",e[e.ARRAY_BUFFER=34962]="ARRAY_BUFFER",e[e.UNIFORM_BUFFER=35345]="UNIFORM_BUFFER",e))(x||{});const _={createCanvas:(e,t)=>{const r=document.createElement("canvas");return r.width=e,r.height=t,r},getCanvasRenderingContext2D:()=>CanvasRenderingContext2D,getWebGLRenderingContext:()=>WebGLRenderingContext,getNavigator:()=>navigator,getBaseUrl:()=>document.baseURI??window.location.href,getFontFaceSet:()=>document.fonts,fetch:(e,t)=>fetch(e,t),parseXML:e=>(new DOMParser).parseFromString(e,"text/xml")},b={ADAPTER:_,RESOLUTION:1,CREATE_IMAGE_BITMAP:!1,ROUND_PIXELS:!1};var T=/iPhone/i,A=/iPod/i,E=/iPad/i,S=/\biOS-universal(?:.+)Mac\b/i,w=/\bAndroid(?:.+)Mobile\b/i,k=/Android/i,C=/(?:SD4930UR|\bSilk(?:.+)Mobile\b)/i,M=/Silk/i,R=/Windows Phone/i,I=/\bWindows(?:.+)ARM\b/i,P=/BlackBerry/i,D=/BB10/i,B=/Opera Mini/i,N=/\b(CriOS|Chrome)(?:.+)Mobile/i,F=/Mobile(?:.+)Firefox\b/i,L=function(e){return void 0!==e&&"MacIntel"===e.platform&&"number"==typeof e.maxTouchPoints&&e.maxTouchPoints>1&&"undefined"==typeof MSStream};function O(e){var t={userAgent:"",platform:"",maxTouchPoints:0};e||"undefined"==typeof navigator?"string"==typeof e?t.userAgent=e:e&&e.userAgent&&(t={userAgent:e.userAgent,platform:e.platform,maxTouchPoints:e.maxTouchPoints||0}):t={userAgent:navigator.userAgent,platform:navigator.platform,maxTouchPoints:navigator.maxTouchPoints||0};var r=t.userAgent,i=r.split("[FBAN");void 0!==i[1]&&(r=i[0]),void 0!==(i=r.split("Twitter"))[1]&&(r=i[0]);var a=function(e){return function(t){return t.test(e)}}(r),n={apple:{phone:a(T)&&!a(R),ipod:a(A),tablet:!a(T)&&(a(E)||L(t))&&!a(R),universal:a(S),device:(a(T)||a(A)||a(E)||a(S)||L(t))&&!a(R)},amazon:{phone:a(C),tablet:!a(C)&&a(M),device:a(C)||a(M)},android:{phone:!a(R)&&a(C)||!a(R)&&a(w),tablet:!a(R)&&!a(C)&&!a(w)&&(a(M)||a(k)),device:!a(R)&&(a(C)||a(M)||a(w)||a(k))||a(/\bokhttp\b/i)},windows:{phone:a(R),tablet:a(I),device:a(R)||a(I)},other:{blackberry:a(P),blackberry10:a(D),opera:a(B),firefox:a(F),chrome:a(N),device:a(P)||a(D)||a(B)||a(F)||a(N)},any:!1,phone:!1,tablet:!1};return n.any=n.apple.device||n.android.device||n.windows.device||n.other.device,n.phone=n.apple.phone||n.android.phone||n.windows.phone,n.tablet=n.apple.tablet||n.android.tablet||n.windows.tablet,n}const z=(O.default??O)(globalThis.navigator);b.RETINA_PREFIX=/@([0-9\.]+)x/,b.FAIL_IF_MAJOR_PERFORMANCE_CAVEAT=!1;var G=r(729),U=r(187),H=r(575);const V={parse:H.Qc,format:H.WU,resolve:H.DB};function j(e){if("string"!=typeof e)throw new TypeError(`Path must be a string. Received ${JSON.stringify(e)}`)}function X(e){return e.split("?")[0].split("#")[0]}const K={toPosix:e=>("\\","/",e.replace(new RegExp("\\".replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),"g"),"/")),isUrl(e){return/^https?:/.test(this.toPosix(e))},isDataUrl:e=>/^data:([a-z]+\/[a-z0-9-+.]+(;[a-z0-9-.!#$%*+.{}|~`]+=[a-z0-9-.!#$%*+.{}()_|~`]+)*)?(;base64)?,([a-z0-9!$&',()*+;=\-._~:@\/?%\s<>]*?)$/i.test(e),hasProtocol(e){return/^[^/:]+:\//.test(this.toPosix(e))},getProtocol(e){j(e),e=this.toPosix(e);let t="";const r=/^file:\/\/\//.exec(e),i=/^[^/:]+:\/\//.exec(e),a=/^[^/:]+:\//.exec(e);if(r||i||a){const n=r?.[0]||i?.[0]||a?.[0];t=n,e=e.slice(n.length)}return t},toAbsolute(e,t,r){if(this.isDataUrl(e))return e;const i=X(this.toPosix(t??b.ADAPTER.getBaseUrl())),a=X(this.toPosix(r??this.rootname(i)));return j(e),(e=this.toPosix(e)).startsWith("/")?K.join(a,e.slice(1)):this.isAbsolute(e)?e:this.join(i,e)},normalize(e){if(j(e=this.toPosix(e)),0===e.length)return".";let t="";const r=e.startsWith("/");this.hasProtocol(e)&&(t=this.rootname(e),e=e.slice(t.length));const i=e.endsWith("/");return e=function(e,t){let r="",i=0,a=-1,n=0,s=-1;for(let t=0;t<=e.length;++t){if(t<e.length)s=e.charCodeAt(t);else{if(47===s)break;s=47}if(47===s){if(a===t-1||1===n);else if(a!==t-1&&2===n){if(r.length<2||2!==i||46!==r.charCodeAt(r.length-1)||46!==r.charCodeAt(r.length-2))if(r.length>2){const e=r.lastIndexOf("/");if(e!==r.length-1){-1===e?(r="",i=0):(r=r.slice(0,e),i=r.length-1-r.lastIndexOf("/")),a=t,n=0;continue}}else if(2===r.length||1===r.length){r="",i=0,a=t,n=0;continue}}else r.length>0?r+=`/${e.slice(a+1,t)}`:r=e.slice(a+1,t),i=t-a-1;a=t,n=0}else 46===s&&-1!==n?++n:n=-1}return r}(e),e.length>0&&i&&(e+="/"),r?`/${e}`:t+e},isAbsolute(e){return j(e),e=this.toPosix(e),!!this.hasProtocol(e)||e.startsWith("/")},join(...e){if(0===e.length)return".";let t;for(let r=0;r<e.length;++r){const i=e[r];if(j(i),i.length>0)if(void 0===t)t=i;else{const a=e[r-1]??"";this.extname(a)?t+=`/../${i}`:t+=`/${i}`}}return void 0===t?".":this.normalize(t)},dirname(e){if(j(e),0===e.length)return".";let t=(e=this.toPosix(e)).charCodeAt(0);const r=47===t;let i=-1,a=!0;const n=this.getProtocol(e),s=e;for(let r=(e=e.slice(n.length)).length-1;r>=1;--r)if(t=e.charCodeAt(r),47===t){if(!a){i=r;break}}else a=!1;return-1===i?r?"/":this.isUrl(s)?n+e:n:r&&1===i?"//":n+e.slice(0,i)},rootname(e){j(e);let t="";if(t=(e=this.toPosix(e)).startsWith("/")?"/":this.getProtocol(e),this.isUrl(e)){const r=e.indexOf("/",t.length);t=-1!==r?e.slice(0,r):e,t.endsWith("/")||(t+="/")}return t},basename(e,t){j(e),t&&j(t),e=X(this.toPosix(e));let r,i=0,a=-1,n=!0;if(void 0!==t&&t.length>0&&t.length<=e.length){if(t.length===e.length&&t===e)return"";let s=t.length-1,o=-1;for(r=e.length-1;r>=0;--r){const l=e.charCodeAt(r);if(47===l){if(!n){i=r+1;break}}else-1===o&&(n=!1,o=r+1),s>=0&&(l===t.charCodeAt(s)?-1==--s&&(a=r):(s=-1,a=o))}return i===a?a=o:-1===a&&(a=e.length),e.slice(i,a)}for(r=e.length-1;r>=0;--r)if(47===e.charCodeAt(r)){if(!n){i=r+1;break}}else-1===a&&(n=!1,a=r+1);return-1===a?"":e.slice(i,a)},extname(e){j(e);let t=-1,r=0,i=-1,a=!0,n=0;for(let s=(e=X(this.toPosix(e))).length-1;s>=0;--s){const o=e.charCodeAt(s);if(47!==o)-1===i&&(a=!1,i=s+1),46===o?-1===t?t=s:1!==n&&(n=1):-1!==t&&(n=-1);else if(!a){r=s+1;break}}return-1===t||-1===i||0===n||1===n&&t===i-1&&t===r+1?"":e.slice(t,i)},parse(e){j(e);const t={root:"",dir:"",base:"",ext:"",name:""};if(0===e.length)return t;let r=(e=X(this.toPosix(e))).charCodeAt(0);const i=this.isAbsolute(e);let a;t.root=this.rootname(e),a=i||this.hasProtocol(e)?1:0;let n=-1,s=0,o=-1,l=!0,h=e.length-1,u=0;for(;h>=a;--h)if(r=e.charCodeAt(h),47!==r)-1===o&&(l=!1,o=h+1),46===r?-1===n?n=h:1!==u&&(u=1):-1!==n&&(u=-1);else if(!l){s=h+1;break}return-1===n||-1===o||0===u||1===u&&n===o-1&&n===s+1?-1!==o&&(t.base=t.name=0===s&&i?e.slice(1,o):e.slice(s,o)):(0===s&&i?(t.name=e.slice(1,n),t.base=e.slice(1,o)):(t.name=e.slice(s,n),t.base=e.slice(s,o)),t.ext=e.slice(n,o)),t.dir=this.dirname(e),t},sep:"/",delimiter:":"},W={};function Y(e,t,r=3){if(W[t])return;let i=(new Error).stack;void 0===i?console.warn("PixiJS Deprecation Warning: ",`${t}\nDeprecated since v${e}`):(i=i.split("\n").splice(r).join("\n"),console.groupCollapsed?(console.groupCollapsed("%cPixiJS Deprecation Warning: %c%s","color:#614108;background:#fffbe6","font-weight:normal;color:#614108;background:#fffbe6",`${t}\nDeprecated since v${e}`),console.warn(i),console.groupEnd()):(console.warn("PixiJS Deprecation Warning: ",`${t}\nDeprecated since v${e}`),console.warn(i))),W[t]=!0}let Z;var J={grad:.9,turn:360,rad:360/(2*Math.PI)},$=function(e){return"string"==typeof e?e.length>0:"number"==typeof e},q=function(e,t,r){return void 0===t&&(t=0),void 0===r&&(r=Math.pow(10,t)),Math.round(r*e)/r+0},Q=function(e,t,r){return void 0===t&&(t=0),void 0===r&&(r=1),e>r?r:e>t?e:t},ee=function(e){return(e=isFinite(e)?e%360:0)>0?e:e+360},te=function(e){return{r:Q(e.r,0,255),g:Q(e.g,0,255),b:Q(e.b,0,255),a:Q(e.a)}},re=function(e){return{r:q(e.r),g:q(e.g),b:q(e.b),a:q(e.a,3)}},ie=/^#([0-9a-f]{3,8})$/i,ae=function(e){var t=e.toString(16);return t.length<2?"0"+t:t},ne=function(e){var t=e.r,r=e.g,i=e.b,a=e.a,n=Math.max(t,r,i),s=n-Math.min(t,r,i),o=s?n===t?(r-i)/s:n===r?2+(i-t)/s:4+(t-r)/s:0;return{h:60*(o<0?o+6:o),s:n?s/n*100:0,v:n/255*100,a}},se=function(e){var t=e.h,r=e.s,i=e.v,a=e.a;t=t/360*6,r/=100,i/=100;var n=Math.floor(t),s=i*(1-r),o=i*(1-(t-n)*r),l=i*(1-(1-t+n)*r),h=n%6;return{r:255*[i,o,s,s,l,i][h],g:255*[l,i,i,o,s,s][h],b:255*[s,s,l,i,i,o][h],a}},oe=function(e){return{h:ee(e.h),s:Q(e.s,0,100),l:Q(e.l,0,100),a:Q(e.a)}},le=function(e){return{h:q(e.h),s:q(e.s),l:q(e.l),a:q(e.a,3)}},he=function(e){return se((r=(t=e).s,{h:t.h,s:(r*=((i=t.l)<50?i:100-i)/100)>0?2*r/(i+r)*100:0,v:i+r,a:t.a}));var t,r,i},ue=function(e){return{h:(t=ne(e)).h,s:(a=(200-(r=t.s))*(i=t.v)/100)>0&&a<200?r*i/100/(a<=100?a:200-a)*100:0,l:a/2,a:t.a};var t,r,i,a},de=/^hsla?\(\s*([+-]?\d*\.?\d+)(deg|rad|grad|turn)?\s*,\s*([+-]?\d*\.?\d+)%\s*,\s*([+-]?\d*\.?\d+)%\s*(?:,\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,ce=/^hsla?\(\s*([+-]?\d*\.?\d+)(deg|rad|grad|turn)?\s+([+-]?\d*\.?\d+)%\s+([+-]?\d*\.?\d+)%\s*(?:\/\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,me=/^rgba?\(\s*([+-]?\d*\.?\d+)(%)?\s*,\s*([+-]?\d*\.?\d+)(%)?\s*,\s*([+-]?\d*\.?\d+)(%)?\s*(?:,\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,fe=/^rgba?\(\s*([+-]?\d*\.?\d+)(%)?\s+([+-]?\d*\.?\d+)(%)?\s+([+-]?\d*\.?\d+)(%)?\s*(?:\/\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,pe={string:[[function(e){var t=ie.exec(e);return t?(e=t[1]).length<=4?{r:parseInt(e[0]+e[0],16),g:parseInt(e[1]+e[1],16),b:parseInt(e[2]+e[2],16),a:4===e.length?q(parseInt(e[3]+e[3],16)/255,2):1}:6===e.length||8===e.length?{r:parseInt(e.substr(0,2),16),g:parseInt(e.substr(2,2),16),b:parseInt(e.substr(4,2),16),a:8===e.length?q(parseInt(e.substr(6,2),16)/255,2):1}:null:null},"hex"],[function(e){var t=me.exec(e)||fe.exec(e);return t?t[2]!==t[4]||t[4]!==t[6]?null:te({r:Number(t[1])/(t[2]?100/255:1),g:Number(t[3])/(t[4]?100/255:1),b:Number(t[5])/(t[6]?100/255:1),a:void 0===t[7]?1:Number(t[7])/(t[8]?100:1)}):null},"rgb"],[function(e){var t=de.exec(e)||ce.exec(e);if(!t)return null;var r,i,a=oe({h:(r=t[1],i=t[2],void 0===i&&(i="deg"),Number(r)*(J[i]||1)),s:Number(t[3]),l:Number(t[4]),a:void 0===t[5]?1:Number(t[5])/(t[6]?100:1)});return he(a)},"hsl"]],object:[[function(e){var t=e.r,r=e.g,i=e.b,a=e.a,n=void 0===a?1:a;return $(t)&&$(r)&&$(i)?te({r:Number(t),g:Number(r),b:Number(i),a:Number(n)}):null},"rgb"],[function(e){var t=e.h,r=e.s,i=e.l,a=e.a,n=void 0===a?1:a;if(!$(t)||!$(r)||!$(i))return null;var s=oe({h:Number(t),s:Number(r),l:Number(i),a:Number(n)});return he(s)},"hsl"],[function(e){var t=e.h,r=e.s,i=e.v,a=e.a,n=void 0===a?1:a;if(!$(t)||!$(r)||!$(i))return null;var s=function(e){return{h:ee(e.h),s:Q(e.s,0,100),v:Q(e.v,0,100),a:Q(e.a)}}({h:Number(t),s:Number(r),v:Number(i),a:Number(n)});return se(s)},"hsv"]]},ge=function(e,t){for(var r=0;r<t.length;r++){var i=t[r][0](e);if(i)return[i,t[r][1]]}return[null,void 0]},ye=function(e,t){var r=ue(e);return{h:r.h,s:Q(r.s+100*t,0,100),l:r.l,a:r.a}},ve=function(e){return(299*e.r+587*e.g+114*e.b)/1e3/255},xe=function(e,t){var r=ue(e);return{h:r.h,s:r.s,l:Q(r.l+100*t,0,100),a:r.a}},_e=function(){function e(e){this.parsed=function(e){return"string"==typeof e?ge(e.trim(),pe.string):"object"==typeof e&&null!==e?ge(e,pe.object):[null,void 0]}(e)[0],this.rgba=this.parsed||{r:0,g:0,b:0,a:1}}return e.prototype.isValid=function(){return null!==this.parsed},e.prototype.brightness=function(){return q(ve(this.rgba),2)},e.prototype.isDark=function(){return ve(this.rgba)<.5},e.prototype.isLight=function(){return ve(this.rgba)>=.5},e.prototype.toHex=function(){return t=(e=re(this.rgba)).r,r=e.g,i=e.b,n=(a=e.a)<1?ae(q(255*a)):"","#"+ae(t)+ae(r)+ae(i)+n;var e,t,r,i,a,n},e.prototype.toRgb=function(){return re(this.rgba)},e.prototype.toRgbString=function(){return t=(e=re(this.rgba)).r,r=e.g,i=e.b,(a=e.a)<1?"rgba("+t+", "+r+", "+i+", "+a+")":"rgb("+t+", "+r+", "+i+")";var e,t,r,i,a},e.prototype.toHsl=function(){return le(ue(this.rgba))},e.prototype.toHslString=function(){return t=(e=le(ue(this.rgba))).h,r=e.s,i=e.l,(a=e.a)<1?"hsla("+t+", "+r+"%, "+i+"%, "+a+")":"hsl("+t+", "+r+"%, "+i+"%)";var e,t,r,i,a},e.prototype.toHsv=function(){return e=ne(this.rgba),{h:q(e.h),s:q(e.s),v:q(e.v),a:q(e.a,3)};var e},e.prototype.invert=function(){return be({r:255-(e=this.rgba).r,g:255-e.g,b:255-e.b,a:e.a});var e},e.prototype.saturate=function(e){return void 0===e&&(e=.1),be(ye(this.rgba,e))},e.prototype.desaturate=function(e){return void 0===e&&(e=.1),be(ye(this.rgba,-e))},e.prototype.grayscale=function(){return be(ye(this.rgba,-1))},e.prototype.lighten=function(e){return void 0===e&&(e=.1),be(xe(this.rgba,e))},e.prototype.darken=function(e){return void 0===e&&(e=.1),be(xe(this.rgba,-e))},e.prototype.rotate=function(e){return void 0===e&&(e=15),this.hue(this.hue()+e)},e.prototype.alpha=function(e){return"number"==typeof e?be({r:(t=this.rgba).r,g:t.g,b:t.b,a:e}):q(this.rgba.a,3);var t},e.prototype.hue=function(e){var t=ue(this.rgba);return"number"==typeof e?be({h:e,s:t.s,l:t.l,a:t.a}):q(t.h)},e.prototype.isEqual=function(e){return this.toHex()===be(e).toHex()},e}(),be=function(e){return e instanceof _e?e:new _e(e)},Te=[];!function(e){e.forEach((function(e){Te.indexOf(e)<0&&(e(_e,pe),Te.push(e))}))}([function(e,t){var r={white:"#ffffff",bisque:"#ffe4c4",blue:"#0000ff",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",antiquewhite:"#faebd7",aqua:"#00ffff",azure:"#f0ffff",whitesmoke:"#f5f5f5",papayawhip:"#ffefd5",plum:"#dda0dd",blanchedalmond:"#ffebcd",black:"#000000",gold:"#ffd700",goldenrod:"#daa520",gainsboro:"#dcdcdc",cornsilk:"#fff8dc",cornflowerblue:"#6495ed",burlywood:"#deb887",aquamarine:"#7fffd4",beige:"#f5f5dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkkhaki:"#bdb76b",darkgray:"#a9a9a9",darkgreen:"#006400",darkgrey:"#a9a9a9",peachpuff:"#ffdab9",darkmagenta:"#8b008b",darkred:"#8b0000",darkorchid:"#9932cc",darkorange:"#ff8c00",darkslateblue:"#483d8b",gray:"#808080",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",deeppink:"#ff1493",deepskyblue:"#00bfff",wheat:"#f5deb3",firebrick:"#b22222",floralwhite:"#fffaf0",ghostwhite:"#f8f8ff",darkviolet:"#9400d3",magenta:"#ff00ff",green:"#008000",dodgerblue:"#1e90ff",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",blueviolet:"#8a2be2",forestgreen:"#228b22",lawngreen:"#7cfc00",indianred:"#cd5c5c",indigo:"#4b0082",fuchsia:"#ff00ff",brown:"#a52a2a",maroon:"#800000",mediumblue:"#0000cd",lightcoral:"#f08080",darkturquoise:"#00ced1",lightcyan:"#e0ffff",ivory:"#fffff0",lightyellow:"#ffffe0",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",linen:"#faf0e6",mediumaquamarine:"#66cdaa",lemonchiffon:"#fffacd",lime:"#00ff00",khaki:"#f0e68c",mediumseagreen:"#3cb371",limegreen:"#32cd32",mediumspringgreen:"#00fa9a",lightskyblue:"#87cefa",lightblue:"#add8e6",midnightblue:"#191970",lightpink:"#ffb6c1",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",mintcream:"#f5fffa",lightslategray:"#778899",lightslategrey:"#778899",navajowhite:"#ffdead",navy:"#000080",mediumvioletred:"#c71585",powderblue:"#b0e0e6",palegoldenrod:"#eee8aa",oldlace:"#fdf5e6",paleturquoise:"#afeeee",mediumturquoise:"#48d1cc",mediumorchid:"#ba55d3",rebeccapurple:"#663399",lightsteelblue:"#b0c4de",mediumslateblue:"#7b68ee",thistle:"#d8bfd8",tan:"#d2b48c",orchid:"#da70d6",mediumpurple:"#9370db",purple:"#800080",pink:"#ffc0cb",skyblue:"#87ceeb",springgreen:"#00ff7f",palegreen:"#98fb98",red:"#ff0000",yellow:"#ffff00",slateblue:"#6a5acd",lavenderblush:"#fff0f5",peru:"#cd853f",palevioletred:"#db7093",violet:"#ee82ee",teal:"#008080",slategray:"#708090",slategrey:"#708090",aliceblue:"#f0f8ff",darkseagreen:"#8fbc8f",darkolivegreen:"#556b2f",greenyellow:"#adff2f",seagreen:"#2e8b57",seashell:"#fff5ee",tomato:"#ff6347",silver:"#c0c0c0",sienna:"#a0522d",lavender:"#e6e6fa",lightgreen:"#90ee90",orange:"#ffa500",orangered:"#ff4500",steelblue:"#4682b4",royalblue:"#4169e1",turquoise:"#40e0d0",yellowgreen:"#9acd32",salmon:"#fa8072",saddlebrown:"#8b4513",sandybrown:"#f4a460",rosybrown:"#bc8f8f",darksalmon:"#e9967a",lightgoldenrodyellow:"#fafad2",snow:"#fffafa",lightgrey:"#d3d3d3",lightgray:"#d3d3d3",dimgray:"#696969",dimgrey:"#696969",olivedrab:"#6b8e23",olive:"#808000"},i={};for(var a in r)i[r[a]]=a;var n={};e.prototype.toName=function(t){if(!(this.rgba.a||this.rgba.r||this.rgba.g||this.rgba.b))return"transparent";var a,s,o=i[this.toHex()];if(o)return o;if(null==t?void 0:t.closest){var l=this.toRgb(),h=1/0,u="black";if(!n.length)for(var d in r)n[d]=new e(r[d]).toRgb();for(var c in r){var m=(a=l,s=n[c],Math.pow(a.r-s.r,2)+Math.pow(a.g-s.g,2)+Math.pow(a.b-s.b,2));m<h&&(h=m,u=c)}return u}},t.string.push([function(t){var i=t.toLowerCase(),a="transparent"===i?"#0000":r[i];return a?new e(a).toRgb():null},"name"])}]);const Ae=class{constructor(e=16777215){this._value=null,this._components=new Float32Array(4),this._components.fill(1),this._int=16777215,this.value=e}get red(){return this._components[0]}get green(){return this._components[1]}get blue(){return this._components[2]}get alpha(){return this._components[3]}setValue(e){return this.value=e,this}set value(e){if(e instanceof Ae)this._value=this.cloneSource(e._value),this._int=e._int,this._components.set(e._components);else{if(null===e)throw new Error("Cannot set PIXI.Color#value to null");null!==this._value&&this.isSourceEqual(this._value,e)||(this.normalize(e),this._value=this.cloneSource(e))}}get value(){return this._value}cloneSource(e){return"string"==typeof e||"number"==typeof e||e instanceof Number||null===e?e:Array.isArray(e)||ArrayBuffer.isView(e)?e.slice(0):"object"==typeof e&&null!==e?{...e}:e}isSourceEqual(e,t){const r=typeof e;if(r!==typeof t)return!1;if("number"===r||"string"===r||e instanceof Number)return e===t;if(Array.isArray(e)&&Array.isArray(t)||ArrayBuffer.isView(e)&&ArrayBuffer.isView(t))return e.length===t.length&&e.every(((e,r)=>e===t[r]));if(null!==e&&null!==t){const r=Object.keys(e),i=Object.keys(t);return r.length===i.length&&r.every((r=>e[r]===t[r]))}return e===t}toRgba(){const[e,t,r,i]=this._components;return{r:e,g:t,b:r,a:i}}toRgb(){const[e,t,r]=this._components;return{r:e,g:t,b:r}}toRgbaString(){const[e,t,r]=this.toUint8RgbArray();return`rgba(${e},${t},${r},${this.alpha})`}toUint8RgbArray(e){const[t,r,i]=this._components;return(e=e??[])[0]=Math.round(255*t),e[1]=Math.round(255*r),e[2]=Math.round(255*i),e}toRgbArray(e){e=e??[];const[t,r,i]=this._components;return e[0]=t,e[1]=r,e[2]=i,e}toNumber(){return this._int}toLittleEndianNumber(){const e=this._int;return(e>>16)+(65280&e)+((255&e)<<16)}multiply(e){const[t,r,i,a]=Ae.temp.setValue(e)._components;return this._components[0]*=t,this._components[1]*=r,this._components[2]*=i,this._components[3]*=a,this.refreshInt(),this._value=null,this}premultiply(e,t=!0){return t&&(this._components[0]*=e,this._components[1]*=e,this._components[2]*=e),this._components[3]=e,this.refreshInt(),this._value=null,this}toPremultiplied(e,t=!0){if(1===e)return(255<<24)+this._int;if(0===e)return t?0:this._int;let r=this._int>>16&255,i=this._int>>8&255,a=255&this._int;return t&&(r=r*e+.5|0,i=i*e+.5|0,a=a*e+.5|0),(255*e<<24)+(r<<16)+(i<<8)+a}toHex(){const e=this._int.toString(16);return`#${"000000".substring(0,6-e.length)+e}`}toHexa(){const e=Math.round(255*this._components[3]).toString(16);return this.toHex()+"00".substring(0,2-e.length)+e}setAlpha(e){return this._components[3]=this._clamp(e),this}round(e){const[t,r,i]=this._components;return this._components[0]=Math.round(t*e)/e,this._components[1]=Math.round(r*e)/e,this._components[2]=Math.round(i*e)/e,this.refreshInt(),this._value=null,this}toArray(e){e=e??[];const[t,r,i,a]=this._components;return e[0]=t,e[1]=r,e[2]=i,e[3]=a,e}normalize(e){let t,r,i,a;if(("number"==typeof e||e instanceof Number)&&e>=0&&e<=16777215)t=(e>>16&255)/255,r=(e>>8&255)/255,i=(255&e)/255,a=1;else if((Array.isArray(e)||e instanceof Float32Array)&&e.length>=3&&e.length<=4)e=this._clamp(e),[t,r,i,a=1]=e;else if((e instanceof Uint8Array||e instanceof Uint8ClampedArray)&&e.length>=3&&e.length<=4)e=this._clamp(e,0,255),[t,r,i,a=255]=e,t/=255,r/=255,i/=255,a/=255;else if("string"==typeof e||"object"==typeof e){if("string"==typeof e){const t=Ae.HEX_PATTERN.exec(e);t&&(e=`#${t[2]}`)}const n=be(e);n.isValid()&&(({r:t,g:r,b:i,a}=n.rgba),t/=255,r/=255,i/=255)}if(void 0===t)throw new Error(`Unable to convert color ${e}`);this._components[0]=t,this._components[1]=r,this._components[2]=i,this._components[3]=a,this.refreshInt()}refreshInt(){this._clamp(this._components);const[e,t,r]=this._components;this._int=(255*e<<16)+(255*t<<8)+(255*r|0)}_clamp(e,t=0,r=1){return"number"==typeof e?Math.min(Math.max(e,t),r):(e.forEach(((i,a)=>{e[a]=Math.min(Math.max(i,t),r)})),e)}};let Ee=Ae;Ee.shared=new Ae,Ee.temp=new Ae,Ee.HEX_PATTERN=/^(#|0x)?(([a-f0-9]{3}){1,2}([a-f0-9]{2})?)$/i;const Se=function(){const e=[],t=[];for(let r=0;r<32;r++)e[r]=r,t[r]=r;e[a.NORMAL_NPM]=a.NORMAL,e[a.ADD_NPM]=a.ADD,e[a.SCREEN_NPM]=a.SCREEN,t[a.NORMAL]=a.NORMAL_NPM,t[a.ADD]=a.ADD_NPM,t[a.SCREEN]=a.SCREEN_NPM;const r=[];return r.push(t),r.push(e),r}();function we(e,t){return Se[t?1:0][e]}function ke(e){if(4===e.BYTES_PER_ELEMENT)return e instanceof Float32Array?"Float32Array":e instanceof Uint32Array?"Uint32Array":"Int32Array";if(2===e.BYTES_PER_ELEMENT){if(e instanceof Uint16Array)return"Uint16Array"}else if(1===e.BYTES_PER_ELEMENT&&e instanceof Uint8Array)return"Uint8Array";return null}function Ce(e){return e+=0===e?1:0,--e,e|=e>>>1,e|=e>>>2,e|=e>>>4,e|=e>>>8,1+(e|=e>>>16)}function Me(e){return!(e&e-1||!e)}function Re(e){let t=(e>65535?1:0)<<4,r=((e>>>=t)>255?1:0)<<3;return t|=r,r=((e>>>=r)>15?1:0)<<2,t|=r,r=((e>>>=r)>3?1:0)<<1,t|=r,t|(e>>>=r)>>1}function Ie(e,t,r){const i=e.length;let a;if(t>=i||0===r)return;const n=i-(r=t+r>i?i-t:r);for(a=t;a<n;++a)e[a]=e[a+r];e.length=n}function Pe(e){return 0===e?0:e<0?-1:1}Float32Array,Uint32Array,Int32Array,Uint8Array;let De=0;function Be(){return++De}const Ne=class{constructor(e,t,r,i){this.left=e,this.top=t,this.right=r,this.bottom=i}get width(){return this.right-this.left}get height(){return this.bottom-this.top}isEmpty(){return this.left===this.right||this.top===this.bottom}};let Fe=Ne;Fe.EMPTY=new Ne(0,0,0,0);const Le={},Oe=Object.create(null),ze=Object.create(null);class Ge{constructor(e,t,r){this._canvas=b.ADAPTER.createCanvas(),this._context=this._canvas.getContext("2d"),this.resolution=r||b.RESOLUTION,this.resize(e,t)}clear(){this._checkDestroyed(),this._context.setTransform(1,0,0,1,0,0),this._context.clearRect(0,0,this._canvas.width,this._canvas.height)}resize(e,t){this._checkDestroyed(),this._canvas.width=Math.round(e*this.resolution),this._canvas.height=Math.round(t*this.resolution)}destroy(){this._context=null,this._canvas=null}get width(){return this._checkDestroyed(),this._canvas.width}set width(e){this._checkDestroyed(),this._canvas.width=Math.round(e)}get height(){return this._checkDestroyed(),this._canvas.height}set height(e){this._checkDestroyed(),this._canvas.height=Math.round(e)}get canvas(){return this._checkDestroyed(),this._canvas}get context(){return this._checkDestroyed(),this._context}_checkDestroyed(){if(null===this._canvas)throw new TypeError("The CanvasRenderTarget has already been destroyed")}}function Ue(e,t,r){for(let i=0,a=4*r*t;i<t;++i,a+=4)if(0!==e[a+3])return!1;return!0}function He(e,t,r,i,a){const n=4*t;for(let t=i,s=i*n+4*r;t<=a;++t,s+=n)if(0!==e[s+3])return!1;return!0}let Ve;function je(e,t=1){const r=b.RETINA_PREFIX?.exec(e);return r?parseFloat(r[1]):t}var Xe=(e=>(e.Renderer="renderer",e.Application="application",e.RendererSystem="renderer-webgl-system",e.RendererPlugin="renderer-webgl-plugin",e.CanvasRendererSystem="renderer-canvas-system",e.CanvasRendererPlugin="renderer-canvas-plugin",e.Asset="asset",e.LoadParser="load-parser",e.ResolveParser="resolve-parser",e.CacheParser="cache-parser",e.DetectionParser="detection-parser",e))(Xe||{});const Ke=e=>{if("function"==typeof e||"object"==typeof e&&e.extension){if(!e.extension)throw new Error("Extension class must have an extension object");e={..."object"!=typeof e.extension?{type:e.extension}:e.extension,ref:e}}if("object"!=typeof e)throw new Error("Invalid extension type");return"string"==typeof(e={...e}).type&&(e.type=[e.type]),e},We=(e,t)=>Ke(e).priority??t,Ye={_addHandlers:{},_removeHandlers:{},_queue:{},remove(...e){return e.map(Ke).forEach((e=>{e.type.forEach((t=>this._removeHandlers[t]?.(e)))})),this},add(...e){return e.map(Ke).forEach((e=>{e.type.forEach((t=>{const r=this._addHandlers,i=this._queue;r[t]?r[t](e):(i[t]=i[t]||[],i[t].push(e))}))})),this},handle(e,t,r){const i=this._addHandlers,a=this._removeHandlers;if(i[e]||a[e])throw new Error(`Extension type ${e} already has a handler`);i[e]=t,a[e]=r;const n=this._queue;return n[e]&&(n[e].forEach((e=>t(e))),delete n[e]),this},handleByMap(e,t){return this.handle(e,(e=>{t[e.name]=e.ref}),(e=>{delete t[e.name]}))},handleByList(e,t,r=-1){return this.handle(e,(e=>{t.includes(e.ref)||(t.push(e.ref),t.sort(((e,t)=>We(t,r)-We(e,r))))}),(e=>{const r=t.indexOf(e.ref);-1!==r&&t.splice(r,1)}))}};class Ze{constructor(e){"number"==typeof e?this.rawBinaryData=new ArrayBuffer(e):e instanceof Uint8Array?this.rawBinaryData=e.buffer:this.rawBinaryData=e,this.uint32View=new Uint32Array(this.rawBinaryData),this.float32View=new Float32Array(this.rawBinaryData)}get int8View(){return this._int8View||(this._int8View=new Int8Array(this.rawBinaryData)),this._int8View}get uint8View(){return this._uint8View||(this._uint8View=new Uint8Array(this.rawBinaryData)),this._uint8View}get int16View(){return this._int16View||(this._int16View=new Int16Array(this.rawBinaryData)),this._int16View}get uint16View(){return this._uint16View||(this._uint16View=new Uint16Array(this.rawBinaryData)),this._uint16View}get int32View(){return this._int32View||(this._int32View=new Int32Array(this.rawBinaryData)),this._int32View}view(e){return this[`${e}View`]}destroy(){this.rawBinaryData=null,this._int8View=null,this._uint8View=null,this._int16View=null,this._uint16View=null,this._int32View=null,this.uint32View=null,this.float32View=null}static sizeOf(e){switch(e){case"int8":case"uint8":return 1;case"int16":case"uint16":return 2;case"int32":case"uint32":case"float32":return 4;default:throw new Error(`${e} isn't a valid view type`)}}}const Je=["precision mediump float;","void main(void){","float test = 0.1;","%forloop%","gl_FragColor = vec4(0.0);","}"].join("\n");function $e(e){let t="";for(let r=0;r<e;++r)r>0&&(t+="\nelse "),r<e-1&&(t+=`if(test == ${r}.0){}`);return t}class qe{constructor(){this.data=0,this.blendMode=a.NORMAL,this.polygonOffset=0,this.blend=!0,this.depthMask=!0}get blend(){return!!(1&this.data)}set blend(e){!!(1&this.data)!==e&&(this.data^=1)}get offsets(){return!!(2&this.data)}set offsets(e){!!(2&this.data)!==e&&(this.data^=2)}get culling(){return!!(4&this.data)}set culling(e){!!(4&this.data)!==e&&(this.data^=4)}get depthTest(){return!!(8&this.data)}set depthTest(e){!!(8&this.data)!==e&&(this.data^=8)}get depthMask(){return!!(32&this.data)}set depthMask(e){!!(32&this.data)!==e&&(this.data^=32)}get clockwiseFrontFace(){return!!(16&this.data)}set clockwiseFrontFace(e){!!(16&this.data)!==e&&(this.data^=16)}get blendMode(){return this._blendMode}set blendMode(e){this.blend=e!==a.NONE,this._blendMode=e}get polygonOffset(){return this._polygonOffset}set polygonOffset(e){this.offsets=!!e,this._polygonOffset=e}toString(){return`[@pixi/core:State blendMode=${this.blendMode} clockwiseFrontFace=${this.clockwiseFrontFace} culling=${this.culling} depthMask=${this.depthMask} polygonOffset=${this.polygonOffset}]`}static for2d(){const e=new qe;return e.depthTest=!1,e.blend=!0,e}}const Qe=[];function et(e,t){if(!e)return null;let r="";if("string"==typeof e){const t=/\.(\w{3,4})(?:$|\?|#)/i.exec(e);t&&(r=t[1].toLowerCase())}for(let i=Qe.length-1;i>=0;--i){const a=Qe[i];if(a.test&&a.test(e,r))return new a(e,t)}throw new Error("Unrecognized source type to auto-detect Resource")}class tt{constructor(e){this.items=[],this._name=e,this._aliasCount=0}emit(e,t,r,i,a,n,s,o){if(arguments.length>8)throw new Error("max arguments reached");const{name:l,items:h}=this;this._aliasCount++;for(let u=0,d=h.length;u<d;u++)h[u][l](e,t,r,i,a,n,s,o);return h===this.items&&this._aliasCount--,this}ensureNonAliasedItems(){this._aliasCount>0&&this.items.length>1&&(this._aliasCount=0,this.items=this.items.slice(0))}add(e){return e[this._name]&&(this.ensureNonAliasedItems(),this.remove(e),this.items.push(e)),this}remove(e){const t=this.items.indexOf(e);return-1!==t&&(this.ensureNonAliasedItems(),this.items.splice(t,1)),this}contains(e){return this.items.includes(e)}removeAll(){return this.ensureNonAliasedItems(),this.items.length=0,this}destroy(){this.removeAll(),this.items=null,this._name=null}get empty(){return 0===this.items.length}get name(){return this._name}}Object.defineProperties(tt.prototype,{dispatch:{value:tt.prototype.emit},run:{value:tt.prototype.emit}});class rt{constructor(e=0,t=0){this._width=e,this._height=t,this.destroyed=!1,this.internal=!1,this.onResize=new tt("setRealSize"),this.onUpdate=new tt("update"),this.onError=new tt("onError")}bind(e){this.onResize.add(e),this.onUpdate.add(e),this.onError.add(e),(this._width||this._height)&&this.onResize.emit(this._width,this._height)}unbind(e){this.onResize.remove(e),this.onUpdate.remove(e),this.onError.remove(e)}resize(e,t){e===this._width&&t===this._height||(this._width=e,this._height=t,this.onResize.emit(e,t))}get valid(){return!!this._width&&!!this._height}update(){this.destroyed||this.onUpdate.emit()}load(){return Promise.resolve(this)}get width(){return this._width}get height(){return this._height}style(e,t,r){return!1}dispose(){}destroy(){this.destroyed||(this.destroyed=!0,this.dispose(),this.onError.removeAll(),this.onError=null,this.onResize.removeAll(),this.onResize=null,this.onUpdate.removeAll(),this.onUpdate=null)}static test(e,t){return!1}}class it extends rt{constructor(e,t){const{width:r,height:i}=t||{};if(!r||!i)throw new Error("BufferResource width or height invalid");super(r,i),this.data=e}upload(e,t,r){const i=e.gl;i.pixelStorei(i.UNPACK_PREMULTIPLY_ALPHA_WEBGL,t.alphaMode===m.UNPACK);const a=t.realWidth,n=t.realHeight;return r.width===a&&r.height===n?i.texSubImage2D(t.target,0,0,0,a,n,t.format,r.type,this.data):(r.width=a,r.height=n,i.texImage2D(t.target,0,r.internalFormat,a,n,0,t.format,r.type,this.data)),!0}dispose(){this.data=null}static test(e){return e instanceof Float32Array||e instanceof Uint8Array||e instanceof Uint32Array}}const at={scaleMode:u.NEAREST,format:s.RGBA,alphaMode:m.NPM},nt=class extends G{constructor(e=null,t=null){super(),t=Object.assign({},nt.defaultOptions,t);const{alphaMode:r,mipmap:i,anisotropicLevel:a,scaleMode:n,width:s,height:o,wrapMode:l,format:h,type:u,target:d,resolution:c,resourceOptions:m}=t;!e||e instanceof rt||((e=et(e,m)).internal=!0),this.resolution=c||b.RESOLUTION,this.width=Math.round((s||0)*this.resolution)/this.resolution,this.height=Math.round((o||0)*this.resolution)/this.resolution,this._mipmap=i,this.anisotropicLevel=a,this._wrapMode=l,this._scaleMode=n,this.format=h,this.type=u,this.target=d,this.alphaMode=r,this.uid=Be(),this.touched=0,this.isPowerOfTwo=!1,this._refreshPOT(),this._glTextures={},this.dirtyId=0,this.dirtyStyleId=0,this.cacheId=null,this.valid=s>0&&o>0,this.textureCacheIds=[],this.destroyed=!1,this.resource=null,this._batchEnabled=0,this._batchLocation=0,this.parentTextureArray=null,this.setResource(e)}get realWidth(){return Math.round(this.width*this.resolution)}get realHeight(){return Math.round(this.height*this.resolution)}get mipmap(){return this._mipmap}set mipmap(e){this._mipmap!==e&&(this._mipmap=e,this.dirtyStyleId++)}get scaleMode(){return this._scaleMode}set scaleMode(e){this._scaleMode!==e&&(this._scaleMode=e,this.dirtyStyleId++)}get wrapMode(){return this._wrapMode}set wrapMode(e){this._wrapMode!==e&&(this._wrapMode=e,this.dirtyStyleId++)}setStyle(e,t){let r;return void 0!==e&&e!==this.scaleMode&&(this.scaleMode=e,r=!0),void 0!==t&&t!==this.mipmap&&(this.mipmap=t,r=!0),r&&this.dirtyStyleId++,this}setSize(e,t,r){return r=r||this.resolution,this.setRealSize(e*r,t*r,r)}setRealSize(e,t,r){return this.resolution=r||this.resolution,this.width=Math.round(e)/this.resolution,this.height=Math.round(t)/this.resolution,this._refreshPOT(),this.update(),this}_refreshPOT(){this.isPowerOfTwo=Me(this.realWidth)&&Me(this.realHeight)}setResolution(e){const t=this.resolution;return t===e||(this.resolution=e,this.valid&&(this.width=Math.round(this.width*t)/e,this.height=Math.round(this.height*t)/e,this.emit("update",this)),this._refreshPOT()),this}setResource(e){if(this.resource===e)return this;if(this.resource)throw new Error("Resource can be set only once");return e.bind(this),this.resource=e,this}update(){this.valid?(this.dirtyId++,this.dirtyStyleId++,this.emit("update",this)):this.width>0&&this.height>0&&(this.valid=!0,this.emit("loaded",this),this.emit("update",this))}onError(e){this.emit("error",this,e)}destroy(){this.resource&&(this.resource.unbind(this),this.resource.internal&&this.resource.destroy(),this.resource=null),this.cacheId&&(delete ze[this.cacheId],delete Oe[this.cacheId],this.cacheId=null),this.dispose(),nt.removeFromCache(this),this.textureCacheIds=null,this.destroyed=!0}dispose(){this.emit("dispose",this)}castToBaseTexture(){return this}static from(e,t,r=b.STRICT_TEXTURE_CACHE){const i="string"==typeof e;let a=null;if(i)a=e;else{if(!e._pixiId){const r=t?.pixiIdPrefix||"pixiid";e._pixiId=`${r}_${Be()}`}a=e._pixiId}let n=ze[a];if(i&&r&&!n)throw new Error(`The cacheId "${a}" does not exist in BaseTextureCache.`);return n||(n=new nt(e,t),n.cacheId=a,nt.addToCache(n,a)),n}static fromBuffer(e,t,r,i){e=e||new Float32Array(t*r*4);const a=new it(e,{width:t,height:r}),n=e instanceof Float32Array?l.FLOAT:l.UNSIGNED_BYTE;return new nt(a,Object.assign({},at,{type:n},i))}static addToCache(e,t){t&&(e.textureCacheIds.includes(t)||e.textureCacheIds.push(t),ze[t]&&ze[t]!==e&&console.warn(`BaseTexture added to the cache with an id [${t}] that already had an entry`),ze[t]=e)}static removeFromCache(e){if("string"==typeof e){const t=ze[e];if(t){const r=t.textureCacheIds.indexOf(e);return r>-1&&t.textureCacheIds.splice(r,1),delete ze[e],t}}else if(e?.textureCacheIds){for(let t=0;t<e.textureCacheIds.length;++t)delete ze[e.textureCacheIds[t]];return e.textureCacheIds.length=0,e}return null}};let st=nt;st.defaultOptions={mipmap:c.POW2,anisotropicLevel:0,scaleMode:u.LINEAR,wrapMode:d.CLAMP,alphaMode:m.UNPACK,target:o.TEXTURE_2D,format:s.RGBA,type:l.UNSIGNED_BYTE},st._globalBatch=0;class ot{constructor(){this.texArray=null,this.blend=0,this.type=n.TRIANGLES,this.start=0,this.size=0,this.data=null}}let lt=0;class ht{constructor(e,t=!0,r=!1){this.data=e||new Float32Array(1),this._glBuffers={},this._updateID=0,this.index=r,this.static=t,this.id=lt++,this.disposeRunner=new tt("disposeBuffer")}update(e){e instanceof Array&&(e=new Float32Array(e)),this.data=e||this.data,this._updateID++}dispose(){this.disposeRunner.emit(this,!1)}destroy(){this.dispose(),this.data=null}set index(e){this.type=e?x.ELEMENT_ARRAY_BUFFER:x.ARRAY_BUFFER}get index(){return this.type===x.ELEMENT_ARRAY_BUFFER}static from(e){return e instanceof Array&&(e=new Float32Array(e)),new ht(e)}}class ut{constructor(e,t=0,r=!1,i=l.FLOAT,a,n,s,o=1){this.buffer=e,this.size=t,this.normalized=r,this.type=i,this.stride=a,this.start=n,this.instance=s,this.divisor=o}destroy(){this.buffer=null}static from(e,t,r,i,a){return new ut(e,t,r,i,a)}}const dt={Float32Array,Uint32Array,Int32Array,Uint8Array},ct={5126:4,5123:2,5121:1};let mt=0;const ft={Float32Array,Uint32Array,Int32Array,Uint8Array,Uint16Array};class pt{constructor(e=[],t={}){this.buffers=e,this.indexBuffer=null,this.attributes=t,this.glVertexArrayObjects={},this.id=mt++,this.instanced=!1,this.instanceCount=1,this.disposeRunner=new tt("disposeGeometry"),this.refCount=0}addAttribute(e,t,r=0,i=!1,a,n,s,o=!1){if(!t)throw new Error("You must pass a buffer when creating an attribute");t instanceof ht||(t instanceof Array&&(t=new Float32Array(t)),t=new ht(t));const l=e.split("|");if(l.length>1){for(let e=0;e<l.length;e++)this.addAttribute(l[e],t,r,i,a);return this}let h=this.buffers.indexOf(t);return-1===h&&(this.buffers.push(t),h=this.buffers.length-1),this.attributes[e]=new ut(h,r,i,a,n,s,o),this.instanced=this.instanced||o,this}getAttribute(e){return this.attributes[e]}getBuffer(e){return this.buffers[this.getAttribute(e).buffer]}addIndex(e){return e instanceof ht||(e instanceof Array&&(e=new Uint16Array(e)),e=new ht(e)),e.type=x.ELEMENT_ARRAY_BUFFER,this.indexBuffer=e,this.buffers.includes(e)||this.buffers.push(e),this}getIndex(){return this.indexBuffer}interleave(){if(1===this.buffers.length||2===this.buffers.length&&this.indexBuffer)return this;const e=[],t=[],r=new ht;let i;for(i in this.attributes){const r=this.attributes[i],a=this.buffers[r.buffer];e.push(a.data),t.push(r.size*ct[r.type]/4),r.buffer=0}for(r.data=function(e,t){let r=0,i=0;const a={};for(let a=0;a<e.length;a++)i+=t[a],r+=e[a].length;const n=new ArrayBuffer(4*r);let s=null,o=0;for(let r=0;r<e.length;r++){const l=t[r],h=e[r],u=ke(h);a[u]||(a[u]=new dt[u](n)),s=a[u];for(let e=0;e<h.length;e++)s[(e/l|0)*i+o+e%l]=h[e];o+=l}return new Float32Array(n)}(e,t),i=0;i<this.buffers.length;i++)this.buffers[i]!==this.indexBuffer&&this.buffers[i].destroy();return this.buffers=[r],this.indexBuffer&&this.buffers.push(this.indexBuffer),this}getSize(){for(const e in this.attributes){const t=this.attributes[e];return this.buffers[t.buffer].data.length/(t.stride/4||t.size)}return 0}dispose(){this.disposeRunner.emit(this,!1)}destroy(){this.dispose(),this.buffers=null,this.indexBuffer=null,this.attributes=null}clone(){const e=new pt;for(let t=0;t<this.buffers.length;t++)e.buffers[t]=new ht(this.buffers[t].data.slice(0));for(const t in this.attributes){const r=this.attributes[t];e.attributes[t]=new ut(r.buffer,r.size,r.normalized,r.type,r.stride,r.start,r.instance)}return this.indexBuffer&&(e.indexBuffer=e.buffers[this.buffers.indexOf(this.indexBuffer)],e.indexBuffer.type=x.ELEMENT_ARRAY_BUFFER),e}static merge(e){const t=new pt,r=[],i=[],a=[];let n;for(let t=0;t<e.length;t++){n=e[t];for(let e=0;e<n.buffers.length;e++)i[e]=i[e]||0,i[e]+=n.buffers[e].data.length,a[e]=0}for(let e=0;e<n.buffers.length;e++)r[e]=new(ft[ke(n.buffers[e].data)])(i[e]),t.buffers[e]=new ht(r[e]);for(let t=0;t<e.length;t++){n=e[t];for(let e=0;e<n.buffers.length;e++)r[e].set(n.buffers[e].data,a[e]),a[e]+=n.buffers[e].data.length}if(t.attributes=n.attributes,n.indexBuffer){t.indexBuffer=t.buffers[n.buffers.indexOf(n.indexBuffer)],t.indexBuffer.type=x.ELEMENT_ARRAY_BUFFER;let r=0,i=0,a=0,s=0;for(let e=0;e<n.buffers.length;e++)if(n.buffers[e]!==n.indexBuffer){s=e;break}for(const e in n.attributes){const t=n.attributes[e];(0|t.buffer)===s&&(i+=t.size*ct[t.type]/4)}for(let n=0;n<e.length;n++){const o=e[n].indexBuffer.data;for(let e=0;e<o.length;e++)t.indexBuffer.data[e+a]+=r;r+=e[n].buffers[s].data.length/i,a+=o.length}}return t}}class gt extends pt{constructor(e=!1){super(),this._buffer=new ht(null,e,!1),this._indexBuffer=new ht(null,e,!0),this.addAttribute("aVertexPosition",this._buffer,2,!1,l.FLOAT).addAttribute("aTextureCoord",this._buffer,2,!1,l.FLOAT).addAttribute("aColor",this._buffer,4,!0,l.UNSIGNED_BYTE).addAttribute("aTextureId",this._buffer,1,!0,l.FLOAT).addIndex(this._indexBuffer)}}const yt=2*Math.PI,vt=180/Math.PI,xt=Math.PI/180;var _t=(e=>(e[e.POLY=0]="POLY",e[e.RECT=1]="RECT",e[e.CIRC=2]="CIRC",e[e.ELIP=3]="ELIP",e[e.RREC=4]="RREC",e))(_t||{});class bt{constructor(e=0,t=0){this.x=0,this.y=0,this.x=e,this.y=t}clone(){return new bt(this.x,this.y)}copyFrom(e){return this.set(e.x,e.y),this}copyTo(e){return e.set(this.x,this.y),e}equals(e){return e.x===this.x&&e.y===this.y}set(e=0,t=e){return this.x=e,this.y=t,this}toString(){return`[@pixi/math:Point x=${this.x} y=${this.y}]`}}const Tt=[new bt,new bt,new bt,new bt];class At{constructor(e=0,t=0,r=0,i=0){this.x=Number(e),this.y=Number(t),this.width=Number(r),this.height=Number(i),this.type=_t.RECT}get left(){return this.x}get right(){return this.x+this.width}get top(){return this.y}get bottom(){return this.y+this.height}static get EMPTY(){return new At(0,0,0,0)}clone(){return new At(this.x,this.y,this.width,this.height)}copyFrom(e){return this.x=e.x,this.y=e.y,this.width=e.width,this.height=e.height,this}copyTo(e){return e.x=this.x,e.y=this.y,e.width=this.width,e.height=this.height,e}contains(e,t){return!(this.width<=0||this.height<=0)&&e>=this.x&&e<this.x+this.width&&t>=this.y&&t<this.y+this.height}intersects(e,t){if(!t){const t=this.x<e.x?e.x:this.x;if((this.right>e.right?e.right:this.right)<=t)return!1;const r=this.y<e.y?e.y:this.y;return(this.bottom>e.bottom?e.bottom:this.bottom)>r}const r=this.left,i=this.right,a=this.top,n=this.bottom;if(i<=r||n<=a)return!1;const s=Tt[0].set(e.left,e.top),o=Tt[1].set(e.left,e.bottom),l=Tt[2].set(e.right,e.top),h=Tt[3].set(e.right,e.bottom);if(l.x<=s.x||o.y<=s.y)return!1;const u=Math.sign(t.a*t.d-t.b*t.c);if(0===u)return!1;if(t.apply(s,s),t.apply(o,o),t.apply(l,l),t.apply(h,h),Math.max(s.x,o.x,l.x,h.x)<=r||Math.min(s.x,o.x,l.x,h.x)>=i||Math.max(s.y,o.y,l.y,h.y)<=a||Math.min(s.y,o.y,l.y,h.y)>=n)return!1;const d=u*(o.y-s.y),c=u*(s.x-o.x),m=d*r+c*a,f=d*i+c*a,p=d*r+c*n,g=d*i+c*n;if(Math.max(m,f,p,g)<=d*s.x+c*s.y||Math.min(m,f,p,g)>=d*h.x+c*h.y)return!1;const y=u*(s.y-l.y),v=u*(l.x-s.x),x=y*r+v*a,_=y*i+v*a,b=y*r+v*n,T=y*i+v*n;return!(Math.max(x,_,b,T)<=y*s.x+v*s.y||Math.min(x,_,b,T)>=y*h.x+v*h.y)}pad(e=0,t=e){return this.x-=e,this.y-=t,this.width+=2*e,this.height+=2*t,this}fit(e){const t=Math.max(this.x,e.x),r=Math.min(this.x+this.width,e.x+e.width),i=Math.max(this.y,e.y),a=Math.min(this.y+this.height,e.y+e.height);return this.x=t,this.width=Math.max(r-t,0),this.y=i,this.height=Math.max(a-i,0),this}ceil(e=1,t=.001){const r=Math.ceil((this.x+this.width-t)*e)/e,i=Math.ceil((this.y+this.height-t)*e)/e;return this.x=Math.floor((this.x+t)*e)/e,this.y=Math.floor((this.y+t)*e)/e,this.width=r-this.x,this.height=i-this.y,this}enlarge(e){const t=Math.min(this.x,e.x),r=Math.max(this.x+this.width,e.x+e.width),i=Math.min(this.y,e.y),a=Math.max(this.y+this.height,e.y+e.height);return this.x=t,this.width=r-t,this.y=i,this.height=a-i,this}toString(){return`[@pixi/math:Rectangle x=${this.x} y=${this.y} width=${this.width} height=${this.height}]`}}class Et{constructor(e=0,t=0,r=0){this.x=e,this.y=t,this.radius=r,this.type=_t.CIRC}clone(){return new Et(this.x,this.y,this.radius)}contains(e,t){if(this.radius<=0)return!1;const r=this.radius*this.radius;let i=this.x-e,a=this.y-t;return i*=i,a*=a,i+a<=r}getBounds(){return new At(this.x-this.radius,this.y-this.radius,2*this.radius,2*this.radius)}toString(){return`[@pixi/math:Circle x=${this.x} y=${this.y} radius=${this.radius}]`}}class St{constructor(e=0,t=0,r=0,i=0){this.x=e,this.y=t,this.width=r,this.height=i,this.type=_t.ELIP}clone(){return new St(this.x,this.y,this.width,this.height)}contains(e,t){if(this.width<=0||this.height<=0)return!1;let r=(e-this.x)/this.width,i=(t-this.y)/this.height;return r*=r,i*=i,r+i<=1}getBounds(){return new At(this.x-this.width,this.y-this.height,this.width,this.height)}toString(){return`[@pixi/math:Ellipse x=${this.x} y=${this.y} width=${this.width} height=${this.height}]`}}class wt{constructor(...e){let t=Array.isArray(e[0])?e[0]:e;if("number"!=typeof t[0]){const e=[];for(let r=0,i=t.length;r<i;r++)e.push(t[r].x,t[r].y);t=e}this.points=t,this.type=_t.POLY,this.closeStroke=!0}clone(){const e=this.points.slice(),t=new wt(e);return t.closeStroke=this.closeStroke,t}contains(e,t){let r=!1;const i=this.points.length/2;for(let a=0,n=i-1;a<i;n=a++){const i=this.points[2*a],s=this.points[2*a+1],o=this.points[2*n],l=this.points[2*n+1];s>t!=l>t&&e<(t-s)/(l-s)*(o-i)+i&&(r=!r)}return r}toString(){return`[@pixi/math:PolygoncloseStroke=${this.closeStroke}points=${this.points.reduce(((e,t)=>`${e}, ${t}`),"")}]`}}class kt{constructor(e=0,t=0,r=0,i=0,a=20){this.x=e,this.y=t,this.width=r,this.height=i,this.radius=a,this.type=_t.RREC}clone(){return new kt(this.x,this.y,this.width,this.height,this.radius)}contains(e,t){if(this.width<=0||this.height<=0)return!1;if(e>=this.x&&e<=this.x+this.width&&t>=this.y&&t<=this.y+this.height){const r=Math.max(0,Math.min(this.radius,Math.min(this.width,this.height)/2));if(t>=this.y+r&&t<=this.y+this.height-r||e>=this.x+r&&e<=this.x+this.width-r)return!0;let i=e-(this.x+r),a=t-(this.y+r);const n=r*r;if(i*i+a*a<=n)return!0;if(i=e-(this.x+this.width-r),i*i+a*a<=n)return!0;if(a=t-(this.y+this.height-r),i*i+a*a<=n)return!0;if(i=e-(this.x+r),i*i+a*a<=n)return!0}return!1}toString(){return`[@pixi/math:RoundedRectangle x=${this.x} y=${this.y}width=${this.width} height=${this.height} radius=${this.radius}]`}}class Ct{constructor(e=1,t=0,r=0,i=1,a=0,n=0){this.array=null,this.a=e,this.b=t,this.c=r,this.d=i,this.tx=a,this.ty=n}fromArray(e){this.a=e[0],this.b=e[1],this.c=e[3],this.d=e[4],this.tx=e[2],this.ty=e[5]}set(e,t,r,i,a,n){return this.a=e,this.b=t,this.c=r,this.d=i,this.tx=a,this.ty=n,this}toArray(e,t){this.array||(this.array=new Float32Array(9));const r=t||this.array;return e?(r[0]=this.a,r[1]=this.b,r[2]=0,r[3]=this.c,r[4]=this.d,r[5]=0,r[6]=this.tx,r[7]=this.ty,r[8]=1):(r[0]=this.a,r[1]=this.c,r[2]=this.tx,r[3]=this.b,r[4]=this.d,r[5]=this.ty,r[6]=0,r[7]=0,r[8]=1),r}apply(e,t){t=t||new bt;const r=e.x,i=e.y;return t.x=this.a*r+this.c*i+this.tx,t.y=this.b*r+this.d*i+this.ty,t}applyInverse(e,t){t=t||new bt;const r=1/(this.a*this.d+this.c*-this.b),i=e.x,a=e.y;return t.x=this.d*r*i+-this.c*r*a+(this.ty*this.c-this.tx*this.d)*r,t.y=this.a*r*a+-this.b*r*i+(-this.ty*this.a+this.tx*this.b)*r,t}translate(e,t){return this.tx+=e,this.ty+=t,this}scale(e,t){return this.a*=e,this.d*=t,this.c*=e,this.b*=t,this.tx*=e,this.ty*=t,this}rotate(e){const t=Math.cos(e),r=Math.sin(e),i=this.a,a=this.c,n=this.tx;return this.a=i*t-this.b*r,this.b=i*r+this.b*t,this.c=a*t-this.d*r,this.d=a*r+this.d*t,this.tx=n*t-this.ty*r,this.ty=n*r+this.ty*t,this}append(e){const t=this.a,r=this.b,i=this.c,a=this.d;return this.a=e.a*t+e.b*i,this.b=e.a*r+e.b*a,this.c=e.c*t+e.d*i,this.d=e.c*r+e.d*a,this.tx=e.tx*t+e.ty*i+this.tx,this.ty=e.tx*r+e.ty*a+this.ty,this}setTransform(e,t,r,i,a,n,s,o,l){return this.a=Math.cos(s+l)*a,this.b=Math.sin(s+l)*a,this.c=-Math.sin(s-o)*n,this.d=Math.cos(s-o)*n,this.tx=e-(r*this.a+i*this.c),this.ty=t-(r*this.b+i*this.d),this}prepend(e){const t=this.tx;if(1!==e.a||0!==e.b||0!==e.c||1!==e.d){const t=this.a,r=this.c;this.a=t*e.a+this.b*e.c,this.b=t*e.b+this.b*e.d,this.c=r*e.a+this.d*e.c,this.d=r*e.b+this.d*e.d}return this.tx=t*e.a+this.ty*e.c+e.tx,this.ty=t*e.b+this.ty*e.d+e.ty,this}decompose(e){const t=this.a,r=this.b,i=this.c,a=this.d,n=e.pivot,s=-Math.atan2(-i,a),o=Math.atan2(r,t),l=Math.abs(s+o);return l<1e-5||Math.abs(yt-l)<1e-5?(e.rotation=o,e.skew.x=e.skew.y=0):(e.rotation=0,e.skew.x=s,e.skew.y=o),e.scale.x=Math.sqrt(t*t+r*r),e.scale.y=Math.sqrt(i*i+a*a),e.position.x=this.tx+(n.x*t+n.y*i),e.position.y=this.ty+(n.x*r+n.y*a),e}invert(){const e=this.a,t=this.b,r=this.c,i=this.d,a=this.tx,n=e*i-t*r;return this.a=i/n,this.b=-t/n,this.c=-r/n,this.d=e/n,this.tx=(r*this.ty-i*a)/n,this.ty=-(e*this.ty-t*a)/n,this}identity(){return this.a=1,this.b=0,this.c=0,this.d=1,this.tx=0,this.ty=0,this}clone(){const e=new Ct;return e.a=this.a,e.b=this.b,e.c=this.c,e.d=this.d,e.tx=this.tx,e.ty=this.ty,e}copyTo(e){return e.a=this.a,e.b=this.b,e.c=this.c,e.d=this.d,e.tx=this.tx,e.ty=this.ty,e}copyFrom(e){return this.a=e.a,this.b=e.b,this.c=e.c,this.d=e.d,this.tx=e.tx,this.ty=e.ty,this}toString(){return`[@pixi/math:Matrix a=${this.a} b=${this.b} c=${this.c} d=${this.d} tx=${this.tx} ty=${this.ty}]`}static get IDENTITY(){return new Ct}static get TEMP_MATRIX(){return new Ct}}const Mt=[1,1,0,-1,-1,-1,0,1,1,1,0,-1,-1,-1,0,1],Rt=[0,1,1,1,0,-1,-1,-1,0,1,1,1,0,-1,-1,-1],It=[0,-1,-1,-1,0,1,1,1,0,1,1,1,0,-1,-1,-1],Pt=[1,1,0,-1,-1,-1,0,1,-1,-1,0,1,1,1,0,-1],Dt=[],Bt=[],Nt=Math.sign;!function(){for(let e=0;e<16;e++){const t=[];Dt.push(t);for(let r=0;r<16;r++){const i=Nt(Mt[e]*Mt[r]+It[e]*Rt[r]),a=Nt(Rt[e]*Mt[r]+Pt[e]*Rt[r]),n=Nt(Mt[e]*It[r]+It[e]*Pt[r]),s=Nt(Rt[e]*It[r]+Pt[e]*Pt[r]);for(let e=0;e<16;e++)if(Mt[e]===i&&Rt[e]===a&&It[e]===n&&Pt[e]===s){t.push(e);break}}}for(let e=0;e<16;e++){const t=new Ct;t.set(Mt[e],Rt[e],It[e],Pt[e],0,0),Bt.push(t)}}();const Ft={E:0,SE:1,S:2,SW:3,W:4,NW:5,N:6,NE:7,MIRROR_VERTICAL:8,MAIN_DIAGONAL:10,MIRROR_HORIZONTAL:12,REVERSE_DIAGONAL:14,uX:e=>Mt[e],uY:e=>Rt[e],vX:e=>It[e],vY:e=>Pt[e],inv:e=>8&e?15&e:7&-e,add:(e,t)=>Dt[e][t],sub:(e,t)=>Dt[e][Ft.inv(t)],rotate180:e=>4^e,isVertical:e=>2==(3&e),byDirection:(e,t)=>2*Math.abs(e)<=Math.abs(t)?t>=0?Ft.S:Ft.N:2*Math.abs(t)<=Math.abs(e)?e>0?Ft.E:Ft.W:t>0?e>0?Ft.SE:Ft.SW:e>0?Ft.NE:Ft.NW,matrixAppendRotationInv:(e,t,r=0,i=0)=>{const a=Bt[Ft.inv(t)];a.tx=r,a.ty=i,e.append(a)}};class Lt{constructor(e,t,r=0,i=0){this._x=r,this._y=i,this.cb=e,this.scope=t}clone(e=this.cb,t=this.scope){return new Lt(e,t,this._x,this._y)}set(e=0,t=e){return this._x===e&&this._y===t||(this._x=e,this._y=t,this.cb.call(this.scope)),this}copyFrom(e){return this._x===e.x&&this._y===e.y||(this._x=e.x,this._y=e.y,this.cb.call(this.scope)),this}copyTo(e){return e.set(this._x,this._y),e}equals(e){return e.x===this._x&&e.y===this._y}toString(){return`[@pixi/math:ObservablePoint x=0 y=0 scope=${this.scope}]`}get x(){return this._x}set x(e){this._x!==e&&(this._x=e,this.cb.call(this.scope))}get y(){return this._y}set y(e){this._y!==e&&(this._y=e,this.cb.call(this.scope))}}const Ot=class{constructor(){this.worldTransform=new Ct,this.localTransform=new Ct,this.position=new Lt(this.onChange,this,0,0),this.scale=new Lt(this.onChange,this,1,1),this.pivot=new Lt(this.onChange,this,0,0),this.skew=new Lt(this.updateSkew,this,0,0),this._rotation=0,this._cx=1,this._sx=0,this._cy=0,this._sy=1,this._localID=0,this._currentLocalID=0,this._worldID=0,this._parentID=0}onChange(){this._localID++}updateSkew(){this._cx=Math.cos(this._rotation+this.skew.y),this._sx=Math.sin(this._rotation+this.skew.y),this._cy=-Math.sin(this._rotation-this.skew.x),this._sy=Math.cos(this._rotation-this.skew.x),this._localID++}toString(){return`[@pixi/math:Transform position=(${this.position.x}, ${this.position.y}) rotation=${this.rotation} scale=(${this.scale.x}, ${this.scale.y}) skew=(${this.skew.x}, ${this.skew.y}) ]`}updateLocalTransform(){const e=this.localTransform;this._localID!==this._currentLocalID&&(e.a=this._cx*this.scale.x,e.b=this._sx*this.scale.x,e.c=this._cy*this.scale.y,e.d=this._sy*this.scale.y,e.tx=this.position.x-(this.pivot.x*e.a+this.pivot.y*e.c),e.ty=this.position.y-(this.pivot.x*e.b+this.pivot.y*e.d),this._currentLocalID=this._localID,this._parentID=-1)}updateTransform(e){const t=this.localTransform;if(this._localID!==this._currentLocalID&&(t.a=this._cx*this.scale.x,t.b=this._sx*this.scale.x,t.c=this._cy*this.scale.y,t.d=this._sy*this.scale.y,t.tx=this.position.x-(this.pivot.x*t.a+this.pivot.y*t.c),t.ty=this.position.y-(this.pivot.x*t.b+this.pivot.y*t.d),this._currentLocalID=this._localID,this._parentID=-1),this._parentID!==e._worldID){const r=e.worldTransform,i=this.worldTransform;i.a=t.a*r.a+t.b*r.c,i.b=t.a*r.b+t.b*r.d,i.c=t.c*r.a+t.d*r.c,i.d=t.c*r.b+t.d*r.d,i.tx=t.tx*r.a+t.ty*r.c+r.tx,i.ty=t.tx*r.b+t.ty*r.d+r.ty,this._parentID=e._worldID,this._worldID++}}setFromMatrix(e){e.decompose(this),this._localID++}get rotation(){return this._rotation}set rotation(e){this._rotation!==e&&(this._rotation=e,this.updateSkew())}};let zt=Ot;zt.IDENTITY=new Ot;const Gt=[{test:e=>"float"===e.type&&1===e.size&&!e.isArray,code:e=>`\n            if(uv["${e}"] !== ud["${e}"].value)\n            {\n                ud["${e}"].value = uv["${e}"]\n                gl.uniform1f(ud["${e}"].location, uv["${e}"])\n            }\n            `},{test:(e,t)=>!("sampler2D"!==e.type&&"samplerCube"!==e.type&&"sampler2DArray"!==e.type||1!==e.size||e.isArray||null!=t&&void 0===t.castToBaseTexture),code:e=>`t = syncData.textureCount++;\n\n            renderer.texture.bind(uv["${e}"], t);\n\n            if(ud["${e}"].value !== t)\n            {\n                ud["${e}"].value = t;\n                gl.uniform1i(ud["${e}"].location, t);\n; // eslint-disable-line max-len\n            }`},{test:(e,t)=>"mat3"===e.type&&1===e.size&&!e.isArray&&void 0!==t.a,code:e=>`\n            gl.uniformMatrix3fv(ud["${e}"].location, false, uv["${e}"].toArray(true));\n            `,codeUbo:e=>`\n                var ${e}_matrix = uv.${e}.toArray(true);\n\n                data[offset] = ${e}_matrix[0];\n                data[offset+1] = ${e}_matrix[1];\n                data[offset+2] = ${e}_matrix[2];\n        \n                data[offset + 4] = ${e}_matrix[3];\n                data[offset + 5] = ${e}_matrix[4];\n                data[offset + 6] = ${e}_matrix[5];\n        \n                data[offset + 8] = ${e}_matrix[6];\n                data[offset + 9] = ${e}_matrix[7];\n                data[offset + 10] = ${e}_matrix[8];\n            `},{test:(e,t)=>"vec2"===e.type&&1===e.size&&!e.isArray&&void 0!==t.x,code:e=>`\n                cv = ud["${e}"].value;\n                v = uv["${e}"];\n\n                if(cv[0] !== v.x || cv[1] !== v.y)\n                {\n                    cv[0] = v.x;\n                    cv[1] = v.y;\n                    gl.uniform2f(ud["${e}"].location, v.x, v.y);\n                }`,codeUbo:e=>`\n                v = uv.${e};\n\n                data[offset] = v.x;\n                data[offset+1] = v.y;\n            `},{test:e=>"vec2"===e.type&&1===e.size&&!e.isArray,code:e=>`\n                cv = ud["${e}"].value;\n                v = uv["${e}"];\n\n                if(cv[0] !== v[0] || cv[1] !== v[1])\n                {\n                    cv[0] = v[0];\n                    cv[1] = v[1];\n                    gl.uniform2f(ud["${e}"].location, v[0], v[1]);\n                }\n            `},{test:(e,t)=>"vec4"===e.type&&1===e.size&&!e.isArray&&void 0!==t.width,code:e=>`\n                cv = ud["${e}"].value;\n                v = uv["${e}"];\n\n                if(cv[0] !== v.x || cv[1] !== v.y || cv[2] !== v.width || cv[3] !== v.height)\n                {\n                    cv[0] = v.x;\n                    cv[1] = v.y;\n                    cv[2] = v.width;\n                    cv[3] = v.height;\n                    gl.uniform4f(ud["${e}"].location, v.x, v.y, v.width, v.height)\n                }`,codeUbo:e=>`\n                    v = uv.${e};\n\n                    data[offset] = v.x;\n                    data[offset+1] = v.y;\n                    data[offset+2] = v.width;\n                    data[offset+3] = v.height;\n                `},{test:(e,t)=>"vec4"===e.type&&1===e.size&&!e.isArray&&void 0!==t.red,code:e=>`\n                cv = ud["${e}"].value;\n                v = uv["${e}"];\n\n                if(cv[0] !== v.red || cv[1] !== v.green || cv[2] !== v.blue || cv[3] !== v.alpha)\n                {\n                    cv[0] = v.red;\n                    cv[1] = v.green;\n                    cv[2] = v.blue;\n                    cv[3] = v.alpha;\n                    gl.uniform4f(ud["${e}"].location, v.red, v.green, v.blue, v.alpha)\n                }`,codeUbo:e=>`\n                    v = uv.${e};\n\n                    data[offset] = v.red;\n                    data[offset+1] = v.green;\n                    data[offset+2] = v.blue;\n                    data[offset+3] = v.alpha;\n                `},{test:(e,t)=>"vec3"===e.type&&1===e.size&&!e.isArray&&void 0!==t.red,code:e=>`\n                cv = ud["${e}"].value;\n                v = uv["${e}"];\n\n                if(cv[0] !== v.red || cv[1] !== v.green || cv[2] !== v.blue || cv[3] !== v.a)\n                {\n                    cv[0] = v.red;\n                    cv[1] = v.green;\n                    cv[2] = v.blue;\n    \n                    gl.uniform3f(ud["${e}"].location, v.red, v.green, v.blue)\n                }`,codeUbo:e=>`\n                    v = uv.${e};\n\n                    data[offset] = v.red;\n                    data[offset+1] = v.green;\n                    data[offset+2] = v.blue;\n                `},{test:e=>"vec4"===e.type&&1===e.size&&!e.isArray,code:e=>`\n                cv = ud["${e}"].value;\n                v = uv["${e}"];\n\n                if(cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])\n                {\n                    cv[0] = v[0];\n                    cv[1] = v[1];\n                    cv[2] = v[2];\n                    cv[3] = v[3];\n\n                    gl.uniform4f(ud["${e}"].location, v[0], v[1], v[2], v[3])\n                }`}],Ut={float:"\n    if (cv !== v)\n    {\n        cu.value = v;\n        gl.uniform1f(location, v);\n    }",vec2:"\n    if (cv[0] !== v[0] || cv[1] !== v[1])\n    {\n        cv[0] = v[0];\n        cv[1] = v[1];\n\n        gl.uniform2f(location, v[0], v[1])\n    }",vec3:"\n    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2])\n    {\n        cv[0] = v[0];\n        cv[1] = v[1];\n        cv[2] = v[2];\n\n        gl.uniform3f(location, v[0], v[1], v[2])\n    }",vec4:"\n    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])\n    {\n        cv[0] = v[0];\n        cv[1] = v[1];\n        cv[2] = v[2];\n        cv[3] = v[3];\n\n        gl.uniform4f(location, v[0], v[1], v[2], v[3]);\n    }",int:"\n    if (cv !== v)\n    {\n        cu.value = v;\n\n        gl.uniform1i(location, v);\n    }",ivec2:"\n    if (cv[0] !== v[0] || cv[1] !== v[1])\n    {\n        cv[0] = v[0];\n        cv[1] = v[1];\n\n        gl.uniform2i(location, v[0], v[1]);\n    }",ivec3:"\n    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2])\n    {\n        cv[0] = v[0];\n        cv[1] = v[1];\n        cv[2] = v[2];\n\n        gl.uniform3i(location, v[0], v[1], v[2]);\n    }",ivec4:"\n    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])\n    {\n        cv[0] = v[0];\n        cv[1] = v[1];\n        cv[2] = v[2];\n        cv[3] = v[3];\n\n        gl.uniform4i(location, v[0], v[1], v[2], v[3]);\n    }",uint:"\n    if (cv !== v)\n    {\n        cu.value = v;\n\n        gl.uniform1ui(location, v);\n    }",uvec2:"\n    if (cv[0] !== v[0] || cv[1] !== v[1])\n    {\n        cv[0] = v[0];\n        cv[1] = v[1];\n\n        gl.uniform2ui(location, v[0], v[1]);\n    }",uvec3:"\n    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2])\n    {\n        cv[0] = v[0];\n        cv[1] = v[1];\n        cv[2] = v[2];\n\n        gl.uniform3ui(location, v[0], v[1], v[2]);\n    }",uvec4:"\n    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])\n    {\n        cv[0] = v[0];\n        cv[1] = v[1];\n        cv[2] = v[2];\n        cv[3] = v[3];\n\n        gl.uniform4ui(location, v[0], v[1], v[2], v[3]);\n    }",bool:"\n    if (cv !== v)\n    {\n        cu.value = v;\n        gl.uniform1i(location, v);\n    }",bvec2:"\n    if (cv[0] != v[0] || cv[1] != v[1])\n    {\n        cv[0] = v[0];\n        cv[1] = v[1];\n\n        gl.uniform2i(location, v[0], v[1]);\n    }",bvec3:"\n    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2])\n    {\n        cv[0] = v[0];\n        cv[1] = v[1];\n        cv[2] = v[2];\n\n        gl.uniform3i(location, v[0], v[1], v[2]);\n    }",bvec4:"\n    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])\n    {\n        cv[0] = v[0];\n        cv[1] = v[1];\n        cv[2] = v[2];\n        cv[3] = v[3];\n\n        gl.uniform4i(location, v[0], v[1], v[2], v[3]);\n    }",mat2:"gl.uniformMatrix2fv(location, false, v)",mat3:"gl.uniformMatrix3fv(location, false, v)",mat4:"gl.uniformMatrix4fv(location, false, v)",sampler2D:"\n    if (cv !== v)\n    {\n        cu.value = v;\n\n        gl.uniform1i(location, v);\n    }",samplerCube:"\n    if (cv !== v)\n    {\n        cu.value = v;\n\n        gl.uniform1i(location, v);\n    }",sampler2DArray:"\n    if (cv !== v)\n    {\n        cu.value = v;\n\n        gl.uniform1i(location, v);\n    }"},Ht={float:"gl.uniform1fv(location, v)",vec2:"gl.uniform2fv(location, v)",vec3:"gl.uniform3fv(location, v)",vec4:"gl.uniform4fv(location, v)",mat4:"gl.uniformMatrix4fv(location, false, v)",mat3:"gl.uniformMatrix3fv(location, false, v)",mat2:"gl.uniformMatrix2fv(location, false, v)",int:"gl.uniform1iv(location, v)",ivec2:"gl.uniform2iv(location, v)",ivec3:"gl.uniform3iv(location, v)",ivec4:"gl.uniform4iv(location, v)",uint:"gl.uniform1uiv(location, v)",uvec2:"gl.uniform2uiv(location, v)",uvec3:"gl.uniform3uiv(location, v)",uvec4:"gl.uniform4uiv(location, v)",bool:"gl.uniform1iv(location, v)",bvec2:"gl.uniform2iv(location, v)",bvec3:"gl.uniform3iv(location, v)",bvec4:"gl.uniform4iv(location, v)",sampler2D:"gl.uniform1iv(location, v)",samplerCube:"gl.uniform1iv(location, v)",sampler2DArray:"gl.uniform1iv(location, v)"},Vt={};let jt,Xt=Vt;const Kt={float:1,vec2:2,vec3:3,vec4:4,int:1,ivec2:2,ivec3:3,ivec4:4,uint:1,uvec2:2,uvec3:3,uvec4:4,bool:1,bvec2:2,bvec3:3,bvec4:4,mat2:4,mat3:9,mat4:16,sampler2D:1};function Wt(e){return Kt[e]}let Yt=null;const Zt={FLOAT:"float",FLOAT_VEC2:"vec2",FLOAT_VEC3:"vec3",FLOAT_VEC4:"vec4",INT:"int",INT_VEC2:"ivec2",INT_VEC3:"ivec3",INT_VEC4:"ivec4",UNSIGNED_INT:"uint",UNSIGNED_INT_VEC2:"uvec2",UNSIGNED_INT_VEC3:"uvec3",UNSIGNED_INT_VEC4:"uvec4",BOOL:"bool",BOOL_VEC2:"bvec2",BOOL_VEC3:"bvec3",BOOL_VEC4:"bvec4",FLOAT_MAT2:"mat2",FLOAT_MAT3:"mat3",FLOAT_MAT4:"mat4",SAMPLER_2D:"sampler2D",INT_SAMPLER_2D:"sampler2D",UNSIGNED_INT_SAMPLER_2D:"sampler2D",SAMPLER_CUBE:"samplerCube",INT_SAMPLER_CUBE:"samplerCube",UNSIGNED_INT_SAMPLER_CUBE:"samplerCube",SAMPLER_2D_ARRAY:"sampler2DArray",INT_SAMPLER_2D_ARRAY:"sampler2DArray",UNSIGNED_INT_SAMPLER_2D_ARRAY:"sampler2DArray"};function Jt(e,t){if(!Yt){const t=Object.keys(Zt);Yt={};for(let r=0;r<t.length;++r){const i=t[r];Yt[e[i]]=Zt[i]}}return Yt[t]}function $t(e,t,r){if("precision"!==e.substring(0,9)){let i=t;return t===g.HIGH&&r!==g.HIGH&&(i=g.MEDIUM),`precision ${i} float;\n${e}`}return r!==g.HIGH&&"precision highp"===e.substring(0,15)?e.replace("precision highp","precision mediump"):e}let qt=0;const Qt={},er=class{constructor(t,r,i="pixi-shader",a={}){this.extra={},this.id=qt++,this.vertexSrc=t||er.defaultVertexSrc,this.fragmentSrc=r||er.defaultFragmentSrc,this.vertexSrc=this.vertexSrc.trim(),this.fragmentSrc=this.fragmentSrc.trim(),this.extra=a,"#version"!==this.vertexSrc.substring(0,8)&&(i=i.replace(/\s+/g,"-"),Qt[i]?(Qt[i]++,i+=`-${Qt[i]}`):Qt[i]=1,this.vertexSrc=`#define SHADER_NAME ${i}\n${this.vertexSrc}`,this.fragmentSrc=`#define SHADER_NAME ${i}\n${this.fragmentSrc}`,this.vertexSrc=$t(this.vertexSrc,er.defaultVertexPrecision,g.HIGH),this.fragmentSrc=$t(this.fragmentSrc,er.defaultFragmentPrecision,function(){if(!jt){jt=g.MEDIUM;const t=function(){if(Xt===Vt||Xt?.isContextLost()){const t=b.ADAPTER.createCanvas();let r;b.PREFER_ENV>=e.WEBGL2&&(r=t.getContext("webgl2",{})),r||(r=t.getContext("webgl",{})||t.getContext("experimental-webgl",{}),r?r.getExtension("WEBGL_draw_buffers"):r=null),Xt=r}return Xt}();if(t&&t.getShaderPrecisionFormat){const e=t.getShaderPrecisionFormat(t.FRAGMENT_SHADER,t.HIGH_FLOAT);jt=e.precision?g.HIGH:g.MEDIUM}}return jt}())),this.glPrograms={},this.syncUniforms=null}static get defaultVertexSrc(){return"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void){\n   gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n   vTextureCoord = aTextureCoord;\n}\n"}static get defaultFragmentSrc(){return"varying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\n\nvoid main(void){\n   gl_FragColor *= texture2D(uSampler, vTextureCoord);\n}"}static from(e,t,r){const i=e+t;let a=Le[i];return a||(Le[i]=a=new er(e,t,r)),a}};let tr=er;tr.defaultVertexPrecision=g.HIGH,tr.defaultFragmentPrecision=z.apple.device?g.HIGH:g.MEDIUM;let rr=0;class ir{constructor(e,t,r){this.group=!0,this.syncUniforms={},this.dirtyId=0,this.id=rr++,this.static=!!t,this.ubo=!!r,e instanceof ht?(this.buffer=e,this.buffer.type=x.UNIFORM_BUFFER,this.autoManage=!1,this.ubo=!0):(this.uniforms=e,this.ubo&&(this.buffer=new ht(new Float32Array(1)),this.buffer.type=x.UNIFORM_BUFFER,this.autoManage=!0))}update(){this.dirtyId++,!this.autoManage&&this.buffer&&this.buffer.update()}add(e,t,r){if(this.ubo)throw new Error("[UniformGroup] uniform groups in ubo mode cannot be modified, or have uniform groups nested in them");this.uniforms[e]=new ir(t,r)}static from(e,t,r){return new ir(e,t,r)}static uboFrom(e,t){return new ir(e,t??!0,!0)}}class ar{constructor(e,t){this.uniformBindCount=0,this.program=e,this.uniformGroup=t?t instanceof ir?t:new ir(t):new ir({}),this.disposeRunner=new tt("disposeShader")}checkUniformExists(e,t){if(t.uniforms[e])return!0;for(const r in t.uniforms){const i=t.uniforms[r];if(i.group&&this.checkUniformExists(e,i))return!0}return!1}destroy(){this.uniformGroup=null,this.disposeRunner.emit(this),this.disposeRunner.destroy()}get uniforms(){return this.uniformGroup.uniforms}static from(e,t,r){const i=tr.from(e,t);return new ar(i,r)}}class nr{constructor(e,t){if(this.vertexSrc=e,this.fragTemplate=t,this.programCache={},this.defaultGroupCache={},!t.includes("%count%"))throw new Error('Fragment template must contain "%count%".');if(!t.includes("%forloop%"))throw new Error('Fragment template must contain "%forloop%".')}generateShader(e){if(!this.programCache[e]){const t=new Int32Array(e);for(let r=0;r<e;r++)t[r]=r;this.defaultGroupCache[e]=ir.from({uSamplers:t},!0);let r=this.fragTemplate;r=r.replace(/%count%/gi,`${e}`),r=r.replace(/%forloop%/gi,this.generateSampleSrc(e)),this.programCache[e]=new tr(this.vertexSrc,r)}const t={tint:new Float32Array([1,1,1,1]),translationMatrix:new Ct,default:this.defaultGroupCache[e]};return new ar(this.programCache[e],t)}generateSampleSrc(e){let t="";t+="\n",t+="\n";for(let r=0;r<e;r++)r>0&&(t+="\nelse "),r<e-1&&(t+=`if(vTextureId < ${r}.5)`),t+="\n{",t+=`\n\tcolor = texture2D(uSamplers[${r}], vTextureCoord);`,t+="\n}";return t+="\n",t+="\n",t}}class sr{constructor(){this.elements=[],this.ids=[],this.count=0}clear(){for(let e=0;e<this.count;e++)this.elements[e]=null;this.count=0}}class or{constructor(e){this.renderer=e}flush(){}destroy(){this.renderer=null}start(){}stop(){this.flush()}render(e){}}const lr=class extends or{constructor(e){super(e),this.setShaderGenerator(),this.geometryClass=gt,this.vertexSize=6,this.state=qe.for2d(),this.size=4*lr.defaultBatchSize,this._vertexCount=0,this._indexCount=0,this._bufferedElements=[],this._bufferedTextures=[],this._bufferSize=0,this._shader=null,this._packedGeometries=[],this._packedGeometryPoolSize=2,this._flushId=0,this._aBuffers={},this._iBuffers={},this.maxTextures=1,this.renderer.on("prerender",this.onPrerender,this),e.runners.contextChange.add(this),this._dcIndex=0,this._aIndex=0,this._iIndex=0,this._attributeBuffer=null,this._indexBuffer=null,this._tempBoundTextures=[]}static get defaultMaxTextures(){return this._defaultMaxTextures=this._defaultMaxTextures??function(e){let t=!0;const r=b.ADAPTER.getNavigator();if(z.tablet||z.phone){if(z.apple.device){const e=r.userAgent.match(/OS (\d+)_(\d+)?/);e&&parseInt(e[1],10)<11&&(t=!1)}if(z.android.device){const e=r.userAgent.match(/Android\s([0-9.]*)/);e&&parseInt(e[1],10)<7&&(t=!1)}}return t?32:4}(),this._defaultMaxTextures}static set defaultMaxTextures(e){this._defaultMaxTextures=e}static get canUploadSameBuffer(){return this._canUploadSameBuffer=this._canUploadSameBuffer??!z.apple.device,this._canUploadSameBuffer}static set canUploadSameBuffer(e){this._canUploadSameBuffer=e}get MAX_TEXTURES(){return Y("7.1.0","BatchRenderer#MAX_TEXTURES renamed to BatchRenderer#maxTextures"),this.maxTextures}static get defaultVertexSrc(){return"precision highp float;\nattribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\nattribute vec4 aColor;\nattribute float aTextureId;\n\nuniform mat3 projectionMatrix;\nuniform mat3 translationMatrix;\nuniform vec4 tint;\n\nvarying vec2 vTextureCoord;\nvarying vec4 vColor;\nvarying float vTextureId;\n\nvoid main(void){\n    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n\n    vTextureCoord = aTextureCoord;\n    vTextureId = aTextureId;\n    vColor = aColor * tint;\n}\n"}static get defaultFragmentTemplate(){return"varying vec2 vTextureCoord;\nvarying vec4 vColor;\nvarying float vTextureId;\nuniform sampler2D uSamplers[%count%];\n\nvoid main(void){\n    vec4 color;\n    %forloop%\n    gl_FragColor = color * vColor;\n}\n"}setShaderGenerator({vertex:e=lr.defaultVertexSrc,fragment:t=lr.defaultFragmentTemplate}={}){this.shaderGenerator=new nr(e,t)}contextChange(){const t=this.renderer.gl;b.PREFER_ENV===e.WEBGL_LEGACY?this.maxTextures=1:(this.maxTextures=Math.min(t.getParameter(t.MAX_TEXTURE_IMAGE_UNITS),lr.defaultMaxTextures),this.maxTextures=function(e,t){if(0===e)throw new Error("Invalid value of `0` passed to `checkMaxIfStatementsInShader`");const r=t.createShader(t.FRAGMENT_SHADER);for(;;){const i=Je.replace(/%forloop%/gi,$e(e));if(t.shaderSource(r,i),t.compileShader(r),t.getShaderParameter(r,t.COMPILE_STATUS))break;e=e/2|0}return e}(this.maxTextures,t)),this._shader=this.shaderGenerator.generateShader(this.maxTextures);for(let e=0;e<this._packedGeometryPoolSize;e++)this._packedGeometries[e]=new this.geometryClass;this.initFlushBuffers()}initFlushBuffers(){const{_drawCallPool:e,_textureArrayPool:t}=lr,r=this.size/4,i=Math.floor(r/this.maxTextures)+1;for(;e.length<r;)e.push(new ot);for(;t.length<i;)t.push(new sr);for(let e=0;e<this.maxTextures;e++)this._tempBoundTextures[e]=null}onPrerender(){this._flushId=0}render(e){e._texture.valid&&(this._vertexCount+e.vertexData.length/2>this.size&&this.flush(),this._vertexCount+=e.vertexData.length/2,this._indexCount+=e.indices.length,this._bufferedTextures[this._bufferSize]=e._texture.baseTexture,this._bufferedElements[this._bufferSize++]=e)}buildTexturesAndDrawCalls(){const{_bufferedTextures:e,maxTextures:t}=this,r=lr._textureArrayPool,i=this.renderer.batch,a=this._tempBoundTextures,n=this.renderer.textureGC.count;let s=++st._globalBatch,o=0,l=r[0],h=0;i.copyBoundTextures(a,t);for(let u=0;u<this._bufferSize;++u){const d=e[u];e[u]=null,d._batchEnabled!==s&&(l.count>=t&&(i.boundArray(l,a,s,t),this.buildDrawCalls(l,h,u),h=u,l=r[++o],++s),d._batchEnabled=s,d.touched=n,l.elements[l.count++]=d)}l.count>0&&(i.boundArray(l,a,s,t),this.buildDrawCalls(l,h,this._bufferSize),++o,++s);for(let e=0;e<a.length;e++)a[e]=null;st._globalBatch=s}buildDrawCalls(e,t,r){const{_bufferedElements:i,_attributeBuffer:a,_indexBuffer:n,vertexSize:s}=this,o=lr._drawCallPool;let l=this._dcIndex,h=this._aIndex,u=this._iIndex,d=o[l];d.start=this._iIndex,d.texArray=e;for(let c=t;c<r;++c){const r=i[c],m=r._texture.baseTexture,f=Se[m.alphaMode?1:0][r.blendMode];i[c]=null,t<c&&d.blend!==f&&(d.size=u-d.start,t=c,d=o[++l],d.texArray=e,d.start=u),this.packInterleavedGeometry(r,a,n,h,u),h+=r.vertexData.length/2*s,u+=r.indices.length,d.blend=f}t<r&&(d.size=u-d.start,++l),this._dcIndex=l,this._aIndex=h,this._iIndex=u}bindAndClearTexArray(e){const t=this.renderer.texture;for(let r=0;r<e.count;r++)t.bind(e.elements[r],e.ids[r]),e.elements[r]=null;e.count=0}updateGeometry(){const{_packedGeometries:e,_attributeBuffer:t,_indexBuffer:r}=this;lr.canUploadSameBuffer?(e[this._flushId]._buffer.update(t.rawBinaryData),e[this._flushId]._indexBuffer.update(r),this.renderer.geometry.updateBuffers()):(this._packedGeometryPoolSize<=this._flushId&&(this._packedGeometryPoolSize++,e[this._flushId]=new this.geometryClass),e[this._flushId]._buffer.update(t.rawBinaryData),e[this._flushId]._indexBuffer.update(r),this.renderer.geometry.bind(e[this._flushId]),this.renderer.geometry.updateBuffers(),this._flushId++)}drawBatches(){const e=this._dcIndex,{gl:t,state:r}=this.renderer,i=lr._drawCallPool;let a=null;for(let n=0;n<e;n++){const{texArray:e,type:s,size:o,start:l,blend:h}=i[n];a!==e&&(a=e,this.bindAndClearTexArray(e)),this.state.blendMode=h,r.set(this.state),t.drawElements(s,o,t.UNSIGNED_SHORT,2*l)}}flush(){0!==this._vertexCount&&(this._attributeBuffer=this.getAttributeBuffer(this._vertexCount),this._indexBuffer=this.getIndexBuffer(this._indexCount),this._aIndex=0,this._iIndex=0,this._dcIndex=0,this.buildTexturesAndDrawCalls(),this.updateGeometry(),this.drawBatches(),this._bufferSize=0,this._vertexCount=0,this._indexCount=0)}start(){this.renderer.state.set(this.state),this.renderer.texture.ensureSamplerType(this.maxTextures),this.renderer.shader.bind(this._shader),lr.canUploadSameBuffer&&this.renderer.geometry.bind(this._packedGeometries[this._flushId])}stop(){this.flush()}destroy(){for(let e=0;e<this._packedGeometryPoolSize;e++)this._packedGeometries[e]&&this._packedGeometries[e].destroy();this.renderer.off("prerender",this.onPrerender,this),this._aBuffers=null,this._iBuffers=null,this._packedGeometries=null,this._attributeBuffer=null,this._indexBuffer=null,this._shader&&(this._shader.destroy(),this._shader=null),super.destroy()}getAttributeBuffer(e){const t=Ce(Math.ceil(e/8)),r=Re(t),i=8*t;this._aBuffers.length<=r&&(this._iBuffers.length=r+1);let a=this._aBuffers[i];return a||(this._aBuffers[i]=a=new Ze(i*this.vertexSize*4)),a}getIndexBuffer(e){const t=Ce(Math.ceil(e/12)),r=Re(t),i=12*t;this._iBuffers.length<=r&&(this._iBuffers.length=r+1);let a=this._iBuffers[r];return a||(this._iBuffers[r]=a=new Uint16Array(i)),a}packInterleavedGeometry(e,t,r,i,a){const{uint32View:n,float32View:s}=t,o=i/this.vertexSize,l=e.uvs,h=e.indices,u=e.vertexData,d=e._texture.baseTexture._batchLocation,c=Math.min(e.worldAlpha,1),m=Ee.shared.setValue(e._tintRGB).toPremultiplied(c,e._texture.baseTexture.alphaMode>0);for(let e=0;e<u.length;e+=2)s[i++]=u[e],s[i++]=u[e+1],s[i++]=l[e],s[i++]=l[e+1],n[i++]=m,s[i++]=d;for(let e=0;e<h.length;e++)r[a++]=o+h[e]}};let hr=lr;hr.defaultBatchSize=4096,hr.extension={name:"batch",type:Xe.RendererPlugin},hr._drawCallPool=[],hr._textureArrayPool=[],Ye.add(hr);const ur=class extends ar{constructor(e,t,r){super(tr.from(e||ur.defaultVertexSrc,t||ur.defaultFragmentSrc),r),this.padding=0,this.resolution=ur.defaultResolution,this.multisample=ur.defaultMultisample,this.enabled=!0,this.autoFit=!0,this.state=new qe}apply(e,t,r,i,a){e.applyFilter(this,t,r,i)}get blendMode(){return this.state.blendMode}set blendMode(e){this.state.blendMode=e}get resolution(){return this._resolution}set resolution(e){this._resolution=e}static get defaultVertexSrc(){return"attribute vec2 aVertexPosition;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nuniform vec4 inputSize;\nuniform vec4 outputFrame;\n\nvec4 filterVertexPosition( void )\n{\n    vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;\n\n    return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);\n}\n\nvec2 filterTextureCoord( void )\n{\n    return aVertexPosition * (outputFrame.zw * inputSize.zw);\n}\n\nvoid main(void)\n{\n    gl_Position = filterVertexPosition();\n    vTextureCoord = filterTextureCoord();\n}\n"}static get defaultFragmentSrc(){return"varying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\n\nvoid main(void){\n   gl_FragColor = texture2D(uSampler, vTextureCoord);\n}\n"}};let dr=ur;dr.defaultResolution=1,dr.defaultMultisample=v.NONE;class cr{constructor(){this.clearBeforeRender=!0,this._backgroundColor=new Ee(0),this.alpha=1}init(e){this.clearBeforeRender=e.clearBeforeRender;const{backgroundColor:t,background:r,backgroundAlpha:i}=e,a=r??t;void 0!==a&&(this.color=a),this.alpha=i}get color(){return this._backgroundColor.value}set color(e){this._backgroundColor.setValue(e)}get alpha(){return this._backgroundColor.alpha}set alpha(e){this._backgroundColor.setAlpha(e)}get backgroundColor(){return this._backgroundColor}destroy(){}}cr.defaultOptions={backgroundAlpha:1,backgroundColor:0,clearBeforeRender:!0},cr.extension={type:[Xe.RendererSystem,Xe.CanvasRendererSystem],name:"background"},Ye.add(cr);class mr{constructor(e){this.renderer=e,this.emptyRenderer=new or(e),this.currentRenderer=this.emptyRenderer}setObjectRenderer(e){this.currentRenderer!==e&&(this.currentRenderer.stop(),this.currentRenderer=e,this.currentRenderer.start())}flush(){this.setObjectRenderer(this.emptyRenderer)}reset(){this.setObjectRenderer(this.emptyRenderer)}copyBoundTextures(e,t){const{boundTextures:r}=this.renderer.texture;for(let i=t-1;i>=0;--i)e[i]=r[i]||null,e[i]&&(e[i]._batchLocation=i)}boundArray(e,t,r,i){const{elements:a,ids:n,count:s}=e;let o=0;for(let e=0;e<s;e++){const s=a[e],l=s._batchLocation;if(l>=0&&l<i&&t[l]===s)n[e]=l;else for(;o<i;){const i=t[o];if(!i||i._batchEnabled!==r||i._batchLocation!==o){n[e]=o,s._batchLocation=o,t[o]=s;break}o++}}}destroy(){this.renderer=null}}mr.extension={type:Xe.RendererSystem,name:"batch"},Ye.add(mr);let fr=0;class pr{constructor(e){this.renderer=e,this.webGLVersion=1,this.extensions={},this.supports={uint32Indices:!1},this.handleContextLost=this.handleContextLost.bind(this),this.handleContextRestored=this.handleContextRestored.bind(this)}get isLost(){return!this.gl||this.gl.isContextLost()}contextChange(e){this.gl=e,this.renderer.gl=e,this.renderer.CONTEXT_UID=fr++}init(e){if(e.context)this.initFromContext(e.context);else{const t=this.renderer.background.alpha<1,r=e.premultipliedAlpha;this.preserveDrawingBuffer=e.preserveDrawingBuffer,this.useContextAlpha=e.useContextAlpha,this.powerPreference=e.powerPreference,this.initFromOptions({alpha:t,premultipliedAlpha:r,antialias:e.antialias,stencil:!0,preserveDrawingBuffer:e.preserveDrawingBuffer,powerPreference:e.powerPreference})}}initFromContext(e){this.gl=e,this.validateContext(e),this.renderer.gl=e,this.renderer.CONTEXT_UID=fr++,this.renderer.runners.contextChange.emit(e);const t=this.renderer.view;void 0!==t.addEventListener&&(t.addEventListener("webglcontextlost",this.handleContextLost,!1),t.addEventListener("webglcontextrestored",this.handleContextRestored,!1))}initFromOptions(e){const t=this.createContext(this.renderer.view,e);this.initFromContext(t)}createContext(t,r){let i;if(b.PREFER_ENV>=e.WEBGL2&&(i=t.getContext("webgl2",r)),i)this.webGLVersion=2;else if(this.webGLVersion=1,i=t.getContext("webgl",r)||t.getContext("experimental-webgl",r),!i)throw new Error("This browser does not support WebGL. Try using the canvas renderer");return this.gl=i,this.getExtensions(),this.gl}getExtensions(){const{gl:e}=this,t={loseContext:e.getExtension("WEBGL_lose_context"),anisotropicFiltering:e.getExtension("EXT_texture_filter_anisotropic"),floatTextureLinear:e.getExtension("OES_texture_float_linear"),s3tc:e.getExtension("WEBGL_compressed_texture_s3tc"),s3tc_sRGB:e.getExtension("WEBGL_compressed_texture_s3tc_srgb"),etc:e.getExtension("WEBGL_compressed_texture_etc"),etc1:e.getExtension("WEBGL_compressed_texture_etc1"),pvrtc:e.getExtension("WEBGL_compressed_texture_pvrtc")||e.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc"),atc:e.getExtension("WEBGL_compressed_texture_atc"),astc:e.getExtension("WEBGL_compressed_texture_astc")};1===this.webGLVersion?Object.assign(this.extensions,t,{drawBuffers:e.getExtension("WEBGL_draw_buffers"),depthTexture:e.getExtension("WEBGL_depth_texture"),vertexArrayObject:e.getExtension("OES_vertex_array_object")||e.getExtension("MOZ_OES_vertex_array_object")||e.getExtension("WEBKIT_OES_vertex_array_object"),uint32ElementIndex:e.getExtension("OES_element_index_uint"),floatTexture:e.getExtension("OES_texture_float"),floatTextureLinear:e.getExtension("OES_texture_float_linear"),textureHalfFloat:e.getExtension("OES_texture_half_float"),textureHalfFloatLinear:e.getExtension("OES_texture_half_float_linear")}):2===this.webGLVersion&&Object.assign(this.extensions,t,{colorBufferFloat:e.getExtension("EXT_color_buffer_float")})}handleContextLost(e){e.preventDefault(),setTimeout((()=>{this.gl.isContextLost()&&this.extensions.loseContext&&this.extensions.loseContext.restoreContext()}),0)}handleContextRestored(){this.renderer.runners.contextChange.emit(this.gl)}destroy(){const e=this.renderer.view;this.renderer=null,void 0!==e.removeEventListener&&(e.removeEventListener("webglcontextlost",this.handleContextLost),e.removeEventListener("webglcontextrestored",this.handleContextRestored)),this.gl.useProgram(null),this.extensions.loseContext&&this.extensions.loseContext.loseContext()}postrender(){this.renderer.objectRenderer.renderingToScreen&&this.gl.flush()}validateContext(e){const t=e.getContextAttributes(),r="WebGL2RenderingContext"in globalThis&&e instanceof globalThis.WebGL2RenderingContext;r&&(this.webGLVersion=2),t&&!t.stencil&&console.warn("Provided WebGL context does not have a stencil buffer, masks may not render correctly");const i=r||!!e.getExtension("OES_element_index_uint");this.supports.uint32Indices=i,i||console.warn("Provided WebGL context does not support 32 index buffer, complex graphics may not render correctly")}}pr.defaultOptions={context:null,antialias:!1,premultipliedAlpha:!0,preserveDrawingBuffer:!1,powerPreference:"default"},pr.extension={type:Xe.RendererSystem,name:"context"},Ye.add(pr);class gr extends it{upload(e,t,r){const i=e.gl;i.pixelStorei(i.UNPACK_PREMULTIPLY_ALPHA_WEBGL,t.alphaMode===m.UNPACK);const a=t.realWidth,n=t.realHeight;return r.width===a&&r.height===n?i.texSubImage2D(t.target,0,0,0,a,n,t.format,r.type,this.data):(r.width=a,r.height=n,i.texImage2D(t.target,0,r.internalFormat,a,n,0,t.format,r.type,this.data)),!0}}class yr{constructor(e,t){this.width=Math.round(e||100),this.height=Math.round(t||100),this.stencil=!1,this.depth=!1,this.dirtyId=0,this.dirtyFormat=0,this.dirtySize=0,this.depthTexture=null,this.colorTextures=[],this.glFramebuffers={},this.disposeRunner=new tt("disposeFramebuffer"),this.multisample=v.NONE}get colorTexture(){return this.colorTextures[0]}addColorTexture(e=0,t){return this.colorTextures[e]=t||new st(null,{scaleMode:u.NEAREST,resolution:1,mipmap:c.OFF,width:this.width,height:this.height}),this.dirtyId++,this.dirtyFormat++,this}addDepthTexture(e){return this.depthTexture=e||new st(new gr(null,{width:this.width,height:this.height}),{scaleMode:u.NEAREST,resolution:1,width:this.width,height:this.height,mipmap:c.OFF,format:s.DEPTH_COMPONENT,type:l.UNSIGNED_SHORT}),this.dirtyId++,this.dirtyFormat++,this}enableDepth(){return this.depth=!0,this.dirtyId++,this.dirtyFormat++,this}enableStencil(){return this.stencil=!0,this.dirtyId++,this.dirtyFormat++,this}resize(e,t){if(e=Math.round(e),t=Math.round(t),e!==this.width||t!==this.height){this.width=e,this.height=t,this.dirtyId++,this.dirtySize++;for(let r=0;r<this.colorTextures.length;r++){const i=this.colorTextures[r],a=i.resolution;i.setSize(e/a,t/a)}if(this.depthTexture){const r=this.depthTexture.resolution;this.depthTexture.setSize(e/r,t/r)}}}dispose(){this.disposeRunner.emit(this,!1)}destroyDepthTexture(){this.depthTexture&&(this.depthTexture.destroy(),this.depthTexture=null,++this.dirtyId,++this.dirtyFormat)}}class vr extends st{constructor(e={}){"number"==typeof e&&(e={width:arguments[0],height:arguments[1],scaleMode:arguments[2],resolution:arguments[3]}),e.width=e.width||100,e.height=e.height||100,e.multisample??(e.multisample=v.NONE),super(null,e),this.mipmap=c.OFF,this.valid=!0,this._clear=new Ee([0,0,0,0]),this.framebuffer=new yr(this.realWidth,this.realHeight).addColorTexture(0,this),this.framebuffer.multisample=e.multisample,this.maskStack=[],this.filterStack=[{}]}set clearColor(e){this._clear.setValue(e)}get clearColor(){return this._clear.value}get clear(){return this._clear}resize(e,t){this.framebuffer.resize(e*this.resolution,t*this.resolution),this.setRealSize(this.framebuffer.width,this.framebuffer.height)}dispose(){this.framebuffer.dispose(),super.dispose()}destroy(){super.destroy(),this.framebuffer.destroyDepthTexture(),this.framebuffer=null}}class xr extends rt{constructor(e){const t=e;super(t.naturalWidth||t.videoWidth||t.width,t.naturalHeight||t.videoHeight||t.height),this.source=e,this.noSubImage=!1}static crossOrigin(e,t,r){void 0!==r||t.startsWith("data:")?!1!==r&&(e.crossOrigin="string"==typeof r?r:"anonymous"):e.crossOrigin=function(e,t=globalThis.location){if(e.startsWith("data:"))return"";t=t||globalThis.location,Ve||(Ve=document.createElement("a")),Ve.href=e;const r=V.parse(Ve.href),i=!r.port&&""===t.port||r.port===t.port;return r.hostname===t.hostname&&i&&r.protocol===t.protocol?"":"anonymous"}(t)}upload(e,t,r,i){const a=e.gl,n=t.realWidth,s=t.realHeight;if(i=i||this.source,"undefined"!=typeof HTMLImageElement&&i instanceof HTMLImageElement){if(!i.complete||0===i.naturalWidth)return!1}else if("undefined"!=typeof HTMLVideoElement&&i instanceof HTMLVideoElement&&i.readyState<=1&&0===i.buffered.length)return!1;return a.pixelStorei(a.UNPACK_PREMULTIPLY_ALPHA_WEBGL,t.alphaMode===m.UNPACK),this.noSubImage||t.target!==a.TEXTURE_2D||r.width!==n||r.height!==s?(r.width=n,r.height=s,a.texImage2D(t.target,0,r.internalFormat,t.format,r.type,i)):a.texSubImage2D(a.TEXTURE_2D,0,0,0,t.format,r.type,i),!0}update(){if(this.destroyed)return;const e=this.source,t=e.naturalWidth||e.videoWidth||e.width,r=e.naturalHeight||e.videoHeight||e.height;this.resize(t,r),super.update()}dispose(){this.source=null}}class _r extends xr{constructor(e,t){if(t=t||{},"string"==typeof e){const r=new Image;xr.crossOrigin(r,e,t.crossorigin),r.src=e,e=r}super(e),!e.complete&&this._width&&this._height&&(this._width=0,this._height=0),this.url=e.src,this._process=null,this.preserveBitmap=!1,this.createBitmap=(t.createBitmap??b.CREATE_IMAGE_BITMAP)&&!!globalThis.createImageBitmap,this.alphaMode="number"==typeof t.alphaMode?t.alphaMode:null,this.bitmap=null,this._load=null,!1!==t.autoLoad&&this.load()}load(e){return this._load||(void 0!==e&&(this.createBitmap=e),this._load=new Promise(((e,t)=>{const r=this.source;this.url=r.src;const i=()=>{this.destroyed||(r.onload=null,r.onerror=null,this.resize(r.width,r.height),this._load=null,this.createBitmap?e(this.process()):e(this))};r.complete&&r.src?i():(r.onload=i,r.onerror=e=>{t(e),this.onError.emit(e)})}))),this._load}process(){const e=this.source;if(null!==this._process)return this._process;if(null!==this.bitmap||!globalThis.createImageBitmap)return Promise.resolve(this);const t=globalThis.createImageBitmap,r=!e.crossOrigin||"anonymous"===e.crossOrigin;return this._process=fetch(e.src,{mode:r?"cors":"no-cors"}).then((e=>e.blob())).then((r=>t(r,0,0,e.width,e.height,{premultiplyAlpha:null===this.alphaMode||this.alphaMode===m.UNPACK?"premultiply":"none"}))).then((e=>this.destroyed?Promise.reject():(this.bitmap=e,this.update(),this._process=null,Promise.resolve(this)))),this._process}upload(e,t,r){if("number"==typeof this.alphaMode&&(t.alphaMode=this.alphaMode),!this.createBitmap)return super.upload(e,t,r);if(!this.bitmap&&(this.process(),!this.bitmap))return!1;if(super.upload(e,t,r,this.bitmap),!this.preserveBitmap){let e=!0;const i=t._glTextures;for(const a in i){const n=i[a];if(n!==r&&n.dirtyId!==t.dirtyId){e=!1;break}}e&&(this.bitmap.close&&this.bitmap.close(),this.bitmap=null)}return!0}dispose(){this.source.onload=null,this.source.onerror=null,super.dispose(),this.bitmap&&(this.bitmap.close(),this.bitmap=null),this._process=null,this._load=null}static test(e){return"undefined"!=typeof HTMLImageElement&&("string"==typeof e||e instanceof HTMLImageElement)}}class br{constructor(){this.x0=0,this.y0=0,this.x1=1,this.y1=0,this.x2=1,this.y2=1,this.x3=0,this.y3=1,this.uvsFloat32=new Float32Array(8)}set(e,t,r){const i=t.width,a=t.height;if(r){const t=e.width/2/i,n=e.height/2/a,s=e.x/i+t,o=e.y/a+n;r=Ft.add(r,Ft.NW),this.x0=s+t*Ft.uX(r),this.y0=o+n*Ft.uY(r),r=Ft.add(r,2),this.x1=s+t*Ft.uX(r),this.y1=o+n*Ft.uY(r),r=Ft.add(r,2),this.x2=s+t*Ft.uX(r),this.y2=o+n*Ft.uY(r),r=Ft.add(r,2),this.x3=s+t*Ft.uX(r),this.y3=o+n*Ft.uY(r)}else this.x0=e.x/i,this.y0=e.y/a,this.x1=(e.x+e.width)/i,this.y1=e.y/a,this.x2=(e.x+e.width)/i,this.y2=(e.y+e.height)/a,this.x3=e.x/i,this.y3=(e.y+e.height)/a;this.uvsFloat32[0]=this.x0,this.uvsFloat32[1]=this.y0,this.uvsFloat32[2]=this.x1,this.uvsFloat32[3]=this.y1,this.uvsFloat32[4]=this.x2,this.uvsFloat32[5]=this.y2,this.uvsFloat32[6]=this.x3,this.uvsFloat32[7]=this.y3}toString(){return`[@pixi/core:TextureUvs x0=${this.x0} y0=${this.y0} x1=${this.x1} y1=${this.y1} x2=${this.x2} y2=${this.y2} x3=${this.x3} y3=${this.y3}]`}}const Tr=new br;function Ar(e){e.destroy=function(){},e.on=function(){},e.once=function(){},e.emit=function(){}}class Er extends G{constructor(e,t,r,i,a,n,s){if(super(),this.noFrame=!1,t||(this.noFrame=!0,t=new At(0,0,1,1)),e instanceof Er&&(e=e.baseTexture),this.baseTexture=e,this._frame=t,this.trim=i,this.valid=!1,this._uvs=Tr,this.uvMatrix=null,this.orig=r||t,this._rotate=Number(a||0),!0===a)this._rotate=2;else if(this._rotate%2!=0)throw new Error("attempt to use diamond-shaped UVs. If you are sure, set rotation manually");this.defaultAnchor=n?new bt(n.x,n.y):new bt(0,0),this.defaultBorders=s,this._updateID=0,this.textureCacheIds=[],e.valid?this.noFrame?e.valid&&this.onBaseTextureUpdated(e):this.frame=t:e.once("loaded",this.onBaseTextureUpdated,this),this.noFrame&&e.on("update",this.onBaseTextureUpdated,this)}update(){this.baseTexture.resource&&this.baseTexture.resource.update()}onBaseTextureUpdated(e){if(this.noFrame){if(!this.baseTexture.valid)return;this._frame.width=e.width,this._frame.height=e.height,this.valid=!0,this.updateUvs()}else this.frame=this._frame;this.emit("update",this)}destroy(e){if(this.baseTexture){if(e){const{resource:e}=this.baseTexture;e?.url&&Oe[e.url]&&Er.removeFromCache(e.url),this.baseTexture.destroy()}this.baseTexture.off("loaded",this.onBaseTextureUpdated,this),this.baseTexture.off("update",this.onBaseTextureUpdated,this),this.baseTexture=null}this._frame=null,this._uvs=null,this.trim=null,this.orig=null,this.valid=!1,Er.removeFromCache(this),this.textureCacheIds=null}clone(){const e=this._frame.clone(),t=this._frame===this.orig?e:this.orig.clone(),r=new Er(this.baseTexture,!this.noFrame&&e,t,this.trim?.clone(),this.rotate,this.defaultAnchor,this.defaultBorders);return this.noFrame&&(r._frame=e),r}updateUvs(){this._uvs===Tr&&(this._uvs=new br),this._uvs.set(this._frame,this.baseTexture,this.rotate),this._updateID++}static from(e,t={},r=b.STRICT_TEXTURE_CACHE){const i="string"==typeof e;let a=null;if(i)a=e;else if(e instanceof st){if(!e.cacheId){const r=t?.pixiIdPrefix||"pixiid";e.cacheId=`${r}-${Be()}`,st.addToCache(e,e.cacheId)}a=e.cacheId}else{if(!e._pixiId){const r=t?.pixiIdPrefix||"pixiid";e._pixiId=`${r}_${Be()}`}a=e._pixiId}let n=Oe[a];if(i&&r&&!n)throw new Error(`The cacheId "${a}" does not exist in TextureCache.`);return n||e instanceof st?!n&&e instanceof st&&(n=new Er(e),Er.addToCache(n,a)):(t.resolution||(t.resolution=je(e)),n=new Er(new st(e,t)),n.baseTexture.cacheId=a,st.addToCache(n.baseTexture,a),Er.addToCache(n,a)),n}static fromURL(e,t){const r=Object.assign({autoLoad:!1},t?.resourceOptions),i=Er.from(e,Object.assign({resourceOptions:r},t),!1),a=i.baseTexture.resource;return i.baseTexture.valid?Promise.resolve(i):a.load().then((()=>Promise.resolve(i)))}static fromBuffer(e,t,r,i){return new Er(st.fromBuffer(e,t,r,i))}static fromLoader(e,t,r,i){const a=new st(e,Object.assign({scaleMode:st.defaultOptions.scaleMode,resolution:je(t)},i)),{resource:n}=a;n instanceof _r&&(n.url=t);const s=new Er(a);return r||(r=t),st.addToCache(s.baseTexture,r),Er.addToCache(s,r),r!==t&&(st.addToCache(s.baseTexture,t),Er.addToCache(s,t)),s.baseTexture.valid?Promise.resolve(s):new Promise((e=>{s.baseTexture.once("loaded",(()=>e(s)))}))}static addToCache(e,t){t&&(e.textureCacheIds.includes(t)||e.textureCacheIds.push(t),Oe[t]&&Oe[t]!==e&&console.warn(`Texture added to the cache with an id [${t}] that already had an entry`),Oe[t]=e)}static removeFromCache(e){if("string"==typeof e){const t=Oe[e];if(t){const r=t.textureCacheIds.indexOf(e);return r>-1&&t.textureCacheIds.splice(r,1),delete Oe[e],t}}else if(e?.textureCacheIds){for(let t=0;t<e.textureCacheIds.length;++t)Oe[e.textureCacheIds[t]]===e&&delete Oe[e.textureCacheIds[t]];return e.textureCacheIds.length=0,e}return null}get resolution(){return this.baseTexture.resolution}get frame(){return this._frame}set frame(e){this._frame=e,this.noFrame=!1;const{x:t,y:r,width:i,height:a}=e,n=t+i>this.baseTexture.width,s=r+a>this.baseTexture.height;if(n||s){const e=n&&s?"and":"or",o=`X: ${t} + ${i} = ${t+i} > ${this.baseTexture.width}`,l=`Y: ${r} + ${a} = ${r+a} > ${this.baseTexture.height}`;throw new Error(`Texture Error: frame does not fit inside the base Texture dimensions: ${o} ${e} ${l}`)}this.valid=i&&a&&this.baseTexture.valid,this.trim||this.rotate||(this.orig=e),this.valid&&this.updateUvs()}get rotate(){return this._rotate}set rotate(e){this._rotate=e,this.valid&&this.updateUvs()}get width(){return this.orig.width}get height(){return this.orig.height}castToBaseTexture(){return this.baseTexture}static get EMPTY(){return Er._EMPTY||(Er._EMPTY=new Er(new st),Ar(Er._EMPTY),Ar(Er._EMPTY.baseTexture)),Er._EMPTY}static get WHITE(){if(!Er._WHITE){const e=b.ADAPTER.createCanvas(16,16),t=e.getContext("2d");e.width=16,e.height=16,t.fillStyle="white",t.fillRect(0,0,16,16),Er._WHITE=new Er(st.from(e)),Ar(Er._WHITE),Ar(Er._WHITE.baseTexture)}return Er._WHITE}}class Sr extends Er{constructor(e,t){super(e,t),this.valid=!0,this.filterFrame=null,this.filterPoolKey=null,this.updateUvs()}get framebuffer(){return this.baseTexture.framebuffer}get multisample(){return this.framebuffer.multisample}set multisample(e){this.framebuffer.multisample=e}resize(e,t,r=!0){const i=this.baseTexture.resolution,a=Math.round(e*i)/i,n=Math.round(t*i)/i;this.valid=a>0&&n>0,this._frame.width=this.orig.width=a,this._frame.height=this.orig.height=n,r&&this.baseTexture.resize(a,n),this.updateUvs()}setResolution(e){const{baseTexture:t}=this;t.resolution!==e&&(t.setResolution(e),this.resize(t.width,t.height,!1))}static create(e){return new Sr(new vr(e))}}class wr{constructor(e){this.texturePool={},this.textureOptions=e||{},this.enableFullScreen=!1,this._pixelsWidth=0,this._pixelsHeight=0}createTexture(e,t,r=v.NONE){const i=new vr(Object.assign({width:e,height:t,resolution:1,multisample:r},this.textureOptions));return new Sr(i)}getOptimalTexture(e,t,r=1,i=v.NONE){let a;e=Math.ceil(e*r-1e-6),t=Math.ceil(t*r-1e-6),this.enableFullScreen&&e===this._pixelsWidth&&t===this._pixelsHeight?a=i>1?-i:-1:(a=((65535&(e=Ce(e)))<<16|65535&(t=Ce(t)))>>>0,i>1&&(a+=4294967296*i)),this.texturePool[a]||(this.texturePool[a]=[]);let n=this.texturePool[a].pop();return n||(n=this.createTexture(e,t,i)),n.filterPoolKey=a,n.setResolution(r),n}getFilterTexture(e,t,r){const i=this.getOptimalTexture(e.width,e.height,t||e.resolution,r||v.NONE);return i.filterFrame=e.filterFrame,i}returnTexture(e){const t=e.filterPoolKey;e.filterFrame=null,this.texturePool[t].push(e)}returnFilterTexture(e){this.returnTexture(e)}clear(e){if(e=!1!==e)for(const e in this.texturePool){const t=this.texturePool[e];if(t)for(let e=0;e<t.length;e++)t[e].destroy(!0)}this.texturePool={}}setScreenSize(e){if(e.width!==this._pixelsWidth||e.height!==this._pixelsHeight){this.enableFullScreen=e.width>0&&e.height>0;for(const e in this.texturePool){if(!(Number(e)<0))continue;const t=this.texturePool[e];if(t)for(let e=0;e<t.length;e++)t[e].destroy(!0);this.texturePool[e]=[]}this._pixelsWidth=e.width,this._pixelsHeight=e.height}}}wr.SCREEN_KEY=-1;class kr extends pt{constructor(){super(),this.addAttribute("aVertexPosition",new Float32Array([0,0,1,0,1,1,0,1])).addIndex([0,1,3,2])}}class Cr extends pt{constructor(){super(),this.vertices=new Float32Array([-1,-1,1,-1,1,1,-1,1]),this.uvs=new Float32Array([0,0,1,0,1,1,0,1]),this.vertexBuffer=new ht(this.vertices),this.uvBuffer=new ht(this.uvs),this.addAttribute("aVertexPosition",this.vertexBuffer).addAttribute("aTextureCoord",this.uvBuffer).addIndex([0,1,2,0,2,3])}map(e,t){let r=0,i=0;return this.uvs[0]=r,this.uvs[1]=i,this.uvs[2]=r+t.width/e.width,this.uvs[3]=i,this.uvs[4]=r+t.width/e.width,this.uvs[5]=i+t.height/e.height,this.uvs[6]=r,this.uvs[7]=i+t.height/e.height,r=t.x,i=t.y,this.vertices[0]=r,this.vertices[1]=i,this.vertices[2]=r+t.width,this.vertices[3]=i,this.vertices[4]=r+t.width,this.vertices[5]=i+t.height,this.vertices[6]=r,this.vertices[7]=i+t.height,this.invalidate(),this}invalidate(){return this.vertexBuffer._updateID++,this.uvBuffer._updateID++,this}}class Mr{constructor(){this.renderTexture=null,this.target=null,this.legacy=!1,this.resolution=1,this.multisample=v.NONE,this.sourceFrame=new At,this.destinationFrame=new At,this.bindingSourceFrame=new At,this.bindingDestinationFrame=new At,this.filters=[],this.transform=null}clear(){this.target=null,this.filters=null,this.renderTexture=null}}const Rr=[new bt,new bt,new bt,new bt],Ir=new Ct;class Pr{constructor(e){this.renderer=e,this.defaultFilterStack=[{}],this.texturePool=new wr,this.statePool=[],this.quad=new kr,this.quadUv=new Cr,this.tempRect=new At,this.activeState={},this.globalUniforms=new ir({outputFrame:new At,inputSize:new Float32Array(4),inputPixel:new Float32Array(4),inputClamp:new Float32Array(4),resolution:1,filterArea:new Float32Array(4),filterClamp:new Float32Array(4)},!0),this.forceClear=!1,this.useMaxPadding=!1}init(){this.texturePool.setScreenSize(this.renderer.view)}push(e,t){const r=this.renderer,i=this.defaultFilterStack,a=this.statePool.pop()||new Mr,n=this.renderer.renderTexture;let s=t[0].resolution,o=t[0].multisample,l=t[0].padding,h=t[0].autoFit,u=t[0].legacy??!0;for(let e=1;e<t.length;e++){const r=t[e];s=Math.min(s,r.resolution),o=Math.min(o,r.multisample),l=this.useMaxPadding?Math.max(l,r.padding):l+r.padding,h=h&&r.autoFit,u=u||(r.legacy??!0)}1===i.length&&(this.defaultFilterStack[0].renderTexture=n.current),i.push(a),a.resolution=s,a.multisample=o,a.legacy=u,a.target=e,a.sourceFrame.copyFrom(e.filterArea||e.getBounds(!0)),a.sourceFrame.pad(l);const d=this.tempRect.copyFrom(n.sourceFrame);r.projection.transform&&this.transformAABB(Ir.copyFrom(r.projection.transform).invert(),d),h?(a.sourceFrame.fit(d),(a.sourceFrame.width<=0||a.sourceFrame.height<=0)&&(a.sourceFrame.width=0,a.sourceFrame.height=0)):a.sourceFrame.intersects(d)||(a.sourceFrame.width=0,a.sourceFrame.height=0),this.roundFrame(a.sourceFrame,n.current?n.current.resolution:r.resolution,n.sourceFrame,n.destinationFrame,r.projection.transform),a.renderTexture=this.getOptimalFilterTexture(a.sourceFrame.width,a.sourceFrame.height,s,o),a.filters=t,a.destinationFrame.width=a.renderTexture.width,a.destinationFrame.height=a.renderTexture.height;const c=this.tempRect;c.x=0,c.y=0,c.width=a.sourceFrame.width,c.height=a.sourceFrame.height,a.renderTexture.filterFrame=a.sourceFrame,a.bindingSourceFrame.copyFrom(n.sourceFrame),a.bindingDestinationFrame.copyFrom(n.destinationFrame),a.transform=r.projection.transform,r.projection.transform=null,n.bind(a.renderTexture,a.sourceFrame,c),r.framebuffer.clear(0,0,0,0)}pop(){const e=this.defaultFilterStack,t=e.pop(),r=t.filters;this.activeState=t;const i=this.globalUniforms.uniforms;i.outputFrame=t.sourceFrame,i.resolution=t.resolution;const a=i.inputSize,n=i.inputPixel,s=i.inputClamp;if(a[0]=t.destinationFrame.width,a[1]=t.destinationFrame.height,a[2]=1/a[0],a[3]=1/a[1],n[0]=Math.round(a[0]*t.resolution),n[1]=Math.round(a[1]*t.resolution),n[2]=1/n[0],n[3]=1/n[1],s[0]=.5*n[2],s[1]=.5*n[3],s[2]=t.sourceFrame.width*a[2]-.5*n[2],s[3]=t.sourceFrame.height*a[3]-.5*n[3],t.legacy){const e=i.filterArea;e[0]=t.destinationFrame.width,e[1]=t.destinationFrame.height,e[2]=t.sourceFrame.x,e[3]=t.sourceFrame.y,i.filterClamp=i.inputClamp}this.globalUniforms.update();const o=e[e.length-1];if(this.renderer.framebuffer.blit(),1===r.length)r[0].apply(this,t.renderTexture,o.renderTexture,f.BLEND,t),this.returnFilterTexture(t.renderTexture);else{let e=t.renderTexture,i=this.getOptimalFilterTexture(e.width,e.height,t.resolution);i.filterFrame=e.filterFrame;let a=0;for(a=0;a<r.length-1;++a){1===a&&t.multisample>1&&(i=this.getOptimalFilterTexture(e.width,e.height,t.resolution),i.filterFrame=e.filterFrame),r[a].apply(this,e,i,f.CLEAR,t);const n=e;e=i,i=n}r[a].apply(this,e,o.renderTexture,f.BLEND,t),a>1&&t.multisample>1&&this.returnFilterTexture(t.renderTexture),this.returnFilterTexture(e),this.returnFilterTexture(i)}t.clear(),this.statePool.push(t)}bindAndClear(e,t=f.CLEAR){const{renderTexture:r,state:i}=this.renderer;if(e===this.defaultFilterStack[this.defaultFilterStack.length-1].renderTexture?this.renderer.projection.transform=this.activeState.transform:this.renderer.projection.transform=null,e?.filterFrame){const t=this.tempRect;t.x=0,t.y=0,t.width=e.filterFrame.width,t.height=e.filterFrame.height,r.bind(e,e.filterFrame,t)}else e!==this.defaultFilterStack[this.defaultFilterStack.length-1].renderTexture?r.bind(e):this.renderer.renderTexture.bind(e,this.activeState.bindingSourceFrame,this.activeState.bindingDestinationFrame);const a=1&i.stateId||this.forceClear;(t===f.CLEAR||t===f.BLIT&&a)&&this.renderer.framebuffer.clear(0,0,0,0)}applyFilter(e,t,r,i){const a=this.renderer;a.state.set(e.state),this.bindAndClear(r,i),e.uniforms.uSampler=t,e.uniforms.filterGlobals=this.globalUniforms,a.shader.bind(e),e.legacy=!!e.program.attributeData.aTextureCoord,e.legacy?(this.quadUv.map(t._frame,t.filterFrame),a.geometry.bind(this.quadUv),a.geometry.draw(n.TRIANGLES)):(a.geometry.bind(this.quad),a.geometry.draw(n.TRIANGLE_STRIP))}calculateSpriteMatrix(e,t){const{sourceFrame:r,destinationFrame:i}=this.activeState,{orig:a}=t._texture,n=e.set(i.width,0,0,i.height,r.x,r.y),s=t.worldTransform.copyTo(Ct.TEMP_MATRIX);return s.invert(),n.prepend(s),n.scale(1/a.width,1/a.height),n.translate(t.anchor.x,t.anchor.y),n}destroy(){this.renderer=null,this.texturePool.clear(!1)}getOptimalFilterTexture(e,t,r=1,i=v.NONE){return this.texturePool.getOptimalTexture(e,t,r,i)}getFilterTexture(e,t,r){if("number"==typeof e){const r=e;e=t,t=r}e=e||this.activeState.renderTexture;const i=this.texturePool.getOptimalTexture(e.width,e.height,t||e.resolution,r||v.NONE);return i.filterFrame=e.filterFrame,i}returnFilterTexture(e){this.texturePool.returnTexture(e)}emptyPool(){this.texturePool.clear(!0)}resize(){this.texturePool.setScreenSize(this.renderer.view)}transformAABB(e,t){const r=Rr[0],i=Rr[1],a=Rr[2],n=Rr[3];r.set(t.left,t.top),i.set(t.left,t.bottom),a.set(t.right,t.top),n.set(t.right,t.bottom),e.apply(r,r),e.apply(i,i),e.apply(a,a),e.apply(n,n);const s=Math.min(r.x,i.x,a.x,n.x),o=Math.min(r.y,i.y,a.y,n.y),l=Math.max(r.x,i.x,a.x,n.x),h=Math.max(r.y,i.y,a.y,n.y);t.x=s,t.y=o,t.width=l-s,t.height=h-o}roundFrame(e,t,r,i,a){if(!(e.width<=0||e.height<=0||r.width<=0||r.height<=0)){if(a){const{a:e,b:t,c:r,d:i}=a;if((Math.abs(t)>1e-4||Math.abs(r)>1e-4)&&(Math.abs(e)>1e-4||Math.abs(i)>1e-4))return}(a=a?Ir.copyFrom(a):Ir.identity()).translate(-r.x,-r.y).scale(i.width/r.width,i.height/r.height).translate(i.x,i.y),this.transformAABB(a,e),e.ceil(t),this.transformAABB(a.invert(),e)}}}Pr.extension={type:Xe.RendererSystem,name:"filter"},Ye.add(Pr);class Dr{constructor(e){this.framebuffer=e,this.stencil=null,this.dirtyId=-1,this.dirtyFormat=-1,this.dirtySize=-1,this.multisample=v.NONE,this.msaaBuffer=null,this.blitFramebuffer=null,this.mipLevel=0}}const Br=new At;class Nr{constructor(e){this.renderer=e,this.managedFramebuffers=[],this.unknownFramebuffer=new yr(10,10),this.msaaSamples=null}contextChange(){this.disposeAll(!0);const t=this.gl=this.renderer.gl;if(this.CONTEXT_UID=this.renderer.CONTEXT_UID,this.current=this.unknownFramebuffer,this.viewport=new At,this.hasMRT=!0,this.writeDepthTexture=!0,1===this.renderer.context.webGLVersion){let r=this.renderer.context.extensions.drawBuffers,i=this.renderer.context.extensions.depthTexture;b.PREFER_ENV===e.WEBGL_LEGACY&&(r=null,i=null),r?t.drawBuffers=e=>r.drawBuffersWEBGL(e):(this.hasMRT=!1,t.drawBuffers=()=>{}),i||(this.writeDepthTexture=!1)}else this.msaaSamples=t.getInternalformatParameter(t.RENDERBUFFER,t.RGBA8,t.SAMPLES)}bind(e,t,r=0){const{gl:i}=this;if(e){const a=e.glFramebuffers[this.CONTEXT_UID]||this.initFramebuffer(e);this.current!==e&&(this.current=e,i.bindFramebuffer(i.FRAMEBUFFER,a.framebuffer)),a.mipLevel!==r&&(e.dirtyId++,e.dirtyFormat++,a.mipLevel=r),a.dirtyId!==e.dirtyId&&(a.dirtyId=e.dirtyId,a.dirtyFormat!==e.dirtyFormat?(a.dirtyFormat=e.dirtyFormat,a.dirtySize=e.dirtySize,this.updateFramebuffer(e,r)):a.dirtySize!==e.dirtySize&&(a.dirtySize=e.dirtySize,this.resizeFramebuffer(e)));for(let t=0;t<e.colorTextures.length;t++){const r=e.colorTextures[t];this.renderer.texture.unbind(r.parentTextureArray||r)}if(e.depthTexture&&this.renderer.texture.unbind(e.depthTexture),t){const e=t.width>>r,i=t.height>>r,a=e/t.width;this.setViewport(t.x*a,t.y*a,e,i)}else{const t=e.width>>r,i=e.height>>r;this.setViewport(0,0,t,i)}}else this.current&&(this.current=null,i.bindFramebuffer(i.FRAMEBUFFER,null)),t?this.setViewport(t.x,t.y,t.width,t.height):this.setViewport(0,0,this.renderer.width,this.renderer.height)}setViewport(e,t,r,i){const a=this.viewport;e=Math.round(e),t=Math.round(t),r=Math.round(r),i=Math.round(i),a.width===r&&a.height===i&&a.x===e&&a.y===t||(a.x=e,a.y=t,a.width=r,a.height=i,this.gl.viewport(e,t,r,i))}get size(){return this.current?{x:0,y:0,width:this.current.width,height:this.current.height}:{x:0,y:0,width:this.renderer.width,height:this.renderer.height}}clear(e,t,r,a,n=i.COLOR|i.DEPTH){const{gl:s}=this;s.clearColor(e,t,r,a),s.clear(n)}initFramebuffer(e){const{gl:t}=this,r=new Dr(t.createFramebuffer());return r.multisample=this.detectSamples(e.multisample),e.glFramebuffers[this.CONTEXT_UID]=r,this.managedFramebuffers.push(e),e.disposeRunner.add(this),r}resizeFramebuffer(e){const{gl:t}=this,r=e.glFramebuffers[this.CONTEXT_UID];r.stencil&&(t.bindRenderbuffer(t.RENDERBUFFER,r.stencil),r.msaaBuffer?t.renderbufferStorageMultisample(t.RENDERBUFFER,r.multisample,t.DEPTH24_STENCIL8,e.width,e.height):t.renderbufferStorage(t.RENDERBUFFER,t.DEPTH_STENCIL,e.width,e.height));const i=e.colorTextures;let a=i.length;t.drawBuffers||(a=Math.min(a,1));for(let n=0;n<a;n++){const a=i[n],s=a.parentTextureArray||a;this.renderer.texture.bind(s,0),0===n&&r.msaaBuffer&&(t.bindRenderbuffer(t.RENDERBUFFER,r.msaaBuffer),t.renderbufferStorageMultisample(t.RENDERBUFFER,r.multisample,s._glTextures[this.CONTEXT_UID].internalFormat,e.width,e.height))}e.depthTexture&&this.writeDepthTexture&&this.renderer.texture.bind(e.depthTexture,0)}updateFramebuffer(e,t){const{gl:r}=this,i=e.glFramebuffers[this.CONTEXT_UID],a=e.colorTextures;let n=a.length;r.drawBuffers||(n=Math.min(n,1)),i.multisample>1&&this.canMultisampleFramebuffer(e)?i.msaaBuffer=i.msaaBuffer||r.createRenderbuffer():i.msaaBuffer&&(r.deleteRenderbuffer(i.msaaBuffer),i.msaaBuffer=null,i.blitFramebuffer&&(i.blitFramebuffer.dispose(),i.blitFramebuffer=null));const s=[];for(let o=0;o<n;o++){const n=a[o],l=n.parentTextureArray||n;this.renderer.texture.bind(l,0),0===o&&i.msaaBuffer?(r.bindRenderbuffer(r.RENDERBUFFER,i.msaaBuffer),r.renderbufferStorageMultisample(r.RENDERBUFFER,i.multisample,l._glTextures[this.CONTEXT_UID].internalFormat,e.width,e.height),r.framebufferRenderbuffer(r.FRAMEBUFFER,r.COLOR_ATTACHMENT0,r.RENDERBUFFER,i.msaaBuffer)):(r.framebufferTexture2D(r.FRAMEBUFFER,r.COLOR_ATTACHMENT0+o,n.target,l._glTextures[this.CONTEXT_UID].texture,t),s.push(r.COLOR_ATTACHMENT0+o))}if(s.length>1&&r.drawBuffers(s),e.depthTexture&&this.writeDepthTexture){const i=e.depthTexture;this.renderer.texture.bind(i,0),r.framebufferTexture2D(r.FRAMEBUFFER,r.DEPTH_ATTACHMENT,r.TEXTURE_2D,i._glTextures[this.CONTEXT_UID].texture,t)}!e.stencil&&!e.depth||e.depthTexture&&this.writeDepthTexture?i.stencil&&(r.deleteRenderbuffer(i.stencil),i.stencil=null):(i.stencil=i.stencil||r.createRenderbuffer(),r.bindRenderbuffer(r.RENDERBUFFER,i.stencil),i.msaaBuffer?r.renderbufferStorageMultisample(r.RENDERBUFFER,i.multisample,r.DEPTH24_STENCIL8,e.width,e.height):r.renderbufferStorage(r.RENDERBUFFER,r.DEPTH_STENCIL,e.width,e.height),r.framebufferRenderbuffer(r.FRAMEBUFFER,r.DEPTH_STENCIL_ATTACHMENT,r.RENDERBUFFER,i.stencil))}canMultisampleFramebuffer(e){return 1!==this.renderer.context.webGLVersion&&e.colorTextures.length<=1&&!e.depthTexture}detectSamples(e){const{msaaSamples:t}=this;let r=v.NONE;if(e<=1||null===t)return r;for(let i=0;i<t.length;i++)if(t[i]<=e){r=t[i];break}return 1===r&&(r=v.NONE),r}blit(e,t,r){const{current:i,renderer:a,gl:n,CONTEXT_UID:s}=this;if(2!==a.context.webGLVersion)return;if(!i)return;const o=i.glFramebuffers[s];if(!o)return;if(!e){if(!o.msaaBuffer)return;const t=i.colorTextures[0];if(!t)return;o.blitFramebuffer||(o.blitFramebuffer=new yr(i.width,i.height),o.blitFramebuffer.addColorTexture(0,t)),(e=o.blitFramebuffer).colorTextures[0]!==t&&(e.colorTextures[0]=t,e.dirtyId++,e.dirtyFormat++),e.width===i.width&&e.height===i.height||(e.width=i.width,e.height=i.height,e.dirtyId++,e.dirtySize++)}t||((t=Br).width=i.width,t.height=i.height),r||(r=t);const l=t.width===r.width&&t.height===r.height;this.bind(e),n.bindFramebuffer(n.READ_FRAMEBUFFER,o.framebuffer),n.blitFramebuffer(t.left,t.top,t.right,t.bottom,r.left,r.top,r.right,r.bottom,n.COLOR_BUFFER_BIT,l?n.NEAREST:n.LINEAR),n.bindFramebuffer(n.READ_FRAMEBUFFER,e.glFramebuffers[this.CONTEXT_UID].framebuffer)}disposeFramebuffer(e,t){const r=e.glFramebuffers[this.CONTEXT_UID],i=this.gl;if(!r)return;delete e.glFramebuffers[this.CONTEXT_UID];const a=this.managedFramebuffers.indexOf(e);a>=0&&this.managedFramebuffers.splice(a,1),e.disposeRunner.remove(this),t||(i.deleteFramebuffer(r.framebuffer),r.msaaBuffer&&i.deleteRenderbuffer(r.msaaBuffer),r.stencil&&i.deleteRenderbuffer(r.stencil)),r.blitFramebuffer&&this.disposeFramebuffer(r.blitFramebuffer,t)}disposeAll(e){const t=this.managedFramebuffers;this.managedFramebuffers=[];for(let r=0;r<t.length;r++)this.disposeFramebuffer(t[r],e)}forceStencil(){const e=this.current;if(!e)return;const t=e.glFramebuffers[this.CONTEXT_UID];if(!t||t.stencil)return;e.stencil=!0;const r=e.width,i=e.height,a=this.gl,n=a.createRenderbuffer();a.bindRenderbuffer(a.RENDERBUFFER,n),t.msaaBuffer?a.renderbufferStorageMultisample(a.RENDERBUFFER,t.multisample,a.DEPTH24_STENCIL8,r,i):a.renderbufferStorage(a.RENDERBUFFER,a.DEPTH_STENCIL,r,i),t.stencil=n,a.framebufferRenderbuffer(a.FRAMEBUFFER,a.DEPTH_STENCIL_ATTACHMENT,a.RENDERBUFFER,n)}reset(){this.current=this.unknownFramebuffer,this.viewport=new At}destroy(){this.renderer=null}}Nr.extension={type:Xe.RendererSystem,name:"framebuffer"},Ye.add(Nr);const Fr={5126:4,5123:2,5121:1};class Lr{constructor(e){this.renderer=e,this._activeGeometry=null,this._activeVao=null,this.hasVao=!0,this.hasInstance=!0,this.canUseUInt32ElementIndex=!1,this.managedGeometries={}}contextChange(){this.disposeAll(!0);const t=this.gl=this.renderer.gl,r=this.renderer.context;if(this.CONTEXT_UID=this.renderer.CONTEXT_UID,2!==r.webGLVersion){let r=this.renderer.context.extensions.vertexArrayObject;b.PREFER_ENV===e.WEBGL_LEGACY&&(r=null),r?(t.createVertexArray=()=>r.createVertexArrayOES(),t.bindVertexArray=e=>r.bindVertexArrayOES(e),t.deleteVertexArray=e=>r.deleteVertexArrayOES(e)):(this.hasVao=!1,t.createVertexArray=()=>null,t.bindVertexArray=()=>null,t.deleteVertexArray=()=>null)}if(2!==r.webGLVersion){const e=t.getExtension("ANGLE_instanced_arrays");e?(t.vertexAttribDivisor=(t,r)=>e.vertexAttribDivisorANGLE(t,r),t.drawElementsInstanced=(t,r,i,a,n)=>e.drawElementsInstancedANGLE(t,r,i,a,n),t.drawArraysInstanced=(t,r,i,a)=>e.drawArraysInstancedANGLE(t,r,i,a)):this.hasInstance=!1}this.canUseUInt32ElementIndex=2===r.webGLVersion||!!r.extensions.uint32ElementIndex}bind(e,t){t=t||this.renderer.shader.shader;const{gl:r}=this;let i=e.glVertexArrayObjects[this.CONTEXT_UID],a=!1;i||(this.managedGeometries[e.id]=e,e.disposeRunner.add(this),e.glVertexArrayObjects[this.CONTEXT_UID]=i={},a=!0);const n=i[t.program.id]||this.initGeometryVao(e,t,a);this._activeGeometry=e,this._activeVao!==n&&(this._activeVao=n,this.hasVao?r.bindVertexArray(n):this.activateVao(e,t.program)),this.updateBuffers()}reset(){this.unbind()}updateBuffers(){const e=this._activeGeometry,t=this.renderer.buffer;for(let r=0;r<e.buffers.length;r++){const i=e.buffers[r];t.update(i)}}checkCompatibility(e,t){const r=e.attributes,i=t.attributeData;for(const e in i)if(!r[e])throw new Error(`shader and geometry incompatible, geometry missing the "${e}" attribute`)}getSignature(e,t){const r=e.attributes,i=t.attributeData,a=["g",e.id];for(const e in r)i[e]&&a.push(e,i[e].location);return a.join("-")}initGeometryVao(e,t,r=!0){const i=this.gl,a=this.CONTEXT_UID,n=this.renderer.buffer,s=t.program;s.glPrograms[a]||this.renderer.shader.generateProgram(t),this.checkCompatibility(e,s);const o=this.getSignature(e,s),l=e.glVertexArrayObjects[this.CONTEXT_UID];let h=l[o];if(h)return l[s.id]=h,h;const u=e.buffers,d=e.attributes,c={},m={};for(const e in u)c[e]=0,m[e]=0;for(const e in d)!d[e].size&&s.attributeData[e]?d[e].size=s.attributeData[e].size:d[e].size||console.warn(`PIXI Geometry attribute '${e}' size cannot be determined (likely the bound shader does not have the attribute)`),c[d[e].buffer]+=d[e].size*Fr[d[e].type];for(const e in d){const t=d[e],r=t.size;void 0===t.stride&&(c[t.buffer]===r*Fr[t.type]?t.stride=0:t.stride=c[t.buffer]),void 0===t.start&&(t.start=m[t.buffer],m[t.buffer]+=r*Fr[t.type])}h=i.createVertexArray(),i.bindVertexArray(h);for(let e=0;e<u.length;e++){const t=u[e];n.bind(t),r&&t._glBuffers[a].refCount++}return this.activateVao(e,s),l[s.id]=h,l[o]=h,i.bindVertexArray(null),n.unbind(x.ARRAY_BUFFER),h}disposeGeometry(e,t){if(!this.managedGeometries[e.id])return;delete this.managedGeometries[e.id];const r=e.glVertexArrayObjects[this.CONTEXT_UID],i=this.gl,a=e.buffers,n=this.renderer?.buffer;if(e.disposeRunner.remove(this),r){if(n)for(let e=0;e<a.length;e++){const r=a[e]._glBuffers[this.CONTEXT_UID];r&&(r.refCount--,0!==r.refCount||t||n.dispose(a[e],t))}if(!t)for(const e in r)if("g"===e[0]){const t=r[e];this._activeVao===t&&this.unbind(),i.deleteVertexArray(t)}delete e.glVertexArrayObjects[this.CONTEXT_UID]}}disposeAll(e){const t=Object.keys(this.managedGeometries);for(let r=0;r<t.length;r++)this.disposeGeometry(this.managedGeometries[t[r]],e)}activateVao(e,t){const r=this.gl,i=this.CONTEXT_UID,a=this.renderer.buffer,n=e.buffers,s=e.attributes;e.indexBuffer&&a.bind(e.indexBuffer);let o=null;for(const e in s){const l=s[e],h=n[l.buffer],u=h._glBuffers[i];if(t.attributeData[e]){o!==u&&(a.bind(h),o=u);const i=t.attributeData[e].location;if(r.enableVertexAttribArray(i),r.vertexAttribPointer(i,l.size,l.type||r.FLOAT,l.normalized,l.stride,l.start),l.instance){if(!this.hasInstance)throw new Error("geometry error, GPU Instancing is not supported on this device");r.vertexAttribDivisor(i,l.divisor)}}}}draw(e,t,r,i){const{gl:a}=this,n=this._activeGeometry;if(n.indexBuffer){const s=n.indexBuffer.data.BYTES_PER_ELEMENT,o=2===s?a.UNSIGNED_SHORT:a.UNSIGNED_INT;2===s||4===s&&this.canUseUInt32ElementIndex?n.instanced?a.drawElementsInstanced(e,t||n.indexBuffer.data.length,o,(r||0)*s,i||1):a.drawElements(e,t||n.indexBuffer.data.length,o,(r||0)*s):console.warn("unsupported index buffer type: uint32")}else n.instanced?a.drawArraysInstanced(e,r,t||n.getSize(),i||1):a.drawArrays(e,r,t||n.getSize());return this}unbind(){this.gl.bindVertexArray(null),this._activeVao=null,this._activeGeometry=null}destroy(){this.renderer=null}}Lr.extension={type:Xe.RendererSystem,name:"geometry"},Ye.add(Lr);const Or=new Ct;class zr{constructor(e,t){this._texture=e,this.mapCoord=new Ct,this.uClampFrame=new Float32Array(4),this.uClampOffset=new Float32Array(2),this._textureID=-1,this._updateID=0,this.clampOffset=0,this.clampMargin=void 0===t?.5:t,this.isSimple=!1}get texture(){return this._texture}set texture(e){this._texture=e,this._textureID=-1}multiplyUvs(e,t){void 0===t&&(t=e);const r=this.mapCoord;for(let i=0;i<e.length;i+=2){const a=e[i],n=e[i+1];t[i]=a*r.a+n*r.c+r.tx,t[i+1]=a*r.b+n*r.d+r.ty}return t}update(e){const t=this._texture;if(!t||!t.valid)return!1;if(!e&&this._textureID===t._updateID)return!1;this._textureID=t._updateID,this._updateID++;const r=t._uvs;this.mapCoord.set(r.x1-r.x0,r.y1-r.y0,r.x3-r.x0,r.y3-r.y0,r.x0,r.y0);const i=t.orig,a=t.trim;a&&(Or.set(i.width/a.width,0,0,i.height/a.height,-a.x/a.width,-a.y/a.height),this.mapCoord.append(Or));const n=t.baseTexture,s=this.uClampFrame,o=this.clampMargin/n.resolution,l=this.clampOffset;return s[0]=(t._frame.x+o+l)/n.width,s[1]=(t._frame.y+o+l)/n.height,s[2]=(t._frame.x+t._frame.width-o+l)/n.width,s[3]=(t._frame.y+t._frame.height-o+l)/n.height,this.uClampOffset[0]=l/n.realWidth,this.uClampOffset[1]=l/n.realHeight,this.isSimple=t._frame.width===n.width&&t._frame.height===n.height&&0===t.rotate,!0}}class Gr extends dr{constructor(e,t,r){let i=null;"string"!=typeof e&&void 0===t&&void 0===r&&(i=e,e=void 0,t=void 0,r=void 0),super(e||"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\nuniform mat3 otherMatrix;\n\nvarying vec2 vMaskCoord;\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n\n    vTextureCoord = aTextureCoord;\n    vMaskCoord = ( otherMatrix * vec3( aTextureCoord, 1.0)  ).xy;\n}\n",t||"varying vec2 vMaskCoord;\nvarying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\nuniform sampler2D mask;\nuniform float alpha;\nuniform float npmAlpha;\nuniform vec4 maskClamp;\n\nvoid main(void)\n{\n    float clip = step(3.5,\n        step(maskClamp.x, vMaskCoord.x) +\n        step(maskClamp.y, vMaskCoord.y) +\n        step(vMaskCoord.x, maskClamp.z) +\n        step(vMaskCoord.y, maskClamp.w));\n\n    vec4 original = texture2D(uSampler, vTextureCoord);\n    vec4 masky = texture2D(mask, vMaskCoord);\n    float alphaMul = 1.0 - npmAlpha * (1.0 - masky.a);\n\n    original *= (alphaMul * masky.r * alpha * clip);\n\n    gl_FragColor = original;\n}\n",r),this.maskSprite=i,this.maskMatrix=new Ct}get maskSprite(){return this._maskSprite}set maskSprite(e){this._maskSprite=e,this._maskSprite&&(this._maskSprite.renderable=!1)}apply(e,t,r,i){const a=this._maskSprite,n=a._texture;n.valid&&(n.uvMatrix||(n.uvMatrix=new zr(n,0)),n.uvMatrix.update(),this.uniforms.npmAlpha=n.baseTexture.alphaMode?0:1,this.uniforms.mask=n,this.uniforms.otherMatrix=e.calculateSpriteMatrix(this.maskMatrix,a).prepend(n.uvMatrix.mapCoord),this.uniforms.alpha=a.worldAlpha,this.uniforms.maskClamp=n.uvMatrix.uClampFrame,e.applyFilter(this,t,r,i))}}class Ur{constructor(e=null){this.type=y.NONE,this.autoDetect=!0,this.maskObject=e||null,this.pooled=!1,this.isMaskData=!0,this.resolution=null,this.multisample=dr.defaultMultisample,this.enabled=!0,this.colorMask=15,this._filters=null,this._stencilCounter=0,this._scissorCounter=0,this._scissorRect=null,this._scissorRectLocal=null,this._colorMask=15,this._target=null}get filter(){return this._filters?this._filters[0]:null}set filter(e){e?this._filters?this._filters[0]=e:this._filters=[e]:this._filters=null}reset(){this.pooled&&(this.maskObject=null,this.type=y.NONE,this.autoDetect=!0),this._target=null,this._scissorRectLocal=null}copyCountersOrReset(e){e?(this._stencilCounter=e._stencilCounter,this._scissorCounter=e._scissorCounter,this._scissorRect=e._scissorRect):(this._stencilCounter=0,this._scissorCounter=0,this._scissorRect=null)}}class Hr{constructor(e){this.renderer=e,this.enableScissor=!0,this.alphaMaskPool=[],this.maskDataPool=[],this.maskStack=[],this.alphaMaskIndex=0}setMaskStack(e){this.maskStack=e,this.renderer.scissor.setMaskStack(e),this.renderer.stencil.setMaskStack(e)}push(e,t){let r=t;if(!r.isMaskData){const e=this.maskDataPool.pop()||new Ur;e.pooled=!0,e.maskObject=t,r=e}const i=0!==this.maskStack.length?this.maskStack[this.maskStack.length-1]:null;if(r.copyCountersOrReset(i),r._colorMask=i?i._colorMask:15,r.autoDetect&&this.detect(r),r._target=e,r.type!==y.SPRITE&&this.maskStack.push(r),r.enabled)switch(r.type){case y.SCISSOR:this.renderer.scissor.push(r);break;case y.STENCIL:this.renderer.stencil.push(r);break;case y.SPRITE:r.copyCountersOrReset(null),this.pushSpriteMask(r);break;case y.COLOR:this.pushColorMask(r)}r.type===y.SPRITE&&this.maskStack.push(r)}pop(e){const t=this.maskStack.pop();if(t&&t._target===e){if(t.enabled)switch(t.type){case y.SCISSOR:this.renderer.scissor.pop(t);break;case y.STENCIL:this.renderer.stencil.pop(t.maskObject);break;case y.SPRITE:this.popSpriteMask(t);break;case y.COLOR:this.popColorMask(t)}if(t.reset(),t.pooled&&this.maskDataPool.push(t),0!==this.maskStack.length){const e=this.maskStack[this.maskStack.length-1];e.type===y.SPRITE&&e._filters&&(e._filters[0].maskSprite=e.maskObject)}}}detect(e){const t=e.maskObject;t?t.isSprite?e.type=y.SPRITE:this.enableScissor&&this.renderer.scissor.testScissor(e)?e.type=y.SCISSOR:e.type=y.STENCIL:e.type=y.COLOR}pushSpriteMask(e){const{maskObject:t}=e,r=e._target;let i=e._filters;i||(i=this.alphaMaskPool[this.alphaMaskIndex],i||(i=this.alphaMaskPool[this.alphaMaskIndex]=[new Gr]));const a=this.renderer,n=a.renderTexture;let s,o;if(n.current){const t=n.current;s=e.resolution||t.resolution,o=e.multisample??t.multisample}else s=e.resolution||a.resolution,o=e.multisample??a.multisample;i[0].resolution=s,i[0].multisample=o,i[0].maskSprite=t;const l=r.filterArea;r.filterArea=t.getBounds(!0),a.filter.push(r,i),r.filterArea=l,e._filters||this.alphaMaskIndex++}popSpriteMask(e){this.renderer.filter.pop(),e._filters?e._filters[0].maskSprite=null:(this.alphaMaskIndex--,this.alphaMaskPool[this.alphaMaskIndex][0].maskSprite=null)}pushColorMask(e){const t=e._colorMask,r=e._colorMask=t&e.colorMask;r!==t&&this.renderer.gl.colorMask(0!=(1&r),0!=(2&r),0!=(4&r),0!=(8&r))}popColorMask(e){const t=e._colorMask,r=this.maskStack.length>0?this.maskStack[this.maskStack.length-1]._colorMask:15;r!==t&&this.renderer.gl.colorMask(0!=(1&r),0!=(2&r),0!=(4&r),0!=(8&r))}destroy(){this.renderer=null}}Hr.extension={type:Xe.RendererSystem,name:"mask"},Ye.add(Hr);class Vr{constructor(e){this.renderer=e,this.maskStack=[],this.glConst=0}getStackLength(){return this.maskStack.length}setMaskStack(e){const{gl:t}=this.renderer,r=this.getStackLength();this.maskStack=e;const i=this.getStackLength();i!==r&&(0===i?t.disable(this.glConst):(t.enable(this.glConst),this._useCurrent()))}_useCurrent(){}destroy(){this.renderer=null,this.maskStack=null}}const jr=new Ct,Xr=[],Kr=class extends Vr{constructor(e){super(e),this.glConst=b.ADAPTER.getWebGLRenderingContext().SCISSOR_TEST}getStackLength(){const e=this.maskStack[this.maskStack.length-1];return e?e._scissorCounter:0}calcScissorRect(e){if(e._scissorRectLocal)return;const t=e._scissorRect,{maskObject:r}=e,{renderer:i}=this,a=i.renderTexture,n=r.getBounds(!0,Xr.pop()??new At);this.roundFrameToPixels(n,a.current?a.current.resolution:i.resolution,a.sourceFrame,a.destinationFrame,i.projection.transform),t&&n.fit(t),e._scissorRectLocal=n}static isMatrixRotated(e){if(!e)return!1;const{a:t,b:r,c:i,d:a}=e;return(Math.abs(r)>1e-4||Math.abs(i)>1e-4)&&(Math.abs(t)>1e-4||Math.abs(a)>1e-4)}testScissor(e){const{maskObject:t}=e;if(!t.isFastRect||!t.isFastRect())return!1;if(Kr.isMatrixRotated(t.worldTransform))return!1;if(Kr.isMatrixRotated(this.renderer.projection.transform))return!1;this.calcScissorRect(e);const r=e._scissorRectLocal;return r.width>0&&r.height>0}roundFrameToPixels(e,t,r,i,a){Kr.isMatrixRotated(a)||((a=a?jr.copyFrom(a):jr.identity()).translate(-r.x,-r.y).scale(i.width/r.width,i.height/r.height).translate(i.x,i.y),this.renderer.filter.transformAABB(a,e),e.fit(i),e.x=Math.round(e.x*t),e.y=Math.round(e.y*t),e.width=Math.round(e.width*t),e.height=Math.round(e.height*t))}push(e){e._scissorRectLocal||this.calcScissorRect(e);const{gl:t}=this.renderer;e._scissorRect||t.enable(t.SCISSOR_TEST),e._scissorCounter++,e._scissorRect=e._scissorRectLocal,this._useCurrent()}pop(e){const{gl:t}=this.renderer;e&&Xr.push(e._scissorRectLocal),this.getStackLength()>0?this._useCurrent():t.disable(t.SCISSOR_TEST)}_useCurrent(){const e=this.maskStack[this.maskStack.length-1]._scissorRect;let t;t=this.renderer.renderTexture.current?e.y:this.renderer.height-e.height-e.y,this.renderer.gl.scissor(e.x,t,e.width,e.height)}};let Wr=Kr;Wr.extension={type:Xe.RendererSystem,name:"scissor"},Ye.add(Wr);class Yr extends Vr{constructor(e){super(e),this.glConst=b.ADAPTER.getWebGLRenderingContext().STENCIL_TEST}getStackLength(){const e=this.maskStack[this.maskStack.length-1];return e?e._stencilCounter:0}push(e){const t=e.maskObject,{gl:r}=this.renderer,i=e._stencilCounter;0===i&&(this.renderer.framebuffer.forceStencil(),r.clearStencil(0),r.clear(r.STENCIL_BUFFER_BIT),r.enable(r.STENCIL_TEST)),e._stencilCounter++;const a=e._colorMask;0!==a&&(e._colorMask=0,r.colorMask(!1,!1,!1,!1)),r.stencilFunc(r.EQUAL,i,4294967295),r.stencilOp(r.KEEP,r.KEEP,r.INCR),t.renderable=!0,t.render(this.renderer),this.renderer.batch.flush(),t.renderable=!1,0!==a&&(e._colorMask=a,r.colorMask(0!=(1&a),0!=(2&a),0!=(4&a),0!=(8&a))),this._useCurrent()}pop(e){const t=this.renderer.gl;if(0===this.getStackLength())t.disable(t.STENCIL_TEST);else{const r=0!==this.maskStack.length?this.maskStack[this.maskStack.length-1]:null,i=r?r._colorMask:15;0!==i&&(r._colorMask=0,t.colorMask(!1,!1,!1,!1)),t.stencilOp(t.KEEP,t.KEEP,t.DECR),e.renderable=!0,e.render(this.renderer),this.renderer.batch.flush(),e.renderable=!1,0!==i&&(r._colorMask=i,t.colorMask(0!=(1&i),0!=(2&i),0!=(4&i),0!=(8&i))),this._useCurrent()}}_useCurrent(){const e=this.renderer.gl;e.stencilFunc(e.EQUAL,this.getStackLength(),4294967295),e.stencilOp(e.KEEP,e.KEEP,e.KEEP)}}Yr.extension={type:Xe.RendererSystem,name:"stencil"},Ye.add(Yr);class Zr{constructor(e){this.renderer=e,this.plugins={},Object.defineProperties(this.plugins,{extract:{enumerable:!1,get:()=>(Y("7.0.0","renderer.plugins.extract has moved to renderer.extract"),e.extract)},prepare:{enumerable:!1,get:()=>(Y("7.0.0","renderer.plugins.prepare has moved to renderer.prepare"),e.prepare)},interaction:{enumerable:!1,get:()=>(Y("7.0.0","renderer.plugins.interaction has been deprecated, use renderer.events"),e.events)}})}init(){const e=this.rendererPlugins;for(const t in e)this.plugins[t]=new e[t](this.renderer)}destroy(){for(const e in this.plugins)this.plugins[e].destroy(),this.plugins[e]=null}}Zr.extension={type:[Xe.RendererSystem,Xe.CanvasRendererSystem],name:"_plugin"},Ye.add(Zr);class Jr{constructor(e){this.renderer=e,this.destinationFrame=null,this.sourceFrame=null,this.defaultFrame=null,this.projectionMatrix=new Ct,this.transform=null}update(e,t,r,i){this.destinationFrame=e||this.destinationFrame||this.defaultFrame,this.sourceFrame=t||this.sourceFrame||e,this.calculateProjection(this.destinationFrame,this.sourceFrame,r,i),this.transform&&this.projectionMatrix.append(this.transform);const a=this.renderer;a.globalUniforms.uniforms.projectionMatrix=this.projectionMatrix,a.globalUniforms.update(),a.shader.shader&&a.shader.syncUniformGroup(a.shader.shader.uniforms.globals)}calculateProjection(e,t,r,i){const a=this.projectionMatrix,n=i?-1:1;a.identity(),a.a=1/t.width*2,a.d=n*(1/t.height*2),a.tx=-1-t.x*a.a,a.ty=-n-t.y*a.d}setTransform(e){}destroy(){this.renderer=null}}Jr.extension={type:Xe.RendererSystem,name:"projection"},Ye.add(Jr);const $r=new zt;class qr{constructor(e){this.renderer=e,this._tempMatrix=new Ct}generateTexture(e,t){const{region:r,...i}=t||{},a=r||e.getLocalBounds(null,!0);0===a.width&&(a.width=1),0===a.height&&(a.height=1);const n=Sr.create({width:a.width,height:a.height,...i});this._tempMatrix.tx=-a.x,this._tempMatrix.ty=-a.y;const s=e.transform;return e.transform=$r,this.renderer.render(e,{renderTexture:n,transform:this._tempMatrix,skipUpdateTransform:!!e.parent,blit:!0}),e.transform=s,n}destroy(){}}qr.extension={type:[Xe.RendererSystem,Xe.CanvasRendererSystem],name:"textureGenerator"},Ye.add(qr);const Qr=new At,ei=new At;class ti{constructor(e){this.renderer=e,this.defaultMaskStack=[],this.current=null,this.sourceFrame=new At,this.destinationFrame=new At,this.viewportFrame=new At}contextChange(){const e=this.renderer?.gl.getContextAttributes();this._rendererPremultipliedAlpha=!!(e&&e.alpha&&e.premultipliedAlpha)}bind(e=null,t,r){const i=this.renderer;let a,n,s;this.current=e,e?(a=e.baseTexture,s=a.resolution,t||(Qr.width=e.frame.width,Qr.height=e.frame.height,t=Qr),r||(ei.x=e.frame.x,ei.y=e.frame.y,ei.width=t.width,ei.height=t.height,r=ei),n=a.framebuffer):(s=i.resolution,t||(Qr.width=i._view.screen.width,Qr.height=i._view.screen.height,t=Qr),r||((r=Qr).width=t.width,r.height=t.height));const o=this.viewportFrame;o.x=r.x*s,o.y=r.y*s,o.width=r.width*s,o.height=r.height*s,e||(o.y=i.view.height-(o.y+o.height)),o.ceil(),this.renderer.framebuffer.bind(n,o),this.renderer.projection.update(r,t,s,!n),e?this.renderer.mask.setMaskStack(a.maskStack):this.renderer.mask.setMaskStack(this.defaultMaskStack),this.sourceFrame.copyFrom(t),this.destinationFrame.copyFrom(r)}clear(e,t){const r=this.current?this.current.baseTexture.clear:this.renderer.background.backgroundColor,i=Ee.shared.setValue(e||r);(this.current&&this.current.baseTexture.alphaMode>0||!this.current&&this._rendererPremultipliedAlpha)&&i.premultiply(i.alpha);const a=this.destinationFrame,n=this.current?this.current.baseTexture:this.renderer._view.screen,s=a.width!==n.width||a.height!==n.height;if(s){let{x:e,y:t,width:r,height:i}=this.viewportFrame;e=Math.round(e),t=Math.round(t),r=Math.round(r),i=Math.round(i),this.renderer.gl.enable(this.renderer.gl.SCISSOR_TEST),this.renderer.gl.scissor(e,t,r,i)}this.renderer.framebuffer.clear(i.red,i.green,i.blue,i.alpha,t),s&&this.renderer.scissor.pop()}resize(){this.bind(null)}reset(){this.bind(null)}destroy(){this.renderer=null}}ti.extension={type:Xe.RendererSystem,name:"renderTexture"},Ye.add(ti);class ri{constructor(e,t){this.program=e,this.uniformData=t,this.uniformGroups={},this.uniformDirtyGroups={},this.uniformBufferBindings={}}destroy(){this.uniformData=null,this.uniformGroups=null,this.uniformDirtyGroups=null,this.uniformBufferBindings=null,this.program=null}}function ii(e,t,r){const i=e.createShader(t);return e.shaderSource(i,r),e.compileShader(i),i}function ai(e){const t=new Array(e);for(let e=0;e<t.length;e++)t[e]=!1;return t}function ni(e,t){switch(e){case"float":case"int":case"uint":case"sampler2D":case"sampler2DArray":return 0;case"vec2":return new Float32Array(2*t);case"vec3":return new Float32Array(3*t);case"vec4":return new Float32Array(4*t);case"ivec2":return new Int32Array(2*t);case"ivec3":return new Int32Array(3*t);case"ivec4":return new Int32Array(4*t);case"uvec2":return new Uint32Array(2*t);case"uvec3":return new Uint32Array(3*t);case"uvec4":return new Uint32Array(4*t);case"bool":return!1;case"bvec2":return ai(2*t);case"bvec3":return ai(3*t);case"bvec4":return ai(4*t);case"mat2":return new Float32Array([1,0,0,1]);case"mat3":return new Float32Array([1,0,0,0,1,0,0,0,1]);case"mat4":return new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1])}return null}function si(e,t){const r=e.getShaderSource(t).split("\n").map(((e,t)=>`${t}: ${e}`)),i=e.getShaderInfoLog(t),a=i.split("\n"),n={},s=a.map((e=>parseFloat(e.replace(/^ERROR\: 0\:([\d]+)\:.*$/,"$1")))).filter((e=>!(!e||n[e]||(n[e]=!0,0)))),o=[""];s.forEach((e=>{r[e-1]=`%c${r[e-1]}%c`,o.push("background: #FF0000; color:#FFFFFF; font-size: 10px","font-size: 10px")}));const l=r.join("\n");o[0]=l,console.error(i),console.groupCollapsed("click to view full shader code"),console.warn(...o),console.groupEnd()}function oi(e,t,r,i,a){r.buffer.update(a)}const li={float:"\n        data[offset] = v;\n    ",vec2:"\n        data[offset] = v[0];\n        data[offset+1] = v[1];\n    ",vec3:"\n        data[offset] = v[0];\n        data[offset+1] = v[1];\n        data[offset+2] = v[2];\n\n    ",vec4:"\n        data[offset] = v[0];\n        data[offset+1] = v[1];\n        data[offset+2] = v[2];\n        data[offset+3] = v[3];\n    ",mat2:"\n        data[offset] = v[0];\n        data[offset+1] = v[1];\n\n        data[offset+4] = v[2];\n        data[offset+5] = v[3];\n    ",mat3:"\n        data[offset] = v[0];\n        data[offset+1] = v[1];\n        data[offset+2] = v[2];\n\n        data[offset + 4] = v[3];\n        data[offset + 5] = v[4];\n        data[offset + 6] = v[5];\n\n        data[offset + 8] = v[6];\n        data[offset + 9] = v[7];\n        data[offset + 10] = v[8];\n    ",mat4:"\n        for(var i = 0; i < 16; i++)\n        {\n            data[offset + i] = v[i];\n        }\n    "},hi={float:4,vec2:8,vec3:12,vec4:16,int:4,ivec2:8,ivec3:12,ivec4:16,uint:4,uvec2:8,uvec3:12,uvec4:16,bool:4,bvec2:8,bvec3:12,bvec4:16,mat2:32,mat3:48,mat4:64};let ui,di=0;const ci={textureCount:0,uboCount:0};class mi{constructor(e){this.destroyed=!1,this.renderer=e,this.systemCheck(),this.gl=null,this.shader=null,this.program=null,this.cache={},this._uboCache={},this.id=di++}systemCheck(){if(!function(){if("boolean"==typeof ui)return ui;try{const e=new Function("param1","param2","param3","return param1[param2] === param3;");ui=!0===e({a:"b"},"a","b")}catch(e){ui=!1}return ui}())throw new Error("Current environment does not allow unsafe-eval, please use @pixi/unsafe-eval module to enable support.")}contextChange(e){this.gl=e,this.reset()}bind(e,t){e.disposeRunner.add(this),e.uniforms.globals=this.renderer.globalUniforms;const r=e.program,i=r.glPrograms[this.renderer.CONTEXT_UID]||this.generateProgram(e);return this.shader=e,this.program!==r&&(this.program=r,this.gl.useProgram(i.program)),t||(ci.textureCount=0,ci.uboCount=0,this.syncUniformGroup(e.uniformGroup,ci)),i}setUniforms(e){const t=this.shader.program,r=t.glPrograms[this.renderer.CONTEXT_UID];t.syncUniforms(r.uniformData,e,this.renderer)}syncUniformGroup(e,t){const r=this.getGlProgram();e.static&&e.dirtyId===r.uniformDirtyGroups[e.id]||(r.uniformDirtyGroups[e.id]=e.dirtyId,this.syncUniforms(e,r,t))}syncUniforms(e,t,r){(e.syncUniforms[this.shader.program.id]||this.createSyncGroups(e))(t.uniformData,e.uniforms,this.renderer,r)}createSyncGroups(e){const t=this.getSignature(e,this.shader.program.uniformData,"u");return this.cache[t]||(this.cache[t]=function(e,t){const r=["\n        var v = null;\n        var cv = null;\n        var cu = null;\n        var t = 0;\n        var gl = renderer.gl;\n    "];for(const i in e.uniforms){const a=t[i];if(!a){e.uniforms[i]?.group&&(e.uniforms[i].ubo?r.push(`\n                        renderer.shader.syncUniformBufferGroup(uv.${i}, '${i}');\n                    `):r.push(`\n                        renderer.shader.syncUniformGroup(uv.${i}, syncData);\n                    `));continue}const n=e.uniforms[i];let s=!1;for(let e=0;e<Gt.length;e++)if(Gt[e].test(a,n)){r.push(Gt[e].code(i,n)),s=!0;break}if(!s){const e=(1!==a.size||a.isArray?Ht:Ut)[a.type].replace("location",`ud["${i}"].location`);r.push(`\n            cu = ud["${i}"];\n            cv = cu.value;\n            v = uv["${i}"];\n            ${e};`)}}return new Function("ud","uv","renderer","syncData",r.join("\n"))}(e,this.shader.program.uniformData)),e.syncUniforms[this.shader.program.id]=this.cache[t],e.syncUniforms[this.shader.program.id]}syncUniformBufferGroup(e,t){const r=this.getGlProgram();if(!e.static||0!==e.dirtyId||!r.uniformGroups[e.id]){e.dirtyId=0;const i=r.uniformGroups[e.id]||this.createSyncBufferGroup(e,r,t);e.buffer.update(),i(r.uniformData,e.uniforms,this.renderer,ci,e.buffer)}this.renderer.buffer.bindBufferBase(e.buffer,r.uniformBufferBindings[t])}createSyncBufferGroup(e,t,r){const{gl:i}=this.renderer;this.renderer.buffer.bind(e.buffer);const a=this.gl.getUniformBlockIndex(t.program,r);t.uniformBufferBindings[r]=this.shader.uniformBindCount,i.uniformBlockBinding(t.program,a,this.shader.uniformBindCount),this.shader.uniformBindCount++;const n=this.getSignature(e,this.shader.program.uniformData,"ubo");let s=this._uboCache[n];if(s||(s=this._uboCache[n]=function(e,t){if(!e.autoManage)return{size:0,syncFunc:oi};const r=function(e,t){const r=[];for(const i in e)t[i]&&r.push(t[i]);return r.sort(((e,t)=>e.index-t.index)),r}(e.uniforms,t),{uboElements:i,size:a}=function(e){const t=e.map((e=>({data:e,offset:0,dataLen:0,dirty:0})));let r=0,i=0,a=0;for(let e=0;e<t.length;e++){const n=t[e];if(r=hi[n.data.type],n.data.size>1&&(r=Math.max(r,16)*n.data.size),n.dataLen=r,i%r!=0&&i<16){const e=i%r%16;i+=e,a+=e}i+r>16?(a=16*Math.ceil(a/16),n.offset=a,a+=r,i=r):(n.offset=a,i+=r,a+=r)}return a=16*Math.ceil(a/16),{uboElements:t,size:a}}(r),n=["\n    var v = null;\n    var v2 = null;\n    var cv = null;\n    var t = 0;\n    var gl = renderer.gl\n    var index = 0;\n    var data = buffer.data;\n    "];for(let t=0;t<i.length;t++){const r=i[t],a=e.uniforms[r.data.name],s=r.data.name;let o=!1;for(let e=0;e<Gt.length;e++){const t=Gt[e];if(t.codeUbo&&t.test(r.data,a)){n.push(`offset = ${r.offset/4};`,Gt[e].codeUbo(r.data.name,a)),o=!0;break}}if(!o)if(r.data.size>1){const e=Wt(r.data.type),t=Math.max(hi[r.data.type]/16,1),i=e/t,a=(4-i%4)%4;n.push(`\n                cv = ud.${s}.value;\n                v = uv.${s};\n                offset = ${r.offset/4};\n\n                t = 0;\n\n                for(var i=0; i < ${r.data.size*t}; i++)\n                {\n                    for(var j = 0; j < ${i}; j++)\n                    {\n                        data[offset++] = v[t++];\n                    }\n                    offset += ${a};\n                }\n\n                `)}else{const e=li[r.data.type];n.push(`\n                cv = ud.${s}.value;\n                v = uv.${s};\n                offset = ${r.offset/4};\n                ${e};\n                `)}}return n.push("\n       renderer.buffer.update(buffer);\n    "),{size:a,syncFunc:new Function("ud","uv","renderer","syncData","buffer",n.join("\n"))}}(e,this.shader.program.uniformData)),e.autoManage){const t=new Float32Array(s.size/4);e.buffer.update(t)}return t.uniformGroups[e.id]=s.syncFunc,t.uniformGroups[e.id]}getSignature(e,t,r){const i=e.uniforms,a=[`${r}-`];for(const e in i)a.push(e),t[e]&&a.push(t[e].type);return a.join("-")}getGlProgram(){return this.shader?this.shader.program.glPrograms[this.renderer.CONTEXT_UID]:null}generateProgram(e){const t=this.gl,r=e.program,i=function(e,t){const r=ii(e,e.VERTEX_SHADER,t.vertexSrc),i=ii(e,e.FRAGMENT_SHADER,t.fragmentSrc),a=e.createProgram();e.attachShader(a,r),e.attachShader(a,i);const n=t.extra?.transformFeedbackVaryings;if(n&&("function"!=typeof e.transformFeedbackVaryings?console.warn("TransformFeedback is not supported but TransformFeedbackVaryings are given."):e.transformFeedbackVaryings(a,n.names,"separate"===n.bufferMode?e.SEPARATE_ATTRIBS:e.INTERLEAVED_ATTRIBS)),e.linkProgram(a),e.getProgramParameter(a,e.LINK_STATUS)||function(e,t,r,i){e.getProgramParameter(t,e.LINK_STATUS)||(e.getShaderParameter(r,e.COMPILE_STATUS)||si(e,r),e.getShaderParameter(i,e.COMPILE_STATUS)||si(e,i),console.error("PixiJS Error: Could not initialize shader."),""!==e.getProgramInfoLog(t)&&console.warn("PixiJS Warning: gl.getProgramInfoLog()",e.getProgramInfoLog(t)))}(e,a,r,i),t.attributeData=function(e,t){const r={},i=t.getProgramParameter(e,t.ACTIVE_ATTRIBUTES);for(let a=0;a<i;a++){const i=t.getActiveAttrib(e,a);if(i.name.startsWith("gl_"))continue;const n=Jt(t,i.type),s={type:n,name:i.name,size:Wt(n),location:t.getAttribLocation(e,i.name)};r[i.name]=s}return r}(a,e),t.uniformData=function(e,t){const r={},i=t.getProgramParameter(e,t.ACTIVE_UNIFORMS);for(let a=0;a<i;a++){const i=t.getActiveUniform(e,a),n=i.name.replace(/\[.*?\]$/,""),s=!!i.name.match(/\[.*?\]$/),o=Jt(t,i.type);r[n]={name:n,index:a,type:o,size:i.size,isArray:s,value:ni(o,i.size)}}return r}(a,e),!/^[ \t]*#[ \t]*version[ \t]+300[ \t]+es[ \t]*$/m.test(t.vertexSrc)){const r=Object.keys(t.attributeData);r.sort(((e,t)=>e>t?1:-1));for(let i=0;i<r.length;i++)t.attributeData[r[i]].location=i,e.bindAttribLocation(a,i,r[i]);e.linkProgram(a)}e.deleteShader(r),e.deleteShader(i);const s={};for(const r in t.uniformData){const i=t.uniformData[r];s[r]={location:e.getUniformLocation(a,r),value:ni(i.type,i.size)}}return new ri(a,s)}(t,r);return r.glPrograms[this.renderer.CONTEXT_UID]=i,i}reset(){this.program=null,this.shader=null}disposeShader(e){this.shader===e&&(this.shader=null)}destroy(){this.renderer=null,this.destroyed=!0}}mi.extension={type:Xe.RendererSystem,name:"shader"},Ye.add(mi);class fi{constructor(e){this.renderer=e}run(e){const{renderer:t}=this;t.runners.init.emit(t.options),e.hello&&console.log(`PixiJS 7.2.4 - ${t.rendererLogId} - https://pixijs.com`),t.resize(t.screen.width,t.screen.height)}destroy(){}}fi.defaultOptions={hello:!1},fi.extension={type:[Xe.RendererSystem,Xe.CanvasRendererSystem],name:"startup"},Ye.add(fi);const pi=class{constructor(){this.gl=null,this.stateId=0,this.polygonOffset=0,this.blendMode=a.NONE,this._blendEq=!1,this.map=[],this.map[0]=this.setBlend,this.map[1]=this.setOffset,this.map[2]=this.setCullFace,this.map[3]=this.setDepthTest,this.map[4]=this.setFrontFace,this.map[5]=this.setDepthMask,this.checks=[],this.defaultState=new qe,this.defaultState.blend=!0}contextChange(e){this.gl=e,this.blendModes=function(e,t=[]){return t[a.NORMAL]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],t[a.ADD]=[e.ONE,e.ONE],t[a.MULTIPLY]=[e.DST_COLOR,e.ONE_MINUS_SRC_ALPHA,e.ONE,e.ONE_MINUS_SRC_ALPHA],t[a.SCREEN]=[e.ONE,e.ONE_MINUS_SRC_COLOR,e.ONE,e.ONE_MINUS_SRC_ALPHA],t[a.OVERLAY]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],t[a.DARKEN]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],t[a.LIGHTEN]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],t[a.COLOR_DODGE]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],t[a.COLOR_BURN]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],t[a.HARD_LIGHT]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],t[a.SOFT_LIGHT]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],t[a.DIFFERENCE]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],t[a.EXCLUSION]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],t[a.HUE]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],t[a.SATURATION]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],t[a.COLOR]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],t[a.LUMINOSITY]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],t[a.NONE]=[0,0],t[a.NORMAL_NPM]=[e.SRC_ALPHA,e.ONE_MINUS_SRC_ALPHA,e.ONE,e.ONE_MINUS_SRC_ALPHA],t[a.ADD_NPM]=[e.SRC_ALPHA,e.ONE,e.ONE,e.ONE],t[a.SCREEN_NPM]=[e.SRC_ALPHA,e.ONE_MINUS_SRC_COLOR,e.ONE,e.ONE_MINUS_SRC_ALPHA],t[a.SRC_IN]=[e.DST_ALPHA,e.ZERO],t[a.SRC_OUT]=[e.ONE_MINUS_DST_ALPHA,e.ZERO],t[a.SRC_ATOP]=[e.DST_ALPHA,e.ONE_MINUS_SRC_ALPHA],t[a.DST_OVER]=[e.ONE_MINUS_DST_ALPHA,e.ONE],t[a.DST_IN]=[e.ZERO,e.SRC_ALPHA],t[a.DST_OUT]=[e.ZERO,e.ONE_MINUS_SRC_ALPHA],t[a.DST_ATOP]=[e.ONE_MINUS_DST_ALPHA,e.SRC_ALPHA],t[a.XOR]=[e.ONE_MINUS_DST_ALPHA,e.ONE_MINUS_SRC_ALPHA],t[a.SUBTRACT]=[e.ONE,e.ONE,e.ONE,e.ONE,e.FUNC_REVERSE_SUBTRACT,e.FUNC_ADD],t}(e),this.set(this.defaultState),this.reset()}set(e){if(e=e||this.defaultState,this.stateId!==e.data){let t=this.stateId^e.data,r=0;for(;t;)1&t&&this.map[r].call(this,!!(e.data&1<<r)),t>>=1,r++;this.stateId=e.data}for(let t=0;t<this.checks.length;t++)this.checks[t](this,e)}forceState(e){e=e||this.defaultState;for(let t=0;t<this.map.length;t++)this.map[t].call(this,!!(e.data&1<<t));for(let t=0;t<this.checks.length;t++)this.checks[t](this,e);this.stateId=e.data}setBlend(e){this.updateCheck(pi.checkBlendMode,e),this.gl[e?"enable":"disable"](this.gl.BLEND)}setOffset(e){this.updateCheck(pi.checkPolygonOffset,e),this.gl[e?"enable":"disable"](this.gl.POLYGON_OFFSET_FILL)}setDepthTest(e){this.gl[e?"enable":"disable"](this.gl.DEPTH_TEST)}setDepthMask(e){this.gl.depthMask(e)}setCullFace(e){this.gl[e?"enable":"disable"](this.gl.CULL_FACE)}setFrontFace(e){this.gl.frontFace(this.gl[e?"CW":"CCW"])}setBlendMode(e){if(e===this.blendMode)return;this.blendMode=e;const t=this.blendModes[e],r=this.gl;2===t.length?r.blendFunc(t[0],t[1]):r.blendFuncSeparate(t[0],t[1],t[2],t[3]),6===t.length?(this._blendEq=!0,r.blendEquationSeparate(t[4],t[5])):this._blendEq&&(this._blendEq=!1,r.blendEquationSeparate(r.FUNC_ADD,r.FUNC_ADD))}setPolygonOffset(e,t){this.gl.polygonOffset(e,t)}reset(){this.gl.pixelStorei(this.gl.UNPACK_FLIP_Y_WEBGL,!1),this.forceState(this.defaultState),this._blendEq=!0,this.blendMode=-1,this.setBlendMode(0)}updateCheck(e,t){const r=this.checks.indexOf(e);t&&-1===r?this.checks.push(e):t||-1===r||this.checks.splice(r,1)}static checkBlendMode(e,t){e.setBlendMode(t.blendMode)}static checkPolygonOffset(e,t){e.setPolygonOffset(1,t.polygonOffset)}destroy(){this.gl=null}};let gi=pi;gi.extension={type:Xe.RendererSystem,name:"state"},Ye.add(gi);class yi extends G{constructor(){super(...arguments),this.runners={},this._systemsHash={}}setup(e){this.addRunners(...e.runners);const t=(e.priority??[]).filter((t=>e.systems[t])),r=[...t,...Object.keys(e.systems).filter((e=>!t.includes(e)))];for(const t of r)this.addSystem(e.systems[t],t)}addRunners(...e){e.forEach((e=>{this.runners[e]=new tt(e)}))}addSystem(e,t){const r=new e(this);if(this[t])throw new Error(`Whoops! The name "${t}" is already in use`);this[t]=r,this._systemsHash[t]=r;for(const e in this.runners)this.runners[e].add(r);return this}emitWithCustomOptions(e,t){const r=Object.keys(this._systemsHash);e.items.forEach((i=>{const a=r.find((e=>this._systemsHash[e]===i));i[e.name](t[a])}))}destroy(){Object.values(this.runners).forEach((e=>{e.destroy()})),this._systemsHash={}}}const vi=class{constructor(e){this.renderer=e,this.count=0,this.checkCount=0,this.maxIdle=vi.defaultMaxIdle,this.checkCountMax=vi.defaultCheckCountMax,this.mode=vi.defaultMode}postrender(){this.renderer.objectRenderer.renderingToScreen&&(this.count++,this.mode!==p.MANUAL&&(this.checkCount++,this.checkCount>this.checkCountMax&&(this.checkCount=0,this.run())))}run(){const e=this.renderer.texture,t=e.managedTextures;let r=!1;for(let i=0;i<t.length;i++){const a=t[i];!a.framebuffer&&this.count-a.touched>this.maxIdle&&(e.destroyTexture(a,!0),t[i]=null,r=!0)}if(r){let e=0;for(let r=0;r<t.length;r++)null!==t[r]&&(t[e++]=t[r]);t.length=e}}unload(e){const t=this.renderer.texture,r=e._texture;r&&!r.framebuffer&&t.destroyTexture(r);for(let t=e.children.length-1;t>=0;t--)this.unload(e.children[t])}destroy(){this.renderer=null}};let xi=vi;xi.defaultMode=p.AUTO,xi.defaultMaxIdle=3600,xi.defaultCheckCountMax=600,xi.extension={type:Xe.RendererSystem,name:"textureGC"},Ye.add(xi);class _i{constructor(e){this.texture=e,this.width=-1,this.height=-1,this.dirtyId=-1,this.dirtyStyleId=-1,this.mipmap=!1,this.wrapMode=33071,this.type=l.UNSIGNED_BYTE,this.internalFormat=s.RGBA,this.samplerType=0}}class bi{constructor(e){this.renderer=e,this.boundTextures=[],this.currentLocation=-1,this.managedTextures=[],this._unknownBoundTextures=!1,this.unknownTexture=new st,this.hasIntegerTextures=!1}contextChange(){const e=this.gl=this.renderer.gl;this.CONTEXT_UID=this.renderer.CONTEXT_UID,this.webGLVersion=this.renderer.context.webGLVersion,this.internalFormats=function(e){let t;return t="WebGL2RenderingContext"in globalThis&&e instanceof globalThis.WebGL2RenderingContext?{[l.UNSIGNED_BYTE]:{[s.RGBA]:e.RGBA8,[s.RGB]:e.RGB8,[s.RG]:e.RG8,[s.RED]:e.R8,[s.RGBA_INTEGER]:e.RGBA8UI,[s.RGB_INTEGER]:e.RGB8UI,[s.RG_INTEGER]:e.RG8UI,[s.RED_INTEGER]:e.R8UI,[s.ALPHA]:e.ALPHA,[s.LUMINANCE]:e.LUMINANCE,[s.LUMINANCE_ALPHA]:e.LUMINANCE_ALPHA},[l.BYTE]:{[s.RGBA]:e.RGBA8_SNORM,[s.RGB]:e.RGB8_SNORM,[s.RG]:e.RG8_SNORM,[s.RED]:e.R8_SNORM,[s.RGBA_INTEGER]:e.RGBA8I,[s.RGB_INTEGER]:e.RGB8I,[s.RG_INTEGER]:e.RG8I,[s.RED_INTEGER]:e.R8I},[l.UNSIGNED_SHORT]:{[s.RGBA_INTEGER]:e.RGBA16UI,[s.RGB_INTEGER]:e.RGB16UI,[s.RG_INTEGER]:e.RG16UI,[s.RED_INTEGER]:e.R16UI,[s.DEPTH_COMPONENT]:e.DEPTH_COMPONENT16},[l.SHORT]:{[s.RGBA_INTEGER]:e.RGBA16I,[s.RGB_INTEGER]:e.RGB16I,[s.RG_INTEGER]:e.RG16I,[s.RED_INTEGER]:e.R16I},[l.UNSIGNED_INT]:{[s.RGBA_INTEGER]:e.RGBA32UI,[s.RGB_INTEGER]:e.RGB32UI,[s.RG_INTEGER]:e.RG32UI,[s.RED_INTEGER]:e.R32UI,[s.DEPTH_COMPONENT]:e.DEPTH_COMPONENT24},[l.INT]:{[s.RGBA_INTEGER]:e.RGBA32I,[s.RGB_INTEGER]:e.RGB32I,[s.RG_INTEGER]:e.RG32I,[s.RED_INTEGER]:e.R32I},[l.FLOAT]:{[s.RGBA]:e.RGBA32F,[s.RGB]:e.RGB32F,[s.RG]:e.RG32F,[s.RED]:e.R32F,[s.DEPTH_COMPONENT]:e.DEPTH_COMPONENT32F},[l.HALF_FLOAT]:{[s.RGBA]:e.RGBA16F,[s.RGB]:e.RGB16F,[s.RG]:e.RG16F,[s.RED]:e.R16F},[l.UNSIGNED_SHORT_5_6_5]:{[s.RGB]:e.RGB565},[l.UNSIGNED_SHORT_4_4_4_4]:{[s.RGBA]:e.RGBA4},[l.UNSIGNED_SHORT_5_5_5_1]:{[s.RGBA]:e.RGB5_A1},[l.UNSIGNED_INT_2_10_10_10_REV]:{[s.RGBA]:e.RGB10_A2,[s.RGBA_INTEGER]:e.RGB10_A2UI},[l.UNSIGNED_INT_10F_11F_11F_REV]:{[s.RGB]:e.R11F_G11F_B10F},[l.UNSIGNED_INT_5_9_9_9_REV]:{[s.RGB]:e.RGB9_E5},[l.UNSIGNED_INT_24_8]:{[s.DEPTH_STENCIL]:e.DEPTH24_STENCIL8},[l.FLOAT_32_UNSIGNED_INT_24_8_REV]:{[s.DEPTH_STENCIL]:e.DEPTH32F_STENCIL8}}:{[l.UNSIGNED_BYTE]:{[s.RGBA]:e.RGBA,[s.RGB]:e.RGB,[s.ALPHA]:e.ALPHA,[s.LUMINANCE]:e.LUMINANCE,[s.LUMINANCE_ALPHA]:e.LUMINANCE_ALPHA},[l.UNSIGNED_SHORT_5_6_5]:{[s.RGB]:e.RGB},[l.UNSIGNED_SHORT_4_4_4_4]:{[s.RGBA]:e.RGBA},[l.UNSIGNED_SHORT_5_5_5_1]:{[s.RGBA]:e.RGBA}},t}(e);const t=e.getParameter(e.MAX_TEXTURE_IMAGE_UNITS);this.boundTextures.length=t;for(let e=0;e<t;e++)this.boundTextures[e]=null;this.emptyTextures={};const r=new _i(e.createTexture());e.bindTexture(e.TEXTURE_2D,r.texture),e.texImage2D(e.TEXTURE_2D,0,e.RGBA,1,1,0,e.RGBA,e.UNSIGNED_BYTE,new Uint8Array(4)),this.emptyTextures[e.TEXTURE_2D]=r,this.emptyTextures[e.TEXTURE_CUBE_MAP]=new _i(e.createTexture()),e.bindTexture(e.TEXTURE_CUBE_MAP,this.emptyTextures[e.TEXTURE_CUBE_MAP].texture);for(let t=0;t<6;t++)e.texImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+t,0,e.RGBA,1,1,0,e.RGBA,e.UNSIGNED_BYTE,null);e.texParameteri(e.TEXTURE_CUBE_MAP,e.TEXTURE_MAG_FILTER,e.LINEAR),e.texParameteri(e.TEXTURE_CUBE_MAP,e.TEXTURE_MIN_FILTER,e.LINEAR);for(let e=0;e<this.boundTextures.length;e++)this.bind(null,e)}bind(e,t=0){const{gl:r}=this;if(e=e?.castToBaseTexture(),e?.valid&&!e.parentTextureArray){e.touched=this.renderer.textureGC.count;const i=e._glTextures[this.CONTEXT_UID]||this.initTexture(e);this.boundTextures[t]!==e&&(this.currentLocation!==t&&(this.currentLocation=t,r.activeTexture(r.TEXTURE0+t)),r.bindTexture(e.target,i.texture)),i.dirtyId!==e.dirtyId?(this.currentLocation!==t&&(this.currentLocation=t,r.activeTexture(r.TEXTURE0+t)),this.updateTexture(e)):i.dirtyStyleId!==e.dirtyStyleId&&this.updateTextureStyle(e),this.boundTextures[t]=e}else this.currentLocation!==t&&(this.currentLocation=t,r.activeTexture(r.TEXTURE0+t)),r.bindTexture(r.TEXTURE_2D,this.emptyTextures[r.TEXTURE_2D].texture),this.boundTextures[t]=null}reset(){this._unknownBoundTextures=!0,this.hasIntegerTextures=!1,this.currentLocation=-1;for(let e=0;e<this.boundTextures.length;e++)this.boundTextures[e]=this.unknownTexture}unbind(e){const{gl:t,boundTextures:r}=this;if(this._unknownBoundTextures){this._unknownBoundTextures=!1;for(let e=0;e<r.length;e++)r[e]===this.unknownTexture&&this.bind(null,e)}for(let i=0;i<r.length;i++)r[i]===e&&(this.currentLocation!==i&&(t.activeTexture(t.TEXTURE0+i),this.currentLocation=i),t.bindTexture(e.target,this.emptyTextures[e.target].texture),r[i]=null)}ensureSamplerType(e){const{boundTextures:t,hasIntegerTextures:r,CONTEXT_UID:i}=this;if(r)for(let r=e-1;r>=0;--r){const e=t[r];e&&e._glTextures[i].samplerType!==h.FLOAT&&this.renderer.texture.unbind(e)}}initTexture(e){const t=new _i(this.gl.createTexture());return t.dirtyId=-1,e._glTextures[this.CONTEXT_UID]=t,this.managedTextures.push(e),e.on("dispose",this.destroyTexture,this),t}initTextureType(e,t){t.internalFormat=this.internalFormats[e.type]?.[e.format]??e.format,2===this.webGLVersion&&e.type===l.HALF_FLOAT?t.type=this.gl.HALF_FLOAT:t.type=e.type}updateTexture(e){const t=e._glTextures[this.CONTEXT_UID];if(!t)return;const r=this.renderer;if(this.initTextureType(e,t),e.resource?.upload(r,e,t))t.samplerType!==h.FLOAT&&(this.hasIntegerTextures=!0);else{const i=e.realWidth,a=e.realHeight,n=r.gl;(t.width!==i||t.height!==a||t.dirtyId<0)&&(t.width=i,t.height=a,n.texImage2D(e.target,0,t.internalFormat,i,a,0,e.format,t.type,null))}e.dirtyStyleId!==t.dirtyStyleId&&this.updateTextureStyle(e),t.dirtyId=e.dirtyId}destroyTexture(e,t){const{gl:r}=this;if((e=e.castToBaseTexture())._glTextures[this.CONTEXT_UID]&&(this.unbind(e),r.deleteTexture(e._glTextures[this.CONTEXT_UID].texture),e.off("dispose",this.destroyTexture,this),delete e._glTextures[this.CONTEXT_UID],!t)){const t=this.managedTextures.indexOf(e);-1!==t&&Ie(this.managedTextures,t,1)}}updateTextureStyle(e){const t=e._glTextures[this.CONTEXT_UID];t&&(e.mipmap!==c.POW2&&2===this.webGLVersion||e.isPowerOfTwo?t.mipmap=e.mipmap>=1:t.mipmap=!1,2===this.webGLVersion||e.isPowerOfTwo?t.wrapMode=e.wrapMode:t.wrapMode=d.CLAMP,e.resource?.style(this.renderer,e,t)||this.setStyle(e,t),t.dirtyStyleId=e.dirtyStyleId)}setStyle(e,t){const r=this.gl;if(t.mipmap&&e.mipmap!==c.ON_MANUAL&&r.generateMipmap(e.target),r.texParameteri(e.target,r.TEXTURE_WRAP_S,t.wrapMode),r.texParameteri(e.target,r.TEXTURE_WRAP_T,t.wrapMode),t.mipmap){r.texParameteri(e.target,r.TEXTURE_MIN_FILTER,e.scaleMode===u.LINEAR?r.LINEAR_MIPMAP_LINEAR:r.NEAREST_MIPMAP_NEAREST);const t=this.renderer.context.extensions.anisotropicFiltering;if(t&&e.anisotropicLevel>0&&e.scaleMode===u.LINEAR){const i=Math.min(e.anisotropicLevel,r.getParameter(t.MAX_TEXTURE_MAX_ANISOTROPY_EXT));r.texParameterf(e.target,t.TEXTURE_MAX_ANISOTROPY_EXT,i)}}else r.texParameteri(e.target,r.TEXTURE_MIN_FILTER,e.scaleMode===u.LINEAR?r.LINEAR:r.NEAREST);r.texParameteri(e.target,r.TEXTURE_MAG_FILTER,e.scaleMode===u.LINEAR?r.LINEAR:r.NEAREST)}destroy(){this.renderer=null}}bi.extension={type:Xe.RendererSystem,name:"texture"},Ye.add(bi);class Ti{constructor(e){this.renderer=e}contextChange(){this.gl=this.renderer.gl,this.CONTEXT_UID=this.renderer.CONTEXT_UID}bind(e){const{gl:t,CONTEXT_UID:r}=this,i=e._glTransformFeedbacks[r]||this.createGLTransformFeedback(e);t.bindTransformFeedback(t.TRANSFORM_FEEDBACK,i)}unbind(){const{gl:e}=this;e.bindTransformFeedback(e.TRANSFORM_FEEDBACK,null)}beginTransformFeedback(e,t){const{gl:r,renderer:i}=this;t&&i.shader.bind(t),r.beginTransformFeedback(e)}endTransformFeedback(){const{gl:e}=this;e.endTransformFeedback()}createGLTransformFeedback(e){const{gl:t,renderer:r,CONTEXT_UID:i}=this,a=t.createTransformFeedback();e._glTransformFeedbacks[i]=a,t.bindTransformFeedback(t.TRANSFORM_FEEDBACK,a);for(let a=0;a<e.buffers.length;a++){const n=e.buffers[a];n&&(r.buffer.update(n),n._glBuffers[i].refCount++,t.bindBufferBase(t.TRANSFORM_FEEDBACK_BUFFER,a,n._glBuffers[i].buffer||null))}return t.bindTransformFeedback(t.TRANSFORM_FEEDBACK,null),e.disposeRunner.add(this),a}disposeTransformFeedback(e,t){const r=e._glTransformFeedbacks[this.CONTEXT_UID],i=this.gl;e.disposeRunner.remove(this);const a=this.renderer.buffer;if(a)for(let r=0;r<e.buffers.length;r++){const i=e.buffers[r];if(!i)continue;const n=i._glBuffers[this.CONTEXT_UID];n&&(n.refCount--,0!==n.refCount||t||a.dispose(i,t))}r&&(t||i.deleteTransformFeedback(r),delete e._glTransformFeedbacks[this.CONTEXT_UID])}destroy(){this.renderer=null}}Ti.extension={type:Xe.RendererSystem,name:"transformFeedback"},Ye.add(Ti);class Ai{constructor(e){this.renderer=e}init(e){this.screen=new At(0,0,e.width,e.height),this.element=e.view||b.ADAPTER.createCanvas(),this.resolution=e.resolution||b.RESOLUTION,this.autoDensity=!!e.autoDensity}resizeView(e,t){this.element.width=Math.round(e*this.resolution),this.element.height=Math.round(t*this.resolution);const r=this.element.width/this.resolution,i=this.element.height/this.resolution;this.screen.width=r,this.screen.height=i,this.autoDensity&&(this.element.style.width=`${r}px`,this.element.style.height=`${i}px`),this.renderer.emit("resize",r,i),this.renderer.runners.resize.emit(this.screen.width,this.screen.height)}destroy(e){e&&this.element.parentNode?.removeChild(this.element),this.renderer=null,this.element=null,this.screen=null}}Ai.defaultOptions={width:800,height:600,resolution:b.RESOLUTION,autoDensity:!1},Ai.extension={type:[Xe.RendererSystem,Xe.CanvasRendererSystem],name:"_view"},Ye.add(Ai),b.PREFER_ENV=e.WEBGL2,b.STRICT_TEXTURE_CACHE=!1,b.RENDER_OPTIONS={...pr.defaultOptions,...cr.defaultOptions,...Ai.defaultOptions,...fi.defaultOptions},Object.defineProperties(b,{WRAP_MODE:{get:()=>st.defaultOptions.wrapMode,set(e){Y("7.1.0","settings.WRAP_MODE is deprecated, use BaseTexture.defaultOptions.wrapMode"),st.defaultOptions.wrapMode=e}},SCALE_MODE:{get:()=>st.defaultOptions.scaleMode,set(e){Y("7.1.0","settings.SCALE_MODE is deprecated, use BaseTexture.defaultOptions.scaleMode"),st.defaultOptions.scaleMode=e}},MIPMAP_TEXTURES:{get:()=>st.defaultOptions.mipmap,set(e){Y("7.1.0","settings.MIPMAP_TEXTURES is deprecated, use BaseTexture.defaultOptions.mipmap"),st.defaultOptions.mipmap=e}},ANISOTROPIC_LEVEL:{get:()=>st.defaultOptions.anisotropicLevel,set(e){Y("7.1.0","settings.ANISOTROPIC_LEVEL is deprecated, use BaseTexture.defaultOptions.anisotropicLevel"),st.defaultOptions.anisotropicLevel=e}},FILTER_RESOLUTION:{get:()=>(Y("7.1.0","settings.FILTER_RESOLUTION is deprecated, use Filter.defaultResolution"),dr.defaultResolution),set(e){dr.defaultResolution=e}},FILTER_MULTISAMPLE:{get:()=>(Y("7.1.0","settings.FILTER_MULTISAMPLE is deprecated, use Filter.defaultMultisample"),dr.defaultMultisample),set(e){dr.defaultMultisample=e}},SPRITE_MAX_TEXTURES:{get:()=>hr.defaultMaxTextures,set(e){Y("7.1.0","settings.SPRITE_MAX_TEXTURES is deprecated, use BatchRenderer.defaultMaxTextures"),hr.defaultMaxTextures=e}},SPRITE_BATCH_SIZE:{get:()=>hr.defaultBatchSize,set(e){Y("7.1.0","settings.SPRITE_BATCH_SIZE is deprecated, use BatchRenderer.defaultBatchSize"),hr.defaultBatchSize=e}},CAN_UPLOAD_SAME_BUFFER:{get:()=>hr.canUploadSameBuffer,set(e){Y("7.1.0","settings.CAN_UPLOAD_SAME_BUFFER is deprecated, use BatchRenderer.canUploadSameBuffer"),hr.canUploadSameBuffer=e}},GC_MODE:{get:()=>xi.defaultMode,set(e){Y("7.1.0","settings.GC_MODE is deprecated, use TextureGCSystem.defaultMode"),xi.defaultMode=e}},GC_MAX_IDLE:{get:()=>xi.defaultMaxIdle,set(e){Y("7.1.0","settings.GC_MAX_IDLE is deprecated, use TextureGCSystem.defaultMaxIdle"),xi.defaultMaxIdle=e}},GC_MAX_CHECK_COUNT:{get:()=>xi.defaultCheckCountMax,set(e){Y("7.1.0","settings.GC_MAX_CHECK_COUNT is deprecated, use TextureGCSystem.defaultCheckCountMax"),xi.defaultCheckCountMax=e}},PRECISION_VERTEX:{get:()=>tr.defaultVertexPrecision,set(e){Y("7.1.0","settings.PRECISION_VERTEX is deprecated, use Program.defaultVertexPrecision"),tr.defaultVertexPrecision=e}},PRECISION_FRAGMENT:{get:()=>tr.defaultFragmentPrecision,set(e){Y("7.1.0","settings.PRECISION_FRAGMENT is deprecated, use Program.defaultFragmentPrecision"),tr.defaultFragmentPrecision=e}}});var Ei=(e=>(e[e.INTERACTION=50]="INTERACTION",e[e.HIGH=25]="HIGH",e[e.NORMAL=0]="NORMAL",e[e.LOW=-25]="LOW",e[e.UTILITY=-50]="UTILITY",e))(Ei||{});class Si{constructor(e,t=null,r=0,i=!1){this.next=null,this.previous=null,this._destroyed=!1,this.fn=e,this.context=t,this.priority=r,this.once=i}match(e,t=null){return this.fn===e&&this.context===t}emit(e){this.fn&&(this.context?this.fn.call(this.context,e):this.fn(e));const t=this.next;return this.once&&this.destroy(!0),this._destroyed&&(this.next=null),t}connect(e){this.previous=e,e.next&&(e.next.previous=this),this.next=e.next,e.next=this}destroy(e=!1){this._destroyed=!0,this.fn=null,this.context=null,this.previous&&(this.previous.next=this.next),this.next&&(this.next.previous=this.previous);const t=this.next;return this.next=e?null:t,this.previous=null,t}}const wi=class{constructor(){this.autoStart=!1,this.deltaTime=1,this.lastTime=-1,this.speed=1,this.started=!1,this._requestId=null,this._maxElapsedMS=100,this._minElapsedMS=0,this._protected=!1,this._lastFrame=-1,this._head=new Si(null,null,1/0),this.deltaMS=1/wi.targetFPMS,this.elapsedMS=1/wi.targetFPMS,this._tick=e=>{this._requestId=null,this.started&&(this.update(e),this.started&&null===this._requestId&&this._head.next&&(this._requestId=requestAnimationFrame(this._tick)))}}_requestIfNeeded(){null===this._requestId&&this._head.next&&(this.lastTime=performance.now(),this._lastFrame=this.lastTime,this._requestId=requestAnimationFrame(this._tick))}_cancelIfNeeded(){null!==this._requestId&&(cancelAnimationFrame(this._requestId),this._requestId=null)}_startIfPossible(){this.started?this._requestIfNeeded():this.autoStart&&this.start()}add(e,t,r=Ei.NORMAL){return this._addListener(new Si(e,t,r))}addOnce(e,t,r=Ei.NORMAL){return this._addListener(new Si(e,t,r,!0))}_addListener(e){let t=this._head.next,r=this._head;if(t){for(;t;){if(e.priority>t.priority){e.connect(r);break}r=t,t=t.next}e.previous||e.connect(r)}else e.connect(r);return this._startIfPossible(),this}remove(e,t){let r=this._head.next;for(;r;)r=r.match(e,t)?r.destroy():r.next;return this._head.next||this._cancelIfNeeded(),this}get count(){if(!this._head)return 0;let e=0,t=this._head;for(;t=t.next;)e++;return e}start(){this.started||(this.started=!0,this._requestIfNeeded())}stop(){this.started&&(this.started=!1,this._cancelIfNeeded())}destroy(){if(!this._protected){this.stop();let e=this._head.next;for(;e;)e=e.destroy(!0);this._head.destroy(),this._head=null}}update(e=performance.now()){let t;if(e>this.lastTime){if(t=this.elapsedMS=e-this.lastTime,t>this._maxElapsedMS&&(t=this._maxElapsedMS),t*=this.speed,this._minElapsedMS){const t=e-this._lastFrame|0;if(t<this._minElapsedMS)return;this._lastFrame=e-t%this._minElapsedMS}this.deltaMS=t,this.deltaTime=this.deltaMS*wi.targetFPMS;const r=this._head;let i=r.next;for(;i;)i=i.emit(this.deltaTime);r.next||this._cancelIfNeeded()}else this.deltaTime=this.deltaMS=this.elapsedMS=0;this.lastTime=e}get FPS(){return 1e3/this.elapsedMS}get minFPS(){return 1e3/this._maxElapsedMS}set minFPS(e){const t=Math.min(this.maxFPS,e),r=Math.min(Math.max(0,t)/1e3,wi.targetFPMS);this._maxElapsedMS=1/r}get maxFPS(){return this._minElapsedMS?Math.round(1e3/this._minElapsedMS):0}set maxFPS(e){if(0===e)this._minElapsedMS=0;else{const t=Math.max(this.minFPS,e);this._minElapsedMS=1/(t/1e3)}}static get shared(){if(!wi._shared){const e=wi._shared=new wi;e.autoStart=!0,e._protected=!0}return wi._shared}static get system(){if(!wi._system){const e=wi._system=new wi;e.autoStart=!0,e._protected=!0}return wi._system}};let ki=wi;ki.targetFPMS=.06,Object.defineProperties(b,{TARGET_FPMS:{get:()=>ki.targetFPMS,set(e){Y("7.1.0","settings.TARGET_FPMS is deprecated, use Ticker.targetFPMS"),ki.targetFPMS=e}}});class Ci{static init(e){e=Object.assign({autoStart:!0,sharedTicker:!1},e),Object.defineProperty(this,"ticker",{set(e){this._ticker&&this._ticker.remove(this.render,this),this._ticker=e,e&&e.add(this.render,this,Ei.LOW)},get(){return this._ticker}}),this.stop=()=>{this._ticker.stop()},this.start=()=>{this._ticker.start()},this._ticker=null,this.ticker=e.sharedTicker?ki.shared:new ki,e.autoStart&&this.start()}static destroy(){if(this._ticker){const e=this._ticker;this.ticker=null,e.destroy()}}}Ci.extension=Xe.Application,Ye.add(Ci);const Mi=[];Ye.handleByList(Xe.Renderer,Mi);const Ri="attribute vec2 aVertexPosition;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nuniform vec4 inputSize;\nuniform vec4 outputFrame;\n\nvec4 filterVertexPosition( void )\n{\n    vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;\n\n    return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);\n}\n\nvec2 filterTextureCoord( void )\n{\n    return aVertexPosition * (outputFrame.zw * inputSize.zw);\n}\n\nvoid main(void)\n{\n    gl_Position = filterVertexPosition();\n    vTextureCoord = filterTextureCoord();\n}\n";class Ii{constructor(e){this.renderer=e}contextChange(e){let t;if(1===this.renderer.context.webGLVersion){const r=e.getParameter(e.FRAMEBUFFER_BINDING);e.bindFramebuffer(e.FRAMEBUFFER,null),t=e.getParameter(e.SAMPLES),e.bindFramebuffer(e.FRAMEBUFFER,r)}else{const r=e.getParameter(e.DRAW_FRAMEBUFFER_BINDING);e.bindFramebuffer(e.DRAW_FRAMEBUFFER,null),t=e.getParameter(e.SAMPLES),e.bindFramebuffer(e.DRAW_FRAMEBUFFER,r)}t>=v.HIGH?this.multisample=v.HIGH:t>=v.MEDIUM?this.multisample=v.MEDIUM:t>=v.LOW?this.multisample=v.LOW:this.multisample=v.NONE}destroy(){}}Ii.extension={type:Xe.RendererSystem,name:"_multisample"},Ye.add(Ii);class Pi{constructor(e){this.buffer=e||null,this.updateID=-1,this.byteLength=-1,this.refCount=0}}class Di{constructor(e){this.renderer=e,this.managedBuffers={},this.boundBufferBases={}}destroy(){this.renderer=null}contextChange(){this.disposeAll(!0),this.gl=this.renderer.gl,this.CONTEXT_UID=this.renderer.CONTEXT_UID}bind(e){const{gl:t,CONTEXT_UID:r}=this,i=e._glBuffers[r]||this.createGLBuffer(e);t.bindBuffer(e.type,i.buffer)}unbind(e){const{gl:t}=this;t.bindBuffer(e,null)}bindBufferBase(e,t){const{gl:r,CONTEXT_UID:i}=this;if(this.boundBufferBases[t]!==e){const a=e._glBuffers[i]||this.createGLBuffer(e);this.boundBufferBases[t]=e,r.bindBufferBase(r.UNIFORM_BUFFER,t,a.buffer)}}bindBufferRange(e,t,r){const{gl:i,CONTEXT_UID:a}=this;r=r||0;const n=e._glBuffers[a]||this.createGLBuffer(e);i.bindBufferRange(i.UNIFORM_BUFFER,t||0,n.buffer,256*r,256)}update(e){const{gl:t,CONTEXT_UID:r}=this,i=e._glBuffers[r]||this.createGLBuffer(e);if(e._updateID!==i.updateID)if(i.updateID=e._updateID,t.bindBuffer(e.type,i.buffer),i.byteLength>=e.data.byteLength)t.bufferSubData(e.type,0,e.data);else{const r=e.static?t.STATIC_DRAW:t.DYNAMIC_DRAW;i.byteLength=e.data.byteLength,t.bufferData(e.type,e.data,r)}}dispose(e,t){if(!this.managedBuffers[e.id])return;delete this.managedBuffers[e.id];const r=e._glBuffers[this.CONTEXT_UID],i=this.gl;e.disposeRunner.remove(this),r&&(t||i.deleteBuffer(r.buffer),delete e._glBuffers[this.CONTEXT_UID])}disposeAll(e){const t=Object.keys(this.managedBuffers);for(let r=0;r<t.length;r++)this.dispose(this.managedBuffers[t[r]],e)}createGLBuffer(e){const{CONTEXT_UID:t,gl:r}=this;return e._glBuffers[t]=new Pi(r.createBuffer()),this.managedBuffers[e.id]=e,e.disposeRunner.add(this),e._glBuffers[t]}}Di.extension={type:Xe.RendererSystem,name:"buffer"},Ye.add(Di);class Bi{constructor(e){this.renderer=e}render(e,t){const r=this.renderer;let i,a,n,s;if(t&&(i=t.renderTexture,a=t.clear,n=t.transform,s=t.skipUpdateTransform),this.renderingToScreen=!i,r.runners.prerender.emit(),r.emit("prerender"),r.projection.transform=n,!r.context.isLost){if(i||(this.lastObjectRendered=e),!s){const t=e.enableTempParent();e.updateTransform(),e.disableTempParent(t)}r.renderTexture.bind(i),r.batch.currentRenderer.start(),(a??r.background.clearBeforeRender)&&r.renderTexture.clear(),e.render(r),r.batch.currentRenderer.flush(),i&&(t.blit&&r.framebuffer.blit(),i.baseTexture.update()),r.runners.postrender.emit(),r.projection.transform=null,r.emit("postrender")}}destroy(){this.renderer=null,this.lastObjectRendered=null}}Bi.extension={type:Xe.RendererSystem,name:"objectRenderer"},Ye.add(Bi);const Ni=class extends yi{constructor(e){super(),this.type=t.WEBGL,e=Object.assign({},b.RENDER_OPTIONS,e),this.gl=null,this.CONTEXT_UID=0,this.globalUniforms=new ir({projectionMatrix:new Ct},!0);const r={runners:["init","destroy","contextChange","resolutionChange","reset","update","postrender","prerender","resize"],systems:Ni.__systems,priority:["_view","textureGenerator","background","_plugin","startup","context","state","texture","buffer","geometry","framebuffer","transformFeedback","mask","scissor","stencil","projection","textureGC","filter","renderTexture","batch","objectRenderer","_multisample"]};this.setup(r),"useContextAlpha"in e&&(Y("7.0.0","options.useContextAlpha is deprecated, use options.premultipliedAlpha and options.backgroundAlpha instead"),e.premultipliedAlpha=e.useContextAlpha&&"notMultiplied"!==e.useContextAlpha,e.backgroundAlpha=!1===e.useContextAlpha?1:e.backgroundAlpha),this._plugin.rendererPlugins=Ni.__plugins,this.options=e,this.startup.run(this.options)}static test(e){return!e?.forceCanvas&&(void 0===Z&&(Z=function(){const e={stencil:!0,failIfMajorPerformanceCaveat:b.FAIL_IF_MAJOR_PERFORMANCE_CAVEAT};try{if(!b.ADAPTER.getWebGLRenderingContext())return!1;const t=b.ADAPTER.createCanvas();let r=t.getContext("webgl",e)||t.getContext("experimental-webgl",e);const i=!!r?.getContextAttributes()?.stencil;if(r){const e=r.getExtension("WEBGL_lose_context");e&&e.loseContext()}return r=null,i}catch(e){return!1}}()),Z)}render(e,t){this.objectRenderer.render(e,t)}resize(e,t){this._view.resizeView(e,t)}reset(){return this.runners.reset.emit(),this}clear(){this.renderTexture.bind(),this.renderTexture.clear()}destroy(e=!1){this.runners.destroy.items.reverse(),this.emitWithCustomOptions(this.runners.destroy,{_view:e}),super.destroy()}get plugins(){return this._plugin.plugins}get multisample(){return this._multisample.multisample}get width(){return this._view.element.width}get height(){return this._view.element.height}get resolution(){return this._view.resolution}set resolution(e){this._view.resolution=e,this.runners.resolutionChange.emit(e)}get autoDensity(){return this._view.autoDensity}get view(){return this._view.element}get screen(){return this._view.screen}get lastObjectRendered(){return this.objectRenderer.lastObjectRendered}get renderingToScreen(){return this.objectRenderer.renderingToScreen}get rendererLogId(){return`WebGL ${this.context.webGLVersion}`}get clearBeforeRender(){return Y("7.0.0","renderer.clearBeforeRender has been deprecated, please use renderer.background.clearBeforeRender instead."),this.background.clearBeforeRender}get useContextAlpha(){return Y("7.0.0","renderer.useContextAlpha has been deprecated, please use renderer.context.premultipliedAlpha instead."),this.context.useContextAlpha}get preserveDrawingBuffer(){return Y("7.0.0","renderer.preserveDrawingBuffer has been deprecated, we cannot truly know this unless pixi created the context"),this.context.preserveDrawingBuffer}get backgroundColor(){return Y("7.0.0","renderer.backgroundColor has been deprecated, use renderer.background.color instead."),this.background.color}set backgroundColor(e){Y("7.0.0","renderer.backgroundColor has been deprecated, use renderer.background.color instead."),this.background.color=e}get backgroundAlpha(){return Y("7.0.0","renderer.backgroundAlpha has been deprecated, use renderer.background.alpha instead."),this.background.alpha}set backgroundAlpha(e){Y("7.0.0","renderer.backgroundAlpha has been deprecated, use renderer.background.alpha instead."),this.background.alpha=e}get powerPreference(){return Y("7.0.0","renderer.powerPreference has been deprecated, we can only know this if pixi creates the context"),this.context.powerPreference}generateTexture(e,t){return this.textureGenerator.generateTexture(e,t)}};let Fi=Ni;Fi.extension={type:Xe.Renderer,priority:1},Fi.__plugins={},Fi.__systems={},Ye.handleByMap(Xe.RendererPlugin,Fi.__plugins),Ye.handleByMap(Xe.RendererSystem,Fi.__systems),Ye.add(Fi);class Li extends rt{constructor(e,t){const{width:r,height:i}=t||{};super(r,i),this.items=[],this.itemDirtyIds=[];for(let t=0;t<e;t++){const e=new st;this.items.push(e),this.itemDirtyIds.push(-2)}this.length=e,this._load=null,this.baseTexture=null}initFromArray(e,t){for(let r=0;r<this.length;r++)e[r]&&(e[r].castToBaseTexture?this.addBaseTextureAt(e[r].castToBaseTexture(),r):e[r]instanceof rt?this.addResourceAt(e[r],r):this.addResourceAt(et(e[r],t),r))}dispose(){for(let e=0,t=this.length;e<t;e++)this.items[e].destroy();this.items=null,this.itemDirtyIds=null,this._load=null}addResourceAt(e,t){if(!this.items[t])throw new Error(`Index ${t} is out of bounds`);return e.valid&&!this.valid&&this.resize(e.width,e.height),this.items[t].setResource(e),this}bind(e){if(null!==this.baseTexture)throw new Error("Only one base texture per TextureArray is allowed");super.bind(e);for(let t=0;t<this.length;t++)this.items[t].parentTextureArray=e,this.items[t].on("update",e.update,e)}unbind(e){super.unbind(e);for(let t=0;t<this.length;t++)this.items[t].parentTextureArray=null,this.items[t].off("update",e.update,e)}load(){if(this._load)return this._load;const e=this.items.map((e=>e.resource)).filter((e=>e)).map((e=>e.load()));return this._load=Promise.all(e).then((()=>{const{realWidth:e,realHeight:t}=this.items[0];return this.resize(e,t),Promise.resolve(this)})),this._load}}const Oi=class extends Li{constructor(e,t){const{width:r,height:i,autoLoad:a,linkBaseTexture:n}=t||{};if(e&&e.length!==Oi.SIDES)throw new Error(`Invalid length. Got ${e.length}, expected 6`);super(6,{width:r,height:i});for(let e=0;e<Oi.SIDES;e++)this.items[e].target=o.TEXTURE_CUBE_MAP_POSITIVE_X+e;this.linkBaseTexture=!1!==n,e&&this.initFromArray(e,t),!1!==a&&this.load()}bind(e){super.bind(e),e.target=o.TEXTURE_CUBE_MAP}addBaseTextureAt(e,t,r){if(void 0===r&&(r=this.linkBaseTexture),!this.items[t])throw new Error(`Index ${t} is out of bounds`);if(!this.linkBaseTexture||e.parentTextureArray||Object.keys(e._glTextures).length>0){if(!e.resource)throw new Error("CubeResource does not support copying of renderTexture.");this.addResourceAt(e.resource,t)}else e.target=o.TEXTURE_CUBE_MAP_POSITIVE_X+t,e.parentTextureArray=this.baseTexture,this.items[t]=e;return e.valid&&!this.valid&&this.resize(e.realWidth,e.realHeight),this.items[t]=e,this}upload(e,t,r){const i=this.itemDirtyIds;for(let a=0;a<Oi.SIDES;a++){const n=this.items[a];(i[a]<n.dirtyId||r.dirtyId<t.dirtyId)&&(n.valid&&n.resource?(n.resource.upload(e,n,r),i[a]=n.dirtyId):i[a]<-1&&(e.gl.texImage2D(n.target,0,r.internalFormat,t.realWidth,t.realHeight,0,t.format,r.type,null),i[a]=-1))}return!0}static test(e){return Array.isArray(e)&&e.length===Oi.SIDES}};let zi=Oi;zi.SIDES=6;class Gi extends xr{constructor(e,t){let r,i;t=t||{},"string"==typeof e?(r=Gi.EMPTY,i=e):(r=e,i=null),super(r),this.url=i,this.crossOrigin=t.crossOrigin??!0,this.alphaMode="number"==typeof t.alphaMode?t.alphaMode:null,this._load=null,!1!==t.autoLoad&&this.load()}load(){return this._load||(this._load=new Promise((async(e,t)=>{if(null!==this.url)try{const t=await b.ADAPTER.fetch(this.url,{mode:this.crossOrigin?"cors":"no-cors"});if(this.destroyed)return;const r=await t.blob();if(this.destroyed)return;const i=await createImageBitmap(r,{premultiplyAlpha:null===this.alphaMode||this.alphaMode===m.UNPACK?"premultiply":"none"});if(this.destroyed)return;this.source=i,this.update(),e(this)}catch(e){if(this.destroyed)return;t(e),this.onError.emit(e)}else e(this)}))),this._load}upload(e,t,r){return this.source instanceof ImageBitmap?("number"==typeof this.alphaMode&&(t.alphaMode=this.alphaMode),super.upload(e,t,r)):(this.load(),!1)}dispose(){this.source instanceof ImageBitmap&&this.source.close(),super.dispose(),this._load=null}static test(e){return!!globalThis.createImageBitmap&&"undefined"!=typeof ImageBitmap&&("string"==typeof e||e instanceof ImageBitmap)}static get EMPTY(){return Gi._EMPTY=Gi._EMPTY??b.ADAPTER.createCanvas(0,0),Gi._EMPTY}}const Ui=class extends xr{constructor(e,t){t=t||{},super(b.ADAPTER.createCanvas()),this._width=0,this._height=0,this.svg=e,this.scale=t.scale||1,this._overrideWidth=t.width,this._overrideHeight=t.height,this._resolve=null,this._crossorigin=t.crossorigin,this._load=null,!1!==t.autoLoad&&this.load()}load(){return this._load||(this._load=new Promise((e=>{if(this._resolve=()=>{this.resize(this.source.width,this.source.height),e(this)},Ui.SVG_XML.test(this.svg.trim())){if(!btoa)throw new Error("Your browser doesn't support base64 conversions.");this.svg=`data:image/svg+xml;base64,${btoa(unescape(encodeURIComponent(this.svg)))}`}this._loadSvg()}))),this._load}_loadSvg(){const e=new Image;xr.crossOrigin(e,this.svg,this._crossorigin),e.src=this.svg,e.onerror=t=>{this._resolve&&(e.onerror=null,this.onError.emit(t))},e.onload=()=>{if(!this._resolve)return;const t=e.width,r=e.height;if(!t||!r)throw new Error("The SVG image must have width and height defined (in pixels), canvas API needs them.");let i=t*this.scale,a=r*this.scale;(this._overrideWidth||this._overrideHeight)&&(i=this._overrideWidth||this._overrideHeight/r*t,a=this._overrideHeight||this._overrideWidth/t*r),i=Math.round(i),a=Math.round(a);const n=this.source;n.width=i,n.height=a,n._pixiId=`canvas_${Be()}`,n.getContext("2d").drawImage(e,0,0,t,r,0,0,i,a),this._resolve(),this._resolve=null}}static getSize(e){const t=Ui.SVG_SIZE.exec(e),r={};return t&&(r[t[1]]=Math.round(parseFloat(t[3])),r[t[5]]=Math.round(parseFloat(t[7]))),r}dispose(){super.dispose(),this._resolve=null,this._crossorigin=null}static test(e,t){return"svg"===t||"string"==typeof e&&e.startsWith("data:image/svg+xml")||"string"==typeof e&&Ui.SVG_XML.test(e)}};let Hi=Ui;Hi.SVG_XML=/^(<\?xml[^?]+\?>)?\s*(<!--[^(-->)]*-->)?\s*\<svg/m,Hi.SVG_SIZE=/<svg[^>]*(?:\s(width|height)=('|")(\d*(?:\.\d+)?)(?:px)?('|"))[^>]*(?:\s(width|height)=('|")(\d*(?:\.\d+)?)(?:px)?('|"))[^>]*>/i;const Vi=class extends xr{constructor(e,t){if(t=t||{},!(e instanceof HTMLVideoElement)){const r=document.createElement("video");r.setAttribute("preload","auto"),r.setAttribute("webkit-playsinline",""),r.setAttribute("playsinline",""),"string"==typeof e&&(e=[e]);const i=e[0].src||e[0];xr.crossOrigin(r,i,t.crossorigin);for(let t=0;t<e.length;++t){const i=document.createElement("source");let{src:a,mime:n}=e[t];a=a||e[t];const s=a.split("?").shift().toLowerCase(),o=s.slice(s.lastIndexOf(".")+1);n=n||Vi.MIME_TYPES[o]||`video/${o}`,i.src=a,i.type=n,r.appendChild(i)}e=r}super(e),this.noSubImage=!0,this._autoUpdate=!0,this._isConnectedToTicker=!1,this._updateFPS=t.updateFPS||0,this._msToNextUpdate=0,this.autoPlay=!1!==t.autoPlay,this._load=null,this._resolve=null,this._onCanPlay=this._onCanPlay.bind(this),this._onError=this._onError.bind(this),!1!==t.autoLoad&&this.load()}update(e=0){if(!this.destroyed){const e=ki.shared.elapsedMS*this.source.playbackRate;this._msToNextUpdate=Math.floor(this._msToNextUpdate-e),(!this._updateFPS||this._msToNextUpdate<=0)&&(super.update(),this._msToNextUpdate=this._updateFPS?Math.floor(1e3/this._updateFPS):0)}}load(){if(this._load)return this._load;const e=this.source;return(e.readyState===e.HAVE_ENOUGH_DATA||e.readyState===e.HAVE_FUTURE_DATA)&&e.width&&e.height&&(e.complete=!0),e.addEventListener("play",this._onPlayStart.bind(this)),e.addEventListener("pause",this._onPlayStop.bind(this)),this._isSourceReady()?this._onCanPlay():(e.addEventListener("canplay",this._onCanPlay),e.addEventListener("canplaythrough",this._onCanPlay),e.addEventListener("error",this._onError,!0)),this._load=new Promise((t=>{this.valid?t(this):(this._resolve=t,e.load())})),this._load}_onError(e){this.source.removeEventListener("error",this._onError,!0),this.onError.emit(e)}_isSourcePlaying(){const e=this.source;return!e.paused&&!e.ended&&this._isSourceReady()}_isSourceReady(){return this.source.readyState>2}_onPlayStart(){this.valid||this._onCanPlay(),this.autoUpdate&&!this._isConnectedToTicker&&(ki.shared.add(this.update,this),this._isConnectedToTicker=!0)}_onPlayStop(){this._isConnectedToTicker&&(ki.shared.remove(this.update,this),this._isConnectedToTicker=!1)}_onCanPlay(){const e=this.source;e.removeEventListener("canplay",this._onCanPlay),e.removeEventListener("canplaythrough",this._onCanPlay);const t=this.valid;this.resize(e.videoWidth,e.videoHeight),!t&&this._resolve&&(this._resolve(this),this._resolve=null),this._isSourcePlaying()?this._onPlayStart():this.autoPlay&&e.play()}dispose(){this._isConnectedToTicker&&(ki.shared.remove(this.update,this),this._isConnectedToTicker=!1);const e=this.source;e&&(e.removeEventListener("error",this._onError,!0),e.pause(),e.src="",e.load()),super.dispose()}get autoUpdate(){return this._autoUpdate}set autoUpdate(e){e!==this._autoUpdate&&(this._autoUpdate=e,!this._autoUpdate&&this._isConnectedToTicker?(ki.shared.remove(this.update,this),this._isConnectedToTicker=!1):this._autoUpdate&&!this._isConnectedToTicker&&this._isSourcePlaying()&&(ki.shared.add(this.update,this),this._isConnectedToTicker=!0))}get updateFPS(){return this._updateFPS}set updateFPS(e){e!==this._updateFPS&&(this._updateFPS=e)}static test(e,t){return globalThis.HTMLVideoElement&&e instanceof HTMLVideoElement||Vi.TYPES.includes(t)}};let ji=Vi;ji.TYPES=["mp4","m4v","webm","ogg","ogv","h264","avi","mov"],ji.MIME_TYPES={ogv:"video/ogg",mov:"video/quicktime",m4v:"video/mp4"},Qe.push(Gi,_r,class extends xr{constructor(e){super(e)}static test(e){const{OffscreenCanvas:t}=globalThis;return!!(t&&e instanceof t)||globalThis.HTMLCanvasElement&&e instanceof HTMLCanvasElement}},ji,Hi,it,zi,class extends Li{constructor(e,t){const{width:r,height:i}=t||{};let a,n;Array.isArray(e)?(a=e,n=e.length):n=e,super(n,{width:r,height:i}),a&&this.initFromArray(a,t)}addBaseTextureAt(e,t){if(!e.resource)throw new Error("ArrayResource does not support RenderTexture");return this.addResourceAt(e.resource,t),this}bind(e){super.bind(e),e.target=o.TEXTURE_2D_ARRAY}upload(e,t,r){const{length:i,itemDirtyIds:a,items:n}=this,{gl:s}=e;r.dirtyId<0&&s.texImage3D(s.TEXTURE_2D_ARRAY,0,r.internalFormat,this._width,this._height,i,0,t.format,r.type,null);for(let e=0;e<i;e++){const i=n[e];a[e]<i.dirtyId&&(a[e]=i.dirtyId,i.valid&&s.texSubImage3D(s.TEXTURE_2D_ARRAY,0,0,0,e,i.resource.width,i.resource.height,1,t.format,r.type,i.resource.source))}return!0}});class Xi{constructor(){this.minX=1/0,this.minY=1/0,this.maxX=-1/0,this.maxY=-1/0,this.rect=null,this.updateID=-1}isEmpty(){return this.minX>this.maxX||this.minY>this.maxY}clear(){this.minX=1/0,this.minY=1/0,this.maxX=-1/0,this.maxY=-1/0}getRectangle(e){return this.minX>this.maxX||this.minY>this.maxY?At.EMPTY:((e=e||new At(0,0,1,1)).x=this.minX,e.y=this.minY,e.width=this.maxX-this.minX,e.height=this.maxY-this.minY,e)}addPoint(e){this.minX=Math.min(this.minX,e.x),this.maxX=Math.max(this.maxX,e.x),this.minY=Math.min(this.minY,e.y),this.maxY=Math.max(this.maxY,e.y)}addPointMatrix(e,t){const{a:r,b:i,c:a,d:n,tx:s,ty:o}=e,l=r*t.x+a*t.y+s,h=i*t.x+n*t.y+o;this.minX=Math.min(this.minX,l),this.maxX=Math.max(this.maxX,l),this.minY=Math.min(this.minY,h),this.maxY=Math.max(this.maxY,h)}addQuad(e){let t=this.minX,r=this.minY,i=this.maxX,a=this.maxY,n=e[0],s=e[1];t=n<t?n:t,r=s<r?s:r,i=n>i?n:i,a=s>a?s:a,n=e[2],s=e[3],t=n<t?n:t,r=s<r?s:r,i=n>i?n:i,a=s>a?s:a,n=e[4],s=e[5],t=n<t?n:t,r=s<r?s:r,i=n>i?n:i,a=s>a?s:a,n=e[6],s=e[7],t=n<t?n:t,r=s<r?s:r,i=n>i?n:i,a=s>a?s:a,this.minX=t,this.minY=r,this.maxX=i,this.maxY=a}addFrame(e,t,r,i,a){this.addFrameMatrix(e.worldTransform,t,r,i,a)}addFrameMatrix(e,t,r,i,a){const n=e.a,s=e.b,o=e.c,l=e.d,h=e.tx,u=e.ty;let d=this.minX,c=this.minY,m=this.maxX,f=this.maxY,p=n*t+o*r+h,g=s*t+l*r+u;d=p<d?p:d,c=g<c?g:c,m=p>m?p:m,f=g>f?g:f,p=n*i+o*r+h,g=s*i+l*r+u,d=p<d?p:d,c=g<c?g:c,m=p>m?p:m,f=g>f?g:f,p=n*t+o*a+h,g=s*t+l*a+u,d=p<d?p:d,c=g<c?g:c,m=p>m?p:m,f=g>f?g:f,p=n*i+o*a+h,g=s*i+l*a+u,d=p<d?p:d,c=g<c?g:c,m=p>m?p:m,f=g>f?g:f,this.minX=d,this.minY=c,this.maxX=m,this.maxY=f}addVertexData(e,t,r){let i=this.minX,a=this.minY,n=this.maxX,s=this.maxY;for(let o=t;o<r;o+=2){const t=e[o],r=e[o+1];i=t<i?t:i,a=r<a?r:a,n=t>n?t:n,s=r>s?r:s}this.minX=i,this.minY=a,this.maxX=n,this.maxY=s}addVertices(e,t,r,i){this.addVerticesMatrix(e.worldTransform,t,r,i)}addVerticesMatrix(e,t,r,i,a=0,n=a){const s=e.a,o=e.b,l=e.c,h=e.d,u=e.tx,d=e.ty;let c=this.minX,m=this.minY,f=this.maxX,p=this.maxY;for(let e=r;e<i;e+=2){const r=t[e],i=t[e+1],g=s*r+l*i+u,y=h*i+o*r+d;c=Math.min(c,g-a),f=Math.max(f,g+a),m=Math.min(m,y-n),p=Math.max(p,y+n)}this.minX=c,this.minY=m,this.maxX=f,this.maxY=p}addBounds(e){const t=this.minX,r=this.minY,i=this.maxX,a=this.maxY;this.minX=e.minX<t?e.minX:t,this.minY=e.minY<r?e.minY:r,this.maxX=e.maxX>i?e.maxX:i,this.maxY=e.maxY>a?e.maxY:a}addBoundsMask(e,t){const r=e.minX>t.minX?e.minX:t.minX,i=e.minY>t.minY?e.minY:t.minY,a=e.maxX<t.maxX?e.maxX:t.maxX,n=e.maxY<t.maxY?e.maxY:t.maxY;if(r<=a&&i<=n){const e=this.minX,t=this.minY,s=this.maxX,o=this.maxY;this.minX=r<e?r:e,this.minY=i<t?i:t,this.maxX=a>s?a:s,this.maxY=n>o?n:o}}addBoundsMatrix(e,t){this.addFrameMatrix(t,e.minX,e.minY,e.maxX,e.maxY)}addBoundsArea(e,t){const r=e.minX>t.x?e.minX:t.x,i=e.minY>t.y?e.minY:t.y,a=e.maxX<t.x+t.width?e.maxX:t.x+t.width,n=e.maxY<t.y+t.height?e.maxY:t.y+t.height;if(r<=a&&i<=n){const e=this.minX,t=this.minY,s=this.maxX,o=this.maxY;this.minX=r<e?r:e,this.minY=i<t?i:t,this.maxX=a>s?a:s,this.maxY=n>o?n:o}}pad(e=0,t=e){this.isEmpty()||(this.minX-=e,this.maxX+=e,this.minY-=t,this.maxY+=t)}addFramePad(e,t,r,i,a,n){e-=a,t-=n,r+=a,i+=n,this.minX=this.minX<e?this.minX:e,this.maxX=this.maxX>r?this.maxX:r,this.minY=this.minY<t?this.minY:t,this.maxY=this.maxY>i?this.maxY:i}}class Ki extends G{constructor(){super(),this.tempDisplayObjectParent=null,this.transform=new zt,this.alpha=1,this.visible=!0,this.renderable=!0,this.cullable=!1,this.cullArea=null,this.parent=null,this.worldAlpha=1,this._lastSortedIndex=0,this._zIndex=0,this.filterArea=null,this.filters=null,this._enabledFilters=null,this._bounds=new Xi,this._localBounds=null,this._boundsID=0,this._boundsRect=null,this._localBoundsRect=null,this._mask=null,this._maskRefCount=0,this._destroyed=!1,this.isSprite=!1,this.isMask=!1}static mixin(e){const t=Object.keys(e);for(let r=0;r<t.length;++r){const i=t[r];Object.defineProperty(Ki.prototype,i,Object.getOwnPropertyDescriptor(e,i))}}get destroyed(){return this._destroyed}_recursivePostUpdateTransform(){this.parent?(this.parent._recursivePostUpdateTransform(),this.transform.updateTransform(this.parent.transform)):this.transform.updateTransform(this._tempDisplayObjectParent.transform)}updateTransform(){this._boundsID++,this.transform.updateTransform(this.parent.transform),this.worldAlpha=this.alpha*this.parent.worldAlpha}getBounds(e,t){return e||(this.parent?(this._recursivePostUpdateTransform(),this.updateTransform()):(this.parent=this._tempDisplayObjectParent,this.updateTransform(),this.parent=null)),this._bounds.updateID!==this._boundsID&&(this.calculateBounds(),this._bounds.updateID=this._boundsID),t||(this._boundsRect||(this._boundsRect=new At),t=this._boundsRect),this._bounds.getRectangle(t)}getLocalBounds(e){e||(this._localBoundsRect||(this._localBoundsRect=new At),e=this._localBoundsRect),this._localBounds||(this._localBounds=new Xi);const t=this.transform,r=this.parent;this.parent=null,this.transform=this._tempDisplayObjectParent.transform;const i=this._bounds,a=this._boundsID;this._bounds=this._localBounds;const n=this.getBounds(!1,e);return this.parent=r,this.transform=t,this._bounds=i,this._bounds.updateID+=this._boundsID-a,n}toGlobal(e,t,r=!1){return r||(this._recursivePostUpdateTransform(),this.parent?this.displayObjectUpdateTransform():(this.parent=this._tempDisplayObjectParent,this.displayObjectUpdateTransform(),this.parent=null)),this.worldTransform.apply(e,t)}toLocal(e,t,r,i){return t&&(e=t.toGlobal(e,r,i)),i||(this._recursivePostUpdateTransform(),this.parent?this.displayObjectUpdateTransform():(this.parent=this._tempDisplayObjectParent,this.displayObjectUpdateTransform(),this.parent=null)),this.worldTransform.applyInverse(e,r)}setParent(e){if(!e||!e.addChild)throw new Error("setParent: Argument must be a Container");return e.addChild(this),e}removeFromParent(){this.parent?.removeChild(this)}setTransform(e=0,t=0,r=1,i=1,a=0,n=0,s=0,o=0,l=0){return this.position.x=e,this.position.y=t,this.scale.x=r||1,this.scale.y=i||1,this.rotation=a,this.skew.x=n,this.skew.y=s,this.pivot.x=o,this.pivot.y=l,this}destroy(e){this.removeFromParent(),this._destroyed=!0,this.transform=null,this.parent=null,this._bounds=null,this.mask=null,this.cullArea=null,this.filters=null,this.filterArea=null,this.hitArea=null,this.eventMode="auto",this.interactiveChildren=!1,this.emit("destroyed"),this.removeAllListeners()}get _tempDisplayObjectParent(){return null===this.tempDisplayObjectParent&&(this.tempDisplayObjectParent=new Wi),this.tempDisplayObjectParent}enableTempParent(){const e=this.parent;return this.parent=this._tempDisplayObjectParent,e}disableTempParent(e){this.parent=e}get x(){return this.position.x}set x(e){this.transform.position.x=e}get y(){return this.position.y}set y(e){this.transform.position.y=e}get worldTransform(){return this.transform.worldTransform}get localTransform(){return this.transform.localTransform}get position(){return this.transform.position}set position(e){this.transform.position.copyFrom(e)}get scale(){return this.transform.scale}set scale(e){this.transform.scale.copyFrom(e)}get pivot(){return this.transform.pivot}set pivot(e){this.transform.pivot.copyFrom(e)}get skew(){return this.transform.skew}set skew(e){this.transform.skew.copyFrom(e)}get rotation(){return this.transform.rotation}set rotation(e){this.transform.rotation=e}get angle(){return this.transform.rotation*vt}set angle(e){this.transform.rotation=e*xt}get zIndex(){return this._zIndex}set zIndex(e){this._zIndex=e,this.parent&&(this.parent.sortDirty=!0)}get worldVisible(){let e=this;do{if(!e.visible)return!1;e=e.parent}while(e);return!0}get mask(){return this._mask}set mask(e){if(this._mask!==e){if(this._mask){const e=this._mask.isMaskData?this._mask.maskObject:this._mask;e&&(e._maskRefCount--,0===e._maskRefCount&&(e.renderable=!0,e.isMask=!1))}if(this._mask=e,this._mask){const e=this._mask.isMaskData?this._mask.maskObject:this._mask;e&&(0===e._maskRefCount&&(e.renderable=!1,e.isMask=!0),e._maskRefCount++)}}}}class Wi extends Ki{constructor(){super(...arguments),this.sortDirty=null}}Ki.prototype.displayObjectUpdateTransform=Ki.prototype.updateTransform;const Yi=new Ct;function Zi(e,t){return e.zIndex===t.zIndex?e._lastSortedIndex-t._lastSortedIndex:e.zIndex-t.zIndex}const Ji=class extends Ki{constructor(){super(),this.children=[],this.sortableChildren=Ji.defaultSortableChildren,this.sortDirty=!1}onChildrenChange(e){}addChild(...e){if(e.length>1)for(let t=0;t<e.length;t++)this.addChild(e[t]);else{const t=e[0];t.parent&&t.parent.removeChild(t),t.parent=this,this.sortDirty=!0,t.transform._parentID=-1,this.children.push(t),this._boundsID++,this.onChildrenChange(this.children.length-1),this.emit("childAdded",t,this,this.children.length-1),t.emit("added",this)}return e[0]}addChildAt(e,t){if(t<0||t>this.children.length)throw new Error(`${e}addChildAt: The index ${t} supplied is out of bounds ${this.children.length}`);return e.parent&&e.parent.removeChild(e),e.parent=this,this.sortDirty=!0,e.transform._parentID=-1,this.children.splice(t,0,e),this._boundsID++,this.onChildrenChange(t),e.emit("added",this),this.emit("childAdded",e,this,t),e}swapChildren(e,t){if(e===t)return;const r=this.getChildIndex(e),i=this.getChildIndex(t);this.children[r]=t,this.children[i]=e,this.onChildrenChange(r<i?r:i)}getChildIndex(e){const t=this.children.indexOf(e);if(-1===t)throw new Error("The supplied DisplayObject must be a child of the caller");return t}setChildIndex(e,t){if(t<0||t>=this.children.length)throw new Error(`The index ${t} supplied is out of bounds ${this.children.length}`);const r=this.getChildIndex(e);Ie(this.children,r,1),this.children.splice(t,0,e),this.onChildrenChange(t)}getChildAt(e){if(e<0||e>=this.children.length)throw new Error(`getChildAt: Index (${e}) does not exist.`);return this.children[e]}removeChild(...e){if(e.length>1)for(let t=0;t<e.length;t++)this.removeChild(e[t]);else{const t=e[0],r=this.children.indexOf(t);if(-1===r)return null;t.parent=null,t.transform._parentID=-1,Ie(this.children,r,1),this._boundsID++,this.onChildrenChange(r),t.emit("removed",this),this.emit("childRemoved",t,this,r)}return e[0]}removeChildAt(e){const t=this.getChildAt(e);return t.parent=null,t.transform._parentID=-1,Ie(this.children,e,1),this._boundsID++,this.onChildrenChange(e),t.emit("removed",this),this.emit("childRemoved",t,this,e),t}removeChildren(e=0,t=this.children.length){const r=e,i=t-r;let a;if(i>0&&i<=t){a=this.children.splice(r,i);for(let e=0;e<a.length;++e)a[e].parent=null,a[e].transform&&(a[e].transform._parentID=-1);this._boundsID++,this.onChildrenChange(e);for(let e=0;e<a.length;++e)a[e].emit("removed",this),this.emit("childRemoved",a[e],this,e);return a}if(0===i&&0===this.children.length)return[];throw new RangeError("removeChildren: numeric values are outside the acceptable range.")}sortChildren(){let e=!1;for(let t=0,r=this.children.length;t<r;++t){const r=this.children[t];r._lastSortedIndex=t,e||0===r.zIndex||(e=!0)}e&&this.children.length>1&&this.children.sort(Zi),this.sortDirty=!1}updateTransform(){this.sortableChildren&&this.sortDirty&&this.sortChildren(),this._boundsID++,this.transform.updateTransform(this.parent.transform),this.worldAlpha=this.alpha*this.parent.worldAlpha;for(let e=0,t=this.children.length;e<t;++e){const t=this.children[e];t.visible&&t.updateTransform()}}calculateBounds(){this._bounds.clear(),this._calculateBounds();for(let e=0;e<this.children.length;e++){const t=this.children[e];if(t.visible&&t.renderable)if(t.calculateBounds(),t._mask){const e=t._mask.isMaskData?t._mask.maskObject:t._mask;e?(e.calculateBounds(),this._bounds.addBoundsMask(t._bounds,e._bounds)):this._bounds.addBounds(t._bounds)}else t.filterArea?this._bounds.addBoundsArea(t._bounds,t.filterArea):this._bounds.addBounds(t._bounds)}this._bounds.updateID=this._boundsID}getLocalBounds(e,t=!1){const r=super.getLocalBounds(e);if(!t)for(let e=0,t=this.children.length;e<t;++e){const t=this.children[e];t.visible&&t.updateTransform()}return r}_calculateBounds(){}_renderWithCulling(e){const t=e.renderTexture.sourceFrame;if(!(t.width>0&&t.height>0))return;let r,i;this.cullArea?(r=this.cullArea,i=this.worldTransform):this._render!==Ji.prototype._render&&(r=this.getBounds(!0));const a=e.projection.transform;if(a&&(i?(i=Yi.copyFrom(i),i.prepend(a)):i=a),r&&t.intersects(r,i))this._render(e);else if(this.cullArea)return;for(let t=0,r=this.children.length;t<r;++t){const r=this.children[t],i=r.cullable;r.cullable=i||!this.cullArea,r.render(e),r.cullable=i}}render(e){if(this.visible&&!(this.worldAlpha<=0)&&this.renderable)if(this._mask||this.filters?.length)this.renderAdvanced(e);else if(this.cullable)this._renderWithCulling(e);else{this._render(e);for(let t=0,r=this.children.length;t<r;++t)this.children[t].render(e)}}renderAdvanced(e){const t=this.filters,r=this._mask;if(t){this._enabledFilters||(this._enabledFilters=[]),this._enabledFilters.length=0;for(let e=0;e<t.length;e++)t[e].enabled&&this._enabledFilters.push(t[e])}const i=t&&this._enabledFilters?.length||r&&(!r.isMaskData||r.enabled&&(r.autoDetect||r.type!==y.NONE));if(i&&e.batch.flush(),t&&this._enabledFilters?.length&&e.filter.push(this,this._enabledFilters),r&&e.mask.push(this,this._mask),this.cullable)this._renderWithCulling(e);else{this._render(e);for(let t=0,r=this.children.length;t<r;++t)this.children[t].render(e)}i&&e.batch.flush(),r&&e.mask.pop(this),t&&this._enabledFilters?.length&&e.filter.pop()}_render(e){}destroy(e){super.destroy(),this.sortDirty=!1;const t="boolean"==typeof e?e:e?.children,r=this.removeChildren(0,this.children.length);if(t)for(let t=0;t<r.length;++t)r[t].destroy(e)}get width(){return this.scale.x*this.getLocalBounds().width}set width(e){const t=this.getLocalBounds().width;this.scale.x=0!==t?e/t:1,this._width=e}get height(){return this.scale.y*this.getLocalBounds().height}set height(e){const t=this.getLocalBounds().height;this.scale.y=0!==t?e/t:1,this._height=e}};let $i=Ji;$i.defaultSortableChildren=!1,$i.prototype.containerUpdateTransform=$i.prototype.updateTransform,Object.defineProperties(b,{SORTABLE_CHILDREN:{get:()=>$i.defaultSortableChildren,set(e){Y("7.1.0","settings.SORTABLE_CHILDREN is deprecated, use Container.defaultSortableChildren"),$i.defaultSortableChildren=e}}});const qi=new bt,Qi=new Uint16Array([0,1,2,0,2,3]);class ea extends $i{constructor(e){super(),this._anchor=new Lt(this._onAnchorUpdate,this,e?e.defaultAnchor.x:0,e?e.defaultAnchor.y:0),this._texture=null,this._width=0,this._height=0,this._tintColor=new Ee(16777215),this._tintRGB=null,this.tint=16777215,this.blendMode=a.NORMAL,this._cachedTint=16777215,this.uvs=null,this.texture=e||Er.EMPTY,this.vertexData=new Float32Array(8),this.vertexTrimmedData=null,this._transformID=-1,this._textureID=-1,this._transformTrimmedID=-1,this._textureTrimmedID=-1,this.indices=Qi,this.pluginName="batch",this.isSprite=!0,this._roundPixels=b.ROUND_PIXELS}_onTextureUpdate(){this._textureID=-1,this._textureTrimmedID=-1,this._cachedTint=16777215,this._width&&(this.scale.x=Pe(this.scale.x)*this._width/this._texture.orig.width),this._height&&(this.scale.y=Pe(this.scale.y)*this._height/this._texture.orig.height)}_onAnchorUpdate(){this._transformID=-1,this._transformTrimmedID=-1}calculateVertices(){const e=this._texture;if(this._transformID===this.transform._worldID&&this._textureID===e._updateID)return;this._textureID!==e._updateID&&(this.uvs=this._texture._uvs.uvsFloat32),this._transformID=this.transform._worldID,this._textureID=e._updateID;const t=this.transform.worldTransform,r=t.a,i=t.b,a=t.c,n=t.d,s=t.tx,o=t.ty,l=this.vertexData,h=e.trim,u=e.orig,d=this._anchor;let c=0,m=0,f=0,p=0;if(h?(m=h.x-d._x*u.width,c=m+h.width,p=h.y-d._y*u.height,f=p+h.height):(m=-d._x*u.width,c=m+u.width,p=-d._y*u.height,f=p+u.height),l[0]=r*m+a*p+s,l[1]=n*p+i*m+o,l[2]=r*c+a*p+s,l[3]=n*p+i*c+o,l[4]=r*c+a*f+s,l[5]=n*f+i*c+o,l[6]=r*m+a*f+s,l[7]=n*f+i*m+o,this._roundPixels){const e=b.RESOLUTION;for(let t=0;t<l.length;++t)l[t]=Math.round(l[t]*e)/e}}calculateTrimmedVertices(){if(this.vertexTrimmedData){if(this._transformTrimmedID===this.transform._worldID&&this._textureTrimmedID===this._texture._updateID)return}else this.vertexTrimmedData=new Float32Array(8);this._transformTrimmedID=this.transform._worldID,this._textureTrimmedID=this._texture._updateID;const e=this._texture,t=this.vertexTrimmedData,r=e.orig,i=this._anchor,a=this.transform.worldTransform,n=a.a,s=a.b,o=a.c,l=a.d,h=a.tx,u=a.ty,d=-i._x*r.width,c=d+r.width,m=-i._y*r.height,f=m+r.height;t[0]=n*d+o*m+h,t[1]=l*m+s*d+u,t[2]=n*c+o*m+h,t[3]=l*m+s*c+u,t[4]=n*c+o*f+h,t[5]=l*f+s*c+u,t[6]=n*d+o*f+h,t[7]=l*f+s*d+u}_render(e){this.calculateVertices(),e.batch.setObjectRenderer(e.plugins[this.pluginName]),e.plugins[this.pluginName].render(this)}_calculateBounds(){const e=this._texture.trim,t=this._texture.orig;!e||e.width===t.width&&e.height===t.height?(this.calculateVertices(),this._bounds.addQuad(this.vertexData)):(this.calculateTrimmedVertices(),this._bounds.addQuad(this.vertexTrimmedData))}getLocalBounds(e){return 0===this.children.length?(this._localBounds||(this._localBounds=new Xi),this._localBounds.minX=this._texture.orig.width*-this._anchor._x,this._localBounds.minY=this._texture.orig.height*-this._anchor._y,this._localBounds.maxX=this._texture.orig.width*(1-this._anchor._x),this._localBounds.maxY=this._texture.orig.height*(1-this._anchor._y),e||(this._localBoundsRect||(this._localBoundsRect=new At),e=this._localBoundsRect),this._localBounds.getRectangle(e)):super.getLocalBounds.call(this,e)}containsPoint(e){this.worldTransform.applyInverse(e,qi);const t=this._texture.orig.width,r=this._texture.orig.height,i=-t*this.anchor.x;let a=0;return qi.x>=i&&qi.x<i+t&&(a=-r*this.anchor.y,qi.y>=a&&qi.y<a+r)}destroy(e){if(super.destroy(e),this._texture.off("update",this._onTextureUpdate,this),this._anchor=null,"boolean"==typeof e?e:e?.texture){const t="boolean"==typeof e?e:e?.baseTexture;this._texture.destroy(!!t)}this._texture=null}static from(e,t){const r=e instanceof Er?e:Er.from(e,t);return new ea(r)}set roundPixels(e){this._roundPixels!==e&&(this._transformID=-1),this._roundPixels=e}get roundPixels(){return this._roundPixels}get width(){return Math.abs(this.scale.x)*this._texture.orig.width}set width(e){const t=Pe(this.scale.x)||1;this.scale.x=t*e/this._texture.orig.width,this._width=e}get height(){return Math.abs(this.scale.y)*this._texture.orig.height}set height(e){const t=Pe(this.scale.y)||1;this.scale.y=t*e/this._texture.orig.height,this._height=e}get anchor(){return this._anchor}set anchor(e){this._anchor.copyFrom(e)}get tint(){return this._tintColor.value}set tint(e){this._tintColor.setValue(e),this._tintRGB=this._tintColor.toLittleEndianNumber()}get tintValue(){return this._tintColor.toNumber()}get texture(){return this._texture}set texture(e){this._texture!==e&&(this._texture&&this._texture.off("update",this._onTextureUpdate,this),this._texture=e||Er.EMPTY,this._cachedTint=16777215,this._textureID=-1,this._textureTrimmedID=-1,e&&(e.baseTexture.valid?this._onTextureUpdate():e.once("update",this._onTextureUpdate,this)))}}const ta=new Ct;Ki.prototype._cacheAsBitmap=!1,Ki.prototype._cacheData=null,Ki.prototype._cacheAsBitmapResolution=null,Ki.prototype._cacheAsBitmapMultisample=null;class ra{constructor(){this.textureCacheId=null,this.originalRender=null,this.originalRenderCanvas=null,this.originalCalculateBounds=null,this.originalGetLocalBounds=null,this.originalUpdateTransform=null,this.originalDestroy=null,this.originalMask=null,this.originalFilterArea=null,this.originalContainsPoint=null,this.sprite=null}}Object.defineProperties(Ki.prototype,{cacheAsBitmapResolution:{get(){return this._cacheAsBitmapResolution},set(e){e!==this._cacheAsBitmapResolution&&(this._cacheAsBitmapResolution=e,this.cacheAsBitmap&&(this.cacheAsBitmap=!1,this.cacheAsBitmap=!0))}},cacheAsBitmapMultisample:{get(){return this._cacheAsBitmapMultisample},set(e){e!==this._cacheAsBitmapMultisample&&(this._cacheAsBitmapMultisample=e,this.cacheAsBitmap&&(this.cacheAsBitmap=!1,this.cacheAsBitmap=!0))}},cacheAsBitmap:{get(){return this._cacheAsBitmap},set(e){if(this._cacheAsBitmap===e)return;let t;this._cacheAsBitmap=e,e?(this._cacheData||(this._cacheData=new ra),t=this._cacheData,t.originalRender=this.render,t.originalRenderCanvas=this.renderCanvas,t.originalUpdateTransform=this.updateTransform,t.originalCalculateBounds=this.calculateBounds,t.originalGetLocalBounds=this.getLocalBounds,t.originalDestroy=this.destroy,t.originalContainsPoint=this.containsPoint,t.originalMask=this._mask,t.originalFilterArea=this.filterArea,this.render=this._renderCached,this.renderCanvas=this._renderCachedCanvas,this.destroy=this._cacheAsBitmapDestroy):(t=this._cacheData,t.sprite&&this._destroyCachedDisplayObject(),this.render=t.originalRender,this.renderCanvas=t.originalRenderCanvas,this.calculateBounds=t.originalCalculateBounds,this.getLocalBounds=t.originalGetLocalBounds,this.destroy=t.originalDestroy,this.updateTransform=t.originalUpdateTransform,this.containsPoint=t.originalContainsPoint,this._mask=t.originalMask,this.filterArea=t.originalFilterArea)}}}),Ki.prototype._renderCached=function(e){!this.visible||this.worldAlpha<=0||!this.renderable||(this._initCachedDisplayObject(e),this._cacheData.sprite.transform._worldID=this.transform._worldID,this._cacheData.sprite.worldAlpha=this.worldAlpha,this._cacheData.sprite._render(e))},Ki.prototype._initCachedDisplayObject=function(e){if(this._cacheData?.sprite)return;const t=this.alpha;this.alpha=1,e.batch.flush();const r=this.getLocalBounds(null,!0).clone();if(this.filters?.length){const e=this.filters[0].padding;r.pad(e)}r.ceil(b.RESOLUTION);const i=e.renderTexture.current,a=e.renderTexture.sourceFrame.clone(),n=e.renderTexture.destinationFrame.clone(),s=e.projection.transform,o=Sr.create({width:r.width,height:r.height,resolution:this.cacheAsBitmapResolution||e.resolution,multisample:this.cacheAsBitmapMultisample??e.multisample}),l=`cacheAsBitmap_${Be()}`;this._cacheData.textureCacheId=l,st.addToCache(o.baseTexture,l),Er.addToCache(o,l);const h=this.transform.localTransform.copyTo(ta).invert().translate(-r.x,-r.y);this.render=this._cacheData.originalRender,e.render(this,{renderTexture:o,clear:!0,transform:h,skipUpdateTransform:!1}),e.framebuffer.blit(),e.projection.transform=s,e.renderTexture.bind(i,a,n),this.render=this._renderCached,this.updateTransform=this.displayObjectUpdateTransform,this.calculateBounds=this._calculateCachedBounds,this.getLocalBounds=this._getCachedLocalBounds,this._mask=null,this.filterArea=null,this.alpha=t;const u=new ea(o);u.transform.worldTransform=this.transform.worldTransform,u.anchor.x=-r.x/r.width,u.anchor.y=-r.y/r.height,u.alpha=t,u._bounds=this._bounds,this._cacheData.sprite=u,this.transform._parentID=-1,this.parent?this.updateTransform():(this.enableTempParent(),this.updateTransform(),this.disableTempParent(null)),this.containsPoint=u.containsPoint.bind(u)},Ki.prototype._renderCachedCanvas=function(e){!this.visible||this.worldAlpha<=0||!this.renderable||(this._initCachedDisplayObjectCanvas(e),this._cacheData.sprite.worldAlpha=this.worldAlpha,this._cacheData.sprite._renderCanvas(e))},Ki.prototype._initCachedDisplayObjectCanvas=function(e){if(this._cacheData?.sprite)return;const t=this.getLocalBounds(null,!0),r=this.alpha;this.alpha=1;const i=e.canvasContext.activeContext,a=e._projTransform;t.ceil(b.RESOLUTION);const n=Sr.create({width:t.width,height:t.height}),s=`cacheAsBitmap_${Be()}`;this._cacheData.textureCacheId=s,st.addToCache(n.baseTexture,s),Er.addToCache(n,s);const o=ta;this.transform.localTransform.copyTo(o),o.invert(),o.tx-=t.x,o.ty-=t.y,this.renderCanvas=this._cacheData.originalRenderCanvas,e.render(this,{renderTexture:n,clear:!0,transform:o,skipUpdateTransform:!1}),e.canvasContext.activeContext=i,e._projTransform=a,this.renderCanvas=this._renderCachedCanvas,this.updateTransform=this.displayObjectUpdateTransform,this.calculateBounds=this._calculateCachedBounds,this.getLocalBounds=this._getCachedLocalBounds,this._mask=null,this.filterArea=null,this.alpha=r;const l=new ea(n);l.transform.worldTransform=this.transform.worldTransform,l.anchor.x=-t.x/t.width,l.anchor.y=-t.y/t.height,l.alpha=r,l._bounds=this._bounds,this._cacheData.sprite=l,this.transform._parentID=-1,this.parent?this.updateTransform():(this.parent=e._tempDisplayObjectParent,this.updateTransform(),this.parent=null),this.containsPoint=l.containsPoint.bind(l)},Ki.prototype._calculateCachedBounds=function(){this._bounds.clear(),this._cacheData.sprite.transform._worldID=this.transform._worldID,this._cacheData.sprite._calculateBounds(),this._bounds.updateID=this._boundsID},Ki.prototype._getCachedLocalBounds=function(){return this._cacheData.sprite.getLocalBounds(null)},Ki.prototype._destroyCachedDisplayObject=function(){this._cacheData.sprite._texture.destroy(!0),this._cacheData.sprite=null,st.removeFromCache(this._cacheData.textureCacheId),Er.removeFromCache(this._cacheData.textureCacheId),this._cacheData.textureCacheId=null},Ki.prototype._cacheAsBitmapDestroy=function(e){this.cacheAsBitmap=!1,this.destroy(e)},Ki.prototype.name=null,$i.prototype.getChildByName=function(e,t){for(let t=0,r=this.children.length;t<r;t++)if(this.children[t].name===e)return this.children[t];if(t)for(let t=0,r=this.children.length;t<r;t++){const r=this.children[t];if(!r.getChildByName)continue;const i=r.getChildByName(e,!0);if(i)return i}return null},Ki.prototype.getGlobalPosition=function(e=new bt,t=!1){return this.parent?this.parent.toGlobal(this.position,e,t):(e.x=this.position.x,e.y=this.position.y),e};const ia={5:[.153388,.221461,.250301],7:[.071303,.131514,.189879,.214607],9:[.028532,.067234,.124009,.179044,.20236],11:[.0093,.028002,.065984,.121703,.175713,.198596],13:[.002406,.009255,.027867,.065666,.121117,.174868,.197641],15:[489e-6,.002403,.009246,.02784,.065602,.120999,.174697,.197448]},aa=["varying vec2 vBlurTexCoords[%size%];","uniform sampler2D uSampler;","void main(void)","{","    gl_FragColor = vec4(0.0);","    %blur%","}"].join("\n");class na extends dr{constructor(e,t=8,r=4,i=dr.defaultResolution,a=5){const n=function(e,t){const r=Math.ceil(e/2);let i,a="\n    attribute vec2 aVertexPosition;\n\n    uniform mat3 projectionMatrix;\n\n    uniform float strength;\n\n    varying vec2 vBlurTexCoords[%size%];\n\n    uniform vec4 inputSize;\n    uniform vec4 outputFrame;\n\n    vec4 filterVertexPosition( void )\n    {\n        vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;\n\n        return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);\n    }\n\n    vec2 filterTextureCoord( void )\n    {\n        return aVertexPosition * (outputFrame.zw * inputSize.zw);\n    }\n\n    void main(void)\n    {\n        gl_Position = filterVertexPosition();\n\n        vec2 textureCoord = filterTextureCoord();\n        %blur%\n    }",n="";i=t?"vBlurTexCoords[%index%] =  textureCoord + vec2(%sampleIndex% * strength, 0.0);":"vBlurTexCoords[%index%] =  textureCoord + vec2(0.0, %sampleIndex% * strength);";for(let t=0;t<e;t++){let e=i.replace("%index%",t.toString());e=e.replace("%sampleIndex%",t-(r-1)+".0"),n+=e,n+="\n"}return a=a.replace("%blur%",n),a=a.replace("%size%",e.toString()),a}(a,e),s=function(e){const t=ia[e],r=t.length;let i,a=aa,n="";for(let a=0;a<e;a++){let s="gl_FragColor += texture2D(uSampler, vBlurTexCoords[%index%]) * %value%;".replace("%index%",a.toString());i=a,a>=r&&(i=e-a-1),s=s.replace("%value%",t[i].toString()),n+=s,n+="\n"}return a=a.replace("%blur%",n),a=a.replace("%size%",e.toString()),a}(a);super(n,s),this.horizontal=e,this.resolution=i,this._quality=0,this.quality=r,this.blur=t}apply(e,t,r,i){if(r?this.horizontal?this.uniforms.strength=1/r.width*(r.width/t.width):this.uniforms.strength=1/r.height*(r.height/t.height):this.horizontal?this.uniforms.strength=1/e.renderer.width*(e.renderer.width/t.width):this.uniforms.strength=1/e.renderer.height*(e.renderer.height/t.height),this.uniforms.strength*=this.strength,this.uniforms.strength/=this.passes,1===this.passes)e.applyFilter(this,t,r,i);else{const a=e.getFilterTexture(),n=e.renderer;let s=t,o=a;this.state.blend=!1,e.applyFilter(this,s,o,f.CLEAR);for(let t=1;t<this.passes-1;t++){e.bindAndClear(s,f.BLIT),this.uniforms.uSampler=o;const t=o;o=s,s=t,n.shader.bind(this),n.geometry.draw(5)}this.state.blend=!0,e.applyFilter(this,o,r,i),e.returnFilterTexture(a)}}get blur(){return this.strength}set blur(e){this.padding=1+2*Math.abs(e),this.strength=e}get quality(){return this._quality}set quality(e){this._quality=e,this.passes=e}}class sa extends dr{constructor(e=8,t=4,r=dr.defaultResolution,i=5){super(),this._repeatEdgePixels=!1,this.blurXFilter=new na(!0,e,t,r,i),this.blurYFilter=new na(!1,e,t,r,i),this.resolution=r,this.quality=t,this.blur=e,this.repeatEdgePixels=!1}apply(e,t,r,i){const a=Math.abs(this.blurXFilter.strength),n=Math.abs(this.blurYFilter.strength);if(a&&n){const a=e.getFilterTexture();this.blurXFilter.apply(e,t,a,f.CLEAR),this.blurYFilter.apply(e,a,r,i),e.returnFilterTexture(a)}else n?this.blurYFilter.apply(e,t,r,i):this.blurXFilter.apply(e,t,r,i)}updatePadding(){this._repeatEdgePixels?this.padding=0:this.padding=2*Math.max(Math.abs(this.blurXFilter.strength),Math.abs(this.blurYFilter.strength))}get blur(){return this.blurXFilter.blur}set blur(e){this.blurXFilter.blur=this.blurYFilter.blur=e,this.updatePadding()}get quality(){return this.blurXFilter.quality}set quality(e){this.blurXFilter.quality=this.blurYFilter.quality=e}get blurX(){return this.blurXFilter.blur}set blurX(e){this.blurXFilter.blur=e,this.updatePadding()}get blurY(){return this.blurYFilter.blur}set blurY(e){this.blurYFilter.blur=e,this.updatePadding()}get blendMode(){return this.blurYFilter.blendMode}set blendMode(e){this.blurYFilter.blendMode=e}get repeatEdgePixels(){return this._repeatEdgePixels}set repeatEdgePixels(e){this._repeatEdgePixels=e,this.updatePadding()}}class oa extends dr{constructor(){const e={m:new Float32Array([1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0]),uAlpha:1};super(Ri,"varying vec2 vTextureCoord;\nuniform sampler2D uSampler;\nuniform float m[20];\nuniform float uAlpha;\n\nvoid main(void)\n{\n    vec4 c = texture2D(uSampler, vTextureCoord);\n\n    if (uAlpha == 0.0) {\n        gl_FragColor = c;\n        return;\n    }\n\n    // Un-premultiply alpha before applying the color matrix. See issue #3539.\n    if (c.a > 0.0) {\n      c.rgb /= c.a;\n    }\n\n    vec4 result;\n\n    result.r = (m[0] * c.r);\n        result.r += (m[1] * c.g);\n        result.r += (m[2] * c.b);\n        result.r += (m[3] * c.a);\n        result.r += m[4];\n\n    result.g = (m[5] * c.r);\n        result.g += (m[6] * c.g);\n        result.g += (m[7] * c.b);\n        result.g += (m[8] * c.a);\n        result.g += m[9];\n\n    result.b = (m[10] * c.r);\n       result.b += (m[11] * c.g);\n       result.b += (m[12] * c.b);\n       result.b += (m[13] * c.a);\n       result.b += m[14];\n\n    result.a = (m[15] * c.r);\n       result.a += (m[16] * c.g);\n       result.a += (m[17] * c.b);\n       result.a += (m[18] * c.a);\n       result.a += m[19];\n\n    vec3 rgb = mix(c.rgb, result.rgb, uAlpha);\n\n    // Premultiply alpha again.\n    rgb *= result.a;\n\n    gl_FragColor = vec4(rgb, result.a);\n}\n",e),this.alpha=1}_loadMatrix(e,t=!1){let r=e;t&&(this._multiply(r,this.uniforms.m,e),r=this._colorMatrix(r)),this.uniforms.m=r}_multiply(e,t,r){return e[0]=t[0]*r[0]+t[1]*r[5]+t[2]*r[10]+t[3]*r[15],e[1]=t[0]*r[1]+t[1]*r[6]+t[2]*r[11]+t[3]*r[16],e[2]=t[0]*r[2]+t[1]*r[7]+t[2]*r[12]+t[3]*r[17],e[3]=t[0]*r[3]+t[1]*r[8]+t[2]*r[13]+t[3]*r[18],e[4]=t[0]*r[4]+t[1]*r[9]+t[2]*r[14]+t[3]*r[19]+t[4],e[5]=t[5]*r[0]+t[6]*r[5]+t[7]*r[10]+t[8]*r[15],e[6]=t[5]*r[1]+t[6]*r[6]+t[7]*r[11]+t[8]*r[16],e[7]=t[5]*r[2]+t[6]*r[7]+t[7]*r[12]+t[8]*r[17],e[8]=t[5]*r[3]+t[6]*r[8]+t[7]*r[13]+t[8]*r[18],e[9]=t[5]*r[4]+t[6]*r[9]+t[7]*r[14]+t[8]*r[19]+t[9],e[10]=t[10]*r[0]+t[11]*r[5]+t[12]*r[10]+t[13]*r[15],e[11]=t[10]*r[1]+t[11]*r[6]+t[12]*r[11]+t[13]*r[16],e[12]=t[10]*r[2]+t[11]*r[7]+t[12]*r[12]+t[13]*r[17],e[13]=t[10]*r[3]+t[11]*r[8]+t[12]*r[13]+t[13]*r[18],e[14]=t[10]*r[4]+t[11]*r[9]+t[12]*r[14]+t[13]*r[19]+t[14],e[15]=t[15]*r[0]+t[16]*r[5]+t[17]*r[10]+t[18]*r[15],e[16]=t[15]*r[1]+t[16]*r[6]+t[17]*r[11]+t[18]*r[16],e[17]=t[15]*r[2]+t[16]*r[7]+t[17]*r[12]+t[18]*r[17],e[18]=t[15]*r[3]+t[16]*r[8]+t[17]*r[13]+t[18]*r[18],e[19]=t[15]*r[4]+t[16]*r[9]+t[17]*r[14]+t[18]*r[19]+t[19],e}_colorMatrix(e){const t=new Float32Array(e);return t[4]/=255,t[9]/=255,t[14]/=255,t[19]/=255,t}brightness(e,t){const r=[e,0,0,0,0,0,e,0,0,0,0,0,e,0,0,0,0,0,1,0];this._loadMatrix(r,t)}tint(e,t){const[r,i,a]=Ee.shared.setValue(e).toArray(),n=[r,0,0,0,0,0,i,0,0,0,0,0,a,0,0,0,0,0,1,0];this._loadMatrix(n,t)}greyscale(e,t){const r=[e,e,e,0,0,e,e,e,0,0,e,e,e,0,0,0,0,0,1,0];this._loadMatrix(r,t)}blackAndWhite(e){this._loadMatrix([.3,.6,.1,0,0,.3,.6,.1,0,0,.3,.6,.1,0,0,0,0,0,1,0],e)}hue(e,t){e=(e||0)/180*Math.PI;const r=Math.cos(e),i=Math.sin(e),a=1/3,n=(0,Math.sqrt)(a),s=[r+(1-r)*a,a*(1-r)-n*i,a*(1-r)+n*i,0,0,a*(1-r)+n*i,r+a*(1-r),a*(1-r)-n*i,0,0,a*(1-r)-n*i,a*(1-r)+n*i,r+a*(1-r),0,0,0,0,0,1,0];this._loadMatrix(s,t)}contrast(e,t){const r=(e||0)+1,i=-.5*(r-1),a=[r,0,0,0,i,0,r,0,0,i,0,0,r,0,i,0,0,0,1,0];this._loadMatrix(a,t)}saturate(e=0,t){const r=2*e/3+1,i=-.5*(r-1),a=[r,i,i,0,0,i,r,i,0,0,i,i,r,0,0,0,0,0,1,0];this._loadMatrix(a,t)}desaturate(){this.saturate(-1)}negative(e){this._loadMatrix([-1,0,0,1,0,0,-1,0,1,0,0,0,-1,1,0,0,0,0,1,0],e)}sepia(e){this._loadMatrix([.393,.7689999,.18899999,0,0,.349,.6859999,.16799999,0,0,.272,.5339999,.13099999,0,0,0,0,0,1,0],e)}technicolor(e){this._loadMatrix([1.9125277891456083,-.8545344976951645,-.09155508482755585,0,11.793603434377337,-.3087833385928097,1.7658908555458428,-.10601743074722245,0,-70.35205161461398,-.231103377548616,-.7501899197440212,1.847597816108189,0,30.950940869491138,0,0,0,1,0],e)}polaroid(e){this._loadMatrix([1.438,-.062,-.062,0,0,-.122,1.378,-.122,0,0,-.016,-.016,1.483,0,0,0,0,0,1,0],e)}toBGR(e){this._loadMatrix([0,0,1,0,0,0,1,0,0,0,1,0,0,0,0,0,0,0,1,0],e)}kodachrome(e){this._loadMatrix([1.1285582396593525,-.3967382283601348,-.03992559172921793,0,63.72958762196502,-.16404339962244616,1.0835251566291304,-.05498805115633132,0,24.732407896706203,-.16786010706155763,-.5603416277695248,1.6014850761964943,0,35.62982807460946,0,0,0,1,0],e)}browni(e){this._loadMatrix([.5997023498159715,.34553243048391263,-.2708298674538042,0,47.43192855600873,-.037703249837783157,.8609577587992641,.15059552388459913,0,-36.96841498319127,.24113635128153335,-.07441037908422492,.44972182064877153,0,-7.562075277591283,0,0,0,1,0],e)}vintage(e){this._loadMatrix([.6279345635605994,.3202183420819367,-.03965408211312453,0,9.651285835294123,.02578397704808868,.6441188644374771,.03259127616149294,0,7.462829176470591,.0466055556782719,-.0851232987247891,.5241648018700465,0,5.159190588235296,0,0,0,1,0],e)}colorTone(e,t,r,i,a){e=e||.2,t=t||.15,r=r||16770432,i=i||3375104;const n=Ee.shared,[s,o,l]=n.setValue(r).toArray(),[h,u,d]=n.setValue(i).toArray(),c=[.3,.59,.11,0,0,s,o,l,e,0,h,u,d,t,0,s-h,o-u,l-d,0,0];this._loadMatrix(c,a)}night(e,t){const r=[-2*(e=e||.1),-e,0,0,0,-e,0,e,0,0,0,e,2*e,0,0,0,0,0,1,0];this._loadMatrix(r,t)}predator(e,t){const r=[11.224130630493164*e,-4.794486999511719*e,-2.8746118545532227*e,0*e,.40342438220977783*e,-3.6330697536468506*e,9.193157196044922*e,-2.951810836791992*e,0*e,-1.316135048866272*e,-3.2184197902679443*e,-4.2375030517578125*e,7.476448059082031*e,0*e,.8044459223747253*e,0,0,0,1,0];this._loadMatrix(r,t)}lsd(e){this._loadMatrix([2,-.4,.5,0,0,-.5,2,-.4,0,0,-.4,-.5,3,0,0,0,0,0,1,0],e)}reset(){this._loadMatrix([1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0],!1)}get matrix(){return this.uniforms.m}set matrix(e){this.uniforms.m=e}get alpha(){return this.uniforms.uAlpha}set alpha(e){this.uniforms.uAlpha=e}}oa.prototype.grayscale=oa.prototype.greyscale;const la={AlphaFilter:class extends dr{constructor(e=1){super("attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n    vTextureCoord = aTextureCoord;\n}","varying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\nuniform float uAlpha;\n\nvoid main(void)\n{\n   gl_FragColor = texture2D(uSampler, vTextureCoord) * uAlpha;\n}\n",{uAlpha:1}),this.alpha=e}get alpha(){return this.uniforms.uAlpha}set alpha(e){this.uniforms.uAlpha=e}},BlurFilter:sa,BlurFilterPass:na,ColorMatrixFilter:oa,DisplacementFilter:class extends dr{constructor(e,t){const r=new Ct;e.renderable=!1,super("attribute vec2 aVertexPosition;\n\nuniform mat3 projectionMatrix;\nuniform mat3 filterMatrix;\n\nvarying vec2 vTextureCoord;\nvarying vec2 vFilterCoord;\n\nuniform vec4 inputSize;\nuniform vec4 outputFrame;\n\nvec4 filterVertexPosition( void )\n{\n    vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;\n\n    return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);\n}\n\nvec2 filterTextureCoord( void )\n{\n    return aVertexPosition * (outputFrame.zw * inputSize.zw);\n}\n\nvoid main(void)\n{\n\tgl_Position = filterVertexPosition();\n\tvTextureCoord = filterTextureCoord();\n\tvFilterCoord = ( filterMatrix * vec3( vTextureCoord, 1.0)  ).xy;\n}\n","varying vec2 vFilterCoord;\nvarying vec2 vTextureCoord;\n\nuniform vec2 scale;\nuniform mat2 rotation;\nuniform sampler2D uSampler;\nuniform sampler2D mapSampler;\n\nuniform highp vec4 inputSize;\nuniform vec4 inputClamp;\n\nvoid main(void)\n{\n  vec4 map =  texture2D(mapSampler, vFilterCoord);\n\n  map -= 0.5;\n  map.xy = scale * inputSize.zw * (rotation * map.xy);\n\n  gl_FragColor = texture2D(uSampler, clamp(vec2(vTextureCoord.x + map.x, vTextureCoord.y + map.y), inputClamp.xy, inputClamp.zw));\n}\n",{mapSampler:e._texture,filterMatrix:r,scale:{x:1,y:1},rotation:new Float32Array([1,0,0,1])}),this.maskSprite=e,this.maskMatrix=r,null==t&&(t=20),this.scale=new bt(t,t)}apply(e,t,r,i){this.uniforms.filterMatrix=e.calculateSpriteMatrix(this.maskMatrix,this.maskSprite),this.uniforms.scale.x=this.scale.x,this.uniforms.scale.y=this.scale.y;const a=this.maskSprite.worldTransform,n=Math.sqrt(a.a*a.a+a.b*a.b),s=Math.sqrt(a.c*a.c+a.d*a.d);0!==n&&0!==s&&(this.uniforms.rotation[0]=a.a/n,this.uniforms.rotation[1]=a.b/n,this.uniforms.rotation[2]=a.c/s,this.uniforms.rotation[3]=a.d/s),e.applyFilter(this,t,r,i)}get map(){return this.uniforms.mapSampler}set map(e){this.uniforms.mapSampler=e}},FXAAFilter:class extends dr{constructor(){super("\nattribute vec2 aVertexPosition;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 v_rgbNW;\nvarying vec2 v_rgbNE;\nvarying vec2 v_rgbSW;\nvarying vec2 v_rgbSE;\nvarying vec2 v_rgbM;\n\nvarying vec2 vFragCoord;\n\nuniform vec4 inputSize;\nuniform vec4 outputFrame;\n\nvec4 filterVertexPosition( void )\n{\n    vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;\n\n    return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);\n}\n\nvoid texcoords(vec2 fragCoord, vec2 inverseVP,\n               out vec2 v_rgbNW, out vec2 v_rgbNE,\n               out vec2 v_rgbSW, out vec2 v_rgbSE,\n               out vec2 v_rgbM) {\n    v_rgbNW = (fragCoord + vec2(-1.0, -1.0)) * inverseVP;\n    v_rgbNE = (fragCoord + vec2(1.0, -1.0)) * inverseVP;\n    v_rgbSW = (fragCoord + vec2(-1.0, 1.0)) * inverseVP;\n    v_rgbSE = (fragCoord + vec2(1.0, 1.0)) * inverseVP;\n    v_rgbM = vec2(fragCoord * inverseVP);\n}\n\nvoid main(void) {\n\n   gl_Position = filterVertexPosition();\n\n   vFragCoord = aVertexPosition * outputFrame.zw;\n\n   texcoords(vFragCoord, inputSize.zw, v_rgbNW, v_rgbNE, v_rgbSW, v_rgbSE, v_rgbM);\n}\n",'varying vec2 v_rgbNW;\nvarying vec2 v_rgbNE;\nvarying vec2 v_rgbSW;\nvarying vec2 v_rgbSE;\nvarying vec2 v_rgbM;\n\nvarying vec2 vFragCoord;\nuniform sampler2D uSampler;\nuniform highp vec4 inputSize;\n\n\n/**\n Basic FXAA implementation based on the code on geeks3d.com with the\n modification that the texture2DLod stuff was removed since it\'s\n unsupported by WebGL.\n\n --\n\n From:\n https://github.com/mitsuhiko/webgl-meincraft\n\n Copyright (c) 2011 by Armin Ronacher.\n\n Some rights reserved.\n\n Redistribution and use in source and binary forms, with or without\n modification, are permitted provided that the following conditions are\n met:\n\n * Redistributions of source code must retain the above copyright\n notice, this list of conditions and the following disclaimer.\n\n * Redistributions in binary form must reproduce the above\n copyright notice, this list of conditions and the following\n disclaimer in the documentation and/or other materials provided\n with the distribution.\n\n * The names of the contributors may not be used to endorse or\n promote products derived from this software without specific\n prior written permission.\n\n THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS\n "AS IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT\n LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR\n A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT\n OWNER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,\n SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT\n LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,\n DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY\n THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE\n OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n */\n\n#ifndef FXAA_REDUCE_MIN\n#define FXAA_REDUCE_MIN   (1.0/ 128.0)\n#endif\n#ifndef FXAA_REDUCE_MUL\n#define FXAA_REDUCE_MUL   (1.0 / 8.0)\n#endif\n#ifndef FXAA_SPAN_MAX\n#define FXAA_SPAN_MAX     8.0\n#endif\n\n//optimized version for mobile, where dependent\n//texture reads can be a bottleneck\nvec4 fxaa(sampler2D tex, vec2 fragCoord, vec2 inverseVP,\n          vec2 v_rgbNW, vec2 v_rgbNE,\n          vec2 v_rgbSW, vec2 v_rgbSE,\n          vec2 v_rgbM) {\n    vec4 color;\n    vec3 rgbNW = texture2D(tex, v_rgbNW).xyz;\n    vec3 rgbNE = texture2D(tex, v_rgbNE).xyz;\n    vec3 rgbSW = texture2D(tex, v_rgbSW).xyz;\n    vec3 rgbSE = texture2D(tex, v_rgbSE).xyz;\n    vec4 texColor = texture2D(tex, v_rgbM);\n    vec3 rgbM  = texColor.xyz;\n    vec3 luma = vec3(0.299, 0.587, 0.114);\n    float lumaNW = dot(rgbNW, luma);\n    float lumaNE = dot(rgbNE, luma);\n    float lumaSW = dot(rgbSW, luma);\n    float lumaSE = dot(rgbSE, luma);\n    float lumaM  = dot(rgbM,  luma);\n    float lumaMin = min(lumaM, min(min(lumaNW, lumaNE), min(lumaSW, lumaSE)));\n    float lumaMax = max(lumaM, max(max(lumaNW, lumaNE), max(lumaSW, lumaSE)));\n\n    mediump vec2 dir;\n    dir.x = -((lumaNW + lumaNE) - (lumaSW + lumaSE));\n    dir.y =  ((lumaNW + lumaSW) - (lumaNE + lumaSE));\n\n    float dirReduce = max((lumaNW + lumaNE + lumaSW + lumaSE) *\n                          (0.25 * FXAA_REDUCE_MUL), FXAA_REDUCE_MIN);\n\n    float rcpDirMin = 1.0 / (min(abs(dir.x), abs(dir.y)) + dirReduce);\n    dir = min(vec2(FXAA_SPAN_MAX, FXAA_SPAN_MAX),\n              max(vec2(-FXAA_SPAN_MAX, -FXAA_SPAN_MAX),\n                  dir * rcpDirMin)) * inverseVP;\n\n    vec3 rgbA = 0.5 * (\n                       texture2D(tex, fragCoord * inverseVP + dir * (1.0 / 3.0 - 0.5)).xyz +\n                       texture2D(tex, fragCoord * inverseVP + dir * (2.0 / 3.0 - 0.5)).xyz);\n    vec3 rgbB = rgbA * 0.5 + 0.25 * (\n                                     texture2D(tex, fragCoord * inverseVP + dir * -0.5).xyz +\n                                     texture2D(tex, fragCoord * inverseVP + dir * 0.5).xyz);\n\n    float lumaB = dot(rgbB, luma);\n    if ((lumaB < lumaMin) || (lumaB > lumaMax))\n        color = vec4(rgbA, texColor.a);\n    else\n        color = vec4(rgbB, texColor.a);\n    return color;\n}\n\nvoid main() {\n\n      vec4 color;\n\n      color = fxaa(uSampler, vFragCoord, inputSize.zw, v_rgbNW, v_rgbNE, v_rgbSW, v_rgbSE, v_rgbM);\n\n      gl_FragColor = color;\n}\n')}},NoiseFilter:class extends dr{constructor(e=.5,t=Math.random()){super(Ri,"precision highp float;\n\nvarying vec2 vTextureCoord;\nvarying vec4 vColor;\n\nuniform float uNoise;\nuniform float uSeed;\nuniform sampler2D uSampler;\n\nfloat rand(vec2 co)\n{\n    return fract(sin(dot(co.xy, vec2(12.9898, 78.233))) * 43758.5453);\n}\n\nvoid main()\n{\n    vec4 color = texture2D(uSampler, vTextureCoord);\n    float randomValue = rand(gl_FragCoord.xy * uSeed);\n    float diff = (randomValue - 0.5) * uNoise;\n\n    // Un-premultiply alpha before applying the color matrix. See issue #3539.\n    if (color.a > 0.0) {\n        color.rgb /= color.a;\n    }\n\n    color.r += diff;\n    color.g += diff;\n    color.b += diff;\n\n    // Premultiply alpha again.\n    color.rgb *= color.a;\n\n    gl_FragColor = color;\n}\n",{uNoise:0,uSeed:0}),this.noise=e,this.seed=t}get noise(){return this.uniforms.uNoise}set noise(e){this.uniforms.uNoise=e}get seed(){return this.uniforms.uSeed}set seed(e){this.uniforms.uSeed=e}}};Object.entries(la).forEach((([e,t])=>{Object.defineProperty(la,e,{get:()=>(Y("7.1.0",`filters.${e} has moved to ${e}`),t)})}));const ha=new class{constructor(){this.interactionFrequency=10,this._deltaTime=0,this._didMove=!1,this.tickerAdded=!1,this._pauseUpdate=!0}init(e){this.removeTickerListener(),this.events=e,this.interactionFrequency=10,this._deltaTime=0,this._didMove=!1,this.tickerAdded=!1,this._pauseUpdate=!0}get pauseUpdate(){return this._pauseUpdate}set pauseUpdate(e){this._pauseUpdate=e}addTickerListener(){!this.tickerAdded&&this.domElement&&(ki.system.add(this.tickerUpdate,this,Ei.INTERACTION),this.tickerAdded=!0)}removeTickerListener(){this.tickerAdded&&(ki.system.remove(this.tickerUpdate,this),this.tickerAdded=!1)}pointerMoved(){this._didMove=!0}update(){if(!this.domElement||this._pauseUpdate)return;if(this._didMove)return void(this._didMove=!1);const e=this.events.rootPointerEvent;this.events.supportsTouchEvents&&"touch"===e.pointerType||globalThis.document.dispatchEvent(new PointerEvent("pointermove",{clientX:e.clientX,clientY:e.clientY}))}tickerUpdate(e){this._deltaTime+=e,this._deltaTime<this.interactionFrequency||(this._deltaTime=0,this.update())}};class ua{constructor(e){this.bubbles=!0,this.cancelBubble=!0,this.cancelable=!1,this.composed=!1,this.defaultPrevented=!1,this.eventPhase=ua.prototype.NONE,this.propagationStopped=!1,this.propagationImmediatelyStopped=!1,this.layer=new bt,this.page=new bt,this.NONE=0,this.CAPTURING_PHASE=1,this.AT_TARGET=2,this.BUBBLING_PHASE=3,this.manager=e}get layerX(){return this.layer.x}get layerY(){return this.layer.y}get pageX(){return this.page.x}get pageY(){return this.page.y}get data(){return this}composedPath(){return!this.manager||this.path&&this.path[this.path.length-1]===this.target||(this.path=this.target?this.manager.propagationPath(this.target):[]),this.path}initEvent(e,t,r){throw new Error("initEvent() is a legacy DOM API. It is not implemented in the Federated Events API.")}initUIEvent(e,t,r,i,a){throw new Error("initUIEvent() is a legacy DOM API. It is not implemented in the Federated Events API.")}preventDefault(){this.nativeEvent instanceof Event&&this.nativeEvent.cancelable&&this.nativeEvent.preventDefault(),this.defaultPrevented=!0}stopImmediatePropagation(){this.propagationImmediatelyStopped=!0}stopPropagation(){this.propagationStopped=!0}}class da extends ua{constructor(){super(...arguments),this.client=new bt,this.movement=new bt,this.offset=new bt,this.global=new bt,this.screen=new bt}get clientX(){return this.client.x}get clientY(){return this.client.y}get x(){return this.clientX}get y(){return this.clientY}get movementX(){return this.movement.x}get movementY(){return this.movement.y}get offsetX(){return this.offset.x}get offsetY(){return this.offset.y}get globalX(){return this.global.x}get globalY(){return this.global.y}get screenX(){return this.screen.x}get screenY(){return this.screen.y}getLocalPosition(e,t,r){return e.worldTransform.applyInverse(r||this.global,t)}getModifierState(e){return"getModifierState"in this.nativeEvent&&this.nativeEvent.getModifierState(e)}initMouseEvent(e,t,r,i,a,n,s,o,l,h,u,d,c,m,f){throw new Error("Method not implemented.")}}class ca extends da{constructor(){super(...arguments),this.width=0,this.height=0,this.isPrimary=!1}getCoalescedEvents(){return"pointermove"===this.type||"mousemove"===this.type||"touchmove"===this.type?[this]:[]}getPredictedEvents(){throw new Error("getPredictedEvents is not supported!")}}class ma extends da{constructor(){super(...arguments),this.DOM_DELTA_PIXEL=0,this.DOM_DELTA_LINE=1,this.DOM_DELTA_PAGE=2}}ma.DOM_DELTA_PIXEL=0,ma.DOM_DELTA_LINE=1,ma.DOM_DELTA_PAGE=2;const fa=new bt,pa=new bt;class ga{constructor(e){this.dispatch=new G,this.moveOnAll=!1,this.enableGlobalMoveEvents=!0,this.mappingState={trackingData:{}},this.eventPool=new Map,this._allInteractiveElements=[],this._hitElements=[],this._isPointerMoveEvent=!1,this.rootTarget=e,this.hitPruneFn=this.hitPruneFn.bind(this),this.hitTestFn=this.hitTestFn.bind(this),this.mapPointerDown=this.mapPointerDown.bind(this),this.mapPointerMove=this.mapPointerMove.bind(this),this.mapPointerOut=this.mapPointerOut.bind(this),this.mapPointerOver=this.mapPointerOver.bind(this),this.mapPointerUp=this.mapPointerUp.bind(this),this.mapPointerUpOutside=this.mapPointerUpOutside.bind(this),this.mapWheel=this.mapWheel.bind(this),this.mappingTable={},this.addEventMapping("pointerdown",this.mapPointerDown),this.addEventMapping("pointermove",this.mapPointerMove),this.addEventMapping("pointerout",this.mapPointerOut),this.addEventMapping("pointerleave",this.mapPointerOut),this.addEventMapping("pointerover",this.mapPointerOver),this.addEventMapping("pointerup",this.mapPointerUp),this.addEventMapping("pointerupoutside",this.mapPointerUpOutside),this.addEventMapping("wheel",this.mapWheel)}addEventMapping(e,t){this.mappingTable[e]||(this.mappingTable[e]=[]),this.mappingTable[e].push({fn:t,priority:0}),this.mappingTable[e].sort(((e,t)=>e.priority-t.priority))}dispatchEvent(e,t){e.propagationStopped=!1,e.propagationImmediatelyStopped=!1,this.propagate(e,t),this.dispatch.emit(t||e.type,e)}mapEvent(e){if(!this.rootTarget)return;const t=this.mappingTable[e.type];if(t)for(let r=0,i=t.length;r<i;r++)t[r].fn(e);else console.warn(`[EventBoundary]: Event mapping not defined for ${e.type}`)}hitTest(e,t){ha.pauseUpdate=!0;const r=this[this._isPointerMoveEvent&&this.enableGlobalMoveEvents?"hitTestMoveRecursive":"hitTestRecursive"](this.rootTarget,this.rootTarget.eventMode,fa.set(e,t),this.hitTestFn,this.hitPruneFn);return r&&r[0]}propagate(e,t){if(!e.target)return;const r=e.composedPath();e.eventPhase=e.CAPTURING_PHASE;for(let i=0,a=r.length-1;i<a;i++)if(e.currentTarget=r[i],this.notifyTarget(e,t),e.propagationStopped||e.propagationImmediatelyStopped)return;if(e.eventPhase=e.AT_TARGET,e.currentTarget=e.target,this.notifyTarget(e,t),!e.propagationStopped&&!e.propagationImmediatelyStopped){e.eventPhase=e.BUBBLING_PHASE;for(let i=r.length-2;i>=0;i--)if(e.currentTarget=r[i],this.notifyTarget(e,t),e.propagationStopped||e.propagationImmediatelyStopped)return}}all(e,t,r=this._allInteractiveElements){if(0===r.length)return;e.eventPhase=e.BUBBLING_PHASE;const i=Array.isArray(t)?t:[t];for(let t=r.length-1;t>=0;t--)i.forEach((i=>{e.currentTarget=r[t],this.notifyTarget(e,i)}))}propagationPath(e){const t=[e];for(let r=0;r<2048&&e!==this.rootTarget;r++){if(!e.parent)throw new Error("Cannot find propagation path to disconnected target");t.push(e.parent),e=e.parent}return t.reverse(),t}hitTestMoveRecursive(e,t,r,i,a,n=!1){let s=!1;if(this._interactivePrune(e))return null;if("dynamic"!==e.eventMode&&"dynamic"!==t||(ha.pauseUpdate=!1),e.interactiveChildren&&e.children){const o=e.children;for(let l=o.length-1;l>=0;l--){const h=o[l],u=this.hitTestMoveRecursive(h,this._isInteractive(t)?t:h.eventMode,r,i,a,n||a(e,r));if(u){if(u.length>0&&!u[u.length-1].parent)continue;const t=e.isInteractive();(u.length>0||t)&&(t&&this._allInteractiveElements.push(e),u.push(e)),0===this._hitElements.length&&(this._hitElements=u),s=!0}}}const o=this._isInteractive(t),l=e.isInteractive();return l&&l&&this._allInteractiveElements.push(e),n||this._hitElements.length>0?null:s?this._hitElements:o&&!a(e,r)&&i(e,r)?l?[e]:[]:null}hitTestRecursive(e,t,r,i,a){if(this._interactivePrune(e)||a(e,r))return null;if("dynamic"!==e.eventMode&&"dynamic"!==t||(ha.pauseUpdate=!1),e.interactiveChildren&&e.children){const n=e.children;for(let s=n.length-1;s>=0;s--){const o=n[s],l=this.hitTestRecursive(o,this._isInteractive(t)?t:o.eventMode,r,i,a);if(l){if(l.length>0&&!l[l.length-1].parent)continue;const t=e.isInteractive();return(l.length>0||t)&&l.push(e),l}}}const n=this._isInteractive(t),s=e.isInteractive();return n&&i(e,r)?s?[e]:[]:null}_isInteractive(e){return"static"===e||"dynamic"===e}_interactivePrune(e){return!(e&&!e.isMask&&e.visible&&e.renderable)||"none"===e.eventMode||"passive"===e.eventMode&&!e.interactiveChildren||!!e.isMask}hitPruneFn(e,t){if(e.hitArea&&(e.worldTransform.applyInverse(t,pa),!e.hitArea.contains(pa.x,pa.y)))return!0;if(e._mask){const r=e._mask.isMaskData?e._mask.maskObject:e._mask;if(r&&!r.containsPoint?.(t))return!0}return!1}hitTestFn(e,t){return"passive"!==e.eventMode&&(!!e.hitArea||!!e.containsPoint&&e.containsPoint(t))}notifyTarget(e,t){const r=`on${t=t??e.type}`;e.currentTarget[r]?.(e);const i=e.eventPhase===e.CAPTURING_PHASE||e.eventPhase===e.AT_TARGET?`${t}capture`:t;this.notifyListeners(e,i),e.eventPhase===e.AT_TARGET&&this.notifyListeners(e,t)}mapPointerDown(e){if(!(e instanceof ca))return void console.warn("EventBoundary cannot map a non-pointer event as a pointer event");const t=this.createPointerEvent(e);if(this.dispatchEvent(t,"pointerdown"),"touch"===t.pointerType)this.dispatchEvent(t,"touchstart");else if("mouse"===t.pointerType||"pen"===t.pointerType){const e=2===t.button;this.dispatchEvent(t,e?"rightdown":"mousedown")}this.trackingData(e.pointerId).pressTargetsByButton[e.button]=t.composedPath(),this.freeEvent(t)}mapPointerMove(e){if(!(e instanceof ca))return void console.warn("EventBoundary cannot map a non-pointer event as a pointer event");this._allInteractiveElements.length=0,this._hitElements.length=0,this._isPointerMoveEvent=!0;const t=this.createPointerEvent(e);this._isPointerMoveEvent=!1;const r="mouse"===t.pointerType||"pen"===t.pointerType,i=this.trackingData(e.pointerId),a=this.findMountedTarget(i.overTargets);if(i.overTargets?.length>0&&a!==t.target){const i="mousemove"===e.type?"mouseout":"pointerout",n=this.createPointerEvent(e,i,a);if(this.dispatchEvent(n,"pointerout"),r&&this.dispatchEvent(n,"mouseout"),!t.composedPath().includes(a)){const i=this.createPointerEvent(e,"pointerleave",a);for(i.eventPhase=i.AT_TARGET;i.target&&!t.composedPath().includes(i.target);)i.currentTarget=i.target,this.notifyTarget(i),r&&this.notifyTarget(i,"mouseleave"),i.target=i.target.parent;this.freeEvent(i)}this.freeEvent(n)}if(a!==t.target){const i="mousemove"===e.type?"mouseover":"pointerover",n=this.clonePointerEvent(t,i);this.dispatchEvent(n,"pointerover"),r&&this.dispatchEvent(n,"mouseover");let s=a?.parent;for(;s&&s!==this.rootTarget.parent&&s!==t.target;)s=s.parent;if(!s||s===this.rootTarget.parent){const e=this.clonePointerEvent(t,"pointerenter");for(e.eventPhase=e.AT_TARGET;e.target&&e.target!==a&&e.target!==this.rootTarget.parent;)e.currentTarget=e.target,this.notifyTarget(e),r&&this.notifyTarget(e,"mouseenter"),e.target=e.target.parent;this.freeEvent(e)}this.freeEvent(n)}const n=[],s=this.enableGlobalMoveEvents??!0;this.moveOnAll?n.push("pointermove"):this.dispatchEvent(t,"pointermove"),s&&n.push("globalpointermove"),"touch"===t.pointerType&&(this.moveOnAll?n.splice(1,0,"touchmove"):this.dispatchEvent(t,"touchmove"),s&&n.push("globaltouchmove")),r&&(this.moveOnAll?n.splice(1,0,"mousemove"):this.dispatchEvent(t,"mousemove"),s&&n.push("globalmousemove"),this.cursor=t.target?.cursor),n.length>0&&this.all(t,n),this._allInteractiveElements.length=0,this._hitElements.length=0,i.overTargets=t.composedPath(),this.freeEvent(t)}mapPointerOver(e){if(!(e instanceof ca))return void console.warn("EventBoundary cannot map a non-pointer event as a pointer event");const t=this.trackingData(e.pointerId),r=this.createPointerEvent(e),i="mouse"===r.pointerType||"pen"===r.pointerType;this.dispatchEvent(r,"pointerover"),i&&this.dispatchEvent(r,"mouseover"),"mouse"===r.pointerType&&(this.cursor=r.target?.cursor);const a=this.clonePointerEvent(r,"pointerenter");for(a.eventPhase=a.AT_TARGET;a.target&&a.target!==this.rootTarget.parent;)a.currentTarget=a.target,this.notifyTarget(a),i&&this.notifyTarget(a,"mouseenter"),a.target=a.target.parent;t.overTargets=r.composedPath(),this.freeEvent(r),this.freeEvent(a)}mapPointerOut(e){if(!(e instanceof ca))return void console.warn("EventBoundary cannot map a non-pointer event as a pointer event");const t=this.trackingData(e.pointerId);if(t.overTargets){const r="mouse"===e.pointerType||"pen"===e.pointerType,i=this.findMountedTarget(t.overTargets),a=this.createPointerEvent(e,"pointerout",i);this.dispatchEvent(a),r&&this.dispatchEvent(a,"mouseout");const n=this.createPointerEvent(e,"pointerleave",i);for(n.eventPhase=n.AT_TARGET;n.target&&n.target!==this.rootTarget.parent;)n.currentTarget=n.target,this.notifyTarget(n),r&&this.notifyTarget(n,"mouseleave"),n.target=n.target.parent;t.overTargets=null,this.freeEvent(a),this.freeEvent(n)}this.cursor=null}mapPointerUp(e){if(!(e instanceof ca))return void console.warn("EventBoundary cannot map a non-pointer event as a pointer event");const t=performance.now(),r=this.createPointerEvent(e);if(this.dispatchEvent(r,"pointerup"),"touch"===r.pointerType)this.dispatchEvent(r,"touchend");else if("mouse"===r.pointerType||"pen"===r.pointerType){const e=2===r.button;this.dispatchEvent(r,e?"rightup":"mouseup")}const i=this.trackingData(e.pointerId),a=this.findMountedTarget(i.pressTargetsByButton[e.button]);let n=a;if(a&&!r.composedPath().includes(a)){let t=a;for(;t&&!r.composedPath().includes(t);){if(r.currentTarget=t,this.notifyTarget(r,"pointerupoutside"),"touch"===r.pointerType)this.notifyTarget(r,"touchendoutside");else if("mouse"===r.pointerType||"pen"===r.pointerType){const e=2===r.button;this.notifyTarget(r,e?"rightupoutside":"mouseupoutside")}t=t.parent}delete i.pressTargetsByButton[e.button],n=t}if(n){const a=this.clonePointerEvent(r,"click");a.target=n,a.path=null,i.clicksByButton[e.button]||(i.clicksByButton[e.button]={clickCount:0,target:a.target,timeStamp:t});const s=i.clicksByButton[e.button];if(s.target===a.target&&t-s.timeStamp<200?++s.clickCount:s.clickCount=1,s.target=a.target,s.timeStamp=t,a.detail=s.clickCount,"mouse"===a.pointerType){const e=2===a.button;this.dispatchEvent(a,e?"rightclick":"click")}else"touch"===a.pointerType&&this.dispatchEvent(a,"tap");this.dispatchEvent(a,"pointertap"),this.freeEvent(a)}this.freeEvent(r)}mapPointerUpOutside(e){if(!(e instanceof ca))return void console.warn("EventBoundary cannot map a non-pointer event as a pointer event");const t=this.trackingData(e.pointerId),r=this.findMountedTarget(t.pressTargetsByButton[e.button]),i=this.createPointerEvent(e);if(r){let a=r;for(;a;)i.currentTarget=a,this.notifyTarget(i,"pointerupoutside"),"touch"===i.pointerType?this.notifyTarget(i,"touchendoutside"):"mouse"!==i.pointerType&&"pen"!==i.pointerType||this.notifyTarget(i,2===i.button?"rightupoutside":"mouseupoutside"),a=a.parent;delete t.pressTargetsByButton[e.button]}this.freeEvent(i)}mapWheel(e){if(!(e instanceof ma))return void console.warn("EventBoundary cannot map a non-wheel event as a wheel event");const t=this.createWheelEvent(e);this.dispatchEvent(t),this.freeEvent(t)}findMountedTarget(e){if(!e)return null;let t=e[0];for(let r=1;r<e.length&&e[r].parent===t;r++)t=e[r];return t}createPointerEvent(e,t,r){const i=this.allocateEvent(ca);return this.copyPointerData(e,i),this.copyMouseData(e,i),this.copyData(e,i),i.nativeEvent=e.nativeEvent,i.originalEvent=e,i.target=r??this.hitTest(i.global.x,i.global.y)??this._hitElements[0],"string"==typeof t&&(i.type=t),i}createWheelEvent(e){const t=this.allocateEvent(ma);return this.copyWheelData(e,t),this.copyMouseData(e,t),this.copyData(e,t),t.nativeEvent=e.nativeEvent,t.originalEvent=e,t.target=this.hitTest(t.global.x,t.global.y),t}clonePointerEvent(e,t){const r=this.allocateEvent(ca);return r.nativeEvent=e.nativeEvent,r.originalEvent=e.originalEvent,this.copyPointerData(e,r),this.copyMouseData(e,r),this.copyData(e,r),r.target=e.target,r.path=e.composedPath().slice(),r.type=t??r.type,r}copyWheelData(e,t){t.deltaMode=e.deltaMode,t.deltaX=e.deltaX,t.deltaY=e.deltaY,t.deltaZ=e.deltaZ}copyPointerData(e,t){e instanceof ca&&t instanceof ca&&(t.pointerId=e.pointerId,t.width=e.width,t.height=e.height,t.isPrimary=e.isPrimary,t.pointerType=e.pointerType,t.pressure=e.pressure,t.tangentialPressure=e.tangentialPressure,t.tiltX=e.tiltX,t.tiltY=e.tiltY,t.twist=e.twist)}copyMouseData(e,t){e instanceof da&&t instanceof da&&(t.altKey=e.altKey,t.button=e.button,t.buttons=e.buttons,t.client.copyFrom(e.client),t.ctrlKey=e.ctrlKey,t.metaKey=e.metaKey,t.movement.copyFrom(e.movement),t.screen.copyFrom(e.screen),t.shiftKey=e.shiftKey,t.global.copyFrom(e.global))}copyData(e,t){t.isTrusted=e.isTrusted,t.srcElement=e.srcElement,t.timeStamp=performance.now(),t.type=e.type,t.detail=e.detail,t.view=e.view,t.which=e.which,t.layer.copyFrom(e.layer),t.page.copyFrom(e.page)}trackingData(e){return this.mappingState.trackingData[e]||(this.mappingState.trackingData[e]={pressTargetsByButton:{},clicksByButton:{},overTarget:null}),this.mappingState.trackingData[e]}allocateEvent(e){this.eventPool.has(e)||this.eventPool.set(e,[]);const t=this.eventPool.get(e).pop()||new e(this);return t.eventPhase=t.NONE,t.currentTarget=null,t.path=null,t.target=null,t}freeEvent(e){if(e.manager!==this)throw new Error("It is illegal to free an event not managed by this EventBoundary!");const t=e.constructor;this.eventPool.has(t)||this.eventPool.set(t,[]),this.eventPool.get(t).push(e)}notifyListeners(e,t){const r=e.currentTarget._events[t];if(r&&e.currentTarget.isInteractive())if("fn"in r)r.once&&e.currentTarget.removeListener(t,r.fn,void 0,!0),r.fn.call(r.context,e);else for(let i=0,a=r.length;i<a&&!e.propagationImmediatelyStopped;i++)r[i].once&&e.currentTarget.removeListener(t,r[i].fn,void 0,!0),r[i].fn.call(r[i].context,e)}}const ya={touchstart:"pointerdown",touchend:"pointerup",touchendoutside:"pointerupoutside",touchmove:"pointermove",touchcancel:"pointercancel"},va=class{constructor(e){this.supportsTouchEvents="ontouchstart"in globalThis,this.supportsPointerEvents=!!globalThis.PointerEvent,this.domElement=null,this.resolution=1,this.renderer=e,this.rootBoundary=new ga(null),ha.init(this),this.autoPreventDefault=!0,this.eventsAdded=!1,this.rootPointerEvent=new ca(null),this.rootWheelEvent=new ma(null),this.cursorStyles={default:"inherit",pointer:"pointer"},this.features=new Proxy({...va.defaultEventFeatures},{set:(e,t,r)=>("globalMove"===t&&(this.rootBoundary.enableGlobalMoveEvents=r),e[t]=r,!0)}),this.onPointerDown=this.onPointerDown.bind(this),this.onPointerMove=this.onPointerMove.bind(this),this.onPointerUp=this.onPointerUp.bind(this),this.onPointerOverOut=this.onPointerOverOut.bind(this),this.onWheel=this.onWheel.bind(this)}static get defaultEventMode(){return this._defaultEventMode}init(e){const{view:t,resolution:r}=this.renderer;this.setTargetElement(t),this.resolution=r,va._defaultEventMode=e.eventMode??"auto",Object.assign(this.features,e.eventFeatures??{}),this.rootBoundary.enableGlobalMoveEvents=this.features.globalMove}resolutionChange(e){this.resolution=e}destroy(){this.setTargetElement(null),this.renderer=null}setCursor(e){e=e||"default";let t=!0;if(globalThis.OffscreenCanvas&&this.domElement instanceof OffscreenCanvas&&(t=!1),this.currentCursor===e)return;this.currentCursor=e;const r=this.cursorStyles[e];if(r)switch(typeof r){case"string":t&&(this.domElement.style.cursor=r);break;case"function":r(e);break;case"object":t&&Object.assign(this.domElement.style,r)}else t&&"string"==typeof e&&!Object.prototype.hasOwnProperty.call(this.cursorStyles,e)&&(this.domElement.style.cursor=e)}get pointer(){return this.rootPointerEvent}onPointerDown(e){if(!this.features.click)return;if(this.rootBoundary.rootTarget=this.renderer.lastObjectRendered,this.supportsTouchEvents&&"touch"===e.pointerType)return;const t=this.normalizeToPointerData(e);this.autoPreventDefault&&t[0].isNormalized&&(e.cancelable||!("cancelable"in e))&&e.preventDefault();for(let e=0,r=t.length;e<r;e++){const r=t[e],i=this.bootstrapEvent(this.rootPointerEvent,r);this.rootBoundary.mapEvent(i)}this.setCursor(this.rootBoundary.cursor)}onPointerMove(e){if(!this.features.move)return;if(this.rootBoundary.rootTarget=this.renderer.lastObjectRendered,this.supportsTouchEvents&&"touch"===e.pointerType)return;ha.pointerMoved();const t=this.normalizeToPointerData(e);for(let e=0,r=t.length;e<r;e++){const r=this.bootstrapEvent(this.rootPointerEvent,t[e]);this.rootBoundary.mapEvent(r)}this.setCursor(this.rootBoundary.cursor)}onPointerUp(e){if(!this.features.click)return;if(this.rootBoundary.rootTarget=this.renderer.lastObjectRendered,this.supportsTouchEvents&&"touch"===e.pointerType)return;let t=e.target;e.composedPath&&e.composedPath().length>0&&(t=e.composedPath()[0]);const r=t!==this.domElement?"outside":"",i=this.normalizeToPointerData(e);for(let e=0,t=i.length;e<t;e++){const t=this.bootstrapEvent(this.rootPointerEvent,i[e]);t.type+=r,this.rootBoundary.mapEvent(t)}this.setCursor(this.rootBoundary.cursor)}onPointerOverOut(e){if(!this.features.click)return;if(this.rootBoundary.rootTarget=this.renderer.lastObjectRendered,this.supportsTouchEvents&&"touch"===e.pointerType)return;const t=this.normalizeToPointerData(e);for(let e=0,r=t.length;e<r;e++){const r=this.bootstrapEvent(this.rootPointerEvent,t[e]);this.rootBoundary.mapEvent(r)}this.setCursor(this.rootBoundary.cursor)}onWheel(e){if(!this.features.wheel)return;const t=this.normalizeWheelEvent(e);this.rootBoundary.rootTarget=this.renderer.lastObjectRendered,this.rootBoundary.mapEvent(t)}setTargetElement(e){this.removeEvents(),this.domElement=e,ha.domElement=e,this.addEvents()}addEvents(){if(this.eventsAdded||!this.domElement)return;ha.addTickerListener();const e=this.domElement.style;e&&(globalThis.navigator.msPointerEnabled?(e.msContentZooming="none",e.msTouchAction="none"):this.supportsPointerEvents&&(e.touchAction="none")),this.supportsPointerEvents?(globalThis.document.addEventListener("pointermove",this.onPointerMove,!0),this.domElement.addEventListener("pointerdown",this.onPointerDown,!0),this.domElement.addEventListener("pointerleave",this.onPointerOverOut,!0),this.domElement.addEventListener("pointerover",this.onPointerOverOut,!0),globalThis.addEventListener("pointerup",this.onPointerUp,!0)):(globalThis.document.addEventListener("mousemove",this.onPointerMove,!0),this.domElement.addEventListener("mousedown",this.onPointerDown,!0),this.domElement.addEventListener("mouseout",this.onPointerOverOut,!0),this.domElement.addEventListener("mouseover",this.onPointerOverOut,!0),globalThis.addEventListener("mouseup",this.onPointerUp,!0)),this.supportsTouchEvents&&(this.domElement.addEventListener("touchstart",this.onPointerDown,!0),this.domElement.addEventListener("touchend",this.onPointerUp,!0),this.domElement.addEventListener("touchmove",this.onPointerMove,!0)),this.domElement.addEventListener("wheel",this.onWheel,{passive:!0,capture:!0}),this.eventsAdded=!0}removeEvents(){if(!this.eventsAdded||!this.domElement)return;ha.removeTickerListener();const e=this.domElement.style;globalThis.navigator.msPointerEnabled?(e.msContentZooming="",e.msTouchAction=""):this.supportsPointerEvents&&(e.touchAction=""),this.supportsPointerEvents?(globalThis.document.removeEventListener("pointermove",this.onPointerMove,!0),this.domElement.removeEventListener("pointerdown",this.onPointerDown,!0),this.domElement.removeEventListener("pointerleave",this.onPointerOverOut,!0),this.domElement.removeEventListener("pointerover",this.onPointerOverOut,!0),globalThis.removeEventListener("pointerup",this.onPointerUp,!0)):(globalThis.document.removeEventListener("mousemove",this.onPointerMove,!0),this.domElement.removeEventListener("mousedown",this.onPointerDown,!0),this.domElement.removeEventListener("mouseout",this.onPointerOverOut,!0),this.domElement.removeEventListener("mouseover",this.onPointerOverOut,!0),globalThis.removeEventListener("mouseup",this.onPointerUp,!0)),this.supportsTouchEvents&&(this.domElement.removeEventListener("touchstart",this.onPointerDown,!0),this.domElement.removeEventListener("touchend",this.onPointerUp,!0),this.domElement.removeEventListener("touchmove",this.onPointerMove,!0)),this.domElement.removeEventListener("wheel",this.onWheel,!0),this.domElement=null,this.eventsAdded=!1}mapPositionToPoint(e,t,r){let i;i=this.domElement.parentElement?this.domElement.getBoundingClientRect():{x:0,y:0,width:this.domElement.width,height:this.domElement.height,left:0,top:0};const a=1/this.resolution;e.x=(t-i.left)*(this.domElement.width/i.width)*a,e.y=(r-i.top)*(this.domElement.height/i.height)*a}normalizeToPointerData(e){const t=[];if(this.supportsTouchEvents&&e instanceof TouchEvent)for(let r=0,i=e.changedTouches.length;r<i;r++){const i=e.changedTouches[r];void 0===i.button&&(i.button=0),void 0===i.buttons&&(i.buttons=1),void 0===i.isPrimary&&(i.isPrimary=1===e.touches.length&&"touchstart"===e.type),void 0===i.width&&(i.width=i.radiusX||1),void 0===i.height&&(i.height=i.radiusY||1),void 0===i.tiltX&&(i.tiltX=0),void 0===i.tiltY&&(i.tiltY=0),void 0===i.pointerType&&(i.pointerType="touch"),void 0===i.pointerId&&(i.pointerId=i.identifier||0),void 0===i.pressure&&(i.pressure=i.force||.5),void 0===i.twist&&(i.twist=0),void 0===i.tangentialPressure&&(i.tangentialPressure=0),void 0===i.layerX&&(i.layerX=i.offsetX=i.clientX),void 0===i.layerY&&(i.layerY=i.offsetY=i.clientY),i.isNormalized=!0,i.type=e.type,t.push(i)}else if(!globalThis.MouseEvent||e instanceof MouseEvent&&!(this.supportsPointerEvents&&e instanceof globalThis.PointerEvent)){const r=e;void 0===r.isPrimary&&(r.isPrimary=!0),void 0===r.width&&(r.width=1),void 0===r.height&&(r.height=1),void 0===r.tiltX&&(r.tiltX=0),void 0===r.tiltY&&(r.tiltY=0),void 0===r.pointerType&&(r.pointerType="mouse"),void 0===r.pointerId&&(r.pointerId=1),void 0===r.pressure&&(r.pressure=.5),void 0===r.twist&&(r.twist=0),void 0===r.tangentialPressure&&(r.tangentialPressure=0),r.isNormalized=!0,t.push(r)}else t.push(e);return t}normalizeWheelEvent(e){const t=this.rootWheelEvent;return this.transferMouseData(t,e),t.deltaX=e.deltaX,t.deltaY=e.deltaY,t.deltaZ=e.deltaZ,t.deltaMode=e.deltaMode,this.mapPositionToPoint(t.screen,e.clientX,e.clientY),t.global.copyFrom(t.screen),t.offset.copyFrom(t.screen),t.nativeEvent=e,t.type=e.type,t}bootstrapEvent(e,t){return e.originalEvent=null,e.nativeEvent=t,e.pointerId=t.pointerId,e.width=t.width,e.height=t.height,e.isPrimary=t.isPrimary,e.pointerType=t.pointerType,e.pressure=t.pressure,e.tangentialPressure=t.tangentialPressure,e.tiltX=t.tiltX,e.tiltY=t.tiltY,e.twist=t.twist,this.transferMouseData(e,t),this.mapPositionToPoint(e.screen,t.clientX,t.clientY),e.global.copyFrom(e.screen),e.offset.copyFrom(e.screen),e.isTrusted=t.isTrusted,"pointerleave"===e.type&&(e.type="pointerout"),e.type.startsWith("mouse")&&(e.type=e.type.replace("mouse","pointer")),e.type.startsWith("touch")&&(e.type=ya[e.type]||e.type),e}transferMouseData(e,t){e.isTrusted=t.isTrusted,e.srcElement=t.srcElement,e.timeStamp=performance.now(),e.type=t.type,e.altKey=t.altKey,e.button=t.button,e.buttons=t.buttons,e.client.x=t.clientX,e.client.y=t.clientY,e.ctrlKey=t.ctrlKey,e.metaKey=t.metaKey,e.movement.x=t.movementX,e.movement.y=t.movementY,e.page.x=t.pageX,e.page.y=t.pageY,e.relatedTarget=null,e.shiftKey=t.shiftKey}};let xa=va;function _a(e){return"dynamic"===e||"static"===e}xa.extension={name:"events",type:[Xe.RendererSystem,Xe.CanvasRendererSystem]},xa.defaultEventFeatures={move:!0,globalMove:!0,click:!0,wheel:!0},Ye.add(xa);const ba={onclick:null,onmousedown:null,onmouseenter:null,onmouseleave:null,onmousemove:null,onglobalmousemove:null,onmouseout:null,onmouseover:null,onmouseup:null,onmouseupoutside:null,onpointercancel:null,onpointerdown:null,onpointerenter:null,onpointerleave:null,onpointermove:null,onglobalpointermove:null,onpointerout:null,onpointerover:null,onpointertap:null,onpointerup:null,onpointerupoutside:null,onrightclick:null,onrightdown:null,onrightup:null,onrightupoutside:null,ontap:null,ontouchcancel:null,ontouchend:null,ontouchendoutside:null,ontouchmove:null,onglobaltouchmove:null,ontouchstart:null,onwheel:null,_internalInteractive:void 0,get interactive(){return this._internalInteractive??_a(xa.defaultEventMode)},set interactive(e){Y("7.2.0","Setting interactive is deprecated, use eventMode = 'none'/'passive'/'auto'/'static'/'dynamic' instead."),this._internalInteractive=e,this.eventMode=e?"static":"auto"},_internalEventMode:void 0,get eventMode(){return this._internalEventMode??xa.defaultEventMode},set eventMode(e){this._internalInteractive=_a(e),this._internalEventMode=e},isInteractive(){return"static"===this.eventMode||"dynamic"===this.eventMode},interactiveChildren:!0,hitArea:null,addEventListener(e,t,r){const i="function"==typeof t?void 0:t;e="boolean"==typeof r&&r||"object"==typeof r&&r.capture?`${e}capture`:e,t="function"==typeof t?t:t.handleEvent,this.on(e,t,i)},removeEventListener(e,t,r){const i="function"==typeof t?void 0:t;e="boolean"==typeof r&&r||"object"==typeof r&&r.capture?`${e}capture`:e,t="function"==typeof t?t:t.handleEvent,this.off(e,t,i)},dispatchEvent(e){if(!(e instanceof ua))throw new Error("DisplayObject cannot propagate events outside of the Federated Events API");return e.defaultPrevented=!1,e.path=null,e.target=this,e.manager.dispatchEvent(e),!e.defaultPrevented}};Ki.mixin(ba),Ki.mixin({accessible:!1,accessibleTitle:null,accessibleHint:null,tabIndex:0,_accessibleActive:!1,_accessibleDiv:null,accessibleType:"button",accessiblePointerEvents:"auto",accessibleChildren:!0,renderId:-1});class Ta{constructor(e){this.debug=!1,this._isActive=!1,this._isMobileAccessibility=!1,this.pool=[],this.renderId=0,this.children=[],this.androidUpdateCount=0,this.androidUpdateFrequency=500,this._hookDiv=null,(z.tablet||z.phone)&&this.createTouchHook();const t=document.createElement("div");t.style.width="100px",t.style.height="100px",t.style.position="absolute",t.style.top="0px",t.style.left="0px",t.style.zIndex=2..toString(),this.div=t,this.renderer=e,this._onKeyDown=this._onKeyDown.bind(this),this._onMouseMove=this._onMouseMove.bind(this),globalThis.addEventListener("keydown",this._onKeyDown,!1)}get isActive(){return this._isActive}get isMobileAccessibility(){return this._isMobileAccessibility}createTouchHook(){const e=document.createElement("button");e.style.width="1px",e.style.height="1px",e.style.position="absolute",e.style.top="-1000px",e.style.left="-1000px",e.style.zIndex=2..toString(),e.style.backgroundColor="#FF0000",e.title="select to enable accessibility for this content",e.addEventListener("focus",(()=>{this._isMobileAccessibility=!0,this.activate(),this.destroyTouchHook()})),document.body.appendChild(e),this._hookDiv=e}destroyTouchHook(){this._hookDiv&&(document.body.removeChild(this._hookDiv),this._hookDiv=null)}activate(){this._isActive||(this._isActive=!0,globalThis.document.addEventListener("mousemove",this._onMouseMove,!0),globalThis.removeEventListener("keydown",this._onKeyDown,!1),this.renderer.on("postrender",this.update,this),this.renderer.view.parentNode?.appendChild(this.div))}deactivate(){this._isActive&&!this._isMobileAccessibility&&(this._isActive=!1,globalThis.document.removeEventListener("mousemove",this._onMouseMove,!0),globalThis.addEventListener("keydown",this._onKeyDown,!1),this.renderer.off("postrender",this.update),this.div.parentNode?.removeChild(this.div))}updateAccessibleObjects(e){if(!e.visible||!e.accessibleChildren)return;e.accessible&&e.isInteractive()&&(e._accessibleActive||this.addChild(e),e.renderId=this.renderId);const t=e.children;if(t)for(let e=0;e<t.length;e++)this.updateAccessibleObjects(t[e])}update(){const e=performance.now();if(z.android.device&&e<this.androidUpdateCount)return;if(this.androidUpdateCount=e+this.androidUpdateFrequency,!this.renderer.renderingToScreen)return;this.renderer.lastObjectRendered&&this.updateAccessibleObjects(this.renderer.lastObjectRendered);const{x:t,y:r,width:i,height:a}=this.renderer.view.getBoundingClientRect(),{width:n,height:s,resolution:o}=this.renderer,l=i/n*o,h=a/s*o;let u=this.div;u.style.left=`${t}px`,u.style.top=`${r}px`,u.style.width=`${n}px`,u.style.height=`${s}px`;for(let e=0;e<this.children.length;e++){const t=this.children[e];if(t.renderId!==this.renderId)t._accessibleActive=!1,Ie(this.children,e,1),this.div.removeChild(t._accessibleDiv),this.pool.push(t._accessibleDiv),t._accessibleDiv=null,e--;else{u=t._accessibleDiv;let e=t.hitArea;const r=t.worldTransform;t.hitArea?(u.style.left=(r.tx+e.x*r.a)*l+"px",u.style.top=(r.ty+e.y*r.d)*h+"px",u.style.width=e.width*r.a*l+"px",u.style.height=e.height*r.d*h+"px"):(e=t.getBounds(),this.capHitArea(e),u.style.left=e.x*l+"px",u.style.top=e.y*h+"px",u.style.width=e.width*l+"px",u.style.height=e.height*h+"px",u.title!==t.accessibleTitle&&null!==t.accessibleTitle&&(u.title=t.accessibleTitle),u.getAttribute("aria-label")!==t.accessibleHint&&null!==t.accessibleHint&&u.setAttribute("aria-label",t.accessibleHint)),t.accessibleTitle===u.title&&t.tabIndex===u.tabIndex||(u.title=t.accessibleTitle,u.tabIndex=t.tabIndex,this.debug&&this.updateDebugHTML(u))}}this.renderId++}updateDebugHTML(e){e.innerHTML=`type: ${e.type}</br> title : ${e.title}</br> tabIndex: ${e.tabIndex}`}capHitArea(e){e.x<0&&(e.width+=e.x,e.x=0),e.y<0&&(e.height+=e.y,e.y=0);const{width:t,height:r}=this.renderer;e.x+e.width>t&&(e.width=t-e.x),e.y+e.height>r&&(e.height=r-e.y)}addChild(e){let t=this.pool.pop();t||(t=document.createElement("button"),t.style.width="100px",t.style.height="100px",t.style.backgroundColor=this.debug?"rgba(255,255,255,0.5)":"transparent",t.style.position="absolute",t.style.zIndex=2..toString(),t.style.borderStyle="none",navigator.userAgent.toLowerCase().includes("chrome")?t.setAttribute("aria-live","off"):t.setAttribute("aria-live","polite"),navigator.userAgent.match(/rv:.*Gecko\//)?t.setAttribute("aria-relevant","additions"):t.setAttribute("aria-relevant","text"),t.addEventListener("click",this._onClick.bind(this)),t.addEventListener("focus",this._onFocus.bind(this)),t.addEventListener("focusout",this._onFocusOut.bind(this))),t.style.pointerEvents=e.accessiblePointerEvents,t.type=e.accessibleType,e.accessibleTitle&&null!==e.accessibleTitle?t.title=e.accessibleTitle:e.accessibleHint&&null!==e.accessibleHint||(t.title=`displayObject ${e.tabIndex}`),e.accessibleHint&&null!==e.accessibleHint&&t.setAttribute("aria-label",e.accessibleHint),this.debug&&this.updateDebugHTML(t),e._accessibleActive=!0,e._accessibleDiv=t,t.displayObject=e,this.children.push(e),this.div.appendChild(e._accessibleDiv),e._accessibleDiv.tabIndex=e.tabIndex}_dispatchEvent(e,t){const{displayObject:r}=e.target,i=this.renderer.events.rootBoundary,a=Object.assign(new ua(i),{target:r});i.rootTarget=this.renderer.lastObjectRendered,t.forEach((e=>i.dispatchEvent(a,e)))}_onClick(e){this._dispatchEvent(e,["click","pointertap","tap"])}_onFocus(e){e.target.getAttribute("aria-live")||e.target.setAttribute("aria-live","assertive"),this._dispatchEvent(e,["mouseover"])}_onFocusOut(e){e.target.getAttribute("aria-live")||e.target.setAttribute("aria-live","polite"),this._dispatchEvent(e,["mouseout"])}_onKeyDown(e){9===e.keyCode&&this.activate()}_onMouseMove(e){0===e.movementX&&0===e.movementY||this.deactivate()}destroy(){this.destroyTouchHook(),this.div=null,globalThis.document.removeEventListener("mousemove",this._onMouseMove,!0),globalThis.removeEventListener("keydown",this._onKeyDown),this.pool=null,this.children=null,this.renderer=null}}Ta.extension={name:"accessibility",type:[Xe.RendererPlugin,Xe.CanvasRendererPlugin]},Ye.add(Ta);const Aa=class{constructor(e){this.stage=new $i,e=Object.assign({forceCanvas:!1},e),this.renderer=function(e){for(const t of Mi)if(t.test(e))return new t(e);throw new Error("Unable to auto-detect a suitable renderer.")}(e),Aa._plugins.forEach((t=>{t.init.call(this,e)}))}render(){this.renderer.render(this.stage)}get view(){return this.renderer.view}get screen(){return this.renderer.screen}destroy(e,t){const r=Aa._plugins.slice(0);r.reverse(),r.forEach((e=>{e.destroy.call(this)})),this.stage.destroy(t),this.stage=null,this.renderer.destroy(e),this.renderer=null}};let Ea=Aa;Ea._plugins=[],Ye.handleByList(Xe.Application,Ea._plugins);class Sa{static init(e){Object.defineProperty(this,"resizeTo",{set(e){globalThis.removeEventListener("resize",this.queueResize),this._resizeTo=e,e&&(globalThis.addEventListener("resize",this.queueResize),this.resize())},get(){return this._resizeTo}}),this.queueResize=()=>{this._resizeTo&&(this.cancelResize(),this._resizeId=requestAnimationFrame((()=>this.resize())))},this.cancelResize=()=>{this._resizeId&&(cancelAnimationFrame(this._resizeId),this._resizeId=null)},this.resize=()=>{if(!this._resizeTo)return;let e,t;if(this.cancelResize(),this._resizeTo===globalThis.window)e=globalThis.innerWidth,t=globalThis.innerHeight;else{const{clientWidth:r,clientHeight:i}=this._resizeTo;e=r,t=i}this.renderer.resize(e,t),this.render()},this._resizeId=null,this._resizeTo=null,this.resizeTo=e.resizeTo||null}static destroy(){globalThis.removeEventListener("resize",this.queueResize),this.cancelResize(),this.cancelResize=null,this.queueResize=null,this.resizeTo=null,this.resize=null}}Sa.extension=Xe.Application,Ye.add(Sa);const wa={loader:Xe.LoadParser,resolver:Xe.ResolveParser,cache:Xe.CacheParser,detection:Xe.DetectionParser};Ye.handle(Xe.Asset,(e=>{const t=e.ref;Object.entries(wa).filter((([e])=>!!t[e])).forEach((([e,r])=>Ye.add(Object.assign(t[e],{extension:t[e].extension??r}))))}),(e=>{const t=e.ref;Object.keys(wa).filter((e=>!!t[e])).forEach((e=>Ye.remove(t[e])))}));class ka{constructor(e,t=!1){this._loader=e,this._assetList=[],this._isLoading=!1,this._maxConcurrent=1,this.verbose=t}add(e){e.forEach((e=>{this._assetList.push(e)})),this.verbose&&console.log("[BackgroundLoader] assets: ",this._assetList),this._isActive&&!this._isLoading&&this._next()}async _next(){if(this._assetList.length&&this._isActive){this._isLoading=!0;const e=[],t=Math.min(this._assetList.length,this._maxConcurrent);for(let r=0;r<t;r++)e.push(this._assetList.pop());await this._loader.load(e),this._isLoading=!1,this._next()}}get active(){return this._isActive}set active(e){this._isActive!==e&&(this._isActive=e,e&&!this._isLoading&&this._next())}}function Ca(e,t){const r=e.split("?")[0],i=K.extname(r).toLowerCase();return Array.isArray(t)?t.includes(i):i===t}const Ma=(e,t)=>(Array.isArray(e)||(e=[e]),t?e.map((e=>"string"==typeof e?t(e):e)):e),Ra=new class{constructor(){this._parsers=[],this._cache=new Map,this._cacheMap=new Map}reset(){this._cacheMap.clear(),this._cache.clear()}has(e){return this._cache.has(e)}get(e){const t=this._cache.get(e);return t||console.warn(`[Assets] Asset id ${e} was not found in the Cache`),t}set(e,t){const r=Ma(e);let i;for(let e=0;e<this.parsers.length;e++){const a=this.parsers[e];if(a.test(t)){i=a.getCacheableAssets(r,t);break}}i||(i={},r.forEach((e=>{i[e]=t})));const a=Object.keys(i),n={cacheKeys:a,keys:r};if(r.forEach((e=>{this._cacheMap.set(e,n)})),a.forEach((e=>{this._cache.has(e)&&this._cache.get(e)!==t&&console.warn("[Cache] already has key:",e),this._cache.set(e,i[e])})),t instanceof Er){const e=t;r.forEach((t=>{e.baseTexture!==Er.EMPTY.baseTexture&&st.addToCache(e.baseTexture,t),Er.addToCache(e,t)}))}}remove(e){if(this._cacheMap.get(e),!this._cacheMap.has(e))return void console.warn(`[Assets] Asset id ${e} was not found in the Cache`);const t=this._cacheMap.get(e);t.cacheKeys.forEach((e=>{this._cache.delete(e)})),t.keys.forEach((e=>{this._cacheMap.delete(e)}))}get parsers(){return this._parsers}},Ia=e=>!Array.isArray(e);class Pa{constructor(){this._parsers=[],this._parsersValidated=!1,this.parsers=new Proxy(this._parsers,{set:(e,t,r)=>(this._parsersValidated=!1,e[t]=r,!0)}),this.promiseCache={}}reset(){this._parsersValidated=!1,this.promiseCache={}}_getLoadPromiseAndParser(e,t){const r={promise:null,parser:null};return r.promise=(async()=>{let i=null,a=null;if(t.loadParser&&(a=this._parserHash[t.loadParser],a||console.warn(`[Assets] specified load parser "${t.loadParser}" not found while loading ${e}`)),!a){for(let r=0;r<this.parsers.length;r++){const i=this.parsers[r];if(i.load&&i.test?.(e,t,this)){a=i;break}}if(!a)return console.warn(`[Assets] ${e} could not be loaded as we don't know how to parse it, ensure the correct parser has been added`),null}i=await a.load(e,t,this),r.parser=a;for(let e=0;e<this.parsers.length;e++){const a=this.parsers[e];a.parse&&a.parse&&await(a.testParse?.(i,t,this))&&(i=await a.parse(i,t,this)||i,r.parser=a)}return i})(),r}async load(e,t){this._parsersValidated||this._validateParsers();let r=0;const i={},a=Ia(e),n=Ma(e,(e=>({src:e}))),s=n.length,o=n.map((async e=>{const a=K.toAbsolute(e.src);if(!i[e.src])try{this.promiseCache[a]||(this.promiseCache[a]=this._getLoadPromiseAndParser(a,e)),i[e.src]=await this.promiseCache[a].promise,t&&t(++r/s)}catch(t){throw delete this.promiseCache[a],delete i[e.src],new Error(`[Loader.load] Failed to load ${a}.\n${t}`)}}));return await Promise.all(o),a?i[n[0].src]:i}async unload(e){const t=Ma(e,(e=>({src:e}))).map((async e=>{const t=K.toAbsolute(e.src),r=this.promiseCache[t];if(r){const i=await r.promise;r.parser?.unload?.(i,e,this),delete this.promiseCache[t]}}));await Promise.all(t)}_validateParsers(){this._parsersValidated=!0,this._parserHash=this._parsers.filter((e=>e.name)).reduce(((e,t)=>(e[t.name]&&console.warn(`[Assets] loadParser name conflict "${t.name}"`),{...e,[t.name]:t})),{})}}var Da=(e=>(e[e.Low=0]="Low",e[e.Normal=1]="Normal",e[e.High=2]="High",e))(Da||{});function Ba(e,t){if(Array.isArray(t)){for(const r of t)if(e.startsWith(`data:${r}`))return!0;return!1}return e.startsWith(`data:${t}`)}const Na={extension:{type:Xe.LoadParser,priority:Da.Low},name:"loadJson",test:e=>Ba(e,"application/json")||Ca(e,".json"),async load(e){const t=await b.ADAPTER.fetch(e);return await t.json()}};Ye.add(Na);const Fa={name:"loadTxt",extension:{type:Xe.LoadParser,priority:Da.Low},test:e=>Ba(e,"text/plain")||Ca(e,".txt"),async load(e){const t=await b.ADAPTER.fetch(e);return await t.text()}};Ye.add(Fa);const La=["normal","bold","100","200","300","400","500","600","700","800","900"],Oa=[".ttf",".otf",".woff",".woff2"],za=["font/ttf","font/otf","font/woff","font/woff2"],Ga=/^(--|-?[A-Z_])[0-9A-Z_-]*$/i,Ua={extension:{type:Xe.LoadParser,priority:Da.Low},name:"loadWebFont",test:e=>Ba(e,za)||Ca(e,Oa),async load(e,t){const r=b.ADAPTER.getFontFaceSet();if(r){const i=[],a=t.data?.family??function(e){const t=K.extname(e),r=K.basename(e,t).replace(/(-|_)/g," ").toLowerCase().split(" ").map((e=>e.charAt(0).toUpperCase()+e.slice(1)));let i=r.length>0;for(const e of r)if(!e.match(Ga)){i=!1;break}let a=r.join(" ");return i||(a=`"${a.replace(/[\\"]/g,"\\$&")}"`),a}(e),n=t.data?.weights?.filter((e=>La.includes(e)))??["normal"],s=t.data??{};for(let t=0;t<n.length;t++){const o=n[t],l=new FontFace(a,`url(${encodeURI(e)})`,{...s,weight:o});await l.load(),r.add(l),i.push(l)}return 1===i.length?i[0]:i}return console.warn("[loadWebFont] FontFace API is not supported. Skipping loading font"),null},unload(e){(Array.isArray(e)?e:[e]).forEach((e=>b.ADAPTER.getFontFaceSet().delete(e)))}};Ye.add(Ua);let Ha,Va=0;const ja="\n    async function checkImageBitmap()\n    {\n        try\n        {\n            if (typeof createImageBitmap !== 'function') return false;\n\n            const response = await fetch('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAQAAAC1HAwCAAAAC0lEQVR42mP8/x8AAwMCAO+ip1sAAAAASUVORK5CYII=');\n            const imageBlob =  await response.blob();\n            const imageBitmap = await createImageBitmap(imageBlob);\n\n            return imageBitmap.width === 1 && imageBitmap.height === 1;\n        }\n        catch (e)\n        {\n            return false;\n        }\n    }\n    checkImageBitmap().then((result) => { self.postMessage(result); });\n    ",Xa="\n    async function loadImageBitmap(url)\n    {\n        const response = await fetch(url);\n\n        if (!response.ok)\n        {\n            throw new Error(`[WorkerManager.loadImageBitmap] Failed to fetch ${url}: `\n                + `${response.status} ${response.statusText}`);\n        }\n\n        const imageBlob =  await response.blob();\n        const imageBitmap = await createImageBitmap(imageBlob);\n\n        return imageBitmap;\n    }\n    self.onmessage = async (event) =>\n    {\n        try\n        {\n            const imageBitmap = await loadImageBitmap(event.data.data[0]);\n\n            self.postMessage({\n                data: imageBitmap,\n                uuid: event.data.uuid,\n                id: event.data.id,\n            }, [imageBitmap]);\n        }\n        catch(e)\n        {\n            self.postMessage({\n                error: e,\n                uuid: event.data.uuid,\n                id: event.data.id,\n            });\n        }\n    };";let Ka;const Wa=new class{constructor(){this._initialized=!1,this._createdWorkers=0,this.workerPool=[],this.queue=[],this.resolveHash={}}isImageBitmapSupported(){return void 0!==this._isImageBitmapSupported||(this._isImageBitmapSupported=new Promise((e=>{const t=URL.createObjectURL(new Blob([ja],{type:"application/javascript"})),r=new Worker(t);r.addEventListener("message",(i=>{r.terminate(),URL.revokeObjectURL(t),e(i.data)}))}))),this._isImageBitmapSupported}loadImageBitmap(e){return this._run("loadImageBitmap",[e])}async _initWorkers(){this._initialized||(this._initialized=!0)}getWorker(){void 0===Ha&&(Ha=navigator.hardwareConcurrency||4);let e=this.workerPool.pop();return!e&&this._createdWorkers<Ha&&(Ka||(Ka=URL.createObjectURL(new Blob([Xa],{type:"application/javascript"}))),this._createdWorkers++,e=new Worker(Ka),e.addEventListener("message",(e=>{this.complete(e.data),this.returnWorker(e.target),this.next()}))),e}returnWorker(e){this.workerPool.push(e)}complete(e){void 0!==e.error?this.resolveHash[e.uuid].reject(e.error):this.resolveHash[e.uuid].resolve(e.data),this.resolveHash[e.uuid]=null}async _run(e,t){await this._initWorkers();const r=new Promise(((r,i)=>{this.queue.push({id:e,arguments:t,resolve:r,reject:i})}));return this.next(),r}next(){if(!this.queue.length)return;const e=this.getWorker();if(!e)return;const t=this.queue.pop(),r=t.id;this.resolveHash[Va]={resolve:t.resolve,reject:t.reject},e.postMessage({data:t.arguments,uuid:Va++,id:r})}};function Ya(e,t,r){const i=new Er(e);return i.baseTexture.on("dispose",(()=>{delete t.promiseCache[r]})),i}const Za=[".jpeg",".jpg",".png",".webp",".avif"],Ja=["image/jpeg","image/png","image/webp","image/avif"],$a={name:"loadTextures",extension:{type:Xe.LoadParser,priority:Da.High},config:{preferWorkers:!0,preferCreateImageBitmap:!0,crossOrigin:"anonymous"},test:e=>Ba(e,Ja)||Ca(e,Za),async load(e,t,r){let i=null;i=globalThis.createImageBitmap&&this.config.preferCreateImageBitmap?this.config.preferWorkers&&await Wa.isImageBitmapSupported()?await Wa.loadImageBitmap(e):await async function(e){const t=await b.ADAPTER.fetch(e);if(!t.ok)throw new Error(`[loadImageBitmap] Failed to fetch ${e}: ${t.status} ${t.statusText}`);const r=await t.blob();return await createImageBitmap(r)}(e):await new Promise((t=>{i=new Image,i.crossOrigin=this.config.crossOrigin,i.src=e,i.complete?t(i):i.onload=()=>{t(i)}}));const a=new st(i,{resolution:je(e),...t.data});return a.resource.src=e,Ya(a,r,e)},unload(e){e.destroy(!0)}};Ye.add($a);const qa={extension:{type:Xe.LoadParser,priority:Da.High},name:"loadSVG",test:e=>Ba(e,"image/svg+xml")||Ca(e,".svg"),testParse:async e=>Hi.test(e),async parse(e,t,r){const i=new Hi(e,t?.data?.resourceOptions);await i.load();const a=new st(i,{resolution:je(e),...t?.data});return a.resource.src=e,Ya(a,r,e)},load:async(e,t)=>(await b.ADAPTER.fetch(e)).text(),unload:$a.unload};function Qa(e,t,r,i,a){const n=t[r];for(let s=0;s<n.length;s++){const o=n[s];r<t.length-1?Qa(e.replace(i[r],o),t,r+1,i,a):a.push(e.replace(i[r],o))}}function en(e){const t=e.match(/\{(.*?)\}/g),r=[];if(t){const i=[];t.forEach((e=>{const t=e.substring(1,e.length-1).split(",");i.push(t)})),Qa(e,i,0,t,r)}else r.push(e);return r}Ye.add(qa);class tn{constructor(){this._defaultBundleIdentifierOptions={connector:"-",createBundleAssetId:(e,t)=>`${e}${this._bundleIdConnector}${t}`,extractAssetIdFromBundle:(e,t)=>t.replace(`${e}${this._bundleIdConnector}`,"")},this._bundleIdConnector=this._defaultBundleIdentifierOptions.connector,this._createBundleAssetId=this._defaultBundleIdentifierOptions.createBundleAssetId,this._extractAssetIdFromBundle=this._defaultBundleIdentifierOptions.extractAssetIdFromBundle,this._assetMap={},this._preferredOrder=[],this._parsers=[],this._resolverHash={},this._bundles={}}setBundleIdentifier(e){if(this._bundleIdConnector=e.connector??this._bundleIdConnector,this._createBundleAssetId=e.createBundleAssetId??this._createBundleAssetId,this._extractAssetIdFromBundle=e.extractAssetIdFromBundle??this._extractAssetIdFromBundle,"bar"!==this._extractAssetIdFromBundle("foo",this._createBundleAssetId("foo","bar")))throw new Error("[Resolver] GenerateBundleAssetId are not working correctly")}prefer(...e){e.forEach((e=>{this._preferredOrder.push(e),e.priority||(e.priority=Object.keys(e.params))})),this._resolverHash={}}set basePath(e){this._basePath=e}get basePath(){return this._basePath}set rootPath(e){this._rootPath=e}get rootPath(){return this._rootPath}get parsers(){return this._parsers}reset(){this.setBundleIdentifier(this._defaultBundleIdentifierOptions),this._assetMap={},this._preferredOrder=[],this._resolverHash={},this._rootPath=null,this._basePath=null,this._manifest=null,this._bundles={},this._defaultSearchParams=null}setDefaultSearchParams(e){if("string"==typeof e)this._defaultSearchParams=e;else{const t=e;this._defaultSearchParams=Object.keys(t).map((e=>`${encodeURIComponent(e)}=${encodeURIComponent(t[e])}`)).join("&")}}addManifest(e){this._manifest&&console.warn("[Resolver] Manifest already exists, this will be overwritten"),this._manifest=e,e.bundles.forEach((e=>{this.addBundle(e.name,e.assets)}))}addBundle(e,t){const r=[];Array.isArray(t)?t.forEach((t=>{if("string"==typeof t.name){const i=this._createBundleAssetId(e,t.name);r.push(i),this.add([t.name,i],t.srcs,t.data)}else{const i=t.name.map((t=>this._createBundleAssetId(e,t)));i.forEach((e=>{r.push(e)})),this.add([...t.name,...i],t.srcs)}})):Object.keys(t).forEach((i=>{r.push(this._createBundleAssetId(e,i)),this.add([i,this._createBundleAssetId(e,i)],t[i])})),this._bundles[e]=r}add(e,t,r){const i=Ma(e);i.forEach((e=>{this.hasKey(e)&&console.warn(`[Resolver] already has key: ${e} overwriting`)})),Array.isArray(t)||(t="string"==typeof t?en(t):[t]);const a=t.map((e=>{let t=e;if("string"==typeof e){let r=!1;for(let i=0;i<this._parsers.length;i++){const a=this._parsers[i];if(a.test(e)){t=a.parse(e),r=!0;break}}r||(t={src:e})}return t.format||(t.format=t.src.split(".").pop()),t.alias||(t.alias=i),(this._basePath||this._rootPath)&&(t.src=K.toAbsolute(t.src,this._basePath,this._rootPath)),t.src=this._appendDefaultSearchParams(t.src),t.data=t.data??r,t}));i.forEach((e=>{this._assetMap[e]=a}))}resolveBundle(e){const t=Ia(e);e=Ma(e);const r={};return e.forEach((e=>{const t=this._bundles[e];if(t){const i=this.resolve(t),a={};for(const t in i){const r=i[t];a[this._extractAssetIdFromBundle(e,t)]=r}r[e]=a}})),t?r[e[0]]:r}resolveUrl(e){const t=this.resolve(e);if("string"!=typeof e){const e={};for(const r in t)e[r]=t[r].src;return e}return t.src}resolve(e){const t=Ia(e);e=Ma(e);const r={};return e.forEach((e=>{if(!this._resolverHash[e])if(this._assetMap[e]){let t=this._assetMap[e];const r=this._getPreferredOrder(t),i=t[0];r?.priority.forEach((e=>{r.params[e].forEach((r=>{const i=t.filter((t=>!!t[e]&&t[e]===r));i.length&&(t=i)}))})),this._resolverHash[e]=t[0]??i}else{let t=e;(this._basePath||this._rootPath)&&(t=K.toAbsolute(t,this._basePath,this._rootPath)),t=this._appendDefaultSearchParams(t),this._resolverHash[e]={src:t}}r[e]=this._resolverHash[e]})),t?r[e[0]]:r}hasKey(e){return!!this._assetMap[e]}hasBundle(e){return!!this._bundles[e]}_getPreferredOrder(e){for(let t=0;t<e.length;t++){const t=e[0],r=this._preferredOrder.find((e=>e.params.format.includes(t.format)));if(r)return r}return this._preferredOrder[0]}_appendDefaultSearchParams(e){return this._defaultSearchParams?`${e}${/\?/.test(e)?"&":"?"}${this._defaultSearchParams}`:e}}const rn=new class{constructor(){this._detections=[],this._initialized=!1,this.resolver=new tn,this.loader=new Pa,this.cache=Ra,this._backgroundLoader=new ka(this.loader),this._backgroundLoader.active=!0,this.reset()}async init(e={}){if(this._initialized)return void console.warn("[Assets]AssetManager already initialized, did you load before calling this Asset.init()?");if(this._initialized=!0,e.defaultSearchParams&&this.resolver.setDefaultSearchParams(e.defaultSearchParams),e.basePath&&(this.resolver.basePath=e.basePath),e.bundleIdentifier&&this.resolver.setBundleIdentifier(e.bundleIdentifier),e.manifest){let t=e.manifest;"string"==typeof t&&(t=await this.load(t)),this.resolver.addManifest(t)}const t=e.texturePreference?.resolution??1,r="number"==typeof t?[t]:t;let i=[];if(e.texturePreference?.format){const t=e.texturePreference?.format;i="string"==typeof t?[t]:t;for(const e of this._detections)await e.test()||(i=await e.remove(i))}else for(const e of this._detections)await e.test()&&(i=await e.add(i));this.resolver.prefer({params:{format:i,resolution:r}}),e.preferences&&this.setPreferences(e.preferences)}add(e,t,r){this.resolver.add(e,t,r)}async load(e,t){this._initialized||await this.init();const r=Ia(e),i=Ma(e).map((e=>"string"!=typeof e?(this.resolver.add(e.src,e),e.src):(this.resolver.hasKey(e)||this.resolver.add(e,e),e))),a=this.resolver.resolve(i),n=await this._mapLoadToResolve(a,t);return r?n[i[0]]:n}addBundle(e,t){this.resolver.addBundle(e,t)}async loadBundle(e,t){this._initialized||await this.init();let r=!1;"string"==typeof e&&(r=!0,e=[e]);const i=this.resolver.resolveBundle(e),a={},n=Object.keys(i);let s=0,o=0;const l=()=>{t?.(++s/o)},h=n.map((e=>{const t=i[e];return o+=Object.keys(t).length,this._mapLoadToResolve(t,l).then((t=>{a[e]=t}))}));return await Promise.all(h),r?a[e[0]]:a}async backgroundLoad(e){this._initialized||await this.init(),"string"==typeof e&&(e=[e]);const t=this.resolver.resolve(e);this._backgroundLoader.add(Object.values(t))}async backgroundLoadBundle(e){this._initialized||await this.init(),"string"==typeof e&&(e=[e]);const t=this.resolver.resolveBundle(e);Object.values(t).forEach((e=>{this._backgroundLoader.add(Object.values(e))}))}reset(){this.resolver.reset(),this.loader.reset(),this.cache.reset(),this._initialized=!1}get(e){if("string"==typeof e)return Ra.get(e);const t={};for(let r=0;r<e.length;r++)t[r]=Ra.get(e[r]);return t}async _mapLoadToResolve(e,t){const r=Object.values(e),i=Object.keys(e);this._backgroundLoader.active=!1;const a=await this.loader.load(r,t);this._backgroundLoader.active=!0;const n={};return r.forEach(((e,t)=>{const r=a[e.src],s=[e.src];e.alias&&s.push(...e.alias),n[i[t]]=r,Ra.set(s,r)})),n}async unload(e){this._initialized||await this.init();const t=Ma(e).map((e=>"string"!=typeof e?e.src:e)),r=this.resolver.resolve(t);await this._unloadFromResolved(r)}async unloadBundle(e){this._initialized||await this.init(),e=Ma(e);const t=this.resolver.resolveBundle(e),r=Object.keys(t).map((e=>this._unloadFromResolved(t[e])));await Promise.all(r)}async _unloadFromResolved(e){const t=Object.values(e);t.forEach((e=>{Ra.remove(e.src)})),await this.loader.unload(t)}get detections(){return this._detections}get preferWorkers(){return $a.config.preferWorkers}set preferWorkers(e){Y("7.2.0","Assets.prefersWorkers is deprecated, use Assets.setPreferences({ preferWorkers: true }) instead."),this.setPreferences({preferWorkers:e})}setPreferences(e){this.loader.parsers.forEach((t=>{t.config&&Object.keys(t.config).filter((t=>t in e)).forEach((r=>{t.config[r]=e[r]}))}))}};Ye.handleByList(Xe.LoadParser,rn.loader.parsers).handleByList(Xe.ResolveParser,rn.resolver.parsers).handleByList(Xe.CacheParser,rn.cache.parsers).handleByList(Xe.DetectionParser,rn.detections);const an={extension:Xe.CacheParser,test:e=>Array.isArray(e)&&e.every((e=>e instanceof Er)),getCacheableAssets:(e,t)=>{const r={};return e.forEach((e=>{t.forEach(((t,i)=>{r[e+(0===i?"":i+1)]=t}))})),r}};Ye.add(an);const nn={extension:{type:Xe.DetectionParser,priority:1},test:async()=>{if(!globalThis.createImageBitmap)return!1;const e=await b.ADAPTER.fetch("data:image/avif;base64,AAAAIGZ0eXBhdmlmAAAAAGF2aWZtaWYxbWlhZk1BMUIAAADybWV0YQAAAAAAAAAoaGRscgAAAAAAAAAAcGljdAAAAAAAAAAAAAAAAGxpYmF2aWYAAAAADnBpdG0AAAAAAAEAAAAeaWxvYwAAAABEAAABAAEAAAABAAABGgAAAB0AAAAoaWluZgAAAAAAAQAAABppbmZlAgAAAAABAABhdjAxQ29sb3IAAAAAamlwcnAAAABLaXBjbwAAABRpc3BlAAAAAAAAAAIAAAACAAAAEHBpeGkAAAAAAwgICAAAAAxhdjFDgQ0MAAAAABNjb2xybmNseAACAAIAAYAAAAAXaXBtYQAAAAAAAAABAAEEAQKDBAAAACVtZGF0EgAKCBgANogQEAwgMg8f8D///8WfhwB8+ErK42A=").then((e=>e.blob()));return createImageBitmap(e).then((()=>!0),(()=>!1))},add:async e=>[...e,"avif"],remove:async e=>e.filter((e=>"avif"!==e))};Ye.add(nn);const sn={extension:{type:Xe.DetectionParser,priority:0},test:async()=>{if(!globalThis.createImageBitmap)return!1;const e=await b.ADAPTER.fetch("data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAAAAAAfQ//73v/+BiOh/AAA=").then((e=>e.blob()));return createImageBitmap(e).then((()=>!0),(()=>!1))},add:async e=>[...e,"webp"],remove:async e=>e.filter((e=>"webp"!==e))};Ye.add(sn);const on=["png","jpg","jpeg"],ln={extension:{type:Xe.DetectionParser,priority:-1},test:()=>Promise.resolve(!0),add:async e=>[...e,...on],remove:async e=>e.filter((e=>!on.includes(e)))};Ye.add(ln);const hn={extension:Xe.ResolveParser,test:$a.test,parse:e=>({resolution:parseFloat(b.RETINA_PREFIX.exec(e)?.[1]??"1"),format:e.split(".").pop(),src:e})};Ye.add(hn);const un=(e,t)=>{const r=t.split("?")[1];return r&&(e+=`?${r}`),e};var dn=(e=>(e[e.COMPRESSED_RGB_S3TC_DXT1_EXT=33776]="COMPRESSED_RGB_S3TC_DXT1_EXT",e[e.COMPRESSED_RGBA_S3TC_DXT1_EXT=33777]="COMPRESSED_RGBA_S3TC_DXT1_EXT",e[e.COMPRESSED_RGBA_S3TC_DXT3_EXT=33778]="COMPRESSED_RGBA_S3TC_DXT3_EXT",e[e.COMPRESSED_RGBA_S3TC_DXT5_EXT=33779]="COMPRESSED_RGBA_S3TC_DXT5_EXT",e[e.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT=35917]="COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT",e[e.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT=35918]="COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT",e[e.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT=35919]="COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT",e[e.COMPRESSED_SRGB_S3TC_DXT1_EXT=35916]="COMPRESSED_SRGB_S3TC_DXT1_EXT",e[e.COMPRESSED_R11_EAC=37488]="COMPRESSED_R11_EAC",e[e.COMPRESSED_SIGNED_R11_EAC=37489]="COMPRESSED_SIGNED_R11_EAC",e[e.COMPRESSED_RG11_EAC=37490]="COMPRESSED_RG11_EAC",e[e.COMPRESSED_SIGNED_RG11_EAC=37491]="COMPRESSED_SIGNED_RG11_EAC",e[e.COMPRESSED_RGB8_ETC2=37492]="COMPRESSED_RGB8_ETC2",e[e.COMPRESSED_RGBA8_ETC2_EAC=37496]="COMPRESSED_RGBA8_ETC2_EAC",e[e.COMPRESSED_SRGB8_ETC2=37493]="COMPRESSED_SRGB8_ETC2",e[e.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC=37497]="COMPRESSED_SRGB8_ALPHA8_ETC2_EAC",e[e.COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2=37494]="COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2",e[e.COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2=37495]="COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2",e[e.COMPRESSED_RGB_PVRTC_4BPPV1_IMG=35840]="COMPRESSED_RGB_PVRTC_4BPPV1_IMG",e[e.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG=35842]="COMPRESSED_RGBA_PVRTC_4BPPV1_IMG",e[e.COMPRESSED_RGB_PVRTC_2BPPV1_IMG=35841]="COMPRESSED_RGB_PVRTC_2BPPV1_IMG",e[e.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG=35843]="COMPRESSED_RGBA_PVRTC_2BPPV1_IMG",e[e.COMPRESSED_RGB_ETC1_WEBGL=36196]="COMPRESSED_RGB_ETC1_WEBGL",e[e.COMPRESSED_RGB_ATC_WEBGL=35986]="COMPRESSED_RGB_ATC_WEBGL",e[e.COMPRESSED_RGBA_ATC_EXPLICIT_ALPHA_WEBGL=35986]="COMPRESSED_RGBA_ATC_EXPLICIT_ALPHA_WEBGL",e[e.COMPRESSED_RGBA_ATC_INTERPOLATED_ALPHA_WEBGL=34798]="COMPRESSED_RGBA_ATC_INTERPOLATED_ALPHA_WEBGL",e[e.COMPRESSED_RGBA_ASTC_4x4_KHR=37808]="COMPRESSED_RGBA_ASTC_4x4_KHR",e))(dn||{});const cn={33776:.5,33777:.5,33778:1,33779:1,35916:.5,35917:.5,35918:1,35919:1,37488:.5,37489:.5,37490:1,37491:1,37492:.5,37496:1,37493:.5,37497:1,37494:.5,37495:.5,35840:.5,35842:.5,35841:.25,35843:.25,36196:.5,35986:.5,35986:1,34798:1,37808:1};let mn,fn;function pn(){fn={s3tc:mn.getExtension("WEBGL_compressed_texture_s3tc"),s3tc_sRGB:mn.getExtension("WEBGL_compressed_texture_s3tc_srgb"),etc:mn.getExtension("WEBGL_compressed_texture_etc"),etc1:mn.getExtension("WEBGL_compressed_texture_etc1"),pvrtc:mn.getExtension("WEBGL_compressed_texture_pvrtc")||mn.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc"),atc:mn.getExtension("WEBGL_compressed_texture_atc"),astc:mn.getExtension("WEBGL_compressed_texture_astc")}}const gn={extension:{type:Xe.DetectionParser,priority:2},test:async()=>{const e=b.ADAPTER.createCanvas().getContext("webgl");return e?(mn=e,!0):(console.warn("WebGL not available for compressed textures."),!1)},add:async e=>{fn||pn();const t=[];for(const e in fn)fn[e]&&t.push(e);return[...t,...e]},remove:async e=>(fn||pn(),e.filter((e=>!(e in fn))))};Ye.add(gn);class yn extends it{constructor(e,t={width:1,height:1,autoLoad:!0}){let r,i;"string"==typeof e?(r=e,i=new Uint8Array):(r=null,i=e),super(i,t),this.origin=r,this.buffer=i?new Ze(i):null,this._load=null,this.loaded=!1,null!==this.origin&&!1!==t.autoLoad&&this.load(),null===this.origin&&this.buffer&&(this._load=Promise.resolve(this),this.loaded=!0,this.onBlobLoaded(this.buffer.rawBinaryData))}onBlobLoaded(e){}load(){return this._load||(this._load=fetch(this.origin).then((e=>e.blob())).then((e=>e.arrayBuffer())).then((e=>(this.data=new Uint32Array(e),this.buffer=new Ze(e),this.loaded=!0,this.onBlobLoaded(e),this.update(),this)))),this._load}}class vn extends yn{constructor(e,t){super(e,t),this.format=t.format,this.levels=t.levels||1,this._width=t.width,this._height=t.height,this._extension=vn._formatToExtension(this.format),(t.levelBuffers||this.buffer)&&(this._levelBuffers=t.levelBuffers||vn._createLevelBuffers(e instanceof Uint8Array?e:this.buffer.uint8View,this.format,this.levels,4,4,this.width,this.height))}upload(e,t,r){const i=e.gl;if(!e.context.extensions[this._extension])throw new Error(`${this._extension} textures are not supported on the current machine`);if(!this._levelBuffers)return!1;for(let e=0,t=this.levels;e<t;e++){const{levelID:t,levelWidth:r,levelHeight:a,levelBuffer:n}=this._levelBuffers[e];i.compressedTexImage2D(i.TEXTURE_2D,t,this.format,r,a,0,n)}return!0}onBlobLoaded(){this._levelBuffers=vn._createLevelBuffers(this.buffer.uint8View,this.format,this.levels,4,4,this.width,this.height)}static _formatToExtension(e){if(e>=33776&&e<=33779)return"s3tc";if(e>=37488&&e<=37497)return"etc";if(e>=35840&&e<=35843)return"pvrtc";if(e>=36196)return"etc1";if(e>=35986&&e<=34798)return"atc";throw new Error("Invalid (compressed) texture format given!")}static _createLevelBuffers(e,t,r,i,a,n,s){const o=new Array(r);let l=e.byteOffset,h=n,u=s,d=h+i-1&~(i-1),c=u+a-1&~(a-1),m=d*c*cn[t];for(let n=0;n<r;n++)o[n]={levelID:n,levelWidth:r>1?h:d,levelHeight:r>1?u:c,levelBuffer:new Uint8Array(e.buffer,l,m)},l+=m,h=h>>1||1,u=u>>1||1,d=h+i-1&~(i-1),c=u+a-1&~(a-1),m=d*c*cn[t];return o}}const xn={827611204:dn.COMPRESSED_RGBA_S3TC_DXT1_EXT,861165636:dn.COMPRESSED_RGBA_S3TC_DXT3_EXT,894720068:dn.COMPRESSED_RGBA_S3TC_DXT5_EXT},_n={70:dn.COMPRESSED_RGBA_S3TC_DXT1_EXT,71:dn.COMPRESSED_RGBA_S3TC_DXT1_EXT,73:dn.COMPRESSED_RGBA_S3TC_DXT3_EXT,74:dn.COMPRESSED_RGBA_S3TC_DXT3_EXT,76:dn.COMPRESSED_RGBA_S3TC_DXT5_EXT,77:dn.COMPRESSED_RGBA_S3TC_DXT5_EXT,72:dn.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT,75:dn.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT,78:dn.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT},bn=[171,75,84,88,32,49,49,187,13,10,26,10],Tn={[l.UNSIGNED_BYTE]:1,[l.UNSIGNED_SHORT]:2,[l.INT]:4,[l.UNSIGNED_INT]:4,[l.FLOAT]:4,[l.HALF_FLOAT]:8},An={[s.RGBA]:4,[s.RGB]:3,[s.RG]:2,[s.RED]:1,[s.LUMINANCE]:1,[s.LUMINANCE_ALPHA]:2,[s.ALPHA]:1},En={[l.UNSIGNED_SHORT_4_4_4_4]:2,[l.UNSIGNED_SHORT_5_5_5_1]:2,[l.UNSIGNED_SHORT_5_6_5]:2};function Sn(e){switch(e){case s.RGBA:return s.RGBA_INTEGER;case s.RGB:return s.RGB_INTEGER;case s.RG:return s.RG_INTEGER;case s.RED:return s.RED_INTEGER;default:return e}}const wn={extension:{type:Xe.LoadParser,priority:Da.High},name:"loadDDS",test:e=>Ca(e,".dds"),async load(e,t,r){const i=await b.ADAPTER.fetch(e),a=function(e){const t=new Uint32Array(e);if(542327876!==t[0])throw new Error("Invalid DDS file magic word");const r=new Uint32Array(e,0,124/Uint32Array.BYTES_PER_ELEMENT),i=r[3],a=r[4],n=r[7],s=new Uint32Array(e,19*Uint32Array.BYTES_PER_ELEMENT,32/Uint32Array.BYTES_PER_ELEMENT),o=s[1];if(4&o){const r=s[2];if(808540228!==r){const t=xn[r],s=new Uint8Array(e,128);return[new vn(s,{format:t,width:a,height:i,levels:n})]}const o=128,l=new Uint32Array(t.buffer,o,20/Uint32Array.BYTES_PER_ELEMENT),h=l[0],u=l[1],d=l[2],c=l[3],m=_n[h];if(void 0===m)throw new Error(`DDSParser cannot parse texture data with DXGI format ${h}`);if(4===d)throw new Error("DDSParser does not support cubemap textures");if(6===u)throw new Error("DDSParser does not supported 3D texture data");const f=new Array,p=148;if(1===c)f.push(new Uint8Array(e,p));else{const t=cn[m];let r=0,s=a,o=i;for(let e=0;e<n;e++)r+=Math.max(1,s+3&-4)*Math.max(1,o+3&-4)*t,s>>>=1,o>>>=1;let l=p;for(let t=0;t<c;t++)f.push(new Uint8Array(e,l,r)),l+=r}return f.map((e=>new vn(e,{format:m,width:a,height:i,levels:n})))}if(64&o)throw new Error("DDSParser does not support uncompressed texture data.");if(512&o)throw new Error("DDSParser does not supported YUV uncompressed texture data.");if(131072&o)throw new Error("DDSParser does not support single-channel (lumninance) texture data!");if(2&o)throw new Error("DDSParser does not support single-channel (alpha) texture data!");throw new Error("DDSParser failed to load a texture file due to an unknown reason!")}(await i.arrayBuffer()),n=a.map((i=>Ya(new st(i,{mipmap:c.OFF,alphaMode:m.NO_PREMULTIPLIED_ALPHA,resolution:je(e),...t.data}),r,e)));return 1===n.length?n[0]:n},unload(e){Array.isArray(e)?e.forEach((e=>e.destroy(!0))):e.destroy(!0)}};Ye.add(wn);const kn={extension:{type:Xe.LoadParser,priority:Da.High},name:"loadKTX",test:e=>Ca(e,".ktx"),async load(e,t,r){const i=await b.ADAPTER.fetch(e),a=await i.arrayBuffer(),{compressed:n,uncompressed:s,kvData:o}=function(e,t,r=!1){const i=new DataView(t);if(!function(e,t){for(let r=0;r<bn.length;r++)if(t.getUint8(r)!==bn[r])return console.error(`${e} is not a valid *.ktx file!`),!1;return!0}(e,i))return null;const a=67305985===i.getUint32(12,!0),n=i.getUint32(16,a),s=i.getUint32(24,a),o=i.getUint32(28,a),h=i.getUint32(36,a),u=i.getUint32(40,a)||1,d=i.getUint32(44,a)||1,c=i.getUint32(48,a)||1,m=i.getUint32(52,a),f=i.getUint32(56,a),p=i.getUint32(60,a);if(0===u||1!==d)throw new Error("Only 2D textures are supported");if(1!==m)throw new Error("CubeTextures are not supported by KTXLoader yet!");if(1!==c)throw new Error("WebGL does not support array textures");const g=h+3&-4,y=u+3&-4,v=new Array(c);let x,_=h*u;if(0===n&&(_=g*y),x=0!==n?Tn[n]?Tn[n]*An[s]:En[n]:cn[o],void 0===x)throw new Error("Unable to resolve the pixel format stored in the *.ktx file!");const b=r?function(e,t,r){const i=new Map;let a=0;for(;a<t;){const n=e.getUint32(64+a,r),s=64+a+4,o=3-(n+3)%4;if(0===n||n>t-a){console.error("KTXLoader: keyAndValueByteSize out of bounds");break}let l=0;for(;l<n&&0!==e.getUint8(s+l);l++);if(-1===l){console.error("KTXLoader: Failed to find null byte terminating kvData key");break}const h=(new TextDecoder).decode(new Uint8Array(e.buffer,s,l)),u=new DataView(e.buffer,s+l+1,n-l-1);i.set(h,u),a+=4+n+o}return i}(i,p,a):null;let T=_*x,A=h,E=u,S=g,w=y,k=64+p;for(let e=0;e<f;e++){const r=i.getUint32(k,a);let s=k+4;for(let r=0;r<c;r++){let i=v[r];i||(i=v[r]=new Array(f)),i[e]={levelID:e,levelWidth:f>1||0!==n?A:S,levelHeight:f>1||0!==n?E:w,levelBuffer:new Uint8Array(t,s,T)},s+=T}k+=r+4,k=k%4!=0?k+4-k%4:k,A=A>>1||1,E=E>>1||1,S=A+4-1&-4,w=E+4-1&-4,T=S*w*x}return 0!==n?{uncompressed:v.map((e=>{let t=e[0].levelBuffer,r=!1;return n===l.FLOAT?t=new Float32Array(e[0].levelBuffer.buffer,e[0].levelBuffer.byteOffset,e[0].levelBuffer.byteLength/4):n===l.UNSIGNED_INT?(r=!0,t=new Uint32Array(e[0].levelBuffer.buffer,e[0].levelBuffer.byteOffset,e[0].levelBuffer.byteLength/4)):n===l.INT&&(r=!0,t=new Int32Array(e[0].levelBuffer.buffer,e[0].levelBuffer.byteOffset,e[0].levelBuffer.byteLength/4)),{resource:new it(t,{width:e[0].levelWidth,height:e[0].levelHeight}),type:n,format:r?Sn(s):s}})),kvData:b}:{compressed:v.map((e=>new vn(null,{format:o,width:h,height:u,levels:f,levelBuffers:e}))),kvData:b}}(e,a),h=n??s,u={mipmap:c.OFF,alphaMode:m.NO_PREMULTIPLIED_ALPHA,resolution:je(e),...t.data},d=h.map((t=>{h===s&&Object.assign(u,{type:t.type,format:t.format});const i=new st(t,u);return i.ktxKeyValueData=o,Ya(i,r,e)}));return 1===d.length?d[0]:d},unload(e){Array.isArray(e)?e.forEach((e=>e.destroy(!0))):e.destroy(!0)}};Ye.add(kn);const Cn={extension:Xe.ResolveParser,test:e=>{const t=e.split("?")[0].split(".").pop();return["basis","ktx","dds"].includes(t)},parse:e=>{if("ktx"===e.split("?")[0].split(".").pop()){const t=[".s3tc.ktx",".s3tc_sRGB.ktx",".etc.ktx",".etc1.ktx",".pvrt.ktx",".atc.ktx",".astc.ktx"];if(t.some((t=>e.endsWith(t))))return{resolution:parseFloat(b.RETINA_PREFIX.exec(e)?.[1]??"1"),format:t.find((t=>e.endsWith(t))),src:e}}return{resolution:parseFloat(b.RETINA_PREFIX.exec(e)?.[1]??"1"),format:e.split(".").pop(),src:e}}};Ye.add(Cn);const Mn=new At,Rn=class{constructor(e){this.renderer=e}async image(e,t,r){const i=new Image;return i.src=await this.base64(e,t,r),i}async base64(e,t,r){const i=this.canvas(e);if(void 0!==i.toBlob)return new Promise(((e,a)=>{i.toBlob((t=>{if(!t)return void a(new Error("ICanvas.toBlob failed!"));const r=new FileReader;r.onload=()=>e(r.result),r.onerror=a,r.readAsDataURL(t)}),t,r)}));if(void 0!==i.toDataURL)return i.toDataURL(t,r);if(void 0!==i.convertToBlob){const e=await i.convertToBlob({type:t,quality:r});return new Promise(((t,r)=>{const i=new FileReader;i.onload=()=>t(i.result),i.onerror=r,i.readAsDataURL(e)}))}throw new Error("Extract.base64() requires ICanvas.toDataURL, ICanvas.toBlob, or ICanvas.convertToBlob to be implemented")}canvas(e,t){const{pixels:r,width:i,height:a,flipY:n}=this._rawPixels(e,t);n&&Rn._flipY(r,i,a),Rn._unpremultiplyAlpha(r);const s=new Ge(i,a,1),o=new ImageData(new Uint8ClampedArray(r.buffer),i,a);return s.context.putImageData(o,0,0),s.canvas}pixels(e,t){const{pixels:r,width:i,height:a,flipY:n}=this._rawPixels(e,t);return n&&Rn._flipY(r,i,a),Rn._unpremultiplyAlpha(r),r}_rawPixels(e,t){const r=this.renderer;if(!r)throw new Error("The Extract has already been destroyed");let i,a,n=!1,s=!1;if(e&&(e instanceof Sr?a=e:(a=r.generateTexture(e,{resolution:r.resolution,multisample:r.multisample}),s=!0)),a){if(i=a.baseTexture.resolution,t=t??a.frame,n=!1,!s){r.renderTexture.bind(a);const e=a.framebuffer.glFramebuffers[r.CONTEXT_UID];e.blitFramebuffer&&r.framebuffer.bind(e.blitFramebuffer)}}else i=r.resolution,t||((t=Mn).width=r.width/i,t.height=r.height/i),n=!0,r.renderTexture.bind();const o=Math.round(t.width*i),l=Math.round(t.height*i),h=new Uint8Array(4*o*l),u=r.gl;return u.readPixels(Math.round(t.x*i),Math.round(t.y*i),o,l,u.RGBA,u.UNSIGNED_BYTE,h),s&&a?.destroy(!0),{pixels:h,width:o,height:l,flipY:n}}destroy(){this.renderer=null}static _flipY(e,t,r){const i=t<<2,a=r>>1,n=new Uint8Array(i);for(let t=0;t<a;t++){const a=t*i,s=(r-t-1)*i;n.set(e.subarray(a,a+i)),e.copyWithin(a,s,s+i),e.set(n,s)}}static _unpremultiplyAlpha(e){e instanceof Uint8ClampedArray&&(e=new Uint8Array(e.buffer));const t=e.length;for(let r=0;r<t;r+=4){const t=e[r+3];if(0!==t){const i=255.001/t;e[r]=e[r]*i+.5,e[r+1]=e[r+1]*i+.5,e[r+2]=e[r+2]*i+.5}}}};let In=Rn;In.extension={name:"extract",type:Xe.RendererSystem},Ye.add(In);const Pn={build(e){const t=e.points;let r,i,a,n,s,o;if(e.type===_t.CIRC){const t=e.shape;r=t.x,i=t.y,s=o=t.radius,a=n=0}else if(e.type===_t.ELIP){const t=e.shape;r=t.x,i=t.y,s=t.width,o=t.height,a=n=0}else{const t=e.shape,l=t.width/2,h=t.height/2;r=t.x+l,i=t.y+h,s=o=Math.max(0,Math.min(t.radius,Math.min(l,h))),a=l-s,n=h-o}if(!(s>=0&&o>=0&&a>=0&&n>=0))return void(t.length=0);const l=Math.ceil(2.3*Math.sqrt(s+o)),h=8*l+(a?4:0)+(n?4:0);if(t.length=h,0===h)return;if(0===l)return t.length=8,t[0]=t[6]=r+a,t[1]=t[3]=i+n,t[2]=t[4]=r-a,void(t[5]=t[7]=i-n);let u=0,d=4*l+(a?2:0)+2,c=d,m=h;{const e=a+s,o=n,l=r+e,h=r-e,f=i+o;if(t[u++]=l,t[u++]=f,t[--d]=f,t[--d]=h,n){const e=i-o;t[c++]=h,t[c++]=e,t[--m]=e,t[--m]=l}}for(let e=1;e<l;e++){const h=Math.PI/2*(e/l),f=a+Math.cos(h)*s,p=n+Math.sin(h)*o,g=r+f,y=r-f,v=i+p,x=i-p;t[u++]=g,t[u++]=v,t[--d]=v,t[--d]=y,t[c++]=y,t[c++]=x,t[--m]=x,t[--m]=g}{const e=n+o,s=r+a,l=r-a,h=i+e,d=i-e;t[u++]=s,t[u++]=h,t[--m]=d,t[--m]=s,a&&(t[u++]=l,t[u++]=h,t[--m]=d,t[--m]=l)}},triangulate(e,t){const r=e.points,i=t.points,a=t.indices;if(0===r.length)return;let n=i.length/2;const s=n;let o,l;if(e.type!==_t.RREC){const t=e.shape;o=t.x,l=t.y}else{const t=e.shape;o=t.x+t.width/2,l=t.y+t.height/2}const h=e.matrix;i.push(e.matrix?h.a*o+h.c*l+h.tx:o,e.matrix?h.b*o+h.d*l+h.ty:l),n++,i.push(r[0],r[1]);for(let e=2;e<r.length;e+=2)i.push(r[e],r[e+1]),a.push(n++,s,n);a.push(s+1,s,n)}};function Dn(e,t=!1){const r=e.length;if(r<6)return;let i=0;for(let t=0,a=e[r-2],n=e[r-1];t<r;t+=2){const r=e[t],s=e[t+1];i+=(r-a)*(s+n),a=r,n=s}if(!t&&i>0||t&&i<=0){const t=r/2;for(let i=t+t%2;i<r;i+=2){const t=r-i-2,a=r-i-1,n=i,s=i+1;[e[t],e[n]]=[e[n],e[t]],[e[a],e[s]]=[e[s],e[a]]}}}const Bn={build(e){e.points=e.shape.points.slice()},triangulate(e,t){let r=e.points;const i=e.holes,a=t.points,n=t.indices;if(r.length>=6){Dn(r,!1);const e=[];for(let t=0;t<i.length;t++){const a=i[t];Dn(a.points,!0),e.push(r.length/2),r=r.concat(a.points)}const t=U(r,e,2);if(!t)return;const s=a.length/2;for(let e=0;e<t.length;e+=3)n.push(t[e]+s),n.push(t[e+1]+s),n.push(t[e+2]+s);for(let e=0;e<r.length;e++)a.push(r[e])}}},Nn={build(e){const t=e.shape,r=t.x,i=t.y,a=t.width,n=t.height,s=e.points;s.length=0,a>=0&&n>=0&&s.push(r,i,r+a,i,r+a,i+n,r,i+n)},triangulate(e,t){const r=e.points,i=t.points;if(0===r.length)return;const a=i.length/2;i.push(r[0],r[1],r[2],r[3],r[6],r[7],r[4],r[5]),t.indices.push(a,a+1,a+2,a+1,a+2,a+3)}},Fn={build(e){Pn.build(e)},triangulate(e,t){Pn.triangulate(e,t)}};var Ln=(e=>(e.MITER="miter",e.BEVEL="bevel",e.ROUND="round",e))(Ln||{}),On=(e=>(e.BUTT="butt",e.ROUND="round",e.SQUARE="square",e))(On||{});const zn={adaptive:!0,maxLength:10,minSegments:8,maxSegments:2048,epsilon:1e-4,_segmentsCount(e,t=20){if(!this.adaptive||!e||isNaN(e))return t;let r=Math.ceil(e/this.maxLength);return r<this.minSegments?r=this.minSegments:r>this.maxSegments&&(r=this.maxSegments),r}};class Gn{static curveTo(e,t,r,i,a,n){const s=n[n.length-2],o=n[n.length-1]-t,l=s-e,h=i-t,u=r-e,d=Math.abs(o*u-l*h);if(d<1e-8||0===a)return n[n.length-2]===e&&n[n.length-1]===t||n.push(e,t),null;const c=o*o+l*l,m=h*h+u*u,f=o*h+l*u,p=a*Math.sqrt(c)/d,g=a*Math.sqrt(m)/d,y=p*f/c,v=g*f/m,x=p*u+g*l,_=p*h+g*o,b=l*(g+y),T=o*(g+y),A=u*(p+v),E=h*(p+v);return{cx:x+e,cy:_+t,radius:a,startAngle:Math.atan2(T-_,b-x),endAngle:Math.atan2(E-_,A-x),anticlockwise:l*h>u*o}}static arc(e,t,r,i,a,n,s,o,l){const h=s-n,u=zn._segmentsCount(Math.abs(h)*a,40*Math.ceil(Math.abs(h)/yt)),d=h/(2*u),c=2*d,m=Math.cos(d),f=Math.sin(d),p=u-1,g=p%1/p;for(let e=0;e<=p;++e){const t=d+n+c*(e+g*e),s=Math.cos(t),o=-Math.sin(t);l.push((m*s+f*o)*a+r,(m*-o+f*s)*a+i)}}}class Un{static curveLength(e,t,r,i,a,n,s,o){let l=0,h=0,u=0,d=0,c=0,m=0,f=0,p=0,g=0,y=0,v=0,x=e,_=t;for(let b=1;b<=10;++b)h=b/10,u=h*h,d=u*h,c=1-h,m=c*c,f=m*c,p=f*e+3*m*h*r+3*c*u*a+d*s,g=f*t+3*m*h*i+3*c*u*n+d*o,y=x-p,v=_-g,x=p,_=g,l+=Math.sqrt(y*y+v*v);return l}static curveTo(e,t,r,i,a,n,s){const o=s[s.length-2],l=s[s.length-1];s.length-=2;const h=zn._segmentsCount(Un.curveLength(o,l,e,t,r,i,a,n));let u=0,d=0,c=0,m=0,f=0;s.push(o,l);for(let p=1,g=0;p<=h;++p)g=p/h,u=1-g,d=u*u,c=d*u,m=g*g,f=m*g,s.push(c*o+3*d*g*e+3*u*m*r+f*a,c*l+3*d*g*t+3*u*m*i+f*n)}}function Hn(e,t,r,i,a,n,s,o){let l,h;s?(l=i,h=-r):(l=-i,h=r);const u=e-r*a+l,d=t-i*a+h,c=e+r*n+l,m=t+i*n+h;return o.push(u,d,c,m),2}function Vn(e,t,r,i,a,n,s,o){const l=r-e,h=i-t;let u=Math.atan2(l,h),d=Math.atan2(a-e,n-t);o&&u<d?u+=2*Math.PI:!o&&u>d&&(d+=2*Math.PI);let c=u;const m=d-u,f=Math.abs(m),p=Math.sqrt(l*l+h*h),g=1+(15*f*Math.sqrt(p)/Math.PI>>0),y=m/g;if(c+=y,o){s.push(e,t,r,i);for(let r=1,i=c;r<g;r++,i+=y)s.push(e,t,e+Math.sin(i)*p,t+Math.cos(i)*p);s.push(e,t,a,n)}else{s.push(r,i,e,t);for(let r=1,i=c;r<g;r++,i+=y)s.push(e+Math.sin(i)*p,t+Math.cos(i)*p,e,t);s.push(a,n,e,t)}return 2*g}function jn(e,t){e.lineStyle.native?function(e,t){let r=0;const i=e.shape,a=e.points||i.points,n=i.type!==_t.POLY||i.closeStroke;if(0===a.length)return;const s=t.points,o=t.indices,l=a.length/2,h=s.length/2;let u=h;for(s.push(a[0],a[1]),r=1;r<l;r++)s.push(a[2*r],a[2*r+1]),o.push(u,u+1),u++;n&&o.push(u,h)}(e,t):function(e,t){const r=e.shape;let i=e.points||r.points.slice();const a=t.closePointEps;if(0===i.length)return;const n=e.lineStyle,s=new bt(i[0],i[1]),o=new bt(i[i.length-2],i[i.length-1]),l=r.type!==_t.POLY||r.closeStroke,h=Math.abs(s.x-o.x)<a&&Math.abs(s.y-o.y)<a;if(l){i=i.slice(),h&&(i.pop(),i.pop(),o.set(i[i.length-2],i[i.length-1]));const e=.5*(s.x+o.x),t=.5*(o.y+s.y);i.unshift(e,t),i.push(e,t)}const u=t.points,d=i.length/2;let c=i.length;const m=u.length/2,f=n.width/2,p=f*f,g=n.miterLimit*n.miterLimit;let y=i[0],v=i[1],x=i[2],_=i[3],b=0,T=0,A=-(v-_),E=y-x,S=0,w=0,k=Math.sqrt(A*A+E*E);A/=k,E/=k,A*=f,E*=f;const C=n.alignment,M=2*(1-C),R=2*C;l||(n.cap===On.ROUND?c+=Vn(y-A*(M-R)*.5,v-E*(M-R)*.5,y-A*M,v-E*M,y+A*R,v+E*R,u,!0)+2:n.cap===On.SQUARE&&(c+=Hn(y,v,A,E,M,R,!0,u))),u.push(y-A*M,v-E*M,y+A*R,v+E*R);for(let e=1;e<d-1;++e){y=i[2*(e-1)],v=i[2*(e-1)+1],x=i[2*e],_=i[2*e+1],b=i[2*(e+1)],T=i[2*(e+1)+1],A=-(v-_),E=y-x,k=Math.sqrt(A*A+E*E),A/=k,E/=k,A*=f,E*=f,S=-(_-T),w=x-b,k=Math.sqrt(S*S+w*w),S/=k,w/=k,S*=f,w*=f;const t=x-y,r=v-_,a=x-b,s=T-_,o=t*a+r*s,l=r*a-s*t,h=l<0;if(Math.abs(l)<.001*Math.abs(o)){u.push(x-A*M,_-E*M,x+A*R,_+E*R),o>=0&&(n.join===Ln.ROUND?c+=Vn(x,_,x-A*M,_-E*M,x-S*M,_-w*M,u,!1)+4:c+=2,u.push(x-S*R,_-w*R,x+S*M,_+w*M));continue}const d=(-A+y)*(-E+_)-(-A+x)*(-E+v),m=(-S+b)*(-w+_)-(-S+x)*(-w+T),C=(t*m-a*d)/l,I=(s*d-r*m)/l,P=(C-x)*(C-x)+(I-_)*(I-_),D=x+(C-x)*M,B=_+(I-_)*M,N=x-(C-x)*R,F=_-(I-_)*R,L=h?M:R,O=P<=Math.min(t*t+r*r,a*a+s*s)+L*L*p;let z=n.join;if(z===Ln.MITER&&P/p>g&&(z=Ln.BEVEL),O)switch(z){case Ln.MITER:u.push(D,B,N,F);break;case Ln.BEVEL:h?u.push(D,B,x+A*R,_+E*R,D,B,x+S*R,_+w*R):u.push(x-A*M,_-E*M,N,F,x-S*M,_-w*M,N,F),c+=2;break;case Ln.ROUND:h?(u.push(D,B,x+A*R,_+E*R),c+=Vn(x,_,x+A*R,_+E*R,x+S*R,_+w*R,u,!0)+4,u.push(D,B,x+S*R,_+w*R)):(u.push(x-A*M,_-E*M,N,F),c+=Vn(x,_,x-A*M,_-E*M,x-S*M,_-w*M,u,!1)+4,u.push(x-S*M,_-w*M,N,F))}else{switch(u.push(x-A*M,_-E*M,x+A*R,_+E*R),z){case Ln.MITER:h?u.push(N,F,N,F):u.push(D,B,D,B),c+=2;break;case Ln.ROUND:c+=h?Vn(x,_,x+A*R,_+E*R,x+S*R,_+w*R,u,!0)+2:Vn(x,_,x-A*M,_-E*M,x-S*M,_-w*M,u,!1)+2}u.push(x-S*M,_-w*M,x+S*R,_+w*R),c+=2}}y=i[2*(d-2)],v=i[2*(d-2)+1],x=i[2*(d-1)],_=i[2*(d-1)+1],A=-(v-_),E=y-x,k=Math.sqrt(A*A+E*E),A/=k,E/=k,A*=f,E*=f,u.push(x-A*M,_-E*M,x+A*R,_+E*R),l||(n.cap===On.ROUND?c+=Vn(x-A*(M-R)*.5,_-E*(M-R)*.5,x-A*M,_-E*M,x+A*R,_+E*R,u,!1)+2:n.cap===On.SQUARE&&(c+=Hn(x,_,A,E,M,R,!1,u)));const I=t.indices,P=zn.epsilon*zn.epsilon;for(let e=m;e<c+m-2;++e)y=u[2*e],v=u[2*e+1],x=u[2*(e+1)],_=u[2*(e+1)+1],b=u[2*(e+2)],T=u[2*(e+2)+1],Math.abs(y*(_-T)+x*(T-v)+b*(v-_))<P||I.push(e,e+1,e+2)}(e,t)}class Xn{static curveLength(e,t,r,i,a,n){const s=e-2*r+a,o=t-2*i+n,l=2*r-2*e,h=2*i-2*t,u=4*(s*s+o*o),d=4*(s*l+o*h),c=l*l+h*h,m=2*Math.sqrt(u+d+c),f=Math.sqrt(u),p=2*u*f,g=2*Math.sqrt(c),y=d/f;return(p*m+f*d*(m-g)+(4*c*u-d*d)*Math.log((2*f+y+m)/(y+g)))/(4*p)}static curveTo(e,t,r,i,a){const n=a[a.length-2],s=a[a.length-1],o=zn._segmentsCount(Xn.curveLength(n,s,e,t,r,i));let l=0,h=0;for(let u=1;u<=o;++u){const d=u/o;l=n+(e-n)*d,h=s+(t-s)*d,a.push(l+(e+(r-e)*d-l)*d,h+(t+(i-t)*d-h)*d)}}}const Kn={[_t.POLY]:Bn,[_t.CIRC]:Pn,[_t.ELIP]:Pn,[_t.RECT]:Nn,[_t.RREC]:Fn},Wn=[],Yn=[];class Zn{constructor(e,t=null,r=null,i=null){this.points=[],this.holes=[],this.shape=e,this.lineStyle=r,this.fillStyle=t,this.matrix=i,this.type=e.type}clone(){return new Zn(this.shape,this.fillStyle,this.lineStyle,this.matrix)}destroy(){this.shape=null,this.holes.length=0,this.holes=null,this.points.length=0,this.points=null,this.lineStyle=null,this.fillStyle=null}}class Jn{constructor(){this.reset()}begin(e,t,r){this.reset(),this.style=e,this.start=t,this.attribStart=r}end(e,t){this.attribSize=t-this.attribStart,this.size=e-this.start}reset(){this.style=null,this.size=0,this.start=0,this.attribStart=0,this.attribSize=0}}const $n=new bt,qn=class extends gt{constructor(){super(),this.closePointEps=1e-4,this.boundsPadding=0,this.uvsFloat32=null,this.indicesUint16=null,this.batchable=!1,this.points=[],this.colors=[],this.uvs=[],this.indices=[],this.textureIds=[],this.graphicsData=[],this.drawCalls=[],this.batchDirty=-1,this.batches=[],this.dirty=0,this.cacheDirty=-1,this.clearDirty=0,this.shapeIndex=0,this._bounds=new Xi,this.boundsDirty=-1}get bounds(){return this.updateBatches(),this.boundsDirty!==this.dirty&&(this.boundsDirty=this.dirty,this.calculateBounds()),this._bounds}invalidate(){this.boundsDirty=-1,this.dirty++,this.batchDirty++,this.shapeIndex=0,this.points.length=0,this.colors.length=0,this.uvs.length=0,this.indices.length=0,this.textureIds.length=0;for(let e=0;e<this.drawCalls.length;e++)this.drawCalls[e].texArray.clear(),Yn.push(this.drawCalls[e]);this.drawCalls.length=0;for(let e=0;e<this.batches.length;e++){const t=this.batches[e];t.reset(),Wn.push(t)}this.batches.length=0}clear(){return this.graphicsData.length>0&&(this.invalidate(),this.clearDirty++,this.graphicsData.length=0),this}drawShape(e,t=null,r=null,i=null){const a=new Zn(e,t,r,i);return this.graphicsData.push(a),this.dirty++,this}drawHole(e,t=null){if(!this.graphicsData.length)return null;const r=new Zn(e,null,null,t),i=this.graphicsData[this.graphicsData.length-1];return r.lineStyle=i.lineStyle,i.holes.push(r),this.dirty++,this}destroy(){super.destroy();for(let e=0;e<this.graphicsData.length;++e)this.graphicsData[e].destroy();this.points.length=0,this.points=null,this.colors.length=0,this.colors=null,this.uvs.length=0,this.uvs=null,this.indices.length=0,this.indices=null,this.indexBuffer.destroy(),this.indexBuffer=null,this.graphicsData.length=0,this.graphicsData=null,this.drawCalls.length=0,this.drawCalls=null,this.batches.length=0,this.batches=null,this._bounds=null}containsPoint(e){const t=this.graphicsData;for(let r=0;r<t.length;++r){const i=t[r];if(i.fillStyle.visible&&i.shape&&(i.matrix?i.matrix.applyInverse(e,$n):$n.copyFrom(e),i.shape.contains($n.x,$n.y))){let e=!1;if(i.holes)for(let t=0;t<i.holes.length;t++)if(i.holes[t].shape.contains($n.x,$n.y)){e=!0;break}if(!e)return!0}}return!1}updateBatches(){if(!this.graphicsData.length)return void(this.batchable=!0);if(!this.validateBatching())return;this.cacheDirty=this.dirty;const e=this.uvs,t=this.graphicsData;let r=null,i=null;this.batches.length>0&&(r=this.batches[this.batches.length-1],i=r.style);for(let a=this.shapeIndex;a<t.length;a++){this.shapeIndex++;const n=t[a],s=n.fillStyle,o=n.lineStyle;Kn[n.type].build(n),n.matrix&&this.transformPoints(n.points,n.matrix),(s.visible||o.visible)&&this.processHoles(n.holes);for(let t=0;t<2;t++){const a=0===t?s:o;if(!a.visible)continue;const l=a.texture.baseTexture,h=this.indices.length,u=this.points.length/2;l.wrapMode=d.REPEAT,0===t?this.processFill(n):this.processLine(n);const c=this.points.length/2-u;0!==c&&(r&&!this._compareStyles(i,a)&&(r.end(h,u),r=null),r||(r=Wn.pop()||new Jn,r.begin(a,h,u),this.batches.push(r),i=a),this.addUvs(this.points,e,a.texture,u,c,a.matrix))}}const a=this.indices.length,n=this.points.length/2;if(r&&r.end(a,n),0===this.batches.length)return void(this.batchable=!0);const s=n>65535;this.indicesUint16&&this.indices.length===this.indicesUint16.length&&s===this.indicesUint16.BYTES_PER_ELEMENT>2?this.indicesUint16.set(this.indices):this.indicesUint16=s?new Uint32Array(this.indices):new Uint16Array(this.indices),this.batchable=this.isBatchable(),this.batchable?this.packBatches():this.buildDrawCalls()}_compareStyles(e,t){return!(!e||!t)&&e.texture.baseTexture===t.texture.baseTexture&&e.color+e.alpha===t.color+t.alpha&&!!e.native==!!t.native}validateBatching(){if(this.dirty===this.cacheDirty||!this.graphicsData.length)return!1;for(let e=0,t=this.graphicsData.length;e<t;e++){const t=this.graphicsData[e],r=t.fillStyle,i=t.lineStyle;if(r&&!r.texture.baseTexture.valid)return!1;if(i&&!i.texture.baseTexture.valid)return!1}return!0}packBatches(){this.batchDirty++,this.uvsFloat32=new Float32Array(this.uvs);const e=this.batches;for(let t=0,r=e.length;t<r;t++){const r=e[t];for(let e=0;e<r.size;e++){const t=r.start+e;this.indicesUint16[t]=this.indicesUint16[t]-r.attribStart}}}isBatchable(){if(this.points.length>131070)return!1;const e=this.batches;for(let t=0;t<e.length;t++)if(e[t].style.native)return!1;return this.points.length<2*qn.BATCHABLE_SIZE}buildDrawCalls(){let e=++st._globalBatch;for(let e=0;e<this.drawCalls.length;e++)this.drawCalls[e].texArray.clear(),Yn.push(this.drawCalls[e]);this.drawCalls.length=0;const t=this.colors,r=this.textureIds;let i=Yn.pop();i||(i=new ot,i.texArray=new sr),i.texArray.count=0,i.start=0,i.size=0,i.type=n.TRIANGLES;let a=0,s=null,o=0,l=!1,h=n.TRIANGLES,u=0;this.drawCalls.push(i);for(let c=0;c<this.batches.length;c++){const m=this.batches[c],f=8,p=m.style,g=p.texture.baseTexture;l!==!!p.native&&(l=!!p.native,h=l?n.LINES:n.TRIANGLES,s=null,a=f,e++),s!==g&&(s=g,g._batchEnabled!==e&&(a===f&&(e++,a=0,i.size>0&&(i=Yn.pop(),i||(i=new ot,i.texArray=new sr),this.drawCalls.push(i)),i.start=u,i.size=0,i.texArray.count=0,i.type=h),g.touched=1,g._batchEnabled=e,g._batchLocation=a,g.wrapMode=d.REPEAT,i.texArray.elements[i.texArray.count++]=g,a++)),i.size+=m.size,u+=m.size,o=g._batchLocation,this.addColors(t,p.color,p.alpha,m.attribSize,m.attribStart),this.addTextureIds(r,o,m.attribSize,m.attribStart)}st._globalBatch=e,this.packAttributes()}packAttributes(){const e=this.points,t=this.uvs,r=this.colors,i=this.textureIds,a=new ArrayBuffer(3*e.length*4),n=new Float32Array(a),s=new Uint32Array(a);let o=0;for(let a=0;a<e.length/2;a++)n[o++]=e[2*a],n[o++]=e[2*a+1],n[o++]=t[2*a],n[o++]=t[2*a+1],s[o++]=r[a],n[o++]=i[a];this._buffer.update(a),this._indexBuffer.update(this.indicesUint16)}processFill(e){e.holes.length?Bn.triangulate(e,this):Kn[e.type].triangulate(e,this)}processLine(e){jn(e,this);for(let t=0;t<e.holes.length;t++)jn(e.holes[t],this)}processHoles(e){for(let t=0;t<e.length;t++){const r=e[t];Kn[r.type].build(r),r.matrix&&this.transformPoints(r.points,r.matrix)}}calculateBounds(){const e=this._bounds;e.clear(),e.addVertexData(this.points,0,this.points.length),e.pad(this.boundsPadding,this.boundsPadding)}transformPoints(e,t){for(let r=0;r<e.length/2;r++){const i=e[2*r],a=e[2*r+1];e[2*r]=t.a*i+t.c*a+t.tx,e[2*r+1]=t.b*i+t.d*a+t.ty}}addColors(e,t,r,i,a=0){const n=Ee.shared.setValue(t).toLittleEndianNumber(),s=Ee.shared.setValue(n).toPremultiplied(r);e.length=Math.max(e.length,a+i);for(let t=0;t<i;t++)e[a+t]=s}addTextureIds(e,t,r,i=0){e.length=Math.max(e.length,i+r);for(let a=0;a<r;a++)e[i+a]=t}addUvs(e,t,r,i,a,n=null){let s=0;const o=t.length,l=r.frame;for(;s<a;){let r=e[2*(i+s)],a=e[2*(i+s)+1];if(n){const e=n.a*r+n.c*a+n.tx;a=n.b*r+n.d*a+n.ty,r=e}s++,t.push(r/l.width,a/l.height)}const h=r.baseTexture;(l.width<h.width||l.height<h.height)&&this.adjustUvs(t,r,o,a)}adjustUvs(e,t,r,i){const a=t.baseTexture,n=1e-6,s=r+2*i,o=t.frame,l=o.width/a.width,h=o.height/a.height;let u=o.x/o.width,d=o.y/o.height,c=Math.floor(e[r]+n),m=Math.floor(e[r+1]+n);for(let t=r+2;t<s;t+=2)c=Math.min(c,Math.floor(e[t]+n)),m=Math.min(m,Math.floor(e[t+1]+n));u-=c,d-=m;for(let t=r;t<s;t+=2)e[t]=(e[t]+u)*l,e[t+1]=(e[t+1]+d)*h}};let Qn=qn;Qn.BATCHABLE_SIZE=100;class es{constructor(){this.color=16777215,this.alpha=1,this.texture=Er.WHITE,this.matrix=null,this.visible=!1,this.reset()}clone(){const e=new es;return e.color=this.color,e.alpha=this.alpha,e.texture=this.texture,e.matrix=this.matrix,e.visible=this.visible,e}reset(){this.color=16777215,this.alpha=1,this.texture=Er.WHITE,this.matrix=null,this.visible=!1}destroy(){this.texture=null,this.matrix=null}}class ts extends es{constructor(){super(...arguments),this.width=0,this.alignment=.5,this.native=!1,this.cap=On.BUTT,this.join=Ln.MITER,this.miterLimit=10}clone(){const e=new ts;return e.color=this.color,e.alpha=this.alpha,e.texture=this.texture,e.matrix=this.matrix,e.visible=this.visible,e.width=this.width,e.alignment=this.alignment,e.native=this.native,e.cap=this.cap,e.join=this.join,e.miterLimit=this.miterLimit,e}reset(){super.reset(),this.color=0,this.alignment=.5,this.width=0,this.native=!1}}const rs={},is=class extends $i{constructor(e=null){super(),this.shader=null,this.pluginName="batch",this.currentPath=null,this.batches=[],this.batchTint=-1,this.batchDirty=-1,this.vertexData=null,this._fillStyle=new es,this._lineStyle=new ts,this._matrix=null,this._holeMode=!1,this.state=qe.for2d(),this._geometry=e||new Qn,this._geometry.refCount++,this._transformID=-1,this._tintColor=new Ee(16777215),this.blendMode=a.NORMAL}get geometry(){return this._geometry}clone(){return this.finishPoly(),new is(this._geometry)}set blendMode(e){this.state.blendMode=e}get blendMode(){return this.state.blendMode}get tint(){return this._tintColor.value}set tint(e){this._tintColor.setValue(e)}get fill(){return this._fillStyle}get line(){return this._lineStyle}lineStyle(e=null,t=0,r,i=.5,a=!1){return"number"==typeof e&&(e={width:e,color:t,alpha:r,alignment:i,native:a}),this.lineTextureStyle(e)}lineTextureStyle(e){const t={width:0,texture:Er.WHITE,color:e?.texture?16777215:0,matrix:null,alignment:.5,native:!1,cap:On.BUTT,join:Ln.MITER,miterLimit:10};e=Object.assign(t,e),this.normalizeColor(e),this.currentPath&&this.startPoly();const r=e.width>0&&e.alpha>0;return r?(e.matrix&&(e.matrix=e.matrix.clone(),e.matrix.invert()),Object.assign(this._lineStyle,{visible:r},e)):this._lineStyle.reset(),this}startPoly(){if(this.currentPath){const e=this.currentPath.points,t=this.currentPath.points.length;t>2&&(this.drawShape(this.currentPath),this.currentPath=new wt,this.currentPath.closeStroke=!1,this.currentPath.points.push(e[t-2],e[t-1]))}else this.currentPath=new wt,this.currentPath.closeStroke=!1}finishPoly(){this.currentPath&&(this.currentPath.points.length>2?(this.drawShape(this.currentPath),this.currentPath=null):this.currentPath.points.length=0)}moveTo(e,t){return this.startPoly(),this.currentPath.points[0]=e,this.currentPath.points[1]=t,this}lineTo(e,t){this.currentPath||this.moveTo(0,0);const r=this.currentPath.points,i=r[r.length-2],a=r[r.length-1];return i===e&&a===t||r.push(e,t),this}_initCurve(e=0,t=0){this.currentPath?0===this.currentPath.points.length&&(this.currentPath.points=[e,t]):this.moveTo(e,t)}quadraticCurveTo(e,t,r,i){this._initCurve();const a=this.currentPath.points;return 0===a.length&&this.moveTo(0,0),Xn.curveTo(e,t,r,i,a),this}bezierCurveTo(e,t,r,i,a,n){return this._initCurve(),Un.curveTo(e,t,r,i,a,n,this.currentPath.points),this}arcTo(e,t,r,i,a){this._initCurve(e,t);const n=this.currentPath.points,s=Gn.curveTo(e,t,r,i,a,n);if(s){const{cx:e,cy:t,radius:r,startAngle:i,endAngle:a,anticlockwise:n}=s;this.arc(e,t,r,i,a,n)}return this}arc(e,t,r,i,a,n=!1){if(i===a)return this;if(!n&&a<=i?a+=yt:n&&i<=a&&(i+=yt),0==a-i)return this;const s=e+Math.cos(i)*r,o=t+Math.sin(i)*r,l=this._geometry.closePointEps;let h=this.currentPath?this.currentPath.points:null;if(h){const e=Math.abs(h[h.length-2]-s),t=Math.abs(h[h.length-1]-o);e<l&&t<l||h.push(s,o)}else this.moveTo(s,o),h=this.currentPath.points;return Gn.arc(s,o,e,t,r,i,a,n,h),this}beginFill(e=0,t){return this.beginTextureFill({texture:Er.WHITE,color:e,alpha:t})}normalizeColor(e){const t=Ee.shared.setValue(e.color??0);e.color=t.toNumber(),e.alpha??(e.alpha=t.alpha)}beginTextureFill(e){const t={texture:Er.WHITE,color:16777215,matrix:null};e=Object.assign(t,e),this.normalizeColor(e),this.currentPath&&this.startPoly();const r=e.alpha>0;return r?(e.matrix&&(e.matrix=e.matrix.clone(),e.matrix.invert()),Object.assign(this._fillStyle,{visible:r},e)):this._fillStyle.reset(),this}endFill(){return this.finishPoly(),this._fillStyle.reset(),this}drawRect(e,t,r,i){return this.drawShape(new At(e,t,r,i))}drawRoundedRect(e,t,r,i,a){return this.drawShape(new kt(e,t,r,i,a))}drawCircle(e,t,r){return this.drawShape(new Et(e,t,r))}drawEllipse(e,t,r,i){return this.drawShape(new St(e,t,r,i))}drawPolygon(...e){let t,r=!0;const i=e[0];i.points?(r=i.closeStroke,t=i.points):t=Array.isArray(e[0])?e[0]:e;const a=new wt(t);return a.closeStroke=r,this.drawShape(a),this}drawShape(e){return this._holeMode?this._geometry.drawHole(e,this._matrix):this._geometry.drawShape(e,this._fillStyle.clone(),this._lineStyle.clone(),this._matrix),this}clear(){return this._geometry.clear(),this._lineStyle.reset(),this._fillStyle.reset(),this._boundsID++,this._matrix=null,this._holeMode=!1,this.currentPath=null,this}isFastRect(){const e=this._geometry.graphicsData;return!(1!==e.length||e[0].shape.type!==_t.RECT||e[0].matrix||e[0].holes.length||e[0].lineStyle.visible&&e[0].lineStyle.width)}_render(e){this.finishPoly();const t=this._geometry;t.updateBatches(),t.batchable?(this.batchDirty!==t.batchDirty&&this._populateBatches(),this._renderBatched(e)):(e.batch.flush(),this._renderDirect(e))}_populateBatches(){const e=this._geometry,t=this.blendMode,r=e.batches.length;this.batchTint=-1,this._transformID=-1,this.batchDirty=e.batchDirty,this.batches.length=r,this.vertexData=new Float32Array(e.points);for(let i=0;i<r;i++){const r=e.batches[i],a=r.style.color,n=new Float32Array(this.vertexData.buffer,4*r.attribStart*2,2*r.attribSize),s=new Float32Array(e.uvsFloat32.buffer,4*r.attribStart*2,2*r.attribSize),o={vertexData:n,blendMode:t,indices:new Uint16Array(e.indicesUint16.buffer,2*r.start,r.size),uvs:s,_batchRGB:Ee.shared.setValue(a).toRgbArray(),_tintRGB:a,_texture:r.style.texture,alpha:r.style.alpha,worldAlpha:1};this.batches[i]=o}}_renderBatched(e){if(this.batches.length){e.batch.setObjectRenderer(e.plugins[this.pluginName]),this.calculateVertices(),this.calculateTints();for(let t=0,r=this.batches.length;t<r;t++){const r=this.batches[t];r.worldAlpha=this.worldAlpha*r.alpha,e.plugins[this.pluginName].render(r)}}}_renderDirect(e){const t=this._resolveDirectShader(e),r=this._geometry,i=this.worldAlpha,a=t.uniforms,n=r.drawCalls;a.translationMatrix=this.transform.worldTransform,Ee.shared.setValue(this._tintColor).premultiply(i).toArray(a.tint),e.shader.bind(t),e.geometry.bind(r,t),e.state.set(this.state);for(let t=0,i=n.length;t<i;t++)this._renderDrawCallDirect(e,r.drawCalls[t])}_renderDrawCallDirect(e,t){const{texArray:r,type:i,size:a,start:n}=t,s=r.count;for(let t=0;t<s;t++)e.texture.bind(r.elements[t],t);e.geometry.draw(i,a,n)}_resolveDirectShader(e){let t=this.shader;const r=this.pluginName;if(!t){if(!rs[r]){const{maxTextures:t}=e.plugins[r],i=new Int32Array(t);for(let e=0;e<t;e++)i[e]=e;const a={tint:new Float32Array([1,1,1,1]),translationMatrix:new Ct,default:ir.from({uSamplers:i},!0)},n=e.plugins[r]._shader.program;rs[r]=new ar(n,a)}t=rs[r]}return t}_calculateBounds(){this.finishPoly();const e=this._geometry;if(!e.graphicsData.length)return;const{minX:t,minY:r,maxX:i,maxY:a}=e.bounds;this._bounds.addFrame(this.transform,t,r,i,a)}containsPoint(e){return this.worldTransform.applyInverse(e,is._TEMP_POINT),this._geometry.containsPoint(is._TEMP_POINT)}calculateTints(){if(this.batchTint!==this.tint){this.batchTint=this._tintColor.toNumber();for(let e=0;e<this.batches.length;e++){const t=this.batches[e];t._tintRGB=Ee.shared.setValue(this._tintColor).multiply(t._batchRGB).toLittleEndianNumber()}}}calculateVertices(){const e=this.transform._worldID;if(this._transformID===e)return;this._transformID=e;const t=this.transform.worldTransform,r=t.a,i=t.b,a=t.c,n=t.d,s=t.tx,o=t.ty,l=this._geometry.points,h=this.vertexData;let u=0;for(let e=0;e<l.length;e+=2){const t=l[e],d=l[e+1];h[u++]=r*t+a*d+s,h[u++]=n*d+i*t+o}}closePath(){const e=this.currentPath;return e&&(e.closeStroke=!0,this.finishPoly()),this}setMatrix(e){return this._matrix=e,this}beginHole(){return this.finishPoly(),this._holeMode=!0,this}endHole(){return this.finishPoly(),this._holeMode=!1,this}destroy(e){this._geometry.refCount--,0===this._geometry.refCount&&this._geometry.dispose(),this._matrix=null,this.currentPath=null,this._lineStyle.destroy(),this._lineStyle=null,this._fillStyle.destroy(),this._fillStyle=null,this._geometry=null,this.shader=null,this.vertexData=null,this.batches.length=0,this.batches=null,super.destroy(e)}};let as=is;as.curves=zn,as._TEMP_POINT=new bt;class ns{constructor(e,t){this.uvBuffer=e,this.uvMatrix=t,this.data=null,this._bufferUpdateId=-1,this._textureUpdateId=-1,this._updateID=0}update(e){if(!e&&this._bufferUpdateId===this.uvBuffer._updateID&&this._textureUpdateId===this.uvMatrix._updateID)return;this._bufferUpdateId=this.uvBuffer._updateID,this._textureUpdateId=this.uvMatrix._updateID;const t=this.uvBuffer.data;this.data&&this.data.length===t.length||(this.data=new Float32Array(t.length)),this.uvMatrix.multiplyUvs(t,this.data),this._updateID++}}const ss=new bt,os=new wt,ls=class extends $i{constructor(e,t,r,i=n.TRIANGLES){super(),this.geometry=e,this.shader=t,this.state=r||qe.for2d(),this.drawMode=i,this.start=0,this.size=0,this.uvs=null,this.indices=null,this.vertexData=new Float32Array(1),this.vertexDirty=-1,this._transformID=-1,this._roundPixels=b.ROUND_PIXELS,this.batchUvs=null}get geometry(){return this._geometry}set geometry(e){this._geometry!==e&&(this._geometry&&(this._geometry.refCount--,0===this._geometry.refCount&&this._geometry.dispose()),this._geometry=e,this._geometry&&this._geometry.refCount++,this.vertexDirty=-1)}get uvBuffer(){return this.geometry.buffers[1]}get verticesBuffer(){return this.geometry.buffers[0]}set material(e){this.shader=e}get material(){return this.shader}set blendMode(e){this.state.blendMode=e}get blendMode(){return this.state.blendMode}set roundPixels(e){this._roundPixels!==e&&(this._transformID=-1),this._roundPixels=e}get roundPixels(){return this._roundPixels}get tint(){return"tint"in this.shader?this.shader.tint:null}set tint(e){this.shader.tint=e}get tintValue(){return this.shader.tintValue}get texture(){return"texture"in this.shader?this.shader.texture:null}set texture(e){this.shader.texture=e}_render(e){const t=this.geometry.buffers[0].data;this.shader.batchable&&this.drawMode===n.TRIANGLES&&t.length<2*ls.BATCHABLE_SIZE?this._renderToBatch(e):this._renderDefault(e)}_renderDefault(e){const t=this.shader;t.alpha=this.worldAlpha,t.update&&t.update(),e.batch.flush(),t.uniforms.translationMatrix=this.transform.worldTransform.toArray(!0),e.shader.bind(t),e.state.set(this.state),e.geometry.bind(this.geometry,t),e.geometry.draw(this.drawMode,this.size,this.start,this.geometry.instanceCount)}_renderToBatch(e){const t=this.geometry,r=this.shader;r.uvMatrix&&(r.uvMatrix.update(),this.calculateUvs()),this.calculateVertices(),this.indices=t.indexBuffer.data,this._tintRGB=r._tintRGB,this._texture=r.texture;const i=this.material.pluginName;e.batch.setObjectRenderer(e.plugins[i]),e.plugins[i].render(this)}calculateVertices(){const e=this.geometry.buffers[0],t=e.data,r=e._updateID;if(r===this.vertexDirty&&this._transformID===this.transform._worldID)return;this._transformID=this.transform._worldID,this.vertexData.length!==t.length&&(this.vertexData=new Float32Array(t.length));const i=this.transform.worldTransform,a=i.a,n=i.b,s=i.c,o=i.d,l=i.tx,h=i.ty,u=this.vertexData;for(let e=0;e<u.length/2;e++){const r=t[2*e],i=t[2*e+1];u[2*e]=a*r+s*i+l,u[2*e+1]=n*r+o*i+h}if(this._roundPixels){const e=b.RESOLUTION;for(let t=0;t<u.length;++t)u[t]=Math.round(u[t]*e)/e}this.vertexDirty=r}calculateUvs(){const e=this.geometry.buffers[1],t=this.shader;t.uvMatrix.isSimple?this.uvs=e.data:(this.batchUvs||(this.batchUvs=new ns(e,t.uvMatrix)),this.batchUvs.update(),this.uvs=this.batchUvs.data)}_calculateBounds(){this.calculateVertices(),this._bounds.addVertexData(this.vertexData,0,this.vertexData.length)}containsPoint(e){if(!this.getBounds().contains(e.x,e.y))return!1;this.worldTransform.applyInverse(e,ss);const t=this.geometry.getBuffer("aVertexPosition").data,r=os.points,i=this.geometry.getIndex().data,a=i.length,n=4===this.drawMode?3:1;for(let e=0;e+2<a;e+=n){const a=2*i[e],n=2*i[e+1],s=2*i[e+2];if(r[0]=t[a],r[1]=t[a+1],r[2]=t[n],r[3]=t[n+1],r[4]=t[s],r[5]=t[s+1],os.contains(ss.x,ss.y))return!0}return!1}destroy(e){super.destroy(e),this._cachedTexture&&(this._cachedTexture.destroy(),this._cachedTexture=null),this.geometry=null,this.shader=null,this.state=null,this.uvs=null,this.indices=null,this.vertexData=null}};let hs=ls;hs.BATCHABLE_SIZE=100;class us extends pt{constructor(e,t,r){super();const i=new ht(e),a=new ht(t,!0),n=new ht(r,!0,!0);this.addAttribute("aVertexPosition",i,2,!1,l.FLOAT).addAttribute("aTextureCoord",a,2,!1,l.FLOAT).addIndex(n),this._updateId=-1}get vertexDirtyId(){return this.buffers[0]._updateID}}class ds extends ar{constructor(e,t){const r={uSampler:e,alpha:1,uTextureMatrix:Ct.IDENTITY,uColor:new Float32Array([1,1,1,1])};(t=Object.assign({tint:16777215,alpha:1,pluginName:"batch"},t)).uniforms&&Object.assign(r,t.uniforms),super(t.program||tr.from("attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\nuniform mat3 translationMatrix;\nuniform mat3 uTextureMatrix;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n\n    vTextureCoord = (uTextureMatrix * vec3(aTextureCoord, 1.0)).xy;\n}\n","varying vec2 vTextureCoord;\nuniform vec4 uColor;\n\nuniform sampler2D uSampler;\n\nvoid main(void)\n{\n    gl_FragColor = texture2D(uSampler, vTextureCoord) * uColor;\n}\n"),r),this._colorDirty=!1,this.uvMatrix=new zr(e),this.batchable=void 0===t.program,this.pluginName=t.pluginName,this._tintColor=new Ee(t.tint),this._tintRGB=this._tintColor.toLittleEndianNumber(),this._colorDirty=!0,this.alpha=t.alpha}get texture(){return this.uniforms.uSampler}set texture(e){this.uniforms.uSampler!==e&&(!this.uniforms.uSampler.baseTexture.alphaMode!=!e.baseTexture.alphaMode&&(this._colorDirty=!0),this.uniforms.uSampler=e,this.uvMatrix.texture=e)}set alpha(e){e!==this._alpha&&(this._alpha=e,this._colorDirty=!0)}get alpha(){return this._alpha}set tint(e){e!==this.tint&&(this._tintColor.setValue(e),this._tintRGB=this._tintColor.toLittleEndianNumber(),this._colorDirty=!0)}get tint(){return this._tintColor.value}get tintValue(){return this._tintColor.toNumber()}update(){if(this._colorDirty){this._colorDirty=!1;const e=this.texture.baseTexture.alphaMode;Ee.shared.setValue(this._tintColor).premultiply(this._alpha,e).toArray(this.uniforms.uColor)}this.uvMatrix.update()&&(this.uniforms.uTextureMatrix=this.uvMatrix.mapCoord)}}class cs{constructor(e,t,r){this.geometry=new pt,this.indexBuffer=null,this.size=r,this.dynamicProperties=[],this.staticProperties=[];for(let r=0;r<e.length;++r){let i=e[r];i={attributeName:i.attributeName,size:i.size,uploadFunction:i.uploadFunction,type:i.type||l.FLOAT,offset:i.offset},t[r]?this.dynamicProperties.push(i):this.staticProperties.push(i)}this.staticStride=0,this.staticBuffer=null,this.staticData=null,this.staticDataUint32=null,this.dynamicStride=0,this.dynamicBuffer=null,this.dynamicData=null,this.dynamicDataUint32=null,this._updateID=0,this.initBuffers()}initBuffers(){const e=this.geometry;let t=0;this.indexBuffer=new ht(function(e,t=null){const r=6*e;if((t=t||new Uint16Array(r)).length!==r)throw new Error(`Out buffer length is incorrect, got ${t.length} and expected ${r}`);for(let e=0,i=0;e<r;e+=6,i+=4)t[e+0]=i+0,t[e+1]=i+1,t[e+2]=i+2,t[e+3]=i+0,t[e+4]=i+2,t[e+5]=i+3;return t}(this.size),!0,!0),e.addIndex(this.indexBuffer),this.dynamicStride=0;for(let e=0;e<this.dynamicProperties.length;++e){const r=this.dynamicProperties[e];r.offset=t,t+=r.size,this.dynamicStride+=r.size}const r=new ArrayBuffer(this.size*this.dynamicStride*4*4);this.dynamicData=new Float32Array(r),this.dynamicDataUint32=new Uint32Array(r),this.dynamicBuffer=new ht(this.dynamicData,!1,!1);let i=0;this.staticStride=0;for(let e=0;e<this.staticProperties.length;++e){const t=this.staticProperties[e];t.offset=i,i+=t.size,this.staticStride+=t.size}const a=new ArrayBuffer(this.size*this.staticStride*4*4);this.staticData=new Float32Array(a),this.staticDataUint32=new Uint32Array(a),this.staticBuffer=new ht(this.staticData,!0,!1);for(let t=0;t<this.dynamicProperties.length;++t){const r=this.dynamicProperties[t];e.addAttribute(r.attributeName,this.dynamicBuffer,0,r.type===l.UNSIGNED_BYTE,r.type,4*this.dynamicStride,4*r.offset)}for(let t=0;t<this.staticProperties.length;++t){const r=this.staticProperties[t];e.addAttribute(r.attributeName,this.staticBuffer,0,r.type===l.UNSIGNED_BYTE,r.type,4*this.staticStride,4*r.offset)}}uploadDynamic(e,t,r){for(let i=0;i<this.dynamicProperties.length;i++){const a=this.dynamicProperties[i];a.uploadFunction(e,t,r,a.type===l.UNSIGNED_BYTE?this.dynamicDataUint32:this.dynamicData,this.dynamicStride,a.offset)}this.dynamicBuffer._updateID++}uploadStatic(e,t,r){for(let i=0;i<this.staticProperties.length;i++){const a=this.staticProperties[i];a.uploadFunction(e,t,r,a.type===l.UNSIGNED_BYTE?this.staticDataUint32:this.staticData,this.staticStride,a.offset)}this.staticBuffer._updateID++}destroy(){this.indexBuffer=null,this.dynamicProperties=null,this.dynamicBuffer=null,this.dynamicData=null,this.dynamicDataUint32=null,this.staticProperties=null,this.staticBuffer=null,this.staticData=null,this.staticDataUint32=null,this.geometry.destroy()}}class ms extends or{constructor(e){super(e),this.shader=null,this.properties=null,this.tempMatrix=new Ct,this.properties=[{attributeName:"aVertexPosition",size:2,uploadFunction:this.uploadVertices,offset:0},{attributeName:"aPositionCoord",size:2,uploadFunction:this.uploadPosition,offset:0},{attributeName:"aRotation",size:1,uploadFunction:this.uploadRotation,offset:0},{attributeName:"aTextureCoord",size:2,uploadFunction:this.uploadUvs,offset:0},{attributeName:"aColor",size:1,type:l.UNSIGNED_BYTE,uploadFunction:this.uploadTint,offset:0}],this.shader=ar.from("attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\nattribute vec4 aColor;\n\nattribute vec2 aPositionCoord;\nattribute float aRotation;\n\nuniform mat3 translationMatrix;\nuniform vec4 uColor;\n\nvarying vec2 vTextureCoord;\nvarying vec4 vColor;\n\nvoid main(void){\n    float x = (aVertexPosition.x) * cos(aRotation) - (aVertexPosition.y) * sin(aRotation);\n    float y = (aVertexPosition.x) * sin(aRotation) + (aVertexPosition.y) * cos(aRotation);\n\n    vec2 v = vec2(x, y);\n    v = v + aPositionCoord;\n\n    gl_Position = vec4((translationMatrix * vec3(v, 1.0)).xy, 0.0, 1.0);\n\n    vTextureCoord = aTextureCoord;\n    vColor = aColor * uColor;\n}\n","varying vec2 vTextureCoord;\nvarying vec4 vColor;\n\nuniform sampler2D uSampler;\n\nvoid main(void){\n    vec4 color = texture2D(uSampler, vTextureCoord) * vColor;\n    gl_FragColor = color;\n}",{}),this.state=qe.for2d()}render(e){const t=e.children,r=e._maxSize,i=e._batchSize,a=this.renderer;let n=t.length;if(0===n)return;n>r&&!e.autoResize&&(n=r);let s=e._buffers;s||(s=e._buffers=this.generateBuffers(e));const o=t[0]._texture.baseTexture,l=o.alphaMode>0;this.state.blendMode=we(e.blendMode,l),a.state.set(this.state);const h=a.gl,u=e.worldTransform.copyTo(this.tempMatrix);u.prepend(a.globalUniforms.uniforms.projectionMatrix),this.shader.uniforms.translationMatrix=u.toArray(!0),this.shader.uniforms.uColor=Ee.shared.setValue(e.tintRgb).premultiply(e.worldAlpha,l).toArray(this.shader.uniforms.uColor),this.shader.uniforms.uSampler=o,this.renderer.shader.bind(this.shader);let d=!1;for(let r=0,o=0;r<n;r+=i,o+=1){let l=n-r;l>i&&(l=i),o>=s.length&&s.push(this._generateOneMoreBuffer(e));const u=s[o];u.uploadDynamic(t,r,l);const c=e._bufferUpdateIDs[o]||0;d=d||u._updateID<c,d&&(u._updateID=e._updateID,u.uploadStatic(t,r,l)),a.geometry.bind(u.geometry),h.drawElements(h.TRIANGLES,6*l,h.UNSIGNED_SHORT,0)}}generateBuffers(e){const t=[],r=e._maxSize,i=e._batchSize,a=e._properties;for(let e=0;e<r;e+=i)t.push(new cs(this.properties,a,i));return t}_generateOneMoreBuffer(e){const t=e._batchSize,r=e._properties;return new cs(this.properties,r,t)}uploadVertices(e,t,r,i,a,n){let s=0,o=0,l=0,h=0;for(let u=0;u<r;++u){const r=e[t+u],d=r._texture,c=r.scale.x,m=r.scale.y,f=d.trim,p=d.orig;f?(o=f.x-r.anchor.x*p.width,s=o+f.width,h=f.y-r.anchor.y*p.height,l=h+f.height):(s=p.width*(1-r.anchor.x),o=p.width*-r.anchor.x,l=p.height*(1-r.anchor.y),h=p.height*-r.anchor.y),i[n]=o*c,i[n+1]=h*m,i[n+a]=s*c,i[n+a+1]=h*m,i[n+2*a]=s*c,i[n+2*a+1]=l*m,i[n+3*a]=o*c,i[n+3*a+1]=l*m,n+=4*a}}uploadPosition(e,t,r,i,a,n){for(let s=0;s<r;s++){const r=e[t+s].position;i[n]=r.x,i[n+1]=r.y,i[n+a]=r.x,i[n+a+1]=r.y,i[n+2*a]=r.x,i[n+2*a+1]=r.y,i[n+3*a]=r.x,i[n+3*a+1]=r.y,n+=4*a}}uploadRotation(e,t,r,i,a,n){for(let s=0;s<r;s++){const r=e[t+s].rotation;i[n]=r,i[n+a]=r,i[n+2*a]=r,i[n+3*a]=r,n+=4*a}}uploadUvs(e,t,r,i,a,n){for(let s=0;s<r;++s){const r=e[t+s]._texture._uvs;r?(i[n]=r.x0,i[n+1]=r.y0,i[n+a]=r.x1,i[n+a+1]=r.y1,i[n+2*a]=r.x2,i[n+2*a+1]=r.y2,i[n+3*a]=r.x3,i[n+3*a+1]=r.y3,n+=4*a):(i[n]=0,i[n+1]=0,i[n+a]=0,i[n+a+1]=0,i[n+2*a]=0,i[n+2*a+1]=0,i[n+3*a]=0,i[n+3*a+1]=0,n+=4*a)}}uploadTint(e,t,r,i,a,n){for(let s=0;s<r;++s){const r=e[t+s],o=Ee.shared.setValue(r._tintRGB).toPremultiplied(r.alpha,r.texture.baseTexture.alphaMode>0);i[n]=o,i[n+a]=o,i[n+2*a]=o,i[n+3*a]=o,n+=4*a}}destroy(){super.destroy(),this.shader&&(this.shader.destroy(),this.shader=null),this.tempMatrix=null}}ms.extension={name:"particle",type:Xe.RendererPlugin},Ye.add(ms);var fs=(e=>(e[e.LINEAR_VERTICAL=0]="LINEAR_VERTICAL",e[e.LINEAR_HORIZONTAL=1]="LINEAR_HORIZONTAL",e))(fs||{});const ps={willReadFrequently:!0},gs=class{static get experimentalLetterSpacingSupported(){let e=gs._experimentalLetterSpacingSupported;if(void 0!==e){const t=b.ADAPTER.getCanvasRenderingContext2D().prototype;e=gs._experimentalLetterSpacingSupported="letterSpacing"in t||"textLetterSpacing"in t}return e}constructor(e,t,r,i,a,n,s,o,l){this.text=e,this.style=t,this.width=r,this.height=i,this.lines=a,this.lineWidths=n,this.lineHeight=s,this.maxLineWidth=o,this.fontProperties=l}static measureText(e,t,r,i=gs._canvas){r=null==r?t.wordWrap:r;const a=t.toFontString(),n=gs.measureFont(a);0===n.fontSize&&(n.fontSize=t.fontSize,n.ascent=t.fontSize);const s=i.getContext("2d",ps);s.font=a;const o=(r?gs.wordWrap(e,t,i):e).split(/(?:\r\n|\r|\n)/),l=new Array(o.length);let h=0;for(let e=0;e<o.length;e++){const r=gs._measureText(o[e],t.letterSpacing,s);l[e]=r,h=Math.max(h,r)}let u=h+t.strokeThickness;t.dropShadow&&(u+=t.dropShadowDistance);const d=t.lineHeight||n.fontSize+t.strokeThickness;let c=Math.max(d,n.fontSize+2*t.strokeThickness)+(o.length-1)*(d+t.leading);return t.dropShadow&&(c+=t.dropShadowDistance),new gs(e,t,u,c,o,l,d+t.leading,h,n)}static _measureText(e,t,r){let i=!1;gs.experimentalLetterSpacingSupported&&(gs.experimentalLetterSpacing?(r.letterSpacing=`${t}px`,r.textLetterSpacing=`${t}px`,i=!0):(r.letterSpacing="0px",r.textLetterSpacing="0px"));let a=r.measureText(e).width;return a>0&&(i?a-=t:a+=(gs.graphemeSegmenter(e).length-1)*t),a}static wordWrap(e,t,r=gs._canvas){const i=r.getContext("2d",ps);let a=0,n="",s="";const o=Object.create(null),{letterSpacing:l,whiteSpace:h}=t,u=gs.collapseSpaces(h),d=gs.collapseNewlines(h);let c=!u;const m=t.wordWrapWidth+l,f=gs.tokenize(e);for(let e=0;e<f.length;e++){let r=f[e];if(gs.isNewline(r)){if(!d){s+=gs.addLine(n),c=!u,n="",a=0;continue}r=" "}if(u){const e=gs.isBreakingSpace(r),t=gs.isBreakingSpace(n[n.length-1]);if(e&&t)continue}const h=gs.getFromCache(r,l,o,i);if(h>m)if(""!==n&&(s+=gs.addLine(n),n="",a=0),gs.canBreakWords(r,t.breakWords)){const e=gs.wordWrapSplit(r);for(let h=0;h<e.length;h++){let u=e[h],d=u,f=1;for(;e[h+f];){const i=e[h+f];if(gs.canBreakChars(d,i,r,h,t.breakWords))break;u+=i,d=i,f++}h+=f-1;const p=gs.getFromCache(u,l,o,i);p+a>m&&(s+=gs.addLine(n),c=!1,n="",a=0),n+=u,a+=p}}else{n.length>0&&(s+=gs.addLine(n),n="",a=0);const t=e===f.length-1;s+=gs.addLine(r,!t),c=!1,n="",a=0}else h+a>m&&(c=!1,s+=gs.addLine(n),n="",a=0),(n.length>0||!gs.isBreakingSpace(r)||c)&&(n+=r,a+=h)}return s+=gs.addLine(n,!1),s}static addLine(e,t=!0){return e=gs.trimRight(e),t?`${e}\n`:e}static getFromCache(e,t,r,i){let a=r[e];return"number"!=typeof a&&(a=gs._measureText(e,t,i)+t,r[e]=a),a}static collapseSpaces(e){return"normal"===e||"pre-line"===e}static collapseNewlines(e){return"normal"===e}static trimRight(e){if("string"!=typeof e)return"";for(let t=e.length-1;t>=0;t--){const r=e[t];if(!gs.isBreakingSpace(r))break;e=e.slice(0,-1)}return e}static isNewline(e){return"string"==typeof e&&gs._newlines.includes(e.charCodeAt(0))}static isBreakingSpace(e,t){return"string"==typeof e&&gs._breakingSpaces.includes(e.charCodeAt(0))}static tokenize(e){const t=[];let r="";if("string"!=typeof e)return t;for(let i=0;i<e.length;i++){const a=e[i],n=e[i+1];gs.isBreakingSpace(a,n)||gs.isNewline(a)?(""!==r&&(t.push(r),r=""),t.push(a)):r+=a}return""!==r&&t.push(r),t}static canBreakWords(e,t){return t}static canBreakChars(e,t,r,i,a){return!0}static wordWrapSplit(e){return gs.graphemeSegmenter(e)}static measureFont(e){if(gs._fonts[e])return gs._fonts[e];const t={ascent:0,descent:0,fontSize:0},r=gs._canvas,i=gs._context;i.font=e;const a=gs.METRICS_STRING+gs.BASELINE_SYMBOL,n=Math.ceil(i.measureText(a).width);let s=Math.ceil(i.measureText(gs.BASELINE_SYMBOL).width);const o=Math.ceil(gs.HEIGHT_MULTIPLIER*s);if(s=s*gs.BASELINE_MULTIPLIER|0,0===n||0===o)return gs._fonts[e]=t,t;r.width=n,r.height=o,i.fillStyle="#f00",i.fillRect(0,0,n,o),i.font=e,i.textBaseline="alphabetic",i.fillStyle="#000",i.fillText(a,0,s);const l=i.getImageData(0,0,n,o).data,h=l.length,u=4*n;let d=0,c=0,m=!1;for(d=0;d<s;++d){for(let e=0;e<u;e+=4)if(255!==l[c+e]){m=!0;break}if(m)break;c+=u}for(t.ascent=s-d,c=h-u,m=!1,d=o;d>s;--d){for(let e=0;e<u;e+=4)if(255!==l[c+e]){m=!0;break}if(m)break;c-=u}return t.descent=d-s,t.fontSize=t.ascent+t.descent,gs._fonts[e]=t,t}static clearMetrics(e=""){e?delete gs._fonts[e]:gs._fonts={}}static get _canvas(){if(!gs.__canvas){let e;try{const t=new OffscreenCanvas(0,0),r=t.getContext("2d",ps);if(r?.measureText)return gs.__canvas=t,t;e=b.ADAPTER.createCanvas()}catch(t){e=b.ADAPTER.createCanvas()}e.width=e.height=10,gs.__canvas=e}return gs.__canvas}static get _context(){return gs.__context||(gs.__context=gs._canvas.getContext("2d",ps)),gs.__context}};let ys=gs;ys.METRICS_STRING="|ÉqÅ",ys.BASELINE_SYMBOL="M",ys.BASELINE_MULTIPLIER=1.4,ys.HEIGHT_MULTIPLIER=2,ys.graphemeSegmenter=(()=>{if("function"==typeof Intl?.Segmenter){const e=new Intl.Segmenter;return t=>[...e.segment(t)].map((e=>e.segment))}return e=>[...e]})(),ys.experimentalLetterSpacing=!1,ys._fonts={},ys._newlines=[10,13],ys._breakingSpaces=[9,32,8192,8193,8194,8195,8196,8197,8198,8200,8201,8202,8287,12288];const vs=["serif","sans-serif","monospace","cursive","fantasy","system-ui"],xs=class{constructor(e){this.styleID=0,this.reset(),Ts(this,e,e)}clone(){const e={};return Ts(e,this,xs.defaultStyle),new xs(e)}reset(){Ts(this,xs.defaultStyle,xs.defaultStyle)}get align(){return this._align}set align(e){this._align!==e&&(this._align=e,this.styleID++)}get breakWords(){return this._breakWords}set breakWords(e){this._breakWords!==e&&(this._breakWords=e,this.styleID++)}get dropShadow(){return this._dropShadow}set dropShadow(e){this._dropShadow!==e&&(this._dropShadow=e,this.styleID++)}get dropShadowAlpha(){return this._dropShadowAlpha}set dropShadowAlpha(e){this._dropShadowAlpha!==e&&(this._dropShadowAlpha=e,this.styleID++)}get dropShadowAngle(){return this._dropShadowAngle}set dropShadowAngle(e){this._dropShadowAngle!==e&&(this._dropShadowAngle=e,this.styleID++)}get dropShadowBlur(){return this._dropShadowBlur}set dropShadowBlur(e){this._dropShadowBlur!==e&&(this._dropShadowBlur=e,this.styleID++)}get dropShadowColor(){return this._dropShadowColor}set dropShadowColor(e){const t=bs(e);this._dropShadowColor!==t&&(this._dropShadowColor=t,this.styleID++)}get dropShadowDistance(){return this._dropShadowDistance}set dropShadowDistance(e){this._dropShadowDistance!==e&&(this._dropShadowDistance=e,this.styleID++)}get fill(){return this._fill}set fill(e){const t=bs(e);this._fill!==t&&(this._fill=t,this.styleID++)}get fillGradientType(){return this._fillGradientType}set fillGradientType(e){this._fillGradientType!==e&&(this._fillGradientType=e,this.styleID++)}get fillGradientStops(){return this._fillGradientStops}set fillGradientStops(e){(function(e,t){if(!Array.isArray(e)||!Array.isArray(t))return!1;if(e.length!==t.length)return!1;for(let r=0;r<e.length;++r)if(e[r]!==t[r])return!1;return!0})(this._fillGradientStops,e)||(this._fillGradientStops=e,this.styleID++)}get fontFamily(){return this._fontFamily}set fontFamily(e){this.fontFamily!==e&&(this._fontFamily=e,this.styleID++)}get fontSize(){return this._fontSize}set fontSize(e){this._fontSize!==e&&(this._fontSize=e,this.styleID++)}get fontStyle(){return this._fontStyle}set fontStyle(e){this._fontStyle!==e&&(this._fontStyle=e,this.styleID++)}get fontVariant(){return this._fontVariant}set fontVariant(e){this._fontVariant!==e&&(this._fontVariant=e,this.styleID++)}get fontWeight(){return this._fontWeight}set fontWeight(e){this._fontWeight!==e&&(this._fontWeight=e,this.styleID++)}get letterSpacing(){return this._letterSpacing}set letterSpacing(e){this._letterSpacing!==e&&(this._letterSpacing=e,this.styleID++)}get lineHeight(){return this._lineHeight}set lineHeight(e){this._lineHeight!==e&&(this._lineHeight=e,this.styleID++)}get leading(){return this._leading}set leading(e){this._leading!==e&&(this._leading=e,this.styleID++)}get lineJoin(){return this._lineJoin}set lineJoin(e){this._lineJoin!==e&&(this._lineJoin=e,this.styleID++)}get miterLimit(){return this._miterLimit}set miterLimit(e){this._miterLimit!==e&&(this._miterLimit=e,this.styleID++)}get padding(){return this._padding}set padding(e){this._padding!==e&&(this._padding=e,this.styleID++)}get stroke(){return this._stroke}set stroke(e){const t=bs(e);this._stroke!==t&&(this._stroke=t,this.styleID++)}get strokeThickness(){return this._strokeThickness}set strokeThickness(e){this._strokeThickness!==e&&(this._strokeThickness=e,this.styleID++)}get textBaseline(){return this._textBaseline}set textBaseline(e){this._textBaseline!==e&&(this._textBaseline=e,this.styleID++)}get trim(){return this._trim}set trim(e){this._trim!==e&&(this._trim=e,this.styleID++)}get whiteSpace(){return this._whiteSpace}set whiteSpace(e){this._whiteSpace!==e&&(this._whiteSpace=e,this.styleID++)}get wordWrap(){return this._wordWrap}set wordWrap(e){this._wordWrap!==e&&(this._wordWrap=e,this.styleID++)}get wordWrapWidth(){return this._wordWrapWidth}set wordWrapWidth(e){this._wordWrapWidth!==e&&(this._wordWrapWidth=e,this.styleID++)}toFontString(){const e="number"==typeof this.fontSize?`${this.fontSize}px`:this.fontSize;let t=this.fontFamily;Array.isArray(this.fontFamily)||(t=this.fontFamily.split(","));for(let e=t.length-1;e>=0;e--){let r=t[e].trim();/([\"\'])[^\'\"]+\1/.test(r)||vs.includes(r)||(r=`"${r}"`),t[e]=r}return`${this.fontStyle} ${this.fontVariant} ${this.fontWeight} ${e} ${t.join(",")}`}};let _s=xs;function bs(e){const t=Ee.shared;return Array.isArray(e)?e.map((e=>t.setValue(e).toHex())):t.setValue(e).toHex()}function Ts(e,t,r){for(const i in r)Array.isArray(t[i])?e[i]=t[i].slice():e[i]=t[i]}_s.defaultStyle={align:"left",breakWords:!1,dropShadow:!1,dropShadowAlpha:1,dropShadowAngle:Math.PI/6,dropShadowBlur:0,dropShadowColor:"black",dropShadowDistance:5,fill:"black",fillGradientType:fs.LINEAR_VERTICAL,fillGradientStops:[],fontFamily:"Arial",fontSize:26,fontStyle:"normal",fontVariant:"normal",fontWeight:"normal",leading:0,letterSpacing:0,lineHeight:0,lineJoin:"miter",miterLimit:10,padding:0,stroke:"black",strokeThickness:0,textBaseline:"alphabetic",trim:!1,whiteSpace:"pre",wordWrap:!1,wordWrapWidth:100};const As={texture:!0,children:!1,baseTexture:!0},Es=class extends ea{constructor(e,t,r){let i=!1;r||(r=b.ADAPTER.createCanvas(),i=!0),r.width=3,r.height=3;const a=Er.from(r);a.orig=new At,a.trim=new At,super(a),this._ownCanvas=i,this.canvas=r,this.context=r.getContext("2d",{willReadFrequently:!0}),this._resolution=Es.defaultResolution??b.RESOLUTION,this._autoResolution=Es.defaultAutoResolution,this._text=null,this._style=null,this._styleListener=null,this._font="",this.text=e,this.style=t,this.localStyleID=-1}static get experimentalLetterSpacing(){return ys.experimentalLetterSpacing}static set experimentalLetterSpacing(e){Y("7.1.0","Text.experimentalLetterSpacing is deprecated, use TextMetrics.experimentalLetterSpacing"),ys.experimentalLetterSpacing=e}updateText(e){const t=this._style;if(this.localStyleID!==t.styleID&&(this.dirty=!0,this.localStyleID=t.styleID),!this.dirty&&e)return;this._font=this._style.toFontString();const r=this.context,i=ys.measureText(this._text||" ",this._style,this._style.wordWrap,this.canvas),a=i.width,n=i.height,s=i.lines,o=i.lineHeight,l=i.lineWidths,h=i.maxLineWidth,u=i.fontProperties;let d,c;this.canvas.width=Math.ceil(Math.ceil(Math.max(1,a)+2*t.padding)*this._resolution),this.canvas.height=Math.ceil(Math.ceil(Math.max(1,n)+2*t.padding)*this._resolution),r.scale(this._resolution,this._resolution),r.clearRect(0,0,this.canvas.width,this.canvas.height),r.font=this._font,r.lineWidth=t.strokeThickness,r.textBaseline=t.textBaseline,r.lineJoin=t.lineJoin,r.miterLimit=t.miterLimit;const m=t.dropShadow?2:1;for(let e=0;e<m;++e){const a=t.dropShadow&&0===e,m=a?Math.ceil(Math.max(1,n)+2*t.padding):0,f=m*this._resolution;if(a){r.fillStyle="black",r.strokeStyle="black";const e=t.dropShadowColor,i=t.dropShadowBlur*this._resolution,a=t.dropShadowDistance*this._resolution;r.shadowColor=Ee.shared.setValue(e).setAlpha(t.dropShadowAlpha).toRgbaString(),r.shadowBlur=i,r.shadowOffsetX=Math.cos(t.dropShadowAngle)*a,r.shadowOffsetY=Math.sin(t.dropShadowAngle)*a+f}else r.fillStyle=this._generateFillStyle(t,s,i),r.strokeStyle=t.stroke,r.shadowColor="black",r.shadowBlur=0,r.shadowOffsetX=0,r.shadowOffsetY=0;let p=(o-u.fontSize)/2;o-u.fontSize<0&&(p=0);for(let e=0;e<s.length;e++)d=t.strokeThickness/2,c=t.strokeThickness/2+e*o+u.ascent+p,"right"===t.align?d+=h-l[e]:"center"===t.align&&(d+=(h-l[e])/2),t.stroke&&t.strokeThickness&&this.drawLetterSpacing(s[e],d+t.padding,c+t.padding-m,!0),t.fill&&this.drawLetterSpacing(s[e],d+t.padding,c+t.padding-m)}this.updateTexture()}drawLetterSpacing(e,t,r,i=!1){const a=this._style.letterSpacing;let n=!1;if(ys.experimentalLetterSpacingSupported&&(ys.experimentalLetterSpacing?(this.context.letterSpacing=`${a}px`,this.context.textLetterSpacing=`${a}px`,n=!0):(this.context.letterSpacing="0px",this.context.textLetterSpacing="0px")),0===a||n)return void(i?this.context.strokeText(e,t,r):this.context.fillText(e,t,r));let s=t;const o=ys.graphemeSegmenter(e);let l=this.context.measureText(e).width,h=0;for(let e=0;e<o.length;++e){const t=o[e];i?this.context.strokeText(t,s,r):this.context.fillText(t,s,r);let n="";for(let t=e+1;t<o.length;++t)n+=o[t];h=this.context.measureText(n).width,s+=l-h+a,l=h}}updateTexture(){const e=this.canvas;if(this._style.trim){const t=function(e){const t=function(e){const{width:t,height:r}=e,i=e.getContext("2d",{willReadFrequently:!0});if(null===i)throw new TypeError("Failed to get canvas 2D context");const a=i.getImageData(0,0,t,r).data;let n=0,s=0,o=t-1,l=r-1;for(;s<r&&Ue(a,t,s);)++s;if(s===r)return Fe.EMPTY;for(;Ue(a,t,l);)--l;for(;He(a,t,n,s,l);)++n;for(;He(a,t,o,s,l);)--o;return++o,++l,new Fe(n,s,o,l)}(e),{width:r,height:i}=t;let a=null;if(!t.isEmpty()){const n=e.getContext("2d");if(null===n)throw new TypeError("Failed to get canvas 2D context");a=n.getImageData(t.left,t.top,r,i)}return{width:r,height:i,data:a}}(e);t.data&&(e.width=t.width,e.height=t.height,this.context.putImageData(t.data,0,0))}const t=this._texture,r=this._style,i=r.trim?0:r.padding,a=t.baseTexture;t.trim.width=t._frame.width=e.width/this._resolution,t.trim.height=t._frame.height=e.height/this._resolution,t.trim.x=-i,t.trim.y=-i,t.orig.width=t._frame.width-2*i,t.orig.height=t._frame.height-2*i,this._onTextureUpdate(),a.setRealSize(e.width,e.height,this._resolution),t.updateUvs(),this.dirty=!1}_render(e){this._autoResolution&&this._resolution!==e.resolution&&(this._resolution=e.resolution,this.dirty=!0),this.updateText(!0),super._render(e)}updateTransform(){this.updateText(!0),super.updateTransform()}getBounds(e,t){return this.updateText(!0),-1===this._textureID&&(e=!1),super.getBounds(e,t)}getLocalBounds(e){return this.updateText(!0),super.getLocalBounds.call(this,e)}_calculateBounds(){this.calculateVertices(),this._bounds.addQuad(this.vertexData)}_generateFillStyle(e,t,r){const i=e.fill;if(!Array.isArray(i))return i;if(1===i.length)return i[0];let a;const n=e.dropShadow?e.dropShadowDistance:0,s=e.padding||0,o=this.canvas.width/this._resolution-n-2*s,l=this.canvas.height/this._resolution-n-2*s,h=i.slice(),u=e.fillGradientStops.slice();if(!u.length){const e=h.length+1;for(let t=1;t<e;++t)u.push(t/e)}if(h.unshift(i[0]),u.unshift(0),h.push(i[i.length-1]),u.push(1),e.fillGradientType===fs.LINEAR_VERTICAL){a=this.context.createLinearGradient(o/2,s,o/2,l+s);const i=r.fontProperties.fontSize+e.strokeThickness;for(let e=0;e<t.length;e++){const n=r.lineHeight*(e-1)+i,s=r.lineHeight*e;let o=s;e>0&&n>s&&(o=(s+n)/2);const d=s+i,c=r.lineHeight*(e+1);let m=d;e+1<t.length&&c<d&&(m=(d+c)/2);const f=(m-o)/l;for(let e=0;e<h.length;e++){let t=0;t="number"==typeof u[e]?u[e]:e/h.length;let r=Math.min(1,Math.max(0,o/l+t*f));r=Number(r.toFixed(5)),a.addColorStop(r,h[e])}}}else{a=this.context.createLinearGradient(s,l/2,o+s,l/2);const e=h.length+1;let t=1;for(let r=0;r<h.length;r++){let i;i="number"==typeof u[r]?u[r]:t/e,a.addColorStop(i,h[r]),t++}}return a}destroy(e){"boolean"==typeof e&&(e={children:e}),e=Object.assign({},As,e),super.destroy(e),this._ownCanvas&&(this.canvas.height=this.canvas.width=0),this.context=null,this.canvas=null,this._style=null}get width(){return this.updateText(!0),Math.abs(this.scale.x)*this._texture.orig.width}set width(e){this.updateText(!0);const t=Pe(this.scale.x)||1;this.scale.x=t*e/this._texture.orig.width,this._width=e}get height(){return this.updateText(!0),Math.abs(this.scale.y)*this._texture.orig.height}set height(e){this.updateText(!0);const t=Pe(this.scale.y)||1;this.scale.y=t*e/this._texture.orig.height,this._height=e}get style(){return this._style}set style(e){e=e||{},this._style=e instanceof _s?e:new _s(e),this.localStyleID=-1,this.dirty=!0}get text(){return this._text}set text(e){e=String(null==e?"":e),this._text!==e&&(this._text=e,this.dirty=!0)}get resolution(){return this._resolution}set resolution(e){this._autoResolution=!1,this._resolution!==e&&(this._resolution=e,this.dirty=!0)}};let Ss=Es;Ss.defaultAutoResolution=!0;class ws{constructor(e){this.maxItemsPerFrame=e,this.itemsLeft=0}beginFrame(){this.itemsLeft=this.maxItemsPerFrame}allowedToUpload(){return this.itemsLeft-- >0}}function ks(e,t){let r=!1;if(e?._textures?.length)for(let i=0;i<e._textures.length;i++)if(e._textures[i]instanceof Er){const a=e._textures[i].baseTexture;t.includes(a)||(t.push(a),r=!0)}return r}function Cs(e,t){if(e.baseTexture instanceof st){const r=e.baseTexture;return t.includes(r)||t.push(r),!0}return!1}function Ms(e,t){if(e._texture&&e._texture instanceof Er){const r=e._texture.baseTexture;return t.includes(r)||t.push(r),!0}return!1}function Rs(e,t){return t instanceof Ss&&(t.updateText(!0),!0)}function Is(e,t){if(t instanceof _s){const e=t.toFontString();return ys.measureFont(e),!0}return!1}function Ps(e,t){if(e instanceof Ss){t.includes(e.style)||t.push(e.style),t.includes(e)||t.push(e);const r=e._texture.baseTexture;return t.includes(r)||t.push(r),!0}return!1}function Ds(e,t){return e instanceof _s&&(t.includes(e)||t.push(e),!0)}const Bs=class{constructor(e){this.limiter=new ws(Bs.uploadsPerFrame),this.renderer=e,this.uploadHookHelper=null,this.queue=[],this.addHooks=[],this.uploadHooks=[],this.completes=[],this.ticking=!1,this.delayedTick=()=>{this.queue&&this.prepareItems()},this.registerFindHook(Ps),this.registerFindHook(Ds),this.registerFindHook(ks),this.registerFindHook(Cs),this.registerFindHook(Ms),this.registerUploadHook(Rs),this.registerUploadHook(Is)}upload(e){return new Promise((t=>{e&&this.add(e),this.queue.length?(this.completes.push(t),this.ticking||(this.ticking=!0,ki.system.addOnce(this.tick,this,Ei.UTILITY))):t()}))}tick(){setTimeout(this.delayedTick,0)}prepareItems(){for(this.limiter.beginFrame();this.queue.length&&this.limiter.allowedToUpload();){const e=this.queue[0];let t=!1;if(e&&!e._destroyed)for(let r=0,i=this.uploadHooks.length;r<i;r++)if(this.uploadHooks[r](this.uploadHookHelper,e)){this.queue.shift(),t=!0;break}t||this.queue.shift()}if(this.queue.length)ki.system.addOnce(this.tick,this,Ei.UTILITY);else{this.ticking=!1;const e=this.completes.slice(0);this.completes.length=0;for(let t=0,r=e.length;t<r;t++)e[t]()}}registerFindHook(e){return e&&this.addHooks.push(e),this}registerUploadHook(e){return e&&this.uploadHooks.push(e),this}add(e){for(let t=0,r=this.addHooks.length;t<r&&!this.addHooks[t](e,this.queue);t++);if(e instanceof $i)for(let t=e.children.length-1;t>=0;t--)this.add(e.children[t]);return this}destroy(){this.ticking&&ki.system.remove(this.tick,this),this.ticking=!1,this.addHooks=null,this.uploadHooks=null,this.renderer=null,this.completes=null,this.queue=null,this.limiter=null,this.uploadHookHelper=null}};let Ns=Bs;function Fs(e,t){return t instanceof st&&(t._glTextures[e.CONTEXT_UID]||e.texture.bind(t),!0)}function Ls(e,t){if(!(t instanceof as))return!1;const{geometry:r}=t;t.finishPoly(),r.updateBatches();const{batches:i}=r;for(let t=0;t<i.length;t++){const{texture:r}=i[t].style;r&&Fs(e,r.baseTexture)}return r.batchable||e.geometry.bind(r,t._resolveDirectShader(e)),!0}function Os(e,t){return e instanceof as&&(t.push(e),!0)}Ns.uploadsPerFrame=4,Object.defineProperties(b,{UPLOADS_PER_FRAME:{get:()=>Ns.uploadsPerFrame,set(e){Y("7.1.0","settings.UPLOADS_PER_FRAME is deprecated, use prepare.BasePrepare.uploadsPerFrame"),Ns.uploadsPerFrame=e}}});class zs extends Ns{constructor(e){super(e),this.uploadHookHelper=this.renderer,this.registerFindHook(Os),this.registerUploadHook(Fs),this.registerUploadHook(Ls)}}zs.extension={name:"prepare",type:Xe.RendererSystem},Ye.add(zs),new bt;var Gs="#version 100\n#define SHADER_NAME Tiling-Sprite-100\n\nprecision lowp float;\n\nattribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\nuniform mat3 translationMatrix;\nuniform mat3 uTransform;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n\n    vTextureCoord = (uTransform * vec3(aTextureCoord, 1.0)).xy;\n}\n";const Us=new Ct;class Hs extends or{constructor(e){super(e),e.runners.contextChange.add(this),this.quad=new Cr,this.state=qe.for2d()}contextChange(){const e=this.renderer,t={globals:e.globalUniforms};this.simpleShader=ar.from(Gs,"#version 100\n#define SHADER_NAME Tiling-Sprite-Simple-100\n\nprecision lowp float;\n\nvarying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\nuniform vec4 uColor;\n\nvoid main(void)\n{\n    vec4 texSample = texture2D(uSampler, vTextureCoord);\n    gl_FragColor = texSample * uColor;\n}\n",t),this.shader=e.context.webGLVersion>1?ar.from("#version 300 es\n#define SHADER_NAME Tiling-Sprite-300\n\nprecision lowp float;\n\nin vec2 aVertexPosition;\nin vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\nuniform mat3 translationMatrix;\nuniform mat3 uTransform;\n\nout vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n\n    vTextureCoord = (uTransform * vec3(aTextureCoord, 1.0)).xy;\n}\n","#version 300 es\n#define SHADER_NAME Tiling-Sprite-100\n\nprecision lowp float;\n\nin vec2 vTextureCoord;\n\nout vec4 fragmentColor;\n\nuniform sampler2D uSampler;\nuniform vec4 uColor;\nuniform mat3 uMapCoord;\nuniform vec4 uClampFrame;\nuniform vec2 uClampOffset;\n\nvoid main(void)\n{\n    vec2 coord = vTextureCoord + ceil(uClampOffset - vTextureCoord);\n    coord = (uMapCoord * vec3(coord, 1.0)).xy;\n    vec2 unclamped = coord;\n    coord = clamp(coord, uClampFrame.xy, uClampFrame.zw);\n\n    vec4 texSample = texture(uSampler, coord, unclamped == coord ? 0.0f : -32.0f);// lod-bias very negative to force lod 0\n\n    fragmentColor = texSample * uColor;\n}\n",t):ar.from(Gs,"#version 100\n#ifdef GL_EXT_shader_texture_lod\n    #extension GL_EXT_shader_texture_lod : enable\n#endif\n#define SHADER_NAME Tiling-Sprite-100\n\nprecision lowp float;\n\nvarying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\nuniform vec4 uColor;\nuniform mat3 uMapCoord;\nuniform vec4 uClampFrame;\nuniform vec2 uClampOffset;\n\nvoid main(void)\n{\n    vec2 coord = vTextureCoord + ceil(uClampOffset - vTextureCoord);\n    coord = (uMapCoord * vec3(coord, 1.0)).xy;\n    vec2 unclamped = coord;\n    coord = clamp(coord, uClampFrame.xy, uClampFrame.zw);\n\n    #ifdef GL_EXT_shader_texture_lod\n        vec4 texSample = unclamped == coord\n            ? texture2D(uSampler, coord) \n            : texture2DLodEXT(uSampler, coord, 0);\n    #else\n        vec4 texSample = texture2D(uSampler, coord);\n    #endif\n\n    gl_FragColor = texSample * uColor;\n}\n",t)}render(e){const t=this.renderer,r=this.quad;let i=r.vertices;i[0]=i[6]=e._width*-e.anchor.x,i[1]=i[3]=e._height*-e.anchor.y,i[2]=i[4]=e._width*(1-e.anchor.x),i[5]=i[7]=e._height*(1-e.anchor.y);const a=e.uvRespectAnchor?e.anchor.x:0,n=e.uvRespectAnchor?e.anchor.y:0;i=r.uvs,i[0]=i[6]=-a,i[1]=i[3]=-n,i[2]=i[4]=1-a,i[5]=i[7]=1-n,r.invalidate();const s=e._texture,o=s.baseTexture,l=o.alphaMode>0,h=e.tileTransform.localTransform,u=e.uvMatrix;let c=o.isPowerOfTwo&&s.frame.width===o.width&&s.frame.height===o.height;c&&(o._glTextures[t.CONTEXT_UID]?c=o.wrapMode!==d.CLAMP:o.wrapMode===d.CLAMP&&(o.wrapMode=d.REPEAT));const m=c?this.simpleShader:this.shader,f=s.width,p=s.height,g=e._width,y=e._height;Us.set(h.a*f/g,h.b*f/y,h.c*p/g,h.d*p/y,h.tx/g,h.ty/y),Us.invert(),c?Us.prepend(u.mapCoord):(m.uniforms.uMapCoord=u.mapCoord.toArray(!0),m.uniforms.uClampFrame=u.uClampFrame,m.uniforms.uClampOffset=u.uClampOffset),m.uniforms.uTransform=Us.toArray(!0),m.uniforms.uColor=Ee.shared.setValue(e.tint).premultiply(e.worldAlpha,l).toArray(m.uniforms.uColor),m.uniforms.translationMatrix=e.transform.worldTransform.toArray(!0),m.uniforms.uSampler=s,t.shader.bind(m),t.geometry.bind(r),this.state.blendMode=we(e.blendMode,l),t.state.set(this.state),t.geometry.draw(this.renderer.gl.TRIANGLES,6,0)}}Hs.extension={name:"tilingSprite",type:Xe.RendererPlugin},Ye.add(Hs);const Vs=class{constructor(e,t,r=null){this.linkedSheets=[],this._texture=e instanceof Er?e:null,this.baseTexture=e instanceof st?e:this._texture.baseTexture,this.textures={},this.animations={},this.data=t;const i=this.baseTexture.resource;this.resolution=this._updateResolution(r||(i?i.url:null)),this._frames=this.data.frames,this._frameKeys=Object.keys(this._frames),this._batchIndex=0,this._callback=null}_updateResolution(e=null){const{scale:t}=this.data.meta;let r=je(e,null);return null===r&&(r=parseFloat(t??"1")),1!==r&&this.baseTexture.setResolution(r),r}parse(){return new Promise((e=>{this._callback=e,this._batchIndex=0,this._frameKeys.length<=Vs.BATCH_SIZE?(this._processFrames(0),this._processAnimations(),this._parseComplete()):this._nextBatch()}))}_processFrames(e){let t=e;const r=Vs.BATCH_SIZE;for(;t-e<r&&t<this._frameKeys.length;){const e=this._frameKeys[t],r=this._frames[e],i=r.frame;if(i){let t=null,a=null;const n=!1!==r.trimmed&&r.sourceSize?r.sourceSize:r.frame,s=new At(0,0,Math.floor(n.w)/this.resolution,Math.floor(n.h)/this.resolution);t=r.rotated?new At(Math.floor(i.x)/this.resolution,Math.floor(i.y)/this.resolution,Math.floor(i.h)/this.resolution,Math.floor(i.w)/this.resolution):new At(Math.floor(i.x)/this.resolution,Math.floor(i.y)/this.resolution,Math.floor(i.w)/this.resolution,Math.floor(i.h)/this.resolution),!1!==r.trimmed&&r.spriteSourceSize&&(a=new At(Math.floor(r.spriteSourceSize.x)/this.resolution,Math.floor(r.spriteSourceSize.y)/this.resolution,Math.floor(i.w)/this.resolution,Math.floor(i.h)/this.resolution)),this.textures[e]=new Er(this.baseTexture,t,s,a,r.rotated?2:0,r.anchor,r.borders),Er.addToCache(this.textures[e],e)}t++}}_processAnimations(){const e=this.data.animations||{};for(const t in e){this.animations[t]=[];for(let r=0;r<e[t].length;r++){const i=e[t][r];this.animations[t].push(this.textures[i])}}}_parseComplete(){const e=this._callback;this._callback=null,this._batchIndex=0,e.call(this,this.textures)}_nextBatch(){this._processFrames(this._batchIndex*Vs.BATCH_SIZE),this._batchIndex++,setTimeout((()=>{this._batchIndex*Vs.BATCH_SIZE<this._frameKeys.length?this._nextBatch():(this._processAnimations(),this._parseComplete())}),0)}destroy(e=!1){for(const e in this.textures)this.textures[e].destroy();this._frames=null,this._frameKeys=null,this.data=null,this.textures=null,e&&(this._texture?.destroy(),this.baseTexture.destroy()),this._texture=null,this.baseTexture=null,this.linkedSheets=[]}};let js=Vs;js.BATCH_SIZE=1e3;const Xs=["jpg","png","jpeg","avif","webp"];function Ks(e,t,r){const i={};if(e.forEach((e=>{i[e]=t})),Object.keys(t.textures).forEach((e=>{i[e]=t.textures[e]})),!r){const r=K.dirname(e[0]);t.linkedSheets.forEach(((e,a)=>{const n=Ks([`${r}/${t.data.meta.related_multi_packs[a]}`],e,!0);Object.assign(i,n)}))}return i}const Ws={extension:Xe.Asset,cache:{test:e=>e instanceof js,getCacheableAssets:(e,t)=>Ks(e,t,!1)},resolver:{test:e=>{const t=e.split("?")[0].split("."),r=t.pop(),i=t.pop();return"json"===r&&Xs.includes(i)},parse:e=>{const t=e.split(".");return{resolution:parseFloat(b.RETINA_PREFIX.exec(e)?.[1]??"1"),format:t[t.length-2],src:e}}},loader:{name:"spritesheetLoader",extension:{type:Xe.LoadParser,priority:Da.Normal},testParse:async(e,t)=>".json"===K.extname(t.src).toLowerCase()&&!!e.frames,async parse(e,t,r){let i=K.dirname(t.src);i&&i.lastIndexOf("/")!==i.length-1&&(i+="/");let a=i+e.meta.image;a=un(a,t.src);const n=(await r.load([a]))[a],s=new js(n.baseTexture,e,t.src);await s.parse();const o=e?.meta?.related_multi_packs;if(Array.isArray(o)){const e=[];for(const a of o){if("string"!=typeof a)continue;let n=i+a;t.data?.ignoreMultiPack||(n=un(n,t.src),e.push(r.load({src:n,data:{ignoreMultiPack:!0}})))}const a=await Promise.all(e);s.linkedSheets=a,a.forEach((e=>{e.linkedSheets=[s].concat(s.linkedSheets.filter((t=>t!==e)))}))}return s},unload(e){e.destroy(!0)}}};Ye.add(Ws);class Ys{constructor(){this.info=[],this.common=[],this.page=[],this.char=[],this.kerning=[],this.distanceField=[]}}class Zs{static test(e){return"string"==typeof e&&e.startsWith("info face=")}static parse(e){const t=e.match(/^[a-z]+\s+.+$/gm),r={info:[],common:[],page:[],char:[],chars:[],kerning:[],kernings:[],distanceField:[]};for(const e in t){const i=t[e].match(/^[a-z]+/gm)[0],a=t[e].match(/[a-zA-Z]+=([^\s"']+|"([^"]*)")/gm),n={};for(const e in a){const t=a[e].split("="),r=t[0],i=t[1].replace(/"/gm,""),s=parseFloat(i),o=isNaN(s)?i:s;n[r]=o}r[i].push(n)}const i=new Ys;return r.info.forEach((e=>i.info.push({face:e.face,size:parseInt(e.size,10)}))),r.common.forEach((e=>i.common.push({lineHeight:parseInt(e.lineHeight,10)}))),r.page.forEach((e=>i.page.push({id:parseInt(e.id,10),file:e.file}))),r.char.forEach((e=>i.char.push({id:parseInt(e.id,10),page:parseInt(e.page,10),x:parseInt(e.x,10),y:parseInt(e.y,10),width:parseInt(e.width,10),height:parseInt(e.height,10),xoffset:parseInt(e.xoffset,10),yoffset:parseInt(e.yoffset,10),xadvance:parseInt(e.xadvance,10)}))),r.kerning.forEach((e=>i.kerning.push({first:parseInt(e.first,10),second:parseInt(e.second,10),amount:parseInt(e.amount,10)}))),r.distanceField.forEach((e=>i.distanceField.push({distanceRange:parseInt(e.distanceRange,10),fieldType:e.fieldType}))),i}}class Js{static test(e){const t=e;return"getElementsByTagName"in t&&t.getElementsByTagName("page").length&&null!==t.getElementsByTagName("info")[0].getAttribute("face")}static parse(e){const t=new Ys,r=e.getElementsByTagName("info"),i=e.getElementsByTagName("common"),a=e.getElementsByTagName("page"),n=e.getElementsByTagName("char"),s=e.getElementsByTagName("kerning"),o=e.getElementsByTagName("distanceField");for(let e=0;e<r.length;e++)t.info.push({face:r[e].getAttribute("face"),size:parseInt(r[e].getAttribute("size"),10)});for(let e=0;e<i.length;e++)t.common.push({lineHeight:parseInt(i[e].getAttribute("lineHeight"),10)});for(let e=0;e<a.length;e++)t.page.push({id:parseInt(a[e].getAttribute("id"),10)||0,file:a[e].getAttribute("file")});for(let e=0;e<n.length;e++){const r=n[e];t.char.push({id:parseInt(r.getAttribute("id"),10),page:parseInt(r.getAttribute("page"),10)||0,x:parseInt(r.getAttribute("x"),10),y:parseInt(r.getAttribute("y"),10),width:parseInt(r.getAttribute("width"),10),height:parseInt(r.getAttribute("height"),10),xoffset:parseInt(r.getAttribute("xoffset"),10),yoffset:parseInt(r.getAttribute("yoffset"),10),xadvance:parseInt(r.getAttribute("xadvance"),10)})}for(let e=0;e<s.length;e++)t.kerning.push({first:parseInt(s[e].getAttribute("first"),10),second:parseInt(s[e].getAttribute("second"),10),amount:parseInt(s[e].getAttribute("amount"),10)});for(let e=0;e<o.length;e++)t.distanceField.push({fieldType:o[e].getAttribute("fieldType"),distanceRange:parseInt(o[e].getAttribute("distanceRange"),10)});return t}}class $s{static test(e){return!("string"!=typeof e||!e.includes("<font>"))&&Js.test(b.ADAPTER.parseXML(e))}static parse(e){return Js.parse(b.ADAPTER.parseXML(e))}}const qs=[Zs,Js,$s];function Qs(e,t,r,i,a,n,s){const o=r.text,l=r.fontProperties;t.translate(i,a),t.scale(n,n);const h=s.strokeThickness/2,u=-s.strokeThickness/2;if(t.font=s.toFontString(),t.lineWidth=s.strokeThickness,t.textBaseline=s.textBaseline,t.lineJoin=s.lineJoin,t.miterLimit=s.miterLimit,t.fillStyle=function(e,t,r,i,a,n){const s=r.fill;if(!Array.isArray(s))return s;if(1===s.length)return s[0];let o;const l=r.dropShadow?r.dropShadowDistance:0,h=r.padding||0,u=e.width/i-l-2*h,d=e.height/i-l-2*h,c=s.slice(),m=r.fillGradientStops.slice();if(!m.length){const e=c.length+1;for(let t=1;t<e;++t)m.push(t/e)}if(c.unshift(s[0]),m.unshift(0),c.push(s[s.length-1]),m.push(1),r.fillGradientType===fs.LINEAR_VERTICAL){o=t.createLinearGradient(u/2,h,u/2,d+h);let e=0;const i=(n.fontProperties.fontSize+r.strokeThickness)/d;for(let t=0;t<a.length;t++){const r=n.lineHeight*t;for(let t=0;t<c.length;t++){let a=0;a="number"==typeof m[t]?m[t]:t/c.length;const n=r/d+a*i;let s=Math.max(e,n);s=Math.min(s,1),o.addColorStop(s,c[t]),e=s}}}else{o=t.createLinearGradient(h,d/2,u+h,d/2);const e=c.length+1;let r=1;for(let t=0;t<c.length;t++){let i;i="number"==typeof m[t]?m[t]:r/e,o.addColorStop(i,c[t]),r++}}return o}(e,t,s,n,[o],r),t.strokeStyle=s.stroke,s.dropShadow){const e=s.dropShadowColor,r=s.dropShadowBlur*n,i=s.dropShadowDistance*n;t.shadowColor=Ee.shared.setValue(e).setAlpha(s.dropShadowAlpha).toRgbaString(),t.shadowBlur=r,t.shadowOffsetX=Math.cos(s.dropShadowAngle)*i,t.shadowOffsetY=Math.sin(s.dropShadowAngle)*i}else t.shadowColor="black",t.shadowBlur=0,t.shadowOffsetX=0,t.shadowOffsetY=0;s.stroke&&s.strokeThickness&&t.strokeText(o,h,u+r.lineHeight-l.descent),s.fill&&t.fillText(o,h,u+r.lineHeight-l.descent),t.setTransform(1,0,0,1,0,0),t.fillStyle="rgba(0, 0, 0, 0)"}function eo(e){return Array.from?Array.from(e):e.split("")}function to(e){return e.codePointAt?e.codePointAt(0):e.charCodeAt(0)}const ro=class{constructor(e,t,r){const[i]=e.info,[a]=e.common,[n]=e.page,[s]=e.distanceField,o=je(n.file),l={};this._ownsTextures=r,this.font=i.face,this.size=i.size,this.lineHeight=a.lineHeight/o,this.chars={},this.pageTextures=l;for(let r=0;r<e.page.length;r++){const{id:i,file:a}=e.page[r];l[i]=t instanceof Array?t[r]:t[a],s?.fieldType&&"none"!==s.fieldType&&(l[i].baseTexture.alphaMode=m.NO_PREMULTIPLIED_ALPHA,l[i].baseTexture.mipmap=c.OFF)}for(let t=0;t<e.char.length;t++){const{id:r,page:i}=e.char[t];let{x:a,y:n,width:s,height:h,xoffset:u,yoffset:d,xadvance:c}=e.char[t];a/=o,n/=o,s/=o,h/=o,u/=o,d/=o,c/=o;const m=new At(a+l[i].frame.x/o,n+l[i].frame.y/o,s,h);this.chars[r]={xOffset:u,yOffset:d,xAdvance:c,kerning:{},texture:new Er(l[i].baseTexture,m),page:i}}for(let t=0;t<e.kerning.length;t++){let{first:r,second:i,amount:a}=e.kerning[t];r/=o,i/=o,a/=o,this.chars[i]&&(this.chars[i].kerning[r]=a)}this.distanceFieldRange=s?.distanceRange,this.distanceFieldType=s?.fieldType?.toLowerCase()??"none"}destroy(){for(const e in this.chars)this.chars[e].texture.destroy(),this.chars[e].texture=null;for(const e in this.pageTextures)this._ownsTextures&&this.pageTextures[e].destroy(!0),this.pageTextures[e]=null;this.chars=null,this.pageTextures=null}static install(e,t,r){let i;if(e instanceof Ys)i=e;else{const t=function(e){for(let t=0;t<qs.length;t++)if(qs[t].test(e))return qs[t];return null}(e);if(!t)throw new Error("Unrecognized data format for font.");i=t.parse(e)}t instanceof Er&&(t=[t]);const a=new ro(i,t,r);return ro.available[a.font]=a,a}static uninstall(e){const t=ro.available[e];if(!t)throw new Error(`No font found named '${e}'`);t.destroy(),delete ro.available[e]}static from(e,t,r){if(!e)throw new Error("[BitmapFont] Property `name` is required.");const{chars:i,padding:a,resolution:n,textureWidth:s,textureHeight:o,...l}=Object.assign({},ro.defaultOptions,r),h=function(e){"string"==typeof e&&(e=[e]);const t=[];for(let r=0,i=e.length;r<i;r++){const i=e[r];if(Array.isArray(i)){if(2!==i.length)throw new Error(`[BitmapFont]: Invalid character range length, expecting 2 got ${i.length}.`);const e=i[0].charCodeAt(0),r=i[1].charCodeAt(0);if(r<e)throw new Error("[BitmapFont]: Invalid character range.");for(let i=e,a=r;i<=a;i++)t.push(String.fromCharCode(i))}else t.push(...eo(i))}if(0===t.length)throw new Error("[BitmapFont]: Empty set when resolving characters.");return t}(i),u=t instanceof _s?t:new _s(t),d=s,c=new Ys;c.info[0]={face:u.fontFamily,size:u.fontSize},c.common[0]={lineHeight:u.fontSize};let m,f,p,g=0,y=0,v=0;const x=[],_=[];for(let e=0;e<h.length;e++){m||(m=b.ADAPTER.createCanvas(),m.width=s,m.height=o,f=m.getContext("2d"),p=new st(m,{resolution:n,...l}),x.push(p),_.push(new Er(p)),c.page.push({id:_.length-1,file:""}));const t=h[e],r=ys.measureText(t,u,!1,m),i=r.width,T=Math.ceil(r.height),A=Math.ceil(("italic"===u.fontStyle?2:1)*i);if(y>=o-T*n){if(0===y)throw new Error(`[BitmapFont] textureHeight ${o}px is too small (fontFamily: '${u.fontFamily}', fontSize: ${u.fontSize}px, char: '${t}')`);--e,m=null,f=null,p=null,y=0,g=0,v=0;continue}if(v=Math.max(T+r.fontProperties.descent,v),A*n+g>=d){if(0===g)throw new Error(`[BitmapFont] textureWidth ${s}px is too small (fontFamily: '${u.fontFamily}', fontSize: ${u.fontSize}px, char: '${t}')`);--e,y+=v*n,y=Math.ceil(y),g=0,v=0;continue}Qs(m,f,r,g,y,n,u);const E=to(r.text);c.char.push({id:E,page:_.length-1,x:g/n,y:y/n,width:A,height:T,xoffset:0,yoffset:0,xadvance:i-(u.dropShadow?u.dropShadowDistance:0)-(u.stroke?u.strokeThickness:0)}),g+=(A+2*a)*n,g=Math.ceil(g)}for(let e=0,t=h.length;e<t;e++){const r=h[e];for(let e=0;e<t;e++){const t=h[e],i=f.measureText(r).width,a=f.measureText(t).width,n=f.measureText(r+t).width-(i+a);n&&c.kerning.push({first:to(r),second:to(t),amount:n})}}const T=new ro(c,_,!0);return void 0!==ro.available[e]&&ro.uninstall(e),ro.available[e]=T,T}};let io=ro;io.ALPHA=[["a","z"],["A","Z"]," "],io.NUMERIC=[["0","9"]],io.ALPHANUMERIC=[["a","z"],["A","Z"],["0","9"]," "],io.ASCII=[[" ","~"]],io.defaultOptions={resolution:1,textureWidth:512,textureHeight:512,padding:4,chars:ro.ALPHANUMERIC},io.available={};const ao=[],no=[],so=[],oo=class extends $i{constructor(e,t={}){super();const{align:r,tint:i,maxWidth:a,letterSpacing:n,fontName:s,fontSize:o}=Object.assign({},oo.styleDefaults,t);if(!io.available[s])throw new Error(`Missing BitmapFont "${s}"`);this._activePagesMeshData=[],this._textWidth=0,this._textHeight=0,this._align=r,this._tintColor=new Ee(i),this._font=void 0,this._fontName=s,this._fontSize=o,this.text=e,this._maxWidth=a,this._maxLineHeight=0,this._letterSpacing=n,this._anchor=new Lt((()=>{this.dirty=!0}),this,0,0),this._roundPixels=b.ROUND_PIXELS,this.dirty=!0,this._resolution=b.RESOLUTION,this._autoResolution=!0,this._textureCache={}}updateText(){const e=io.available[this._fontName],t=this.fontSize,r=t/e.size,i=new bt,n=[],s=[],o=[],l=eo(this._text.replace(/(?:\r\n|\r)/g,"\n")||" "),h=this._maxWidth*e.size/t,u="none"===e.distanceFieldType?ao:no;let d=null,c=0,m=0,f=0,p=-1,g=0,y=0,v=0,x=0;for(let t=0;t<l.length;t++){const r=l[t],a=to(r);if(/(?:\s)/.test(r)&&(p=t,g=c,x++),"\r"===r||"\n"===r){s.push(c),o.push(-1),m=Math.max(m,c),++f,++y,i.x=0,i.y+=e.lineHeight,d=null,x=0;continue}const u=e.chars[a];if(!u)continue;d&&u.kerning[d]&&(i.x+=u.kerning[d]);const _=so.pop()||{texture:Er.EMPTY,line:0,charCode:0,prevSpaces:0,position:new bt};_.texture=u.texture,_.line=f,_.charCode=a,_.position.x=Math.round(i.x+u.xOffset+this._letterSpacing/2),_.position.y=Math.round(i.y+u.yOffset),_.prevSpaces=x,n.push(_),c=_.position.x+Math.max(u.xAdvance-u.xOffset,u.texture.orig.width),i.x+=u.xAdvance+this._letterSpacing,v=Math.max(v,u.yOffset+u.texture.height),d=a,-1!==p&&h>0&&i.x>h&&(++y,Ie(n,1+p-y,1+t-p),t=p,p=-1,s.push(g),o.push(n.length>0?n[n.length-1].prevSpaces:0),m=Math.max(m,g),f++,i.x=0,i.y+=e.lineHeight,d=null,x=0)}const _=l[l.length-1];"\r"!==_&&"\n"!==_&&(/(?:\s)/.test(_)&&(c=g),s.push(c),m=Math.max(m,c),o.push(-1));const b=[];for(let e=0;e<=f;e++){let t=0;"right"===this._align?t=m-s[e]:"center"===this._align?t=(m-s[e])/2:"justify"===this._align&&(t=o[e]<0?0:(m-s[e])/o[e]),b.push(t)}const T=n.length,A={},E=[],S=this._activePagesMeshData;u.push(...S);for(let t=0;t<T;t++){const r=n[t].texture,i=r.baseTexture.uid;if(!A[i]){let t=u.pop();if(!t){const r=new us;let i,n;"none"===e.distanceFieldType?(i=new ds(Er.EMPTY),n=a.NORMAL):(i=new ds(Er.EMPTY,{program:tr.from("// Mesh material default fragment\r\nattribute vec2 aVertexPosition;\r\nattribute vec2 aTextureCoord;\r\n\r\nuniform mat3 projectionMatrix;\r\nuniform mat3 translationMatrix;\r\nuniform mat3 uTextureMatrix;\r\n\r\nvarying vec2 vTextureCoord;\r\n\r\nvoid main(void)\r\n{\r\n    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\r\n\r\n    vTextureCoord = (uTextureMatrix * vec3(aTextureCoord, 1.0)).xy;\r\n}\r\n","// Pixi texture info\r\nvarying vec2 vTextureCoord;\r\nuniform sampler2D uSampler;\r\n\r\n// Tint\r\nuniform vec4 uColor;\r\n\r\n// on 2D applications fwidth is screenScale / glyphAtlasScale * distanceFieldRange\r\nuniform float uFWidth;\r\n\r\nvoid main(void) {\r\n\r\n  // To stack MSDF and SDF we need a non-pre-multiplied-alpha texture.\r\n  vec4 texColor = texture2D(uSampler, vTextureCoord);\r\n\r\n  // MSDF\r\n  float median = texColor.r + texColor.g + texColor.b -\r\n                  min(texColor.r, min(texColor.g, texColor.b)) -\r\n                  max(texColor.r, max(texColor.g, texColor.b));\r\n  // SDF\r\n  median = min(median, texColor.a);\r\n\r\n  float screenPxDistance = uFWidth * (median - 0.5);\r\n  float alpha = clamp(screenPxDistance + 0.5, 0.0, 1.0);\r\n  if (median < 0.01) {\r\n    alpha = 0.0;\r\n  } else if (median > 0.99) {\r\n    alpha = 1.0;\r\n  }\r\n\r\n  // Gamma correction for coverage-like alpha\r\n  float luma = dot(uColor.rgb, vec3(0.299, 0.587, 0.114));\r\n  float gamma = mix(1.0, 1.0 / 2.2, luma);\r\n  float coverage = pow(uColor.a * alpha, gamma);  \r\n\r\n  // NPM Textures, NPM outputs\r\n  gl_FragColor = vec4(uColor.rgb, coverage);\r\n}\r\n"),uniforms:{uFWidth:0}}),n=a.NORMAL_NPM);const s=new hs(r,i);s.blendMode=n,t={index:0,indexCount:0,vertexCount:0,uvsCount:0,total:0,mesh:s,vertices:null,uvs:null,indices:null}}t.index=0,t.indexCount=0,t.vertexCount=0,t.uvsCount=0,t.total=0;const{_textureCache:n}=this;n[i]=n[i]||new Er(r.baseTexture),t.mesh.texture=n[i],t.mesh.tint=this._tintColor.value,E.push(t),A[i]=t}A[i].total++}for(let e=0;e<S.length;e++)E.includes(S[e])||this.removeChild(S[e].mesh);for(let e=0;e<E.length;e++)E[e].mesh.parent!==this&&this.addChild(E[e].mesh);this._activePagesMeshData=E;for(const e in A){const t=A[e],r=t.total;if(!(t.indices?.length>6*r)||t.vertices.length<2*hs.BATCHABLE_SIZE)t.vertices=new Float32Array(8*r),t.uvs=new Float32Array(8*r),t.indices=new Uint16Array(6*r);else{const e=t.total,r=t.vertices;for(let t=4*e*2;t<r.length;t++)r[t]=0}t.mesh.size=6*r}for(let e=0;e<T;e++){const t=n[e];let i=t.position.x+b[t.line]*("justify"===this._align?t.prevSpaces:1);this._roundPixels&&(i=Math.round(i));const a=i*r,s=t.position.y*r,o=t.texture,l=A[o.baseTexture.uid],h=o.frame,u=o._uvs,d=l.index++;l.indices[6*d+0]=0+4*d,l.indices[6*d+1]=1+4*d,l.indices[6*d+2]=2+4*d,l.indices[6*d+3]=0+4*d,l.indices[6*d+4]=2+4*d,l.indices[6*d+5]=3+4*d,l.vertices[8*d+0]=a,l.vertices[8*d+1]=s,l.vertices[8*d+2]=a+h.width*r,l.vertices[8*d+3]=s,l.vertices[8*d+4]=a+h.width*r,l.vertices[8*d+5]=s+h.height*r,l.vertices[8*d+6]=a,l.vertices[8*d+7]=s+h.height*r,l.uvs[8*d+0]=u.x0,l.uvs[8*d+1]=u.y0,l.uvs[8*d+2]=u.x1,l.uvs[8*d+3]=u.y1,l.uvs[8*d+4]=u.x2,l.uvs[8*d+5]=u.y2,l.uvs[8*d+6]=u.x3,l.uvs[8*d+7]=u.y3}this._textWidth=m*r,this._textHeight=(i.y+e.lineHeight)*r;for(const e in A){const t=A[e];if(0!==this.anchor.x||0!==this.anchor.y){let e=0;const r=this._textWidth*this.anchor.x,i=this._textHeight*this.anchor.y;for(let a=0;a<t.total;a++)t.vertices[e++]-=r,t.vertices[e++]-=i,t.vertices[e++]-=r,t.vertices[e++]-=i,t.vertices[e++]-=r,t.vertices[e++]-=i,t.vertices[e++]-=r,t.vertices[e++]-=i}this._maxLineHeight=v*r;const i=t.mesh.geometry.getBuffer("aVertexPosition"),a=t.mesh.geometry.getBuffer("aTextureCoord"),n=t.mesh.geometry.getIndex();i.data=t.vertices,a.data=t.uvs,n.data=t.indices,i.update(),a.update(),n.update()}for(let e=0;e<n.length;e++)so.push(n[e]);this._font=e,this.dirty=!1}updateTransform(){this.validate(),this.containerUpdateTransform()}_render(e){this._autoResolution&&this._resolution!==e.resolution&&(this._resolution=e.resolution,this.dirty=!0);const{distanceFieldRange:t,distanceFieldType:r,size:i}=io.available[this._fontName];if("none"!==r){const{a:r,b:a,c:n,d:s}=this.worldTransform,o=Math.sqrt(r*r+a*a),l=Math.sqrt(n*n+s*s),h=(Math.abs(o)+Math.abs(l))/2,u=this.fontSize/i,d=e._view.resolution;for(const e of this._activePagesMeshData)e.mesh.shader.uniforms.uFWidth=h*t*u*d}super._render(e)}getLocalBounds(){return this.validate(),super.getLocalBounds()}validate(){const e=io.available[this._fontName];if(!e)throw new Error(`Missing BitmapFont "${this._fontName}"`);this._font!==e&&(this.dirty=!0),this.dirty&&this.updateText()}get tint(){return this._tintColor.value}set tint(e){if(this.tint!==e){this._tintColor.setValue(e);for(let t=0;t<this._activePagesMeshData.length;t++)this._activePagesMeshData[t].mesh.tint=e}}get align(){return this._align}set align(e){this._align!==e&&(this._align=e,this.dirty=!0)}get fontName(){return this._fontName}set fontName(e){if(!io.available[e])throw new Error(`Missing BitmapFont "${e}"`);this._fontName!==e&&(this._fontName=e,this.dirty=!0)}get fontSize(){return this._fontSize??io.available[this._fontName].size}set fontSize(e){this._fontSize!==e&&(this._fontSize=e,this.dirty=!0)}get anchor(){return this._anchor}set anchor(e){"number"==typeof e?this._anchor.set(e):this._anchor.copyFrom(e)}get text(){return this._text}set text(e){e=String(null==e?"":e),this._text!==e&&(this._text=e,this.dirty=!0)}get maxWidth(){return this._maxWidth}set maxWidth(e){this._maxWidth!==e&&(this._maxWidth=e,this.dirty=!0)}get maxLineHeight(){return this.validate(),this._maxLineHeight}get textWidth(){return this.validate(),this._textWidth}get letterSpacing(){return this._letterSpacing}set letterSpacing(e){this._letterSpacing!==e&&(this._letterSpacing=e,this.dirty=!0)}get roundPixels(){return this._roundPixels}set roundPixels(e){e!==this._roundPixels&&(this._roundPixels=e,this.dirty=!0)}get textHeight(){return this.validate(),this._textHeight}get resolution(){return this._resolution}set resolution(e){this._autoResolution=!1,this._resolution!==e&&(this._resolution=e,this.dirty=!0)}destroy(e){const{_textureCache:t}=this,r="none"===io.available[this._fontName].distanceFieldType?ao:no;r.push(...this._activePagesMeshData);for(const e of this._activePagesMeshData)this.removeChild(e.mesh);this._activePagesMeshData=[],r.filter((e=>t[e.mesh.texture.baseTexture.uid])).forEach((e=>{e.mesh.texture=Er.EMPTY}));for(const e in t)t[e].destroy(),delete t[e];this._font=null,this._tintColor=null,this._textureCache=null,super.destroy(e)}};let lo=oo;lo.styleDefaults={align:"left",tint:16777215,maxWidth:0,letterSpacing:0};const ho=[".xml",".fnt"],uo={extension:{type:Xe.LoadParser,priority:Da.Normal},name:"loadBitmapFont",test:e=>ho.includes(K.extname(e).toLowerCase()),testParse:async e=>Zs.test(e)||$s.test(e),async parse(e,t,r){const i=Zs.test(e)?Zs.parse(e):$s.parse(e),{src:a}=t,{page:n}=i,s=[];for(let e=0;e<n.length;++e){const t=n[e].file;let r=K.join(K.dirname(a),t);r=un(r,a),s.push(r)}const o=await r.load(s),l=s.map((e=>o[e]));return io.install(i,l,!0)},load:async(e,t)=>(await b.ADAPTER.fetch(e)).text(),unload(e){e.destroy()}};Ye.add(uo);const co=class extends _s{constructor(){super(...arguments),this._fonts=[],this._overrides=[],this._stylesheet="",this.fontsDirty=!1}static from(e){return new co(Object.keys(co.defaultOptions).reduce(((t,r)=>({...t,[r]:e[r]})),{}))}cleanFonts(){this._fonts.length>0&&(this._fonts.forEach((e=>{URL.revokeObjectURL(e.src),e.refs--,0===e.refs&&(e.fontFace&&document.fonts.delete(e.fontFace),delete co.availableFonts[e.originalUrl])})),this.fontFamily="Arial",this._fonts.length=0,this.styleID++,this.fontsDirty=!0)}loadFont(e,t={}){const{availableFonts:r}=co;if(r[e]){const t=r[e];return this._fonts.push(t),t.refs++,this.styleID++,this.fontsDirty=!0,Promise.resolve()}return b.ADAPTER.fetch(e).then((e=>e.blob())).then((async e=>new Promise(((t,r)=>{const i=URL.createObjectURL(e),a=new FileReader;a.onload=()=>t([i,a.result]),a.onerror=r,a.readAsDataURL(e)})))).then((async([i,a])=>{const n=Object.assign({family:K.basename(e,K.extname(e)),weight:"normal",style:"normal",src:i,dataSrc:a,refs:1,originalUrl:e,fontFace:null},t);r[e]=n,this._fonts.push(n),this.styleID++;const s=new FontFace(n.family,`url(${n.src})`,{weight:n.weight,style:n.style});n.fontFace=s,await s.load(),document.fonts.add(s),await document.fonts.ready,this.styleID++,this.fontsDirty=!0}))}addOverride(...e){const t=e.filter((e=>!this._overrides.includes(e)));t.length>0&&(this._overrides.push(...t),this.styleID++)}removeOverride(...e){const t=e.filter((e=>this._overrides.includes(e)));t.length>0&&(this._overrides=this._overrides.filter((e=>!t.includes(e))),this.styleID++)}toCSS(e){return[`transform: scale(${e})`,"transform-origin: top left","display: inline-block",`color: ${this.normalizeColor(this.fill)}`,`font-size: ${this.fontSize}px`,`font-family: ${this.fontFamily}`,`font-weight: ${this.fontWeight}`,`font-style: ${this.fontStyle}`,`font-variant: ${this.fontVariant}`,`letter-spacing: ${this.letterSpacing}px`,`text-align: ${this.align}`,`padding: ${this.padding}px`,`white-space: ${this.whiteSpace}`,...this.lineHeight?[`line-height: ${this.lineHeight}px`]:[],...this.wordWrap?["word-wrap: "+(this.breakWords?"break-all":"break-word"),`max-width: ${this.wordWrapWidth}px`]:[],...this.strokeThickness?[`-webkit-text-stroke-width: ${this.strokeThickness}px`,`-webkit-text-stroke-color: ${this.normalizeColor(this.stroke)}`,`text-stroke-width: ${this.strokeThickness}px`,`text-stroke-color: ${this.normalizeColor(this.stroke)}`,"paint-order: stroke"]:[],...this.dropShadow?[this.dropShadowToCSS()]:[],...this._overrides].join(";")}toGlobalCSS(){return this._fonts.reduce(((e,t)=>`${e}\n            @font-face {\n                font-family: "${t.family}";\n                src: url('${t.dataSrc}');\n                font-weight: ${t.weight};\n                font-style: ${t.style}; \n            }`),this._stylesheet)}get stylesheet(){return this._stylesheet}set stylesheet(e){this._stylesheet!==e&&(this._stylesheet=e,this.styleID++)}normalizeColor(e){var t,r;return Array.isArray(e)&&(t=e,Y("7.2.0","utils.rgb2hex is deprecated, use Color#toNumber instead"),e=Ee.shared.setValue(t).toNumber()),"number"==typeof e?(r=e,Y("7.2.0","utils.hex2string is deprecated, use Color#toHex instead"),Ee.shared.setValue(r).toHex()):e}dropShadowToCSS(){let e=this.normalizeColor(this.dropShadowColor);const t=this.dropShadowAlpha,r=Math.round(Math.cos(this.dropShadowAngle)*this.dropShadowDistance),i=Math.round(Math.sin(this.dropShadowAngle)*this.dropShadowDistance);e.startsWith("#")&&t<1&&(e+=(255*t|0).toString(16).padStart(2,"0"));const a=`${r}px ${i}px`;return this.dropShadowBlur>0?`text-shadow: ${a} ${this.dropShadowBlur}px ${e}`:`text-shadow: ${a} ${e}`}reset(){Object.assign(this,co.defaultOptions)}onBeforeDraw(){const{fontsDirty:e}=this;return this.fontsDirty=!1,this.isSafari&&this._fonts.length>0&&e?new Promise((e=>setTimeout(e,100))):Promise.resolve()}get isSafari(){const{userAgent:e}=b.ADAPTER.getNavigator();return/^((?!chrome|android).)*safari/i.test(e)}set fillGradientStops(e){console.warn("[HTMLTextStyle] fillGradientStops is not supported by HTMLText")}get fillGradientStops(){return super.fillGradientStops}set fillGradientType(e){console.warn("[HTMLTextStyle] fillGradientType is not supported by HTMLText")}get fillGradientType(){return super.fillGradientType}set miterLimit(e){console.warn("[HTMLTextStyle] miterLimit is not supported by HTMLText")}get miterLimit(){return super.miterLimit}set trim(e){console.warn("[HTMLTextStyle] trim is not supported by HTMLText")}get trim(){return super.trim}set textBaseline(e){console.warn("[HTMLTextStyle] textBaseline is not supported by HTMLText")}get textBaseline(){return super.textBaseline}set leading(e){console.warn("[HTMLTextStyle] leading is not supported by HTMLText")}get leading(){return super.leading}set lineJoin(e){console.warn("[HTMLTextStyle] lineJoin is not supported by HTMLText")}get lineJoin(){return super.lineJoin}};let mo=co;mo.availableFonts={},mo.defaultOptions={align:"left",breakWords:!1,dropShadow:!1,dropShadowAlpha:1,dropShadowAngle:Math.PI/6,dropShadowBlur:0,dropShadowColor:"black",dropShadowDistance:5,fill:"black",fontFamily:"Arial",fontSize:26,fontStyle:"normal",fontVariant:"normal",fontWeight:"normal",letterSpacing:0,lineHeight:0,padding:0,stroke:"black",strokeThickness:0,whiteSpace:"normal",wordWrap:!1,wordWrapWidth:100};const fo=class extends ea{constructor(e="",t={}){super(Er.EMPTY),this._text=null,this._style=null,this._autoResolution=!0,this._loading=!1,this.localStyleID=-1,this.dirty=!1,this.ownsStyle=!1;const r=new Image,i=Er.from(r,{scaleMode:b.SCALE_MODE,resourceOptions:{autoLoad:!1}});i.orig=new At,i.trim=new At,this.texture=i;const a="http://www.w3.org/2000/svg",n="http://www.w3.org/1999/xhtml",s=document.createElementNS(a,"svg"),o=document.createElementNS(a,"foreignObject"),l=document.createElementNS(n,"div"),h=document.createElementNS(n,"style");o.setAttribute("width","10000"),o.setAttribute("height","10000"),o.style.overflow="hidden",s.appendChild(o),this.maxWidth=fo.defaultMaxWidth,this.maxHeight=fo.defaultMaxHeight,this._domElement=l,this._styleElement=h,this._svgRoot=s,this._foreignObject=o,this._foreignObject.appendChild(h),this._foreignObject.appendChild(l),this._image=r,this._loadImage=new Image,this._autoResolution=fo.defaultAutoResolution,this._resolution=fo.defaultResolution??b.RESOLUTION,this.text=e,this.style=t}measureText(e){const{text:t,style:r,resolution:i}=Object.assign({text:this._text,style:this._style,resolution:this._resolution},e);Object.assign(this._domElement,{innerHTML:t,style:r.toCSS(i)}),this._styleElement.textContent=r.toGlobalCSS(),document.body.appendChild(this._svgRoot);const a=this._domElement.getBoundingClientRect();this._svgRoot.remove();const n=Math.min(this.maxWidth,Math.ceil(a.width)),s=Math.min(this.maxHeight,Math.ceil(a.height));return this._svgRoot.setAttribute("width",n.toString()),this._svgRoot.setAttribute("height",s.toString()),t!==this._text&&(this._domElement.innerHTML=this._text),r!==this._style&&(Object.assign(this._domElement,{style:this._style?.toCSS(i)}),this._styleElement.textContent=this._style?.toGlobalCSS()),{width:n+2*r.padding,height:s+2*r.padding}}async updateText(e=!0){const{style:t,_image:r,_loadImage:i}=this;if(this.localStyleID!==t.styleID&&(this.dirty=!0,this.localStyleID=t.styleID),!this.dirty&&e)return;const{width:a,height:n}=this.measureText();r.width=i.width=Math.ceil(Math.max(1,a)),r.height=i.height=Math.ceil(Math.max(1,n)),this._loading||(this._loading=!0,await new Promise((e=>{i.onload=async()=>{await t.onBeforeDraw(),this._loading=!1,r.src=i.src,i.onload=null,i.src="",this.updateTexture(),e()};const a=(new XMLSerializer).serializeToString(this._svgRoot);i.src=`data:image/svg+xml;charset=utf8,${encodeURIComponent(a)}`})))}get source(){return this._image}updateTexture(){const{style:e,texture:t,_image:r,resolution:i}=this,{padding:a}=e,{baseTexture:n}=t;t.trim.width=t._frame.width=r.width/i,t.trim.height=t._frame.height=r.height/i,t.trim.x=-a,t.trim.y=-a,t.orig.width=t._frame.width-2*a,t.orig.height=t._frame.height-2*a,this._onTextureUpdate(),n.setRealSize(r.width,r.height,i),this.dirty=!1}_render(e){this._autoResolution&&this._resolution!==e.resolution&&(this._resolution=e.resolution,this.dirty=!0),this.updateText(!0),super._render(e)}_renderCanvas(e){this._autoResolution&&this._resolution!==e.resolution&&(this._resolution=e.resolution,this.dirty=!0),this.updateText(!0),super._renderCanvas(e)}getLocalBounds(e){return this.updateText(!0),super.getLocalBounds(e)}_calculateBounds(){this.updateText(!0),this.calculateVertices(),this._bounds.addQuad(this.vertexData)}_onStyleChange(){this.dirty=!0}destroy(e){"boolean"==typeof e&&(e={children:e}),e=Object.assign({},fo.defaultDestroyOptions,e),super.destroy(e);const t=null;this.ownsStyle&&this._style?.cleanFonts(),this._style=t,this._svgRoot?.remove(),this._svgRoot=t,this._domElement?.remove(),this._domElement=t,this._foreignObject?.remove(),this._foreignObject=t,this._styleElement?.remove(),this._styleElement=t,this._loadImage.src="",this._loadImage.onload=null,this._loadImage=t,this._image.src="",this._image=t}get width(){return this.updateText(!0),Math.abs(this.scale.x)*this._image.width/this.resolution}set width(e){this.updateText(!0);const t=Pe(this.scale.x)||1;this.scale.x=t*e/this._image.width/this.resolution,this._width=e}get height(){return this.updateText(!0),Math.abs(this.scale.y)*this._image.height/this.resolution}set height(e){this.updateText(!0);const t=Pe(this.scale.y)||1;this.scale.y=t*e/this._image.height/this.resolution,this._height=e}get style(){return this._style}set style(e){this._style!==e&&((e=e||{})instanceof mo?(this.ownsStyle=!1,this._style=e):e instanceof _s?(console.warn("[HTMLText] Cloning TextStyle, if this is not what you want, use HTMLTextStyle"),this.ownsStyle=!0,this._style=mo.from(e)):(this.ownsStyle=!0,this._style=new mo(e)),this.localStyleID=-1,this.dirty=!0)}get text(){return this._text}set text(e){e=String(""===e||null==e?" ":e),e=this.sanitiseText(e),this._text!==e&&(this._text=e,this.dirty=!0)}get resolution(){return this._resolution}set resolution(e){this._autoResolution=!1,this._resolution!==e&&(this._resolution=e,this.dirty=!0)}sanitiseText(e){return e.replace(/<br>/gi,"<br/>").replace(/<hr>/gi,"<hr/>").replace(/&nbsp;/gi,"&#160;")}};let po=fo;function go(e){this._activeParentLayer&&this._activeParentLayer!==e._activeLayer||(this.visible?(this.displayOrder=e.incDisplayOrder(),this.worldAlpha<=0||!this.renderable||(e._activeLayer=null,this.containerRenderWebGL(e),e._activeLayer=this._activeParentLayer)):this.displayOrder=0)}po.defaultDestroyOptions={texture:!0,children:!1,baseTexture:!0},po.defaultMaxWidth=2024,po.defaultMaxHeight=2024,po.defaultAutoResolution=!0;const yo=class extends G{constructor(e=0,t=!1){super(),this.useRenderTexture=!1,this.useDoubleBuffer=!1,this.sortPriority=0,this.clearColor=new Float32Array([0,0,0,0]),this.canDrawWithoutLayer=!1,this.canDrawInParentStage=!0,this._activeLayer=null,this._activeStage=null,this._activeChildren=[],this._lastUpdateId=-1,this.zIndex=e||0,this.enableSort=!!t,"function"==typeof t&&this.on("sort",t)}doSort(e,t){if(this.listeners("sort",!0))for(let e=0;e<t.length;e++)this.emit("sort",t[e]);t.sort(yo.compareZIndex)}static compareZIndex(e,t){return e.zOrder<t.zOrder?-1:e.zOrder>t.zOrder?1:e.updateOrder-t.updateOrder}clear(){this._activeLayer=null,this._activeStage=null,this._activeChildren.length=0}_resolveChildDisplayObject(e,t){this.check(e),t._activeParentLayer=this._activeLayer,this._activeLayer?this._activeLayer._activeChildren.push(t):this._activeChildren.push(t)}_resolveLayer(e,t){this.check(e),this._activeLayer&&yo.conflict(),this._activeLayer=t,this._activeStage=e}check(e){if(this._lastUpdateId<yo._layerUpdateId)this._lastUpdateId=yo._layerUpdateId,this.clear(),this._activeStage=e;else if(this.canDrawInParentStage){let t=this._activeStage;for(;t&&t!==e;)t=t._activeParentStage;this._activeStage=t,null===t&&this.clear()}}static conflict(){yo._lastLayerConflict+5e3<Date.now()&&(yo._lastLayerConflict=Date.now(),console.log("@pixi/layers found two layers with the same group in one stage - that's not healthy. Please place a breakpoint here and debug it"))}};let vo=yo;vo._layerUpdateId=0,vo._lastLayerConflict=0;class xo{constructor(e){this.layer=e,this.renderTexture=null,this.doubleBuffer=null,this.currentBufferIndex=0,this._tempRenderTarget=null,this._tempRenderTargetSource=new At,this._tempRenderTargetDestination=new At}init(e){const t=e?e.screen.width:100,r=e?e.screen.height:100,i=e?e.resolution:b.RESOLUTION;this.renderTexture=Sr.create({width:t,height:r,resolution:i}),this.layer.group.useDoubleBuffer&&(this.doubleBuffer=[Sr.create({width:t,height:r,resolution:i}),Sr.create({width:t,height:r,resolution:i})])}getRenderTexture(){return this.renderTexture||this.init(),this.renderTexture}pushTexture(e){const t=e.screen;this.renderTexture||this.init(e);const r=this.renderTexture,i=this.layer.group,a=this.doubleBuffer;if(r.width===t.width&&r.height===t.height&&r.baseTexture.resolution===e.resolution||(r.baseTexture.resolution=e.resolution,r.resize(t.width,t.height),a&&(a[0].baseTexture.resolution=e.resolution,a[0].resize(t.width,t.height),a[1].baseTexture.resolution=e.resolution,a[1].resize(t.width,t.height))),a&&(a[0].framebuffer.multisample=r.framebuffer.multisample,a[1].framebuffer.multisample=r.framebuffer.multisample),this._tempRenderTarget=e.renderTexture.current,this._tempRenderTargetSource.copyFrom(e.renderTexture.sourceFrame),this._tempRenderTargetDestination.copyFrom(e.renderTexture.destinationFrame),e.batch.flush(),i.useDoubleBuffer){let t=a[this.currentBufferIndex];t.baseTexture._glTextures[e.CONTEXT_UID]||(e.renderTexture.bind(t,void 0,void 0),e.texture.bind(t),i.clearColor&&e.renderTexture.clear(i.clearColor)),e.texture.unbind(r.baseTexture),r.baseTexture._glTextures=t.baseTexture._glTextures,r.baseTexture.framebuffer=t.baseTexture.framebuffer,t=a[1-this.currentBufferIndex],e.renderTexture.bind(t,void 0,void 0)}else e.renderTexture.bind(r,void 0,void 0);i.clearColor&&e.renderTexture.clear(i.clearColor);const n=e.filter.defaultFilterStack;n.length>1&&(n[n.length-1].renderTexture=e.renderTexture.current)}popTexture(e){e.batch.flush(),e.framebuffer.blit();const t=e.filter.defaultFilterStack;t.length>1&&(t[t.length-1].renderTexture=this._tempRenderTarget),e.renderTexture.bind(this._tempRenderTarget,this._tempRenderTargetSource,this._tempRenderTargetDestination),this._tempRenderTarget=null;const r=this.renderTexture,i=this.layer.group,a=this.doubleBuffer;if(i.useDoubleBuffer){e.texture.unbind(r.baseTexture),this.currentBufferIndex=1-this.currentBufferIndex;const t=a[this.currentBufferIndex];r.baseTexture._glTextures=t.baseTexture._glTextures,r.baseTexture.framebuffer=t.baseTexture.framebuffer}}destroy(){this.renderTexture&&(this.renderTexture.destroy(),this.doubleBuffer&&(this.doubleBuffer[0].destroy(!0),this.doubleBuffer[1].destroy(!0)))}}class _o extends $i{constructor(e=null){super(),this.isLayer=!0,this.group=null,this._activeChildren=[],this._tempChildren=null,this._activeStageParent=null,this._sortedChildren=[],this._tempLayerParent=null,this.insertChildrenBeforeActive=!0,this.insertChildrenAfterActive=!0,e?(this.group=e,this.zIndex=e.zIndex):this.group=new vo(0,!1),this._tempChildren=this.children}get useRenderTexture(){return this.group.useRenderTexture}set useRenderTexture(e){this.group.useRenderTexture=e}get useDoubleBuffer(){return this.group.useDoubleBuffer}set useDoubleBuffer(e){this.group.useDoubleBuffer=e}get clearColor(){return this.group.clearColor}set clearColor(e){this.group.clearColor=e}get sortPriority(){return this.group.sortPriority}set sortPriority(e){this.group.sortPriority=e}getRenderTexture(){return this.textureCache||(this.textureCache=new xo(this)),this.textureCache.getRenderTexture()}doSort(){this.group.doSort(this,this._sortedChildren)}destroy(e){this.textureCache&&(this.textureCache.destroy(),this.textureCache=null),super.destroy(e)}render(e){this.prerender(e)&&(this.group.useRenderTexture&&(this.textureCache||(this.textureCache=new xo(this)),this.textureCache.pushTexture(e)),this.containerRenderWebGL(e),this.postrender(e),this.group.useRenderTexture&&this.textureCache.popTexture(e))}layerRenderCanvas(e){this.prerender(e)&&(this.containerRenderCanvas(e),this.postrender(e))}_onBeginLayerSubtreeTraversal(e){const t=this._activeChildren;this._activeStageParent=e,this.group._resolveLayer(e,this);const r=this.group._activeChildren;t.length=0;for(let e=0;e<r.length;e++)r[e]._activeParentLayer=this,t.push(r[e]);r.length=0}_onEndLayerSubtreeTraversal(){const e=this.children,t=this._activeChildren,r=this._sortedChildren;for(let e=0;e<t.length;e++)this.emit("display",t[e]);if(r.length=0,this.insertChildrenBeforeActive)for(let t=0;t<e.length;t++)r.push(e[t]);for(let e=0;e<t.length;e++)r.push(t[e]);if(!this.insertChildrenBeforeActive&&this.insertChildrenAfterActive)for(let t=0;t<e.length;t++)r.push(e[t]);this.group.enableSort&&this.doSort()}prerender(e){return!(this._activeParentLayer&&this._activeParentLayer!=e._activeLayer||(this.visible?(this.displayOrder=e.incDisplayOrder(),this.worldAlpha<=0||!this.renderable||(this.children!==this._sortedChildren&&this._tempChildren!==this.children&&(this._tempChildren=this.children),this._boundsID++,this.children=this._sortedChildren,this._tempLayerParent=e._activeLayer,e._activeLayer=this,0)):(this.displayOrder=0,1)))}postrender(e){this.children=this._tempChildren,e._activeLayer=this._tempLayerParent,this._tempLayerParent=null}}_o.prototype.renderCanvas=_o.prototype.layerRenderCanvas;const bo=class extends _o{constructor(){super(...arguments),this.isStage=!0,this._tempGroups=[],this._activeLayers=[],this._activeParentStage=null}clear(){this._activeLayers.length=0,this._tempGroups.length=0}destroy(e){this.clear(),super.destroy(e)}updateStage(){this._activeParentStage=null,vo._layerUpdateId++,this._updateStageInner()}updateAsChildStage(e){this._activeParentStage=e,bo._updateOrderCounter=0,this._updateStageInner()}_updateStageInner(){this.clear(),this._addRecursive(this);const e=this._activeLayers;for(let t=0;t<e.length;t++){const r=e[t];if(r.group.sortPriority){r._onEndLayerSubtreeTraversal();const e=r._sortedChildren;for(let t=0;t<e.length;t++)this._addRecursiveChildren(e[t])}}for(let t=0;t<e.length;t++){const r=e[t];r.group.sortPriority||r._onEndLayerSubtreeTraversal()}}_addRecursive(e){if(!e.visible)return;if(e.isLayer){const t=e;this._activeLayers.push(t),t._onBeginLayerSubtreeTraversal(this)}if(e!==this&&e.isStage)return void e.updateAsChildStage(this);e._activeParentLayer=null;let t=e.parentGroup;t&&t._resolveChildDisplayObject(this,e);const r=e.parentLayer;if(r&&(t=r.group,t._resolveChildDisplayObject(this,e)),e.updateOrder=++bo._updateOrderCounter,e.alpha<=0||!e.renderable||!e.layerableChildren||t&&t.sortPriority)return;const i=e.children;if(i&&i.length)for(let e=0;e<i.length;e++)this._addRecursive(i[e])}_addRecursiveChildren(e){if(e.alpha<=0||!e.renderable||!e.layerableChildren)return;const t=e.children;if(t&&t.length)for(let e=0;e<t.length;e++)this._addRecursive(t[e])}};let To=bo;To._updateOrderCounter=0,function(){if(void 0!==Ki.prototype.displayOrder)return;Object.assign(Ki.prototype,{parentLayer:null,_activeParentLayer:null,parentGroup:null,zOrder:0,zIndex:0,updateOrder:0,displayOrder:0,layerableChildren:!0,isLayer:!1});const e=$i.prototype;e.containerRenderWebGL=e.render,e.render=go}(),function(e){const t=e.prototype;var r;t._oldRender||(Object.assign(t,{_lastDisplayOrder:0,_activeLayer:null,incDisplayOrder(){return++this._lastDisplayOrder},_oldRender:Fi.prototype.render}),t._oldRender=t.render,t.render=(r=t.render,function(e,t,i,a,n){t&&(t.renderTexture||t.baseTexture)||(this._lastDisplayOrder=0),this._activeLayer=null,e.isStage&&e.updateStage(),r.call(this,e,t,i,a,n)}))}(Fi);var Ao,Eo=function(e,t,r){if(r||2===arguments.length)for(var i,a=0,n=t.length;a<n;a++)!i&&a in t||(i||(i=Array.prototype.slice.call(t,0,a)),i[a]=t[a]);return e.concat(i||Array.prototype.slice.call(t))};function So(e,t,r){return r===Ao.up?[e,t-1]:r===Ao.down?[e,t+1]:r===Ao.right?[e+1,t]:[e-1,t]}!function(e){e.up="up",e.down="down",e.right="right",e.left="left"}(Ao||(Ao={}));var wo=function(){function e(e,t){this.head=e,this.prev=t,this.prev&&(t.next=this),this.next=null}return e.prototype.some=function(e){return e(this.head)||!!this.prev&&this.prev.some(e)},e.prototype.forEach=function(e){e(this.head),this.prev&&this.prev.forEach(e)},e}(),ko=function(){function e(e,t){var r=this;this.edges=new Set,this.width=e,this.height=t,this.goldPath=new wo([0,1],new wo([1,1],new wo([1,0],new wo([0,0]))));var i=new Set;function a(e,t){var r=e[0],i=e[1],a=t[0],n=t[1];return r===a?n<i?Eo([],Array(i-n+1),!0).map((function(e,t){return[r,i-t]})):Eo([],Array(n-i+1),!0).map((function(e,t){return[r,i+t]})):i===n?a<r?Eo([],Array(r-a+1),!0).map((function(e,t){return[r-t,i]})):Eo([],Array(a-r+1),!0).map((function(e,t){return[r+t,i]})):[]}function n(r){var a=r[0],n=r[1];return a>=0&&n>=0&&a<e&&n<t&&!i.has("".concat(a,":").concat(n))}this.goldPath.forEach((function(e){var t=e[0],r=e[1];return i.add("".concat(t,":").concat(r))}));for(var s=0;s<e*t*3/4;s++){for(var o=[],l=this.goldPath;l.prev;l=l.prev)for(var h=l.head,u=h[0],d=h[1],c=l.head[0]===l.prev.head[0],m=l.prev;m;m=m.prev){var f=m.head,p=f[0],g=f[1];if(c&&p!==u)break;if(!c&&g!==d)break;for(var y=0,v=u===p?[a([p+1,g],[u+1,d]),a([p-1,g],[u-1,d])]:[a([p,g+1],[u,d+1]),a([p,g-1],[u,d-1])];y<v.length;y++){var x=v[y];x.every(n)&&o.push([m,x,l])}}if(0===o.length)break;var _=o[Math.floor(Math.random()*o.length)],b=_[0],T=_[1],A=_[2];for(l=A.prev;l!==b;l=l.prev){var E=l.head,S=E[0],w=E[1];i.delete("".concat(S,":").concat(w))}for(var k=b,C=0,M=T;C<M.length;C++){var R=M[C],I=R[0];w=R[1],k=new wo([I,w],k),i.add("".concat(I,":").concat(w))}A.prev=k,k.next=A}this.addEdge([0,0],[0,1]);var P=new Set;for(l=this.goldPath;l;l=l.prev){var D=l.head;s=D[0],w=D[1],P.add("".concat(s,":").concat(w)),l.prev&&this.addEdge(l.head,l.prev.head)}var B=function(i){for(var a=function(a){var s=Object.values(Ao).map((function(e){return So(i,a,e)})).filter((function(i){var a=i[0],s=i[1];return console.log("test",a,s,n([a,s]),r.degree(a,s)),function(r){var i=r[0],a=r[1];return i>=0&&a>=0&&i<e&&a<t}([a,s])&&r.degree(a,s)<(P.has("".concat(a,":").concat(s))?3:2)})),o=Object.values(Ao).map((function(e){return So(i,a,e)})).filter((function(e){var t=e[0],n=e[1];return r.hasEdge([i,a],[t,n])})),l=P.has("".concat(i,":").concat(a))?3:2;if(console.log(s,o,l),o.length<l&&s.length>=l){var h=s.filter((function(e){var t=e[0],r=e[1];return!o.some((function(e){var i=e[0],a=e[1];return i===t&&a===r}))})),u=h[Math.floor(Math.random()*h.length)];N.addEdge([i,a],u)}},s=0;s<N.height;s++)a(s)},N=this;for(s=0;s<this.width;s++)B(s)}return e.prototype.degree=function(e,t){var r=this;return Object.values(Ao).map((function(r){return So(e,t,r)})).filter((function(i){return r.hasEdge([e,t],i)})).length},e.prototype.addEdge=function(e,t){var r=e[0],i=e[1],a=t[0],n=t[1],s=["".concat(r,":").concat(i),"".concat(a,":").concat(n)].sort(),o=s[0],l=s[1];this.edges.add("".concat(o,"::").concat(l))},e.prototype.hasEdge=function(e,t){var r=e[0],i=e[1],a=t[0],n=t[1],s=["".concat(r,":").concat(i),"".concat(a,":").concat(n)].sort(),o=s[0],l=s[1];return this.edges.has("".concat(o,"::").concat(l))},e}();const Co=ko;var Mo,Ro=r(659),Io=["spring","fall","winter","summer"];!function(e){e.red="red",e.green="green",e.blue="blue"}(Mo||(Mo={}));var Po=["cavePerson","dwarf","halfling","gnome","elf","highelf","fairy","highfairy","darkelf","drow","halfdemon","dragon","angel","demon","goblin","orc","ogre","human"],Do=function(){function e(e,t){this.color=e,this.name=(0,Ro.a2)(t,{gender:Math.random()<.5?"male":"female",allowMultipleNames:!0}),this.guessedColor=Mo.red,this.enemies=new Set}return e.prototype.enemy=function(e){this.enemies.add(e.name),e.enemies.add(this.name)},e}(),Bo=function(){function e(e){this.nameset=Po[Math.floor(Math.random()*Po.length)],this.knights={};var t=new Do(Mo.red,this.nameset),r=new Do(Mo.blue,this.nameset),i=new Do(Mo.green,this.nameset);this.addKnight(t),this.addKnight(r),this.addKnight(i),t.enemy(r),t.enemy(i),r.enemy(i);for(var a=0;a<e;a++)this.iterate()}return e.prototype.addKnight=function(e){this.knights[e.name]=e},e.prototype.removeKnight=function(e){var t=this;Array.from(e.enemies).forEach((function(r){t.knights[r].enemies.delete(e.name)})),delete this.knights[e.name]},e.prototype.iterate=function(){var e=Object.values(this.knights),t=e[Math.floor(Math.random()*e.length)];this.expand(t)},e.prototype.expand=function(e){var t=this,r=Object.values(Mo).filter((function(t){return t!==e.color}))[Math.floor(2*Math.random())],i=Object.values(Mo).filter((function(t){return t!==e.color&&t!==r}))[0],a=new Do(r,this.nameset);this.addKnight(a);var n=new Do(i,this.nameset);this.addKnight(n),a.enemy(n);var s=Object.values(this.knights).filter((function(e){return e.color===i&&e!==n})),o=s[Math.floor(Math.random()*s.length)];a.enemy(o),Array.from(e.enemies).forEach((function(r){var i=new Do(e.color,t.nameset);t.addKnight(i),i.enemy(t.knights[r]),a.enemy(i),n.enemy(i)})),this.removeKnight(e)},e.prototype.render=function(){var e=new Set,t=[];Object.values(this.knights).forEach((function(r){var i=r.name,a=r.enemies;Array.from(a).forEach((function(r){e.has(r)||t.push([i,r])})),e.add(i)})),t.sort((function(){return Math.random()<.5?1:0}));var r=Math.floor(4e3*Math.random()),i=function(e,t,r){if(r||2===arguments.length)for(var i,a=0,n=t.length;a<n;a++)!i&&a in t||(i||(i=Array.prototype.slice.call(t,0,a)),i[a]=t[a]);return e.concat(i||Array.prototype.slice.call(t))}([],Array(t.length),!0).map((function(){return Math.floor(80*Math.random())+r})).sort(),a={};return Object.keys(this.knights).forEach((function(e){return a[e]=[]})),t.forEach((function(e,r){var n=e[0],s=e[1];if(Math.random()<.5){var o=t.every((function(e,t){var i=e[0],a=e[1];return t<=r||i!==s&&a!==s}));a[n].push("In the ".concat(Io[i[r]%4]," of ").concat(Math.floor(i[r]/4),", I ").concat(o?"felled":"bested"," ").concat(s,".")),o&&a[s].push("In the ".concat(Io[i[r]%4]," of ").concat(Math.floor(i[r]/4),", I was felled by ").concat(n,"."))}else o=t.every((function(e,t){var i=e[0],a=e[1];return t<=r||i!==n&&a!==n})),a[s].push("In the ".concat(Io[i[r]%4]," of ").concat(Math.floor(i[r]/4),", I ").concat(o?"felled":"bested"," ").concat(n,".")),o&&a[n].push("In the ".concat(Io[i[r]%4]," of ").concat(Math.floor(i[r]/4),", I was felled by ").concat(s,"."))})),a},e}();const No=Bo;var Fo,Lo,Oo=function(){return Oo=Object.assign||function(e){for(var t,r=1,i=arguments.length;r<i;r++)for(var a in t=arguments[r])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e},Oo.apply(this,arguments)};!function(e){e.water="water",e.litTorch="litTorch",e.unlitTorch="unlitTorch",e.path="path"}(Lo||(Lo={}));var zo=function(e){var t=e.trueColor,r=e.name,i=e.declarations,a=e.pos,n=e.revealColor,s=e.enemies;this.revealColor=n,this.trueColor=t,this.guessedColor=Mo.red,this.name=r,this.declarations=i,this.pos=a,this.enemies=s},Go=((Fo={})[Mo.red]="redKnight",Fo[Mo.blue]="blueKnight",Fo[Mo.green]="greenKnight",Fo);function Uo(e,t,r){return t===Lo.water?e===Lo.unlitTorch?r.lightTop:e===Lo.litTorch?r.litTop:e===Lo.path?r.stoneTop:[r.water1,r.water2,r.water3,r.water4][Math.floor(4*Math.random())]:e===Lo.unlitTorch?r.lightMid:e===Lo.litTorch?r.litMid:e===Lo.path?r.stoneMid:r.stoneUnder}var Ho=function(){function e(e){var t=e.terrain,r=e.mobs,i=e.textures,a=e.scale,n=e.app,s=e.blurFilter,o=e.lightingLayer,l=e.opts,h=this;this.textures=i,this.app=n,this.scale=a,this.blurFilter=s,this.lightingLayer=o,this.opts=l,this.terrain=t,this.width=this.terrain.length,this.height=this.terrain[0].length,this.room=new $i,this.tiles=[];for(var u=0;u<this.width;u++){this.tiles[u]=[];for(var d=0;d<this.height;d++){var c=new ea(Uo(this.terrain[u][d],d>0?this.terrain[u][d-1]:Lo.water,i));this.terrain[u][d]===Lo.litTorch&&this.addBulb(c),c.scale.x=a/200,c.scale.y=a/200,c.position.x=u*a,c.position.y=d*a,this.tiles[u][d]=c,this.room.addChild(c)}}this.mobs=[],r.forEach((function(e){if(e instanceof zo){var t=new ea(i[Go[e.guessedColor]]);t.scale.x=h.scale/200,t.scale.y=h.scale/200,t.anchor.y=.3,t.position.x=e.pos[0]*a,t.position.y=e.pos[1]*a,h.room.addChild(t),h.mobs.push({mob:e,sprite:t})}})),this.door=new ea(this.textures.door),this.room.addChild(this.door),this.door.position.x=Math.floor(this.width/2)*this.scale,this.door.position.y=-this.scale,this.door.scale.x=this.scale/200,this.door.scale.y=this.scale/200,this.player=new ea(i.face),this.player.anchor.y=.3,this.player.scale.x=a/200,this.player.scale.y=a/200,this.pos=[Math.floor(this.width/2),this.height-1],this.playerTarget=[this.pos[0],this.pos[1]-1],this.room.addChild(this.player),this.player.position.x=this.pos[0]*a,this.player.position.y=this.pos[1]*a,this.active=!0,this.finished=!1,this.particles=[],this.app.stage.addChild(this.room),this.text=new lo("",{fontName:"TitleFont"}),this.text.position.x=15,this.text.position.y=15;var m=new as;m.beginFill(10535152,1),m.drawRect(0,0,this.app.screen.width,110),m.beginFill(3158096,1),m.drawRect(5,5,this.app.screen.width-10,100),this.textWrapper=new $i,this.textWrapper.alpha=.8,this.textWrapper.visible=!1;var f=new ea(this.app.renderer.generateTexture(m));this.textWrapper.addChild(f),this.textWrapper.addChild(this.text)}return e.fromKnightGraph=function(e,t){for(var r=Object.keys(e.knights).length,i=Math.ceil(Math.sqrt(r)),a=Math.ceil(Math.sqrt(r)),n=[],s=[],o=0;o<2*i+3;o++){s[o]=[];for(var l=0;l<2*a+3;l++)s[o][l]=Lo.path}for(o=0;o<2*i+1;o++)s[o+1][2*a+1]=Lo.water,s[o+1][1]=Lo.water;for(l=0;l<2*a+1;l++)s[2*i+1][l+1]=Lo.water,s[1][l+1]=Lo.water;for(o=0;o<i-1;o++)for(l=0;l<a-1;l++)s[2*o+3][2*l+3]=Lo.litTorch;s[i+1][2*a+1]=Lo.path,s[1][1]=Lo.litTorch,s[1][2*a+1]=Lo.litTorch,s[2*i+1][1]=Lo.litTorch,s[2*i+1][2*a+1]=Lo.litTorch;var h=e.render(),u=0,d=new Set([i*(a-1)+(i-1)/2]);Object.keys(h).forEach((function(t){n.push(new zo({trueColor:e.knights[t].color,name:t,declarations:h[t],pos:[u%i*2+2,2*Math.floor(u/i)+2],enemies:Array.from(e.knights[t].enemies),revealColor:!1})),d.add(u);var r=Math.floor(Math.random()*(i*a-d.size));console.log("adding skip",u,r);for(var s=0;s<r+1;s++)for(u=(u+1)%(i*a);d.has(u);)u=(u+1)%(i*a)}));var c=n[Math.floor(Math.random()*n.length)];c.revealColor=!0,c.guessedColor=c.trueColor;var m=c.enemies[Math.floor(Math.random()*c.enemies.length)],f=n.find((function(e){return e.name===m}));return f.revealColor=!0,f.guessedColor=f.trueColor,new this(Oo({terrain:s,mobs:n,opts:{}},t))},e.fromHamiltonian=function(e,t){for(var r=e.width,i=e.height,a=[],n=0;n<2*r+3;n++){a[n]=[];for(var s=0;s<2*i+3;s++)a[n][s]=Lo.water}for(n=0;n<r;n++)for(s=0;s<i;s++)a[2*n+2][2*s+2]=Lo.path;for(var o=e.goldPath;o;o=o.prev){var l=o.head;n=l[0],s=l[1],e.degree.apply(e,o.head)>=3&&(a[2*n+2][2*s+2]=Lo.unlitTorch)}for(a[2][2]=Lo.litTorch,Array.from(e.edges).forEach((function(e){var t=e.split("::").map((function(e){return e.split(":").map(Number)})),r=t[0],i=r[0],n=r[1],s=t[1],o=s[0],l=s[1];a[i+o+2][n+l+2]=Lo.path})),n=0;n<2*r+3;n++)a[0][n]=Lo.path,a[2*i+2][n]=Lo.path;for(n=0;n<2*i+3;n++)a[n][0]=Lo.path,a[n][2*r+2]=Lo.path;return a[2][1]=Lo.path,new this(Oo({terrain:a,mobs:[],opts:{torchPuzzle:!0}},t))},e.prototype.isPassable=function(e,t){return function(e){return e!==Lo.water}(this.terrain[e][t])&&this.mobs.every((function(r){var i=r.mob;return i.pos[0]!==e||i.pos[1]!==t}))},e.prototype.displayText=function(e){this.textScroll=e,this.textScrollIndex=0,this.text.text=e.slice(this.textScrollIndex,this.textScrollIndex+3).join("\n\r"),this.textWrapper.visible=!0,this.displayingText=!0},e.prototype.removeText=function(){this.textScrollIndex+=3,this.textScroll&&this.textScrollIndex&&(this.textScrollIndex>=this.textScroll.length?(this.textWrapper.visible=!1,this.displayingText=!1):this.text.text=this.textScroll.slice(this.textScrollIndex,this.textScrollIndex+3).join("\n\r"))},e.prototype.handleKeys=function(e){var t=this;if(this.displayingText)this.removeText();else{var r=this.pos,i=r[0],a=r[1];2===i&&2===a&&(this.active=!0);var n=!1;if(e.ArrowRight)i<this.width-1&&this.isPassable(i+1,a)&&(this.pos[0]+=1,n=!0),this.playerTarget=[this.pos[0]+1,this.pos[1]],[this.textures.right1,this.textures.right2].includes(this.player.texture)||(this.player.texture=this.textures.right1);else if(e.ArrowLeft)i>0&&this.isPassable(i-1,a)&&(this.pos[0]-=1,n=!0),this.playerTarget=[this.pos[0]-1,this.pos[1]],[this.textures.left1,this.textures.left2].includes(this.player.texture)||(this.player.texture=this.textures.left1);else if(e.ArrowUp)a>0&&this.isPassable(i,a-1)&&(this.pos[1]-=1,n=!0),this.playerTarget=[this.pos[0],this.pos[1]-1],this.player.texture=this.textures.back;else if(e.ArrowDown)a<this.height-1&&this.isPassable(i,a+1)&&(this.pos[1]+=1,n=!0),this.playerTarget=[this.pos[0],this.pos[1]+1],this.player.texture=this.textures.face;else if(e.w){var s=this.mobs.find((function(e){var r=e.mob;return r.pos[0]===t.playerTarget[0]&&r.pos[1]===t.playerTarget[1]}));if(s&&!s.mob.revealColor){var o=s.mob,l=s.sprite;o.guessedColor=function(e){return e===Mo.red?Mo.green:e===Mo.green?Mo.blue:e===Mo.blue?Mo.red:void 0}(o.guessedColor),l.texture=this.textures[Go[o.guessedColor]];var h=this.mobs.filter((function(e){return e.mob instanceof zo})),u={};h.forEach((function(e){u[e.mob.name]=e.mob})),h.every((function(e){var t=e.mob;return t.guessedColor===t.trueColor}))&&this.declareFinished()}}else e.q&&(s=this.mobs.find((function(e){var r=e.mob;return r.pos[0]===t.playerTarget[0]&&r.pos[1]===t.playerTarget[1]})),s&&(o=s.mob,this.displayText(function(e,t,r){if(r||2===arguments.length)for(var i,a=0,n=t.length;a<n;a++)!i&&a in t||(i||(i=Array.prototype.slice.call(t,0,a)),i[a]=t[a]);return e.concat(i||Array.prototype.slice.call(t))}(["I am ".concat(o.name).concat(o.revealColor?" the ".concat(o.trueColor[0].toUpperCase()+o.trueColor.substring(1)):"",".")],o.declarations,!0))));if(this.opts.torchPuzzle&&n&&this.terrain[this.pos[0]][this.pos[1]]===Lo.litTorch&&!this.finished){this.active=!1;for(var d=0;d<this.width;d++)for(var c=0;c<this.height;c++)this.terrain[d][c]!==Lo.litTorch||2===d&&2===c||(this.terrain[d][c]=Lo.unlitTorch,this.tiles[d][c].texture=this.textures.lightMid,this.tiles[d][c].removeChild(this.tiles[d][c].children[0]))}this.opts.torchPuzzle&&this.terrain[i][a]===Lo.unlitTorch&&this.active&&(this.terrain[i][a]=Lo.litTorch,this.terrain.every((function(e){return e.every((function(e){return e!==Lo.unlitTorch}))}))&&this.declareFinished(),this.tiles[i][a].texture=this.textures.litMid,this.addBulb(this.tiles[i][a])),this.player.position.x=this.pos[0]*this.scale,this.player.position.y=this.pos[1]*this.scale}},e.prototype.addBulb=function(e){var t=new as;t.beginFill(14548957,.5),t.drawCircle(0,0,500),t.endFill(),t.parentLayer=this.lightingLayer,t.position.x=100,t.position.y=100,t.filters=[this.blurFilter],e.addChild(t)},e.prototype.declareFinished=function(){this.finished=!0;var e=new as;e.beginFill(16777215,.7),e.drawCircle(0,0,500),e.endFill(),e.position.x=100,e.position.y=100,e.parentLayer=this.lightingLayer,e.filters=[this.blurFilter],this.door.addChild(e)},e.prototype.addParticle=function(e,t){var r=new as;r.beginFill(16777215,1),r.drawCircle(0,0,2),r.endFill(),r.position.x=e*this.scale+this.scale/2,r.position.y=t*this.scale+3,this.room.addChild(r),this.particles.push({sprite:r,age:0,vx:5*(Math.random()-.5),vy:0})},e.prototype.tick=function(e,t){var r=this;this.textWrapper.position.y=this.app.screen.height-110;for(var i=0;i<this.width;i++)for(var a=0;a<this.height;a++)this.terrain[i][a]===Lo.litTorch&&Math.random()>Math.pow(.5,.025*e)&&this.addParticle(i,a);this.particles=this.particles.filter((function(t){return t.age+=e,t.sprite.position.x+=t.vx,t.sprite.position.y+=t.vy,t.sprite.alpha=1-t.age/30,t.vx+=.1*e,t.vy-=.2*e,!(t.age>30&&(r.room.removeChild(t.sprite),1))}))},e}();!function(){var e,t,r,i;e=this,t=void 0,i=function(){function e(e){var t=new Co(e,e);return Ho.fromHamiltonian(t,{textures:i,scale:40,app:r,blurFilter:o,lightingLayer:s})}function t(e){var t=new No(Math.floor(e/4));return Ho.fromKnightGraph(t,{textures:i,scale:40,app:r,blurFilter:o,lightingLayer:s})}var r,i,n,s,o,l,h,u,d;return function(e,t){var r,i,a,n,s={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return n={next:o(0),throw:o(1),return:o(2)},"function"==typeof Symbol&&(n[Symbol.iterator]=function(){return this}),n;function o(o){return function(l){return function(o){if(r)throw new TypeError("Generator is already executing.");for(;n&&(n=0,o[0]&&(s=0)),s;)try{if(r=1,i&&(a=2&o[0]?i.return:o[0]?i.throw||((a=i.return)&&a.call(i),0):i.next)&&!(a=a.call(i,o[1])).done)return a;switch(i=0,a&&(o=[2&o[0],a.value]),o[0]){case 0:case 1:a=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,i=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!((a=(a=s.trys).length>0&&a[a.length-1])||6!==o[0]&&2!==o[0])){s=0;continue}if(3===o[0]&&(!a||o[1]>a[0]&&o[1]<a[3])){s.label=o[1];break}if(6===o[0]&&s.label<a[1]){s.label=a[1],a=o;break}if(a&&s.label<a[2]){s.label=a[2],s.ops.push(o);break}a[2]&&s.ops.pop(),s.trys.pop();continue}o=t.call(e,s)}catch(e){o=[6,e],i=0}finally{r=a=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,l])}}}(this,(function(c){switch(c.label){case 0:return r=new Ea,document.body.appendChild(r.view),d={},[4,rn.load("./assets/face.png")];case 1:return d.face=c.sent(),[4,rn.load("./assets/back.png")];case 2:return d.back=c.sent(),[4,rn.load("./assets/side.png")];case 3:return d.right1=c.sent(),[4,rn.load("./assets/side.png")];case 4:return d.left1=c.sent().clone(),[4,rn.load("./assets/side2.png")];case 5:return d.right2=c.sent(),[4,rn.load("./assets/side2.png")];case 6:return d.left2=c.sent().clone(),[4,rn.load("./assets/platform.png")];case 7:return d.platform=c.sent(),[4,rn.load("./assets/platform-broken.png")];case 8:return d.platformBroken=c.sent(),[4,rn.load("./assets/bridge.png")];case 9:return d.bridge=c.sent(),[4,rn.load("./assets/stone-top.png")];case 10:return d.stoneTop=c.sent(),[4,rn.load("./assets/stone-mid.png")];case 11:return d.stoneMid=c.sent(),[4,rn.load("./assets/stone-under.png")];case 12:return d.stoneUnder=c.sent(),[4,rn.load("./assets/light-top.png")];case 13:return d.lightTop=c.sent(),[4,rn.load("./assets/light-mid.png")];case 14:return d.lightMid=c.sent(),[4,rn.load("./assets/lit-top.png")];case 15:return d.litTop=c.sent(),[4,rn.load("./assets/lit-mid.png")];case 16:return d.litMid=c.sent(),[4,rn.load("./assets/water1.png")];case 17:return d.water1=c.sent(),[4,rn.load("./assets/water2.png")];case 18:return d.water2=c.sent(),[4,rn.load("./assets/water3.png")];case 19:return d.water3=c.sent(),[4,rn.load("./assets/water4.png")];case 20:return d.water4=c.sent(),[4,rn.load("./assets/door.png")];case 21:return d.door=c.sent(),[4,rn.load("./assets/red-knight.png")];case 22:return d.redKnight=c.sent(),[4,rn.load("./assets/blue-knight.png")];case 23:return d.blueKnight=c.sent(),[4,rn.load("./assets/green-knight.png")];case 24:return d.greenKnight=c.sent(),(i=d).left1.rotate=Ft.MIRROR_HORIZONTAL,i.left2.rotate=Ft.MIRROR_HORIZONTAL,r.stage=new To,n=5,s=new _o,o=new sa(20),new sa,s.on("display",(function(e){e.blendMode=a.ADD})),s.useRenderTexture=!0,s.clearColor=[.2,.2,.2,1],(l=new ea(s.getRenderTexture())).blendMode=a.MULTIPLY,io.from("TitleFont",{fill:"#ffffff",fontSize:15,padding:0,lineHeight:15,fontWeight:"bold"},{chars:io.ASCII}),h={},u=Math.random()<.5?t(n):e(n),document.body.addEventListener("keydown",(function(i){h[i.key]=!0,u.finished&&u.pos[0]===Math.floor(u.width/2)&&0===u.pos[1]&&"ArrowUp"===i.key&&(n+=1,r.stage.removeChild(u.room),r.stage.removeChild(u.textWrapper),r.stage.removeChild(l),u=Math.random()<.5?t(n):e(n),r.stage.addChild(l),r.stage.addChild(u.textWrapper)),u.handleKeys(h)})),document.body.addEventListener("keyup",(function(e){h[e.key]=!1})),r.stage.addChild(s),r.stage.addChild(l),r.stage.addChild(u.textWrapper),s.position.x=r.screen.width/2-u.player.x,s.position.y=r.screen.height/2-u.player.y,r.ticker.add((function(e){u.room.position.x=r.screen.width/2-u.player.x,u.room.position.y=r.screen.height/2-u.player.y,s.position.x=r.screen.width/2-u.player.x,s.position.y=r.screen.height/2-u.player.y,u.tick(e,h)})),[2]}}))},new((r=void 0)||(r=Promise))((function(a,n){function s(e){try{l(i.next(e))}catch(e){n(e)}}function o(e){try{l(i.throw(e))}catch(e){n(e)}}function l(e){var t;e.done?a(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,o)}l((i=i.apply(e,t||[])).next())}))}()})()})();